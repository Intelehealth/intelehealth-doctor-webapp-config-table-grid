import { Component, ElementRef, ViewChild, Input } from '@angular/core';
import { MatPaginator } from '@angular/material/paginator';
import { MatTableDataSource } from '@angular/material/table';
import { AppointmentService } from '../../services/appointment.service';
import { VisitService } from '../../services/visit.service';
// import * as moment from 'moment';
import moment from 'moment';
import { CoreService } from '../../services/core.service';
import { ToastrService } from 'ngx-toastr';
import { TranslateService } from '@ngx-translate/core';
import { getCacheData, checkIfDateOldThanOneDay } from '../../utils/utility-functions';
import { doctorDetails, languages, visitTypes } from '../../config/constant';
// import { AppConfigService } from '../services/app-config.service';
import { MindmapService } from '../../services/mindmap.service';
import { FormControl, FormGroup, Validators } from '@angular/forms';
import { MatMenuTrigger } from '@angular/material/menu';
import { DomSanitizer } from '@angular/platform-browser';
import { formatDate } from '@angular/common';
import * as i0 from "@angular/core";
import * as i1 from "../../services/appointment.service";
import * as i2 from "../../services/visit.service";
import * as i3 from "../../services/core.service";
import * as i4 from "ngx-toastr";
import * as i5 from "@ngx-translate/core";
import * as i6 from "../../services/mindmap.service";
import * as i7 from "@angular/platform-browser";
import * as i8 from "@angular/router";
import * as i9 from "@angular/common";
import * as i10 from "@angular/material/paginator";
import * as i11 from "@angular/material/tooltip";
import * as i12 from "@angular/material/form-field";
import * as i13 from "@angular/material/expansion";
import * as i14 from "@angular/material/menu";
import * as i15 from "@angular/material/table";
import * as i16 from "@angular/material/icon";
import * as i17 from "@angular/material/datepicker";
import * as i18 from "@angular/forms";
export class TableGridComponent {
    appointmentService;
    visitService;
    coreService;
    toastr;
    translateService;
    mindmapService;
    sanitizer;
    pluginConfigObs;
    displayedAppointmentColumns = [];
    displayedColumns = [];
    dataSource = new MatTableDataSource();
    patientRegFields = [];
    isMCCUser = false;
    paginator;
    searchElement;
    filteredDateAndRangeForm;
    tempPaginator;
    menuTrigger;
    panelExpanded = true;
    mode = 'date';
    maxDate;
    appointments = [];
    priorityVisits = [];
    awaitingVisits = [];
    inProgressVisits = [];
    completedVisits = [];
    followUpVisits = [];
    specialization = '';
    visitsLengthCount = 0;
    isFilterApplied = false;
    ngAfterViewInit() {
        this.dataSource.paginator = this.paginator;
    }
    constructor(appointmentService, visitService, coreService, toastr, translateService, mindmapService, sanitizer
    // private appConfigService: AppConfigService
    ) {
        this.appointmentService = appointmentService;
        this.visitService = visitService;
        this.coreService = coreService;
        this.toastr = toastr;
        this.translateService = translateService;
        this.mindmapService = mindmapService;
        this.sanitizer = sanitizer;
        // Object.keys(this.appConfigService.patient_registration).forEach(obj=>{
        //   this.patientRegFields.push(...this.appConfigService.patient_registration[obj].filter(e=>e.is_enabled).map(e=>e.name));
        // }); 
        this.filteredDateAndRangeForm = this.createFilteredDateRangeForm();
        this.displayedColumns = this.displayedColumns.filter(col => (col !== 'age' || this.checkPatientRegField('Age')));
    }
    /**
     * Creates a filtered date range form with required date fields
     * @return {FormGroup} - The created form group
     */
    createFilteredDateRangeForm() {
        return new FormGroup({
            date: new FormControl('', [Validators.required]),
            startDate: new FormControl(null, Validators.required),
            endDate: new FormControl(null, Validators.required),
        });
    }
    ngOnInit() {
        this.translateService.use(getCacheData(false, languages.SELECTED_LANGUAGE));
        let provider = getCacheData(true, doctorDetails.PROVIDER);
        if (provider) {
            if (provider.attributes.length) {
                this.specialization = this.getSpecialization(provider.attributes);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Appointment") {
                this.getAppointments();
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Awaiting") {
                this.getAwaitingVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Priority") {
                this.getPriorityVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "InProgress") {
                this.getInProgressVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Completed") {
                this.getCompletedVisits();
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "FollowUp") {
                this.getFollowUpVisit();
            }
        }
        this.maxDate = this.pluginConfigObs.filterObs.filterDateMax;
    }
    /**
     * Dynmaic label Display
     * @param changes pluginConfigObs
     */
    ngOnChanges(changes) {
        if (changes["pluginConfigObs"] && changes["pluginConfigObs"].currentValue) {
            this.displayedAppointmentColumns = this.pluginConfigObs.tableColumns || [];
            this.displayedColumns = this.displayedAppointmentColumns.map((column) => column.key);
        }
    }
    /**
     * Get the patient type style
     * @param type
     */
    getPatientTypeStyle(type) {
        const typeConfig = this.pluginConfigObs.patientType.find((t) => t.key === type);
        return typeConfig
            ? typeConfig.style
            : { color: "#000", backgroundColor: "#ccc" }; // Default fallback styling
    }
    /**
     * Get the patient type either new or old
     * @param type
     */
    getPatientTypeLabel(type) {
        const typeConfig = this.pluginConfigObs.patientType.find((t) => t.key === type);
        return typeConfig ? typeConfig.label : "Unknown"; // Default fallback label
    }
    getVisitTypeStyle(type) {
        const visitType = this.pluginConfigObs.visitType.find((v) => v.type === type);
        return visitType?.[type]?.style || { color: "#000", backgroundColor: "#ccc" }; // Default style
    }
    getVisitTypeLabel(type) {
        const visitType = this.pluginConfigObs.visitType.find((v) => v.type === type);
        return visitType?.[type]?.label || "Unknown"; // Default label
    }
    getVisitTypeIcon(type) {
        const visitType = this.pluginConfigObs.visitType.find((v) => v.type === type);
        return visitType?.[type]?.style?.icon || ""; // Default empty icon
    }
    formatVisitDate(date) {
        return date ? formatDate(date, 'dd MMM, yyyy', 'en-US') : '';
    }
    /**
    * Retreive the chief complaints for the visit
    * @param {CustomVisitModel} visit - Visit
    * @return {string[]} - Chief complaints array
    */
    getCheifComplaint(visit) {
        let recent = [];
        const encounters = visit.encounters;
        encounters.forEach((encounter) => {
            const display = encounter.type?.name;
            if (display.match(visitTypes.ADULTINITIAL) !== null) {
                const obs = encounter.obs;
                obs.forEach((currentObs) => {
                    if (currentObs.concept_id == 163212) {
                        const currentComplaint = this.visitService.getData2(currentObs)?.value_text.replace(new RegExp('â–º', 'g'), '').split('<b>');
                        for (let i = 1; i < currentComplaint.length; i++) {
                            const obs1 = currentComplaint[i].split('<');
                            if (!obs1[0].match(visitTypes.ASSOCIATED_SYMPTOMS)) {
                                recent.push(obs1[0]);
                            }
                        }
                    }
                });
            }
        });
        return recent;
    }
    /**
    * Check how old the date is from now
    * @param {string} data - Date in string format
    * @return {string} - Returns how old the date is from now
    */
    checkIfDateOldThanOneDay(data) {
        let hours = moment(data).diff(moment(), 'hours');
        let minutes = moment(data).diff(moment(), 'minutes');
        if (hours > 24) {
            return moment(data).format('DD MMM, YYYY hh:mm A');
        }
        ;
        if (hours < 1) {
            if (minutes < 0)
                return `Due : ${moment(data).format('DD MMM, YYYY hh:mm A')}`;
            return `${minutes} minutes`;
        }
        return `${hours} hrs`;
    }
    /**
    * Reschedule appointment
    * @param {AppointmentModel} appointment - Appointment to be rescheduled
    * @return {void}
    */
    reschedule(appointment) {
        const len = appointment.visit.encounters.filter((e) => {
            return (e.type.name == visitTypes.PATIENT_EXIT_SURVEY || e.type.name == visitTypes.VISIT_COMPLETE);
        }).length;
        const isCompleted = Boolean(len);
        if (isCompleted) {
            this.toastr.error(this.translateService.instant("Visit is already completed, it can't be rescheduled."), this.translateService.instant('Rescheduling failed!'));
        }
        else if (appointment.visitStatus == 'Visit In Progress') {
            this.toastr.error(this.translateService.instant("Visit is in progress, it can't be rescheduled."), this.translateService.instant('Rescheduling failed!'));
        }
        else {
            this.coreService.openRescheduleAppointmentModal(this.pluginConfigObs.mindmapURL, appointment).subscribe((res) => {
                if (res) {
                    let newSlot = res;
                    this.coreService.openRescheduleAppointmentConfirmModal({ appointment, newSlot }).subscribe((result) => {
                        if (result) {
                            appointment.appointmentId = appointment.id;
                            appointment.slotDate = moment(newSlot.date, "YYYY-MM-DD").format('DD/MM/YYYY');
                            appointment.slotTime = newSlot.slot;
                            this.appointmentService.rescheduleAppointment(this.pluginConfigObs.mindmapURL, appointment).subscribe((res) => {
                                const message = res.message;
                                if (res.status) {
                                    this.mindmapService.notifyHwForRescheduleAppointment(this.pluginConfigObs.mindmapURL, appointment);
                                    this.getAppointments();
                                    this.toastr.success(this.translateService.instant("The appointment has been rescheduled successfully!"), this.translateService.instant('Rescheduling successful!'));
                                }
                                else {
                                    this.toastr.success(message, this.translateService.instant('Rescheduling failed!'));
                                }
                            });
                        }
                    });
                }
            });
        }
    }
    /**
    * Cancel appointment
    * @param {AppointmentModel} appointment - Appointment to be rescheduled
    * @return {void}
    */
    cancel(appointment) {
        if (appointment.visitStatus == 'Visit In Progress') {
            this.toastr.error(this.translateService.instant("Visit is in progress, it can't be cancelled."), this.translateService.instant('Canceling failed!'));
            return;
        }
        this.coreService.openConfirmCancelAppointmentModal(this.pluginConfigObs?.mindmapURL, appointment).subscribe((res) => {
            if (res) {
                this.toastr.success(this.translateService.instant('The Appointment has been successfully canceled.'), this.translateService.instant('Canceling successful'));
                this.getAppointments();
            }
        });
    }
    /**
    * Get user uuid from localstorage user
    * @return {string} - User uuid
    */
    get userId() {
        return getCacheData(true, doctorDetails.USER).uuid;
    }
    /**
    * Apply filter on a datasource
    * @param {Event} event - Input's change event
    * @return {void}
    */
    applyFilter(event) {
        const filterValue = event.target.value;
        this.dataSource.filter = filterValue.trim().toLowerCase();
        this.isFilterApplied = true;
    }
    /**
    * Clear filter from a datasource
    * @return {void}
    */
    clearFilter() {
        this.dataSource.filter = null;
        this.searchElement.nativeElement.value = "";
        this.isFilterApplied = false;
    }
    /**
     * Checks if the field is in patient registration fields
     * @param {string} fieldName - The field name
     * @return {boolean} - True if present, else false
     */
    checkPatientRegField(fieldName) {
        return this.patientRegFields.indexOf(fieldName) !== -1;
    }
    /**
    * Returns the WhatsApp link for a given telephone number
    * @param {string} telephoneNumber - The telephone number to generate the link for
    * @return {string} - The WhatsApp link
    */
    getWhatsAppLink(telephoneNumber) {
        return this.visitService.getWhatsappLink(telephoneNumber);
    }
    /**
     * Retrieves the telephone number from the person's attributes
     * @param {AppointmentModel['visit']['person']} person - The person object containing attributes
     * @return {string | undefined} - The person's telephone number or undefined if not found
     */
    getTelephoneNumber(person) {
        return person?.person_attribute.find((v) => v.person_attribute_type_id == 8)?.value;
    }
    /**
     * Closes the menu if it's open
     */
    closeMenu() {
        if (this.menuTrigger) {
            this.menuTrigger.closeMenu();
        }
    }
    /**
     * Sets the mode for the component (either 'date' or 'range')
     * @param {'date' | 'range'} mode - The mode to set
     */
    setMode(mode) {
        this.mode = mode;
    }
    /**
     * Formats a date into 'YYYY-MM-DD' format
     * @param {any} date - The date to format
     * @return {string} - The formatted date
     */
    formatDate(date) {
        const localDate = new Date(date);
        const year = localDate.getFullYear();
        const month = String(localDate.getMonth() + 1).padStart(2, '0');
        const day = String(localDate.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }
    /**
     * Converts a relative time string (e.g., "2 hours", "1 day") to a date string
     * @param {string} relativeTime - The relative time string
     * @return {string} - The resulting date in 'YYYY-MM-DD' format
     * @throws {Error} - Throws error for invalid time units
     */
    convertToDate(relativeTime) {
        const now = new Date();
        const [value, unit] = relativeTime.split(' ');
        const amount = parseInt(value, 10);
        if (['hour', 'hours'].includes(unit.toLowerCase()))
            now.setHours(now.getHours() - amount);
        else if (['minute', 'minutes'].includes(unit.toLowerCase()))
            now.setMinutes(now.getMinutes() - amount);
        else if (['day', 'days'].includes(unit.toLowerCase()))
            now.setDate(now.getDate() - amount);
        else
            throw new Error('Invalid time unit. Only "hours", "minutes", or "days" are supported.');
        return now.toISOString().split('T')[0];
    }
    /**
     * Converts a follow-up date string to ISO format
     * @param {string} followUp - The follow-up date string
     * @return {string} - The follow-up date in ISO string format
     */
    convertToISO(followUp) {
        const date = new Date(followUp);
        date.setDate(date.getDate());
        return date.toISOString();
    }
    /**
     * Applies date or range filter to the data source based on selected date(s)
     * @param {string} dateField - The field name for the date to filter
     */
    applyDateOrRangeFilter(dateField) {
        const selectedDate = this.filteredDateAndRangeForm.get('date')?.value;
        const startDate = this.filteredDateAndRangeForm.get('startDate')?.value;
        const endDate = this.filteredDateAndRangeForm.get('endDate')?.value;
        if (selectedDate) {
            const formattedDate = this.formatDate(selectedDate);
            this.dataSource.filterPredicate = (data, filter) => {
                const itemDate = dateField !== "followUp" ? data[dateField].includes(',') ? this.formatDate(data[dateField]) : this.convertToDate(data[dateField]) : this.formatDate(this.convertToISO(data.followUp));
                return itemDate === filter;
            };
            this.dataSource.filter = formattedDate;
        }
        else if (startDate && endDate) {
            const formattedStartDate = this.formatDate(startDate);
            const formattedEndDate = this.formatDate(endDate);
            this.dataSource.filterPredicate = (data, filter) => {
                const itemDate = dateField !== "followUp" ? data[dateField].includes(',') ? this.formatDate(data[dateField]) : this.convertToDate(data[dateField]) : this.formatDate(this.convertToISO(data.followUp));
                return itemDate >= formattedStartDate && itemDate <= formattedEndDate;
            };
            this.dataSource.filter = `${formattedStartDate}:${formattedEndDate}`;
        }
        else {
            this.dataSource.filter = '';
        }
        this.tempPaginator.firstPage();
        this.closeMenu();
    }
    /**
     * Resets the date filter form and clears the data source filter
     * @param {boolean} flag - If true, doesn't close the menu
     */
    resetDate(flag = false) {
        this.filteredDateAndRangeForm.reset();
        this.dataSource.filter = '';
        this.dataSource.filterPredicate = (data, filter) => true;
        if (!flag) {
            this.closeMenu();
        }
    }
    /**
     * Retrieves a specific attribute data from the person's attributes
     * @param {any} data - The data object containing person attributes
     * @param {string} attributeName - The name of the attribute to retrieve
     * @return {Object | null} - The attribute name and value, or null if not found
     */
    getAttributeData(data, attributeName) {
        if (Array.isArray(data.person_attribute)) {
            const attribute = data.person_attribute.find((attr) => attr.person_attribute_type?.name === attributeName);
            if (attribute) {
                return {
                    name: attribute.person_attribute_type.name,
                    value: attribute.value
                };
            }
        }
        return null;
    }
    /**
    * Get booked appointments for a logged-in doctor in a current year
    * @return {void}
    */
    getAppointments() {
        this.appointments = [];
        this.appointmentService.getUserSlots(this.pluginConfigObs?.mindmapURL, getCacheData(true, doctorDetails.USER).uuid, moment().startOf('year').format('DD/MM/YYYY'), moment().endOf('year').format('DD/MM/YYYY'))
            .subscribe((res) => {
            this.visitsLengthCount = res.data?.length;
            let appointmentsdata = res.data;
            appointmentsdata.forEach((appointment) => {
                if (appointment.status == 'booked' && (appointment.visitStatus == 'Awaiting Consult' || appointment.visitStatus == 'Visit In Progress')) {
                    if (appointment.visit) {
                        appointment.cheif_complaint = this.getCheifComplaint(appointment.visit);
                        appointment.starts_in = checkIfDateOldThanOneDay(appointment.slotJsDate);
                        appointment.telephone = this.getTelephoneNumber(appointment?.visit?.person);
                        appointment.TMH_patient_id = this.getAttributeData(appointment.visit, "TMH Case Number");
                        appointment.uuid = appointment.visitUuid;
                        this.appointments.push(appointment);
                    }
                }
            });
            this.dataSource.data = [...this.appointments];
            this.dataSource.paginator = this.paginator;
            this.dataSource.filterPredicate = (data, filter) => data?.openMrsId.toLowerCase().indexOf(filter) != -1 || data?.patientName.toLowerCase().indexOf(filter) != -1;
        });
    }
    /**
    * Get doctor speciality
    * @param {ProviderAttributeModel[]} attr - Array of provider attributes
    * @return {string} - Doctor speciality
    */
    getSpecialization(attr) {
        let specialization = '';
        attr.forEach((a) => {
            if (a.attributeType.uuid == 'ed1715f5-93e2-404e-b3c9-2a2d9600f062' && !a.voided) {
                specialization = a.value;
            }
        });
        return specialization;
    }
    /**
    * Returns the age in years from the birthdate
    * @param {string} birthdate - Date in string format
    * @return {number} - Age
    */
    calculateAge(birthdate) {
        return moment().diff(birthdate, 'years');
    }
    /**
    * Returns the created time in words from the date
    * @param {string} data - Date
    * @return {string} - Created time in words from the date
    */
    getCreatedAt(data) {
        let hours = moment().diff(moment(data), 'hours');
        let minutes = moment().diff(moment(data), 'minutes');
        if (hours > 24) {
            return moment(data).format('DD MMM, YYYY');
        }
        ;
        if (hours < 1) {
            return `${minutes} ${this.translateService.instant("Minutes ago")}`;
        }
        return `${hours} ${this.translateService.instant("Hours ago")}`;
    }
    /**
    * Get encounter datetime for a given encounter type
    * @param {CustomVisitModel} visit - Visit
    * @param {string} encounterName - Encounter type
    * @return {string} - Encounter datetime
    */
    getEncounterCreated(visit, encounterName) {
        let created_at = '';
        const encounters = visit.encounters;
        encounters.forEach((encounter) => {
            const display = encounter.type?.name;
            if (display.match(encounterName) !== null) {
                created_at = this.getCreatedAt(encounter.encounter_datetime.replace('Z', '+0530'));
            }
        });
        return created_at;
    }
    /**
     * Determines if the encounter is a follow-up or new visit
     * @param {any} enc - Encounter data
     * @return {string} - 'FOLLOW_UP' or 'NEW'
     */
    getDemarcation(enc) {
        let isFollowUp = false;
        const adlIntl = enc?.find?.(e => e?.type?.name === visitTypes.ADULTINITIAL);
        if (Array.isArray(adlIntl?.obs)) {
            adlIntl?.obs.forEach(obs => {
                if (!isFollowUp)
                    isFollowUp = obs?.value_text?.toLowerCase?.()?.includes?.("follow up");
            });
        }
        return isFollowUp ? visitTypes.FOLLOW_UP : visitTypes.NEW;
    }
    /**
    * Get awaiting visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getAwaitingVisits(page = 1) {
        if (page == 1) {
            this.awaitingVisits = [];
            // this.awatingRecordsFetched = 0;
        }
        this.visitService.getAwaitingVisits(this.pluginConfigObs?.mindmapURL, this.specialization, page).subscribe((res) => {
            if (res.success) {
                this.visitsLengthCount = res.totalCount;
                // this.awatingRecordsFetched += this.offset;
                for (let i = 0; i < res.data.length; i++) {
                    let visit = res.data[i];
                    visit.cheif_complaint = this.getCheifComplaint(visit);
                    visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.ADULTINITIAL);
                    visit.person.age = this.calculateAge(visit.person.birthdate);
                    visit.patient_type = this.getDemarcation(visit?.encounters);
                    this.awaitingVisits.push(visit);
                }
                this.dataSource.data = [...this.awaitingVisits];
                if (page == 1) {
                    this.dataSource.paginator = this.tempPaginator;
                    this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                }
                else {
                    this.tempPaginator.length = this.awaitingVisits.length;
                    this.tempPaginator.nextPage();
                }
            }
        });
    }
    /**
    * Get inprogress visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getInProgressVisits(page = 1) {
        if (page == 1) {
            this.inProgressVisits = [];
            // this.inprogressRecordsFetched = 0;
        }
        this.visitService.getInProgressVisits(this.pluginConfigObs?.mindmapURL, this.specialization, page).subscribe((res) => {
            if (res.success) {
                this.visitsLengthCount = res.totalCount;
                // this.inprogressVisitsCount = iv.totalCount;
                // this.inprogressRecordsFetched += this.offset;
                for (let i = 0; i < res.data.length; i++) {
                    let visit = res.data[i];
                    visit.cheif_complaint = this.getCheifComplaint(visit);
                    visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.ADULTINITIAL);
                    visit.prescription_started = this.getEncounterCreated(visit, visitTypes.VISIT_NOTE);
                    visit.person.age = this.calculateAge(visit.person.birthdate);
                    visit.TMH_patient_id = this.getAttributeData(visit, "TMH Case Number");
                    this.inProgressVisits.push(visit);
                }
                this.dataSource.data = [...this.inProgressVisits];
                if (page == 1) {
                    this.dataSource.paginator = this.tempPaginator;
                    this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                }
                else {
                    this.tempPaginator.length = this.inProgressVisits.length;
                    this.tempPaginator.nextPage();
                }
            }
        });
    }
    /**
    * Get priority visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getPriorityVisits(page = 1) {
        if (page == 1) {
            this.priorityVisits = [];
            // this.priorityRecordsFetched = 0;
        }
        this.visitService.getPriorityVisits(this.pluginConfigObs?.mindmapURL, this.specialization, page).subscribe((res) => {
            if (res.success) {
                this.visitsLengthCount = res.totalCount;
                // this.priorityVisitsCount = res.totalCount;
                // this.priorityRecordsFetched += this.offset;
                for (let i = 0; i < res.data.length; i++) {
                    let visit = res.data[i];
                    visit.cheif_complaint = this.getCheifComplaint(visit);
                    visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.FLAGGED);
                    visit.person.age = this.calculateAge(visit.person.birthdate);
                    this.priorityVisits.push(visit);
                }
                this.dataSource.data = [...this.priorityVisits];
                if (page == 1) {
                    this.dataSource.paginator = this.tempPaginator;
                    this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                }
                else {
                    this.tempPaginator.length = this.priorityVisits.length;
                    this.tempPaginator.nextPage();
                }
            }
        });
    }
    /**
     * Get completed visits count
     * @return {void}
     */
    getCompletedVisits(page = 1) {
        this.visitService.getEndedVisits(this.pluginConfigObs?.mindmapURL, this.specialization, page).subscribe((res) => {
            if (res.success) {
                this.visitsLengthCount = res.totalCount;
                // this.completedVisitsCount = res.totalCount;
                // this.completedRecordsFetched += this.offset;
                for (let i = 0; i < res.data.length; i++) {
                    let visit = res.data[i];
                    visit.cheif_complaint = this.getCheifComplaint(visit);
                    visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.COMPLETED_VISIT);
                    visit.person.age = this.calculateAge(visit.person.birthdate);
                    visit.completed = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.VISIT_COMPLETE);
                    visit.TMH_patient_id = this.getAttributeData(visit, "TMH Case Number");
                    this.completedVisits.push(visit);
                }
                this.dataSource.data = [...this.completedVisits];
                if (page == 1) {
                    this.dataSource.paginator = this.tempPaginator;
                    this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                }
                else {
                    this.tempPaginator.length = this.completedVisits.length;
                    this.tempPaginator.nextPage();
                }
            }
        });
    }
    /**
  * Get follow-up visits for a logged-in doctor
  * @return {void}
  */
    getFollowUpVisit(page = 1) {
        this.visitService.getFollowUpVisits(this.pluginConfigObs?.mindmapURL, this.specialization).subscribe({
            next: (res) => {
                if (res.success) {
                    // this.followUpVisitsCount = 0;
                    // this.completedRecordsFetched += this.offset;
                    for (let i = 0; i < res.data.length; i++) {
                        let visit = res.data[i];
                        if (visit?.encounters?.length) {
                            // this.followUpVisitsCount += 1;
                            this.visitsLengthCount += 1;
                            visit.cheif_complaint = this.getCheifComplaint(visit);
                            visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.COMPLETED_VISIT);
                            visit.person.age = this.calculateAge(visit.person.birthdate);
                            visit.completed = this.getEncounterCreated(visit, visitTypes.VISIT_COMPLETE);
                            visit.followUp = this.processFollowUpDate(this.getEncounterObs(visit.encounters, visitTypes.VISIT_NOTE, 163345 /*Follow-up*/)?.value_text);
                            this.followUpVisits.push(visit);
                        }
                    }
                    this.dataSource.data = [...this.followUpVisits];
                    if (page == 1) {
                        this.dataSource.paginator = this.tempPaginator;
                        this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                    }
                    else {
                        this.tempPaginator.length = this.followUpVisits.length;
                        this.tempPaginator.nextPage();
                    }
                }
            }
        });
    }
    /**
    * Get encounter datetime for a given encounter type
    * @param {CustomVisitModel} visit - Visit
    * @param {string} encounterName - Encounter type
    * @return {string} - Encounter datetime
    */
    getEncounterObs(encounters, encounterName, conceptId) {
        let obs;
        encounters.forEach((encounter) => {
            if (encounter.type?.name === encounterName) {
                obs = encounter?.obs?.find((o) => o.concept_id == conceptId);
            }
        });
        return obs;
    }
    /**
     * Renders HTML content for a column, sanitized for security
     * @param {any} column - Column definition
     * @param {any} element - Data element to render
     * @return {string} - Formatted HTML or element value
     */
    renderHtmlContent(column, element) {
        return typeof column.formatHtml === 'function' ? this.sanitizer.bypassSecurityTrustHtml(column.formatHtml(element)) : element[column.key];
    }
    /**
     * Returns a string of CSS classes for the column
     * @param {any} column - Column definition
     * @return {string} - Space-separated class names
     */
    getClasses(column) {
        return column.classList ? column.classList.join(" ") : "";
    }
    /**
     * Formats the follow-up date by cleaning up time details
     * @param {string} value - Follow-up date string
     * @return {string} - Formatted date
     */
    processFollowUpDate(value) {
        return value.split(',').length > 1 ? `${value.split(',')[0]}${value.split(',')[1].replace("Time:", "")}` : value;
    }
    ;
    /**
     * Executes the action based on its label (Reschedule or Cancel)
     * @param {any} action - Action object
     * @param {any} element - Element to perform the action on
     */
    handleAction(action, element) {
        if (action.label === 'Reschedule') {
            this.reschedule(element);
        }
        else if (action.label === 'Cancel') {
            this.cancel(element);
        }
    }
    /**
     * Opens a WhatsApp chat with the given phone number
     * @param {MouseEvent} event - The click event to prevent row navigation
     * @param {string} telephone - Phone number for WhatsApp
     */
    openWhatsApp(event, telephone) {
        event.stopPropagation(); // Prevent row navigation
        const whatsappLink = `https://wa.me/${telephone}`;
        window.open(whatsappLink, '_blank', 'noopener,noreferrer');
    }
    static Éµfac = i0.ÉµÉµngDeclareFactory({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: TableGridComponent, deps: [{ token: i1.AppointmentService }, { token: i2.VisitService }, { token: i3.CoreService }, { token: i4.ToastrService }, { token: i5.TranslateService }, { token: i6.MindmapService }, { token: i7.DomSanitizer }], target: i0.ÉµÉµFactoryTarget.Component });
    static Éµcmp = i0.ÉµÉµngDeclareComponent({ minVersion: "14.0.0", version: "14.3.0", type: TableGridComponent, selector: "lib-table-grid", inputs: { pluginConfigObs: "pluginConfigObs" }, viewQueries: [{ propertyName: "paginator", first: true, predicate: MatPaginator, descendants: true }, { propertyName: "searchElement", first: true, predicate: ["searchInput"], descendants: true, static: true }, { propertyName: "tempPaginator", first: true, predicate: ["tempPaginator"], descendants: true }, { propertyName: "menuTrigger", first: true, predicate: MatMenuTrigger, descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"row mt-3\">\r\n    <div class=\"col-md-12 p-0\">\r\n      <div class=\"text-right my-2\">\r\n        <mat-accordion class=\"intel-accordion-con\" multi data-test-id=\"matAccAppointment\">\r\n          <mat-expansion-panel [expanded]=\"true\" data-test-id=\"matExpAppointment\">\r\n            <mat-expansion-panel-header data-test-id=\"matExpHeaderAppointment\">\r\n              <mat-panel-title>\r\n                <div id=\"{{pluginConfigObs.anchorId}}\" class=\"anchor-con\"></div>\r\n                <div class=\"intel-accordion-title\">\r\n                  <img src=\"{{ pluginConfigObs.tableHeaderIcon }}\" alt=\"\" width=\"44px\">\r\n                  <h6 class=\"mb-0 ml-2\">{{ pluginConfigObs.tableHeader | translate }} ({{ visitsLengthCount }})</h6>\r\n                  <mat-icon aria-hidden=\"false\" aria-label=\"help icon\" matTooltip=\"{{ (pluginConfigObs.tooltipLabel | translate) }}\" matTooltipPosition=\"right\" data-test-id=\"matIcoHelpAppointment\">help_outline</mat-icon>\r\n                  <div class=\"ml-auto filter-search-container\">\r\n                    <button *ngIf=\"pluginConfigObs.filterObs.filterFlag\" class=\"mat-stroked-button\"[matMenuTriggerFor]=\"filterMenu1\" class=\"filter-btn\" (click)=\"$event.stopPropagation();\">\r\n                      <img src=\"{{pluginConfigObs.filterObs.filterIcon}}\" alt=\"\"> {{( pluginConfigObs.filterObs.filterLabel| translate)}}\r\n                    </button>\r\n                    <mat-menu #filterMenu1=\"matMenu\" class=\"custom-menu\" [hasBackdrop]=\"true\" xPosition=\"before\">\r\n                      <div class=\"toggle-buttons\">\r\n                        <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'date'\" (click)=\"setMode('date'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Date' | translate}}</span></span></button>\r\n                        <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'range'\" (click)=\"setMode('range'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Range' | translate}}</span></span></button>\r\n                      </div>\r\n                      <div *ngIf=\"mode === 'date'\" class=\"date-view\" (click)=\"$event.stopPropagation()\">\r\n                        <form [formGroup]=\"filteredDateAndRangeForm\">\r\n                          <div class=\"form-date\">\r\n                            <div class=\"input-date\">\r\n                              <label class=\"label-text\">{{ 'Select date' | translate}}</label>\r\n                              <div class=\"input-wrapper\">\r\n                                <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"date\" [matDatepicker]=\"dobdp\" placeholder=\"{{'Select date' | translate}}\" aria-label=\"Date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etDate\"/>\r\n                                <mat-datepicker #dobdp></mat-datepicker>\r\n                                <mat-datepicker-toggle matSuffix [for]=\"dobdp\" data-test-id=\"dpDate\" class=\"datepicker-icon\">\r\n                                  <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\r\n                                </mat-datepicker-toggle>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </form>\r\n                        </div>\r\n                        <div *ngIf=\"mode === 'range'\" class=\"range-view\" (click)=\" $event.stopPropagation()\">\r\n                          <form [formGroup]=\"filteredDateAndRangeForm\">\r\n                            <div class=\"form-date\">\r\n                              <div class=\"input-date\">\r\n                                <label class=\"label-text\">{{ 'Start date' | translate }}</label>\r\n                                <div class=\"input-wrapper\">\r\n                                  <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"startDate\" [matDatepicker]=\"picker1\" placeholder=\"{{'Select start date'|translate}}\" aria-label=\"Start date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etSelStartDate\">\r\n                                  <mat-datepicker #picker1></mat-datepicker>\r\n                                  <mat-datepicker-toggle matSuffix [for]=\"picker1\" class=\"datepicker-icon\">\r\n                                    <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\r\n                                  </mat-datepicker-toggle>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            <div class=\"form-date\">\r\n                              <div class=\"input-date\">\r\n                                <label class=\"label-text\">{{ 'End date' | translate }}</label>\r\n                                <div class=\"input-wrapper\">\r\n                                  <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"endDate\" [matDatepicker]=\"picker2\" placeholder=\"{{'Select end date'|translate}}\" aria-label=\"End date\" aria-describedby=\"basic-addon2\" readonly data-test-id=\"etSelEndDate\">\r\n                                  <mat-datepicker #picker2></mat-datepicker>\r\n                                  <mat-datepicker-toggle matSuffix [for]=\"picker2\" class=\"datepicker-icon\">\r\n                                    <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\r\n                                  </mat-datepicker-toggle>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </form>\r\n                        </div>\r\n                      <div class=\"action-buttons\">\r\n                        <button mat-button class=\"mat-focus-indicator reset-btn mat-button mat-button-base\" (click)=\"resetDate();\"><span class=\"mat-button-wrapper\">{{ 'Reset'| translate }}</span></button>\r\n                        <button mat-button class=\"mat-focus-indicator apply-btn mat-button mat-button-base\" (click)=\"applyDateOrRangeFilter(pluginConfigObs.filterObs.filterDateField)\"><span class=\"mat-button-wrapper\">{{ 'Apply'| translate }}</span></button>\r\n                      </div>\r\n                    </mat-menu>\r\n                    <div class=\"input-group search-bar ml-auto\" (click)=\"$event.stopPropagation();\">\r\n                      <input type=\"text\" #searchInput class=\"form-control\" placeholder=\"{{ pluginConfigObs.searchPlaceHolder | translate }}\" aria-label=\"search1\" aria-describedby=\"basic-addon1\" (keyup)=\"applyFilter($event)\" (keydown.Space)=\"$event.stopPropagation()\" (keydown.Enter)=\"$event.stopPropagation()\" data-test-id=\"etSearchAppointmentDashboard\">\r\n                      <div class=\"input-group-append\">\r\n                        <span class=\"input-group-text\" id=\"basic-addon1\"  *ngIf=\"!isFilterApplied\">\r\n                          <img src=\"assets/svgs/search-icon.svg\" alt=\"\" width=\"20px\" height=\"20px\">\r\n                        </span>\r\n                        <button data-test-id=\"btnResetApSerach\"  class=\"btnResetApSerach\" class=\"btnResetApSerach\" class=\"mat-icon-button\" aria-label=\"Reset appointment search\"  (click)=\"clearFilter()\"  *ngIf=\"isFilterApplied\">\r\n                          <mat-icon class=\"ml-0\" style=\"line-height: normal;\">close</mat-icon>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </mat-panel-title>\r\n            </mat-expansion-panel-header>\r\n            <div class=\"mat-elevation-z8\">\r\n              <table mat-table [dataSource]=\"dataSource\">\r\n\r\n                <ng-container *ngFor=\"let column of displayedAppointmentColumns\" [matColumnDef]=\"column.key\">\r\n                  <th mat-header-cell *matHeaderCellDef>{{ column.label | translate }}</th>\r\n\r\n                  <td mat-cell *matCellDef=\"let element; let j = index;\" [attr.data-test-id]=\"'td' + j\">\r\n                    <ng-container *ngIf=\"column.key\">\r\n                      <div class=\"float-left\" [innerHTML]=\"renderHtmlContent(column, element)\" [ngClass]=\"getClasses(column)\"></div>\r\n                    </ng-container>\r\n\r\n                    <!-- Starts In Column -->\r\n                    <ng-container *ngIf=\"column.key === 'telephone' && element.telephone\">\r\n                      <a (click)=\"openWhatsApp($event, element.telephone)\" class=\"float-left icon-btn m-0\" [attr.data-test-id]=\"'linkPatientWhatsApp' + j\">\r\n                        <img src=\"assets/svgs/whatsapp-green.svg\" alt=\"WhatsApp\" />\r\n                      </a>\r\n                    </ng-container>\r\n\r\n                    <!-- Actions In Column -->\r\n                    <ng-container *ngIf=\"column.key === 'actions'\">\r\n                      <div class=\"actions-btn-wrap d-flex align-items-center\">\r\n                        <button\r\n                          *ngFor=\"let action of column.actionButtons\"\r\n                          [ngStyle]=\"{\r\n                            color: action.style?.color,\r\n                            backgroundColor: action.style?.backgroundColor\r\n                          }\"\r\n                          class=\"action-btn mr-2\"\r\n                          type=\"button\"\r\n                          (click)=\"$event.stopPropagation(); handleAction(action, element)\"\r\n                        >\r\n                          {{ action.label | translate }}\r\n                        </button>\r\n                      </div>\r\n                    </ng-container>\r\n                  </td>\r\n                </ng-container>\r\n    \r\n\r\n                <!-- No Data Row -->\r\n                <tr class=\"mat-row\" *matNoDataRow>\r\n                  <td class=\"mat-cell text-center\" [attr.colspan]=\"displayedColumns.length\">\r\n                    {{ pluginConfigObs.noRecordFound | translate }}\r\n                  </td>\r\n                </tr>\r\n\r\n                <!-- Row Definitions -->\r\n                <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n                <tr mat-row *matRowDef=\"let row; let x = index; columns: displayedColumns;\" [attr.data-test-id]=\"'tr' + x\" [routerLink]=\"['/dashboard/visit-summary', row.uuid]\"></tr>\r\n                \r\n              </table>\r\n              <mat-paginator #tempPaginator hidePageSize [pageSizeOptions]=\"[5, 10, 20]\" aria-label=\"Select page of periodic elements\"></mat-paginator>\r\n            </div>\r\n          </mat-expansion-panel>\r\n        </mat-accordion>\r\n      </div>\r\n    </div>\r\n</div>\r\n", styles: [".mat-elevation-z8{box-shadow:none;width:100%;overflow-x:auto}table{width:100%;font-family:DM Sans}th.mat-header-cell{border:none;font-size:14px!important;font-weight:700;color:var(--color-gray);height:21px}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{border:none;min-width:60px;white-space:nowrap;padding-right:24px}th.mat-header-cell span.alert-danger,td.mat-cell span.alert-danger,td.mat-footer-cell span.alert-danger{color:var(--color-red);font-weight:700;background:transparent;border:none}th.mat-header-cell span.alert-success,td.mat-cell span.alert-success,td.mat-footer-cell span.alert-success{color:var(--color-green);font-weight:700;background:transparent;border:none}td.mat-cell{font-size:16px}tr.mat-row,tr.mat-footer-row{height:88px;border-radius:8px;cursor:pointer}tr.mat-row.upcoming{background:#e6fff3!important}tr.mat-row:nth-child(odd){background:#f7f7fa}td:first-child,th:first-child{border-radius:8px 0 0 8px}td:last-child,th:last-child{border-radius:0 8px 8px 0}.actions-btn-wrap .action-btn{outline:none;border:none;height:36px;min-width:102px;padding:6px 8px;background:#fff;border-radius:4px;color:var(--color-black);font-family:DM Sans;font-size:16px}.actions-btn-wrap .blue-btn{background:var(--color-lightGray);color:var(--color-darkBlue)}.actions-btn-wrap .pink-btn{background:var(--color-lightPink);color:var(--color-red)}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header.mat-expanded .input-group{display:flex}.input-group{background:var(--color-white);border:1px solid rgba(127,123,146,.5);border-radius:6px;height:46px;align-items:center;max-width:60vw;width:300px;display:none}.input-group .input-group-text{background:none;border:none;cursor:default}.input-group .form-control{border:none;outline:none;background:transparent;font-size:16px;line-height:150%;padding-left:16px}.input-group .form-control:focus{box-shadow:none}.intel-accordion-con .mat-expansion-panel{background:#fff;box-shadow:0 4px 24px #1f1c3a14;border-radius:20px!important;padding:24px;margin-bottom:24px}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header{padding:0}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header .mat-content{align-items:center}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:48px}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header:hover{background:transparent!important}.intel-accordion-con .mat-expansion-panel .intel-accordion-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%}.intel-accordion-con .mat-expansion-panel .intel-accordion-title .mat-icon{height:20px;width:20px;font-size:20px;color:#461d90;margin-left:8px}.intel-accordion-con .mat-expansion-panel .intel-accordion-title h6{font-size:18px;font-weight:700;color:#000}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{padding:0;margin-top:24px;position:relative}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body:after{content:\"\";position:absolute;top:0;height:1px;left:0;right:0;background:#efe8ff}.anchor-con{position:absolute;top:-120px;left:0}@media (max-width: 768px){.input-group{width:100%;max-width:100%;margin:10px 0}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header,.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:-moz-fit-content;height:fit-content}.info-icon{display:none}.anchor-con{top:-100px}}.matIconButton{border:none;background:transparent}::ng-deep .custom-menu{background:var(--color-white);border-radius:8px!important;padding:16px;width:352px;box-shadow:0 4px 8px #7f7b9229}.mat-expansion-panel.mat-expanded .mat-expansion-panel-header .filter-btn{display:flex!important}.btnResetApSerach{display:none}.filter-btn{background:none;align-items:center;border:1px solid rgba(127,123,146,.5);border-radius:6px;color:#2e1e91;font-weight:500;padding:4px 12px;white-space:nowrap;height:46px;display:none;gap:4px}.toggle-buttons{display:flex;justify-content:space-between;margin-bottom:16px;gap:16px}button.mat-button,.action-buttons button.mat-button{flex:1;color:#2e1e91;background:#fff;border-radius:8px;font-family:DM Sans;font-size:14px;font-weight:500;border:1.33px solid #EFE8FF}.action-buttons button.mat-button.reset-btn{font-size:12px;font-weight:700;margin:0 0 0 20px;width:96px}.action-buttons button.mat-button.apply-btn{color:#fff;background:var(--color-darkBlue);font-size:12px;font-weight:700;width:96px}button.mat-button.active{background:#efe8ff;color:#2e1e91}button.mat-button .reset-btn{color:var(--color-darkBlue)}.action-buttons{display:flex;justify-content:space-between;gap:16px}.reset-btn{color:var(--color-darkBlue);background:#f5f5f5;border-radius:8px}.filter-search-container{display:flex;align-items:center;gap:1rem}.form-date{margin-bottom:16px}.input-wrapper{position:relative;display:flex;align-items:center}.input-wrapper .form-control{width:100%;padding-right:40px;border:1px solid rgba(178,175,190,.2);background:transparent;border-radius:8px;height:48px;font-size:16px;color:var(--color-darkestBlue)}.datepicker-icon{position:absolute;right:4px;top:50%;transform:translateY(-50%);cursor:pointer;background:transparent;border:none}.form-control:focus{box-shadow:none}.label-text{font-size:14px;margin-bottom:8px;color:#7f7b92}.userImage{width:32px;height:32px;border-radius:50%}.red-pill{display:flex;flex-direction:row;align-items:center;background:#ffe8e8;border-radius:4px;height:32px;color:#ea315b;padding:4px 6px;width:-moz-fit-content;width:fit-content}.left{text-align:left}.chip{display:flex;flex-direction:row;align-items:center;border-radius:4px;height:32px;padding:4px 6px;width:-moz-fit-content;width:fit-content}.chip.green{color:#0fd197}.chip.blue{color:#2e1e91}.chip-item-blue{background:var(--color-lightGray)}.chip-item-green{background:#e6fff3}\n"], dependencies: [{ kind: "directive", type: i8.RouterLink, selector: "[routerLink]" }, { kind: "directive", type: i9.NgClass, selector: "[ngClass]" }, { kind: "directive", type: i9.NgForOf, selector: "[ngFor][ngForOf]" }, { kind: "directive", type: i9.NgIf, selector: "[ngIf]" }, { kind: "directive", type: i9.NgStyle, selector: "[ngStyle]" }, { kind: "component", type: i10.MatPaginator, selector: "mat-paginator", outputs: ["page"], exportAs: ["matPaginator"] }, { kind: "directive", type: i11.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "directive", type: i12.MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]" }, { kind: "directive", type: i13.MatAccordion, selector: "mat-accordion", exportAs: ["matAccordion"] }, { kind: "component", type: i13.MatExpansionPanel, selector: "mat-expansion-panel", outputs: ["afterExpand", "afterCollapse"], exportAs: ["matExpansionPanel"] }, { kind: "component", type: i13.MatExpansionPanelHeader, selector: "mat-expansion-panel-header" }, { kind: "directive", type: i13.MatExpansionPanelTitle, selector: "mat-panel-title" }, { kind: "component", type: i14.MatMenu, selector: "mat-menu", outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "directive", type: i14.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "component", type: i15.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { kind: "directive", type: i15.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { kind: "directive", type: i15.MatHeaderRowDef, selector: "[matHeaderRowDef]" }, { kind: "directive", type: i15.MatColumnDef, selector: "[matColumnDef]" }, { kind: "directive", type: i15.MatCellDef, selector: "[matCellDef]" }, { kind: "directive", type: i15.MatRowDef, selector: "[matRowDef]" }, { kind: "directive", type: i15.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { kind: "directive", type: i15.MatCell, selector: "mat-cell, td[mat-cell]" }, { kind: "component", type: i15.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { kind: "component", type: i15.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { kind: "directive", type: i15.MatNoDataRow, selector: "ng-template[matNoDataRow]" }, { kind: "component", type: i16.MatIcon, selector: "mat-icon", exportAs: ["matIcon"] }, { kind: "component", type: i17.MatDatepicker, selector: "mat-datepicker", exportAs: ["matDatepicker"] }, { kind: "directive", type: i17.MatDatepickerInput, selector: "input[matDatepicker]", exportAs: ["matDatepickerInput"] }, { kind: "component", type: i17.MatDatepickerToggle, selector: "mat-datepicker-toggle", exportAs: ["matDatepickerToggle"] }, { kind: "directive", type: i17.MatDatepickerToggleIcon, selector: "[matDatepickerToggleIcon]" }, { kind: "directive", type: i18.ÉµNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i18.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i18.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i18.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i18.FormGroupDirective, selector: "[formGroup]", outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i18.FormControlName, selector: "[formControlName]", outputs: ["ngModelChange"] }, { kind: "pipe", type: i5.TranslatePipe, name: "translate" }] });
}
i0.ÉµÉµngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: TableGridComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-table-grid', template: "<div class=\"row mt-3\">\r\n    <div class=\"col-md-12 p-0\">\r\n      <div class=\"text-right my-2\">\r\n        <mat-accordion class=\"intel-accordion-con\" multi data-test-id=\"matAccAppointment\">\r\n          <mat-expansion-panel [expanded]=\"true\" data-test-id=\"matExpAppointment\">\r\n            <mat-expansion-panel-header data-test-id=\"matExpHeaderAppointment\">\r\n              <mat-panel-title>\r\n                <div id=\"{{pluginConfigObs.anchorId}}\" class=\"anchor-con\"></div>\r\n                <div class=\"intel-accordion-title\">\r\n                  <img src=\"{{ pluginConfigObs.tableHeaderIcon }}\" alt=\"\" width=\"44px\">\r\n                  <h6 class=\"mb-0 ml-2\">{{ pluginConfigObs.tableHeader | translate }} ({{ visitsLengthCount }})</h6>\r\n                  <mat-icon aria-hidden=\"false\" aria-label=\"help icon\" matTooltip=\"{{ (pluginConfigObs.tooltipLabel | translate) }}\" matTooltipPosition=\"right\" data-test-id=\"matIcoHelpAppointment\">help_outline</mat-icon>\r\n                  <div class=\"ml-auto filter-search-container\">\r\n                    <button *ngIf=\"pluginConfigObs.filterObs.filterFlag\" class=\"mat-stroked-button\"[matMenuTriggerFor]=\"filterMenu1\" class=\"filter-btn\" (click)=\"$event.stopPropagation();\">\r\n                      <img src=\"{{pluginConfigObs.filterObs.filterIcon}}\" alt=\"\"> {{( pluginConfigObs.filterObs.filterLabel| translate)}}\r\n                    </button>\r\n                    <mat-menu #filterMenu1=\"matMenu\" class=\"custom-menu\" [hasBackdrop]=\"true\" xPosition=\"before\">\r\n                      <div class=\"toggle-buttons\">\r\n                        <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'date'\" (click)=\"setMode('date'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Date' | translate}}</span></span></button>\r\n                        <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'range'\" (click)=\"setMode('range'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Range' | translate}}</span></span></button>\r\n                      </div>\r\n                      <div *ngIf=\"mode === 'date'\" class=\"date-view\" (click)=\"$event.stopPropagation()\">\r\n                        <form [formGroup]=\"filteredDateAndRangeForm\">\r\n                          <div class=\"form-date\">\r\n                            <div class=\"input-date\">\r\n                              <label class=\"label-text\">{{ 'Select date' | translate}}</label>\r\n                              <div class=\"input-wrapper\">\r\n                                <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"date\" [matDatepicker]=\"dobdp\" placeholder=\"{{'Select date' | translate}}\" aria-label=\"Date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etDate\"/>\r\n                                <mat-datepicker #dobdp></mat-datepicker>\r\n                                <mat-datepicker-toggle matSuffix [for]=\"dobdp\" data-test-id=\"dpDate\" class=\"datepicker-icon\">\r\n                                  <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\r\n                                </mat-datepicker-toggle>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </form>\r\n                        </div>\r\n                        <div *ngIf=\"mode === 'range'\" class=\"range-view\" (click)=\" $event.stopPropagation()\">\r\n                          <form [formGroup]=\"filteredDateAndRangeForm\">\r\n                            <div class=\"form-date\">\r\n                              <div class=\"input-date\">\r\n                                <label class=\"label-text\">{{ 'Start date' | translate }}</label>\r\n                                <div class=\"input-wrapper\">\r\n                                  <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"startDate\" [matDatepicker]=\"picker1\" placeholder=\"{{'Select start date'|translate}}\" aria-label=\"Start date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etSelStartDate\">\r\n                                  <mat-datepicker #picker1></mat-datepicker>\r\n                                  <mat-datepicker-toggle matSuffix [for]=\"picker1\" class=\"datepicker-icon\">\r\n                                    <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\r\n                                  </mat-datepicker-toggle>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            <div class=\"form-date\">\r\n                              <div class=\"input-date\">\r\n                                <label class=\"label-text\">{{ 'End date' | translate }}</label>\r\n                                <div class=\"input-wrapper\">\r\n                                  <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"endDate\" [matDatepicker]=\"picker2\" placeholder=\"{{'Select end date'|translate}}\" aria-label=\"End date\" aria-describedby=\"basic-addon2\" readonly data-test-id=\"etSelEndDate\">\r\n                                  <mat-datepicker #picker2></mat-datepicker>\r\n                                  <mat-datepicker-toggle matSuffix [for]=\"picker2\" class=\"datepicker-icon\">\r\n                                    <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\r\n                                  </mat-datepicker-toggle>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </form>\r\n                        </div>\r\n                      <div class=\"action-buttons\">\r\n                        <button mat-button class=\"mat-focus-indicator reset-btn mat-button mat-button-base\" (click)=\"resetDate();\"><span class=\"mat-button-wrapper\">{{ 'Reset'| translate }}</span></button>\r\n                        <button mat-button class=\"mat-focus-indicator apply-btn mat-button mat-button-base\" (click)=\"applyDateOrRangeFilter(pluginConfigObs.filterObs.filterDateField)\"><span class=\"mat-button-wrapper\">{{ 'Apply'| translate }}</span></button>\r\n                      </div>\r\n                    </mat-menu>\r\n                    <div class=\"input-group search-bar ml-auto\" (click)=\"$event.stopPropagation();\">\r\n                      <input type=\"text\" #searchInput class=\"form-control\" placeholder=\"{{ pluginConfigObs.searchPlaceHolder | translate }}\" aria-label=\"search1\" aria-describedby=\"basic-addon1\" (keyup)=\"applyFilter($event)\" (keydown.Space)=\"$event.stopPropagation()\" (keydown.Enter)=\"$event.stopPropagation()\" data-test-id=\"etSearchAppointmentDashboard\">\r\n                      <div class=\"input-group-append\">\r\n                        <span class=\"input-group-text\" id=\"basic-addon1\"  *ngIf=\"!isFilterApplied\">\r\n                          <img src=\"assets/svgs/search-icon.svg\" alt=\"\" width=\"20px\" height=\"20px\">\r\n                        </span>\r\n                        <button data-test-id=\"btnResetApSerach\"  class=\"btnResetApSerach\" class=\"btnResetApSerach\" class=\"mat-icon-button\" aria-label=\"Reset appointment search\"  (click)=\"clearFilter()\"  *ngIf=\"isFilterApplied\">\r\n                          <mat-icon class=\"ml-0\" style=\"line-height: normal;\">close</mat-icon>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </mat-panel-title>\r\n            </mat-expansion-panel-header>\r\n            <div class=\"mat-elevation-z8\">\r\n              <table mat-table [dataSource]=\"dataSource\">\r\n\r\n                <ng-container *ngFor=\"let column of displayedAppointmentColumns\" [matColumnDef]=\"column.key\">\r\n                  <th mat-header-cell *matHeaderCellDef>{{ column.label | translate }}</th>\r\n\r\n                  <td mat-cell *matCellDef=\"let element; let j = index;\" [attr.data-test-id]=\"'td' + j\">\r\n                    <ng-container *ngIf=\"column.key\">\r\n                      <div class=\"float-left\" [innerHTML]=\"renderHtmlContent(column, element)\" [ngClass]=\"getClasses(column)\"></div>\r\n                    </ng-container>\r\n\r\n                    <!-- Starts In Column -->\r\n                    <ng-container *ngIf=\"column.key === 'telephone' && element.telephone\">\r\n                      <a (click)=\"openWhatsApp($event, element.telephone)\" class=\"float-left icon-btn m-0\" [attr.data-test-id]=\"'linkPatientWhatsApp' + j\">\r\n                        <img src=\"assets/svgs/whatsapp-green.svg\" alt=\"WhatsApp\" />\r\n                      </a>\r\n                    </ng-container>\r\n\r\n                    <!-- Actions In Column -->\r\n                    <ng-container *ngIf=\"column.key === 'actions'\">\r\n                      <div class=\"actions-btn-wrap d-flex align-items-center\">\r\n                        <button\r\n                          *ngFor=\"let action of column.actionButtons\"\r\n                          [ngStyle]=\"{\r\n                            color: action.style?.color,\r\n                            backgroundColor: action.style?.backgroundColor\r\n                          }\"\r\n                          class=\"action-btn mr-2\"\r\n                          type=\"button\"\r\n                          (click)=\"$event.stopPropagation(); handleAction(action, element)\"\r\n                        >\r\n                          {{ action.label | translate }}\r\n                        </button>\r\n                      </div>\r\n                    </ng-container>\r\n                  </td>\r\n                </ng-container>\r\n    \r\n\r\n                <!-- No Data Row -->\r\n                <tr class=\"mat-row\" *matNoDataRow>\r\n                  <td class=\"mat-cell text-center\" [attr.colspan]=\"displayedColumns.length\">\r\n                    {{ pluginConfigObs.noRecordFound | translate }}\r\n                  </td>\r\n                </tr>\r\n\r\n                <!-- Row Definitions -->\r\n                <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n                <tr mat-row *matRowDef=\"let row; let x = index; columns: displayedColumns;\" [attr.data-test-id]=\"'tr' + x\" [routerLink]=\"['/dashboard/visit-summary', row.uuid]\"></tr>\r\n                \r\n              </table>\r\n              <mat-paginator #tempPaginator hidePageSize [pageSizeOptions]=\"[5, 10, 20]\" aria-label=\"Select page of periodic elements\"></mat-paginator>\r\n            </div>\r\n          </mat-expansion-panel>\r\n        </mat-accordion>\r\n      </div>\r\n    </div>\r\n</div>\r\n", styles: [".mat-elevation-z8{box-shadow:none;width:100%;overflow-x:auto}table{width:100%;font-family:DM Sans}th.mat-header-cell{border:none;font-size:14px!important;font-weight:700;color:var(--color-gray);height:21px}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{border:none;min-width:60px;white-space:nowrap;padding-right:24px}th.mat-header-cell span.alert-danger,td.mat-cell span.alert-danger,td.mat-footer-cell span.alert-danger{color:var(--color-red);font-weight:700;background:transparent;border:none}th.mat-header-cell span.alert-success,td.mat-cell span.alert-success,td.mat-footer-cell span.alert-success{color:var(--color-green);font-weight:700;background:transparent;border:none}td.mat-cell{font-size:16px}tr.mat-row,tr.mat-footer-row{height:88px;border-radius:8px;cursor:pointer}tr.mat-row.upcoming{background:#e6fff3!important}tr.mat-row:nth-child(odd){background:#f7f7fa}td:first-child,th:first-child{border-radius:8px 0 0 8px}td:last-child,th:last-child{border-radius:0 8px 8px 0}.actions-btn-wrap .action-btn{outline:none;border:none;height:36px;min-width:102px;padding:6px 8px;background:#fff;border-radius:4px;color:var(--color-black);font-family:DM Sans;font-size:16px}.actions-btn-wrap .blue-btn{background:var(--color-lightGray);color:var(--color-darkBlue)}.actions-btn-wrap .pink-btn{background:var(--color-lightPink);color:var(--color-red)}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header.mat-expanded .input-group{display:flex}.input-group{background:var(--color-white);border:1px solid rgba(127,123,146,.5);border-radius:6px;height:46px;align-items:center;max-width:60vw;width:300px;display:none}.input-group .input-group-text{background:none;border:none;cursor:default}.input-group .form-control{border:none;outline:none;background:transparent;font-size:16px;line-height:150%;padding-left:16px}.input-group .form-control:focus{box-shadow:none}.intel-accordion-con .mat-expansion-panel{background:#fff;box-shadow:0 4px 24px #1f1c3a14;border-radius:20px!important;padding:24px;margin-bottom:24px}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header{padding:0}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header .mat-content{align-items:center}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:48px}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header:hover{background:transparent!important}.intel-accordion-con .mat-expansion-panel .intel-accordion-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%}.intel-accordion-con .mat-expansion-panel .intel-accordion-title .mat-icon{height:20px;width:20px;font-size:20px;color:#461d90;margin-left:8px}.intel-accordion-con .mat-expansion-panel .intel-accordion-title h6{font-size:18px;font-weight:700;color:#000}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{padding:0;margin-top:24px;position:relative}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body:after{content:\"\";position:absolute;top:0;height:1px;left:0;right:0;background:#efe8ff}.anchor-con{position:absolute;top:-120px;left:0}@media (max-width: 768px){.input-group{width:100%;max-width:100%;margin:10px 0}.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header,.intel-accordion-con .mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:-moz-fit-content;height:fit-content}.info-icon{display:none}.anchor-con{top:-100px}}.matIconButton{border:none;background:transparent}::ng-deep .custom-menu{background:var(--color-white);border-radius:8px!important;padding:16px;width:352px;box-shadow:0 4px 8px #7f7b9229}.mat-expansion-panel.mat-expanded .mat-expansion-panel-header .filter-btn{display:flex!important}.btnResetApSerach{display:none}.filter-btn{background:none;align-items:center;border:1px solid rgba(127,123,146,.5);border-radius:6px;color:#2e1e91;font-weight:500;padding:4px 12px;white-space:nowrap;height:46px;display:none;gap:4px}.toggle-buttons{display:flex;justify-content:space-between;margin-bottom:16px;gap:16px}button.mat-button,.action-buttons button.mat-button{flex:1;color:#2e1e91;background:#fff;border-radius:8px;font-family:DM Sans;font-size:14px;font-weight:500;border:1.33px solid #EFE8FF}.action-buttons button.mat-button.reset-btn{font-size:12px;font-weight:700;margin:0 0 0 20px;width:96px}.action-buttons button.mat-button.apply-btn{color:#fff;background:var(--color-darkBlue);font-size:12px;font-weight:700;width:96px}button.mat-button.active{background:#efe8ff;color:#2e1e91}button.mat-button .reset-btn{color:var(--color-darkBlue)}.action-buttons{display:flex;justify-content:space-between;gap:16px}.reset-btn{color:var(--color-darkBlue);background:#f5f5f5;border-radius:8px}.filter-search-container{display:flex;align-items:center;gap:1rem}.form-date{margin-bottom:16px}.input-wrapper{position:relative;display:flex;align-items:center}.input-wrapper .form-control{width:100%;padding-right:40px;border:1px solid rgba(178,175,190,.2);background:transparent;border-radius:8px;height:48px;font-size:16px;color:var(--color-darkestBlue)}.datepicker-icon{position:absolute;right:4px;top:50%;transform:translateY(-50%);cursor:pointer;background:transparent;border:none}.form-control:focus{box-shadow:none}.label-text{font-size:14px;margin-bottom:8px;color:#7f7b92}.userImage{width:32px;height:32px;border-radius:50%}.red-pill{display:flex;flex-direction:row;align-items:center;background:#ffe8e8;border-radius:4px;height:32px;color:#ea315b;padding:4px 6px;width:-moz-fit-content;width:fit-content}.left{text-align:left}.chip{display:flex;flex-direction:row;align-items:center;border-radius:4px;height:32px;padding:4px 6px;width:-moz-fit-content;width:fit-content}.chip.green{color:#0fd197}.chip.blue{color:#2e1e91}.chip-item-blue{background:var(--color-lightGray)}.chip-item-green{background:#e6fff3}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.AppointmentService }, { type: i2.VisitService }, { type: i3.CoreService }, { type: i4.ToastrService }, { type: i5.TranslateService }, { type: i6.MindmapService }, { type: i7.DomSanitizer }]; }, propDecorators: { pluginConfigObs: [{
                type: Input
            }], paginator: [{
                type: ViewChild,
                args: [MatPaginator]
            }], searchElement: [{
                type: ViewChild,
                args: ['searchInput', { static: true }]
            }], tempPaginator: [{
                type: ViewChild,
                args: ['tempPaginator']
            }], menuTrigger: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9paC1saWJyYXJ5L3NyYy9saWIvY29tcG9uZW50cy90YWJsZS1ncmlkL3RhYmxlLWdyaWQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWgtbGlicmFyeS9zcmMvbGliL2NvbXBvbmVudHMvdGFibGUtZ3JpZC90YWJsZS1ncmlkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFVLFNBQVMsRUFBRSxLQUFLLEVBQXVDLE1BQU0sZUFBZSxDQUFDO0FBQ3JILE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUU3RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUN4RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsb0NBQW9DO0FBQ3BDLE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUM1QixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUMzQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsWUFBWSxFQUFFLHdCQUF3QixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDdkYsT0FBTyxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDN0UscUVBQXFFO0FBQ3JFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUNoRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPN0MsTUFBTSxPQUFPLGtCQUFrQjtJQW1DbkI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUF2Q0QsZUFBZSxDQUFNO0lBQzlCLDJCQUEyQixHQUFRLEVBQUUsQ0FBQztJQUN0QyxnQkFBZ0IsR0FBYSxFQUFFLENBQUM7SUFDaEMsVUFBVSxHQUFHLElBQUksa0JBQWtCLEVBQU8sQ0FBQztJQUMzQyxnQkFBZ0IsR0FBYSxFQUFFLENBQUM7SUFDaEMsU0FBUyxHQUFHLEtBQUssQ0FBQztJQUVPLFNBQVMsQ0FBZTtJQUNMLGFBQWEsQ0FBYTtJQUN0RSx3QkFBd0IsQ0FBWTtJQUNSLGFBQWEsQ0FBZTtJQUM3QixXQUFXLENBQWlCO0lBRXZELGFBQWEsR0FBWSxJQUFJLENBQUM7SUFDOUIsSUFBSSxHQUFxQixNQUFNLENBQUM7SUFDaEMsT0FBTyxDQUFPO0lBRWQsWUFBWSxHQUF1QixFQUFFLENBQUM7SUFDdEMsY0FBYyxHQUF1QixFQUFFLENBQUM7SUFDeEMsY0FBYyxHQUF1QixFQUFFLENBQUM7SUFDeEMsZ0JBQWdCLEdBQXVCLEVBQUUsQ0FBQztJQUMxQyxlQUFlLEdBQXVCLEVBQUUsQ0FBQztJQUN6QyxjQUFjLEdBQXVCLEVBQUUsQ0FBQztJQUV4QyxjQUFjLEdBQVcsRUFBRSxDQUFDO0lBQzVCLGlCQUFpQixHQUFXLENBQUMsQ0FBQztJQUM5QixlQUFlLEdBQUcsS0FBSyxDQUFDO0lBRXhCLGVBQWU7UUFDYixJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzdDLENBQUM7SUFFRCxZQUNVLGtCQUFzQyxFQUN0QyxZQUEwQixFQUMxQixXQUF3QixFQUN4QixNQUFxQixFQUNyQixnQkFBa0MsRUFDbEMsY0FBOEIsRUFDOUIsU0FBdUI7SUFDL0IsNkNBQTZDOztRQVByQyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBQ3RDLGlCQUFZLEdBQVosWUFBWSxDQUFjO1FBQzFCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQ3hCLFdBQU0sR0FBTixNQUFNLENBQWU7UUFDckIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFDOUIsY0FBUyxHQUFULFNBQVMsQ0FBYztRQUc3Qix5RUFBeUU7UUFDekUsMkhBQTJIO1FBQzNILE9BQU87UUFDUCxJQUFJLENBQUMsd0JBQXdCLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixFQUFFLENBQUM7UUFDbkUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFBLEVBQUUsQ0FBQSxDQUFDLEdBQUcsS0FBRyxLQUFLLElBQUksSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqSCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsMkJBQTJCO1FBQ3pCLE9BQU8sSUFBSSxTQUFTLENBQUM7WUFDbkIsSUFBSSxFQUFFLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoRCxTQUFTLEVBQUUsSUFBSSxXQUFXLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxRQUFRLENBQUM7WUFDckQsT0FBTyxFQUFFLElBQUksV0FBVyxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsUUFBUSxDQUFDO1NBQ3BELENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7UUFDNUUsSUFBSSxRQUFRLEdBQUcsWUFBWSxDQUFDLElBQUksRUFBRSxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUQsSUFBSSxRQUFRLEVBQUU7WUFDWixJQUFJLFFBQVEsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO2dCQUM5QixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7YUFDbkU7WUFDRCxJQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsbUJBQW1CLEtBQUssYUFBYSxFQUFDO2dCQUM3RCxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7YUFDeEI7WUFDRCxJQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsbUJBQW1CLEtBQUssVUFBVSxFQUFDO2dCQUMxRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0I7WUFDRCxJQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsbUJBQW1CLEtBQUssVUFBVSxFQUFDO2dCQUMxRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDM0I7WUFDRCxJQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsbUJBQW1CLEtBQUssWUFBWSxFQUFDO2dCQUM1RCxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDN0I7WUFDRCxJQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsbUJBQW1CLEtBQUssV0FBVyxFQUFDO2dCQUMzRCxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQzthQUMzQjtZQUFBLElBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRSxtQkFBbUIsS0FBSyxVQUFVLEVBQUM7Z0JBQzNELElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2FBQ3pCO1NBQ0Y7UUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQTtJQUM3RCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLElBQUksT0FBTyxDQUFDLGlCQUFpQixDQUFDLElBQUksT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsWUFBWSxFQUFFO1lBQ3pFLElBQUksQ0FBQywyQkFBMkIsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksSUFBSSxFQUFFLENBQUM7WUFDM0UsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxHQUFHLENBQzFELENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUN2QixDQUFDO1NBQ0g7SUFDSCxDQUFDO0lBRUQ7OztPQUdHO0lBRUgsbUJBQW1CLENBQUMsSUFBWTtRQUM5QixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDckYsT0FBTyxVQUFVO1lBQ2YsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLO1lBQ2xCLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsMkJBQTJCO0lBQzdFLENBQUM7SUFFRDs7O09BR0c7SUFDSCxtQkFBbUIsQ0FBQyxJQUFZO1FBQzlCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQztRQUNyRixPQUFPLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMseUJBQXlCO0lBQzdFLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxJQUFZO1FBQzVCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQztRQUNuRixPQUFPLFNBQVMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsZ0JBQWdCO0lBQ2pHLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxJQUFZO1FBQzVCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQztRQUNuRixPQUFPLFNBQVMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxTQUFTLENBQUMsQ0FBQyxnQkFBZ0I7SUFDaEUsQ0FBQztJQUVELGdCQUFnQixDQUFDLElBQVk7UUFDM0IsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxDQUFDO1FBQ25GLE9BQU8sU0FBUyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxxQkFBcUI7SUFDcEUsQ0FBQztJQUVELGVBQWUsQ0FBQyxJQUFZO1FBQzFCLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQy9ELENBQUM7SUFLRDs7OztNQUlFO0lBQ0YsaUJBQWlCLENBQUMsS0FBdUI7UUFDdkMsSUFBSSxNQUFNLEdBQWEsRUFBRSxDQUFDO1FBQzFCLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUM7UUFDcEMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQStCLEVBQUUsRUFBRTtZQUNyRCxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztZQUNyQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxLQUFLLElBQUksRUFBRTtnQkFDbkQsTUFBTSxHQUFHLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQztnQkFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQTBCLEVBQUUsRUFBRTtvQkFDekMsSUFBSSxVQUFVLENBQUMsVUFBVSxJQUFJLE1BQU0sRUFBRTt3QkFDbkMsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRSxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQzNILEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7NEJBQ2hELE1BQU0sSUFBSSxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQzs0QkFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7Z0NBQ2xELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7NkJBQ3RCO3lCQUNGO3FCQUNGO2dCQUNILENBQUMsQ0FBQyxDQUFDO2FBQ0o7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7OztNQUlFO0lBQ0Ysd0JBQXdCLENBQUMsSUFBWTtRQUNuQyxJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2pELElBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDckQsSUFBRyxLQUFLLEdBQUcsRUFBRSxFQUFFO1lBQ2IsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FDcEQ7UUFBQSxDQUFDO1FBQ0YsSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO1lBQ2IsSUFBRyxPQUFPLEdBQUcsQ0FBQztnQkFBRSxPQUFPLFNBQVMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFLENBQUM7WUFDOUUsT0FBTyxHQUFHLE9BQU8sVUFBVSxDQUFDO1NBQzdCO1FBQ0QsT0FBTyxHQUFHLEtBQUssTUFBTSxDQUFDO0lBQ3hCLENBQUM7SUFFRDs7OztNQUlFO0lBQ0YsVUFBVSxDQUFDLFdBQTZCO1FBQ3RDLE1BQU0sR0FBRyxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQXVCLEVBQUUsRUFBRTtZQUMxRSxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksVUFBVSxDQUFDLG1CQUFtQixJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLFVBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNyRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7UUFDVixNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDakMsSUFBSSxXQUFXLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLHNEQUFzRCxDQUFDLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7U0FDaks7YUFBTSxJQUFHLFdBQVcsQ0FBQyxXQUFXLElBQUksbUJBQW1CLEVBQUU7WUFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxnREFBZ0QsQ0FBQyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO1NBQzNKO2FBQU07WUFDTCxJQUFJLENBQUMsV0FBVyxDQUFDLDhCQUE4QixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQTRDLEVBQUUsRUFBRTtnQkFDdkosSUFBSSxHQUFHLEVBQUU7b0JBQ1AsSUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDO29CQUNsQixJQUFJLENBQUMsV0FBVyxDQUFDLHFDQUFxQyxDQUFDLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBZSxFQUFFLEVBQUU7d0JBQzdHLElBQUksTUFBTSxFQUFFOzRCQUNWLFdBQVcsQ0FBQyxhQUFhLEdBQUcsV0FBVyxDQUFDLEVBQUUsQ0FBQzs0QkFDM0MsV0FBVyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7NEJBQy9FLFdBQVcsQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQzs0QkFDcEMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQXFCLEVBQUUsRUFBRTtnQ0FDOUgsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQztnQ0FDNUIsSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFO29DQUNkLElBQUksQ0FBQyxjQUFjLENBQUMsZ0NBQWdDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUE7b0NBQ2xHLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztvQ0FDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxvREFBb0QsQ0FBQyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDO2lDQUNySztxQ0FBTTtvQ0FDTCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7aUNBQ3JGOzRCQUNILENBQUMsQ0FBQyxDQUFDO3lCQUNKO29CQUNILENBQUMsQ0FBQyxDQUFDO2lCQUNKO1lBQ0gsQ0FBQyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFFRDs7OztNQUlFO0lBQ0YsTUFBTSxDQUFDLFdBQTZCO1FBQ2xDLElBQUcsV0FBVyxDQUFDLFdBQVcsSUFBSSxtQkFBbUIsRUFBRTtZQUNqRCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLDhDQUE4QyxDQUFDLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7WUFDckosT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxpQ0FBaUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFZLEVBQUUsRUFBRTtZQUMzSCxJQUFJLEdBQUcsRUFBRTtnQkFDUCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLGlEQUFpRCxDQUFDLEVBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7Z0JBQzVKLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQzthQUN4QjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVEOzs7TUFHRTtJQUNGLElBQUksTUFBTTtRQUNSLE9BQU8sWUFBWSxDQUFDLElBQUksRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3JELENBQUM7SUFFRDs7OztNQUlFO0lBQ0YsV0FBVyxDQUFDLEtBQVk7UUFDdEIsTUFBTSxXQUFXLEdBQUksS0FBSyxDQUFDLE1BQTJCLENBQUMsS0FBSyxDQUFDO1FBQzdELElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUMxRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztJQUM5QixDQUFDO0lBRUQ7OztNQUdFO0lBQ0YsV0FBVztRQUNULElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUM5QixJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO0lBQy9CLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsb0JBQW9CLENBQUMsU0FBaUI7UUFDcEMsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3pELENBQUM7SUFFRDs7OztNQUlFO0lBQ0YsZUFBZSxDQUFDLGVBQXVCO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUdEOzs7O09BSUc7SUFDSCxrQkFBa0IsQ0FBQyxNQUEyQztRQUM1RCxPQUFPLE1BQU0sRUFBRSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUF3QyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsd0JBQXdCLElBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDO0lBQzdILENBQUM7SUFHRDs7T0FFRztJQUNILFNBQVM7UUFDUCxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDcEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUM5QjtJQUNILENBQUM7SUFHRDs7O09BR0c7SUFDSCxPQUFPLENBQUMsSUFBc0I7UUFDNUIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDbkIsQ0FBQztJQUdEOzs7O09BSUc7SUFDSCxVQUFVLENBQUMsSUFBUztRQUNsQixNQUFNLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqQyxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3pELE9BQU8sR0FBRyxJQUFJLElBQUksS0FBSyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFHRDs7Ozs7T0FLRztJQUNILGFBQWEsQ0FBQyxZQUFvQjtRQUNoQyxNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZCLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5QyxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRW5DLElBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDO2FBQ3JGLElBQUksQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDO2FBQ2xHLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDOztZQUN0RixNQUFNLElBQUksS0FBSyxDQUFDLHNFQUFzRSxDQUFDLENBQUM7UUFFN0YsT0FBTyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFHRDs7OztPQUlHO0lBQ0gsWUFBWSxDQUFDLFFBQWdCO1FBQzNCLE1BQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDN0IsT0FBTyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUdEOzs7T0FHRztJQUNILHNCQUFzQixDQUFDLFNBQWlCO1FBQ3RDLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxDQUFDO1FBQ3RFLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEVBQUUsS0FBSyxDQUFDO1FBQ3hFLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsS0FBSyxDQUFDO1FBRXBFLElBQUksWUFBWSxFQUFFO1lBQ2hCLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFcEQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUFTLEVBQUUsTUFBYyxFQUFFLEVBQUU7Z0JBQzlELE1BQU0sUUFBUSxHQUFHLFNBQVMsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFDdk0sT0FBTyxRQUFRLEtBQUssTUFBTSxDQUFDO1lBQzdCLENBQUMsQ0FBQztZQUNGLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLGFBQWEsQ0FBQztTQUN4QzthQUFNLElBQUksU0FBUyxJQUFJLE9BQU8sRUFBRTtZQUMvQixNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdEQsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRWxELElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxHQUFHLENBQUMsSUFBUyxFQUFFLE1BQWMsRUFBRSxFQUFFO2dCQUM5RCxNQUFNLFFBQVEsR0FBRyxTQUFTLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZNLE9BQU8sUUFBUSxJQUFJLGtCQUFrQixJQUFJLFFBQVEsSUFBSSxnQkFBZ0IsQ0FBQztZQUN4RSxDQUFDLENBQUM7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxHQUFHLGtCQUFrQixJQUFJLGdCQUFnQixFQUFFLENBQUM7U0FDdEU7YUFBTTtZQUNMLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztTQUM3QjtRQUNELElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ25CLENBQUM7SUFFRDs7O09BR0c7SUFDSCxTQUFTLENBQUMsT0FBZ0IsS0FBSztRQUM3QixJQUFJLENBQUMsd0JBQXdCLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDdEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxHQUFHLENBQUMsSUFBUyxFQUFFLE1BQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDO1FBQ3RFLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDVCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7U0FDbEI7SUFDSCxDQUFDO0lBR0Q7Ozs7O09BS0c7SUFDSCxnQkFBZ0IsQ0FBQyxJQUFTLEVBQUUsYUFBcUI7UUFDL0MsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQ3hDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQzFDLENBQUMsSUFBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsSUFBSSxLQUFLLGFBQWEsQ0FDbEUsQ0FBQztZQUNGLElBQUksU0FBUyxFQUFFO2dCQUNiLE9BQU87b0JBQ0wsSUFBSSxFQUFFLFNBQVMsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJO29CQUMxQyxLQUFLLEVBQUUsU0FBUyxDQUFDLEtBQUs7aUJBQ3ZCLENBQUM7YUFDSDtTQUNGO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7OztNQUdFO0lBQ0YsZUFBZTtRQUNiLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxVQUFVLEVBQUUsWUFBWSxDQUFDLElBQUksRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUM1TSxTQUFTLENBQUMsQ0FBQyxHQUFxQixFQUFFLEVBQUU7WUFDbkMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFBO1lBQ3pDLElBQUksZ0JBQWdCLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztZQUNoQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUE2QixFQUFFLEVBQUU7Z0JBQ3pELElBQUksV0FBVyxDQUFDLE1BQU0sSUFBSSxRQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxJQUFJLGtCQUFrQixJQUFFLFdBQVcsQ0FBQyxXQUFXLElBQUksbUJBQW1CLENBQUMsRUFBRTtvQkFDckksSUFBSSxXQUFXLENBQUMsS0FBSyxFQUFFO3dCQUNyQixXQUFXLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ3hFLFdBQVcsQ0FBQyxTQUFTLEdBQUcsd0JBQXdCLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO3dCQUN6RSxXQUFXLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO3dCQUM1RSxXQUFXLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDLENBQUM7d0JBQ3pGLFdBQVcsQ0FBQyxJQUFJLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQzt3QkFDekMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7cUJBQ3JDO2lCQUNGO1lBQ0gsQ0FBQyxDQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDM0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLEVBQUUsV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMzSyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFHRDs7OztNQUlFO0lBQ0YsaUJBQWlCLENBQUMsSUFBOEI7UUFDOUMsSUFBSSxjQUFjLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUF5QixFQUFFLEVBQUU7WUFDekMsSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxzQ0FBc0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7Z0JBQy9FLGNBQWMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDO2FBQzFCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLGNBQWMsQ0FBQztJQUN4QixDQUFDO0lBRUQ7Ozs7TUFJRTtJQUNGLFlBQVksQ0FBQyxTQUFpQjtRQUM1QixPQUFPLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVEOzs7O01BSUU7SUFDRixZQUFZLENBQUMsSUFBWTtRQUN2QixJQUFJLEtBQUssR0FBRyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2pELElBQUksT0FBTyxHQUFHLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDckQsSUFBSSxLQUFLLEdBQUcsRUFBRSxFQUFFO1lBQ2QsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQzVDO1FBQUEsQ0FBQztRQUNGLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtZQUNiLE9BQU8sR0FBRyxPQUFPLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDO1NBQ3JFO1FBQ0QsT0FBTyxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUM7SUFDbEUsQ0FBQztJQUVEOzs7OztNQUtFO0lBQ0YsbUJBQW1CLENBQUMsS0FBdUIsRUFBRSxhQUFxQjtRQUNoRSxJQUFJLFVBQVUsR0FBRyxFQUFFLENBQUM7UUFDcEIsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQztRQUNwQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBK0IsRUFBRSxFQUFFO1lBQ3JELE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDO1lBQ3JDLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQ3pDLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7YUFDbkY7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsY0FBYyxDQUFDLEdBQVE7UUFDckIsSUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCLE1BQU0sT0FBTyxHQUFHLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxLQUFLLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUM1RSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxFQUFFO1lBQy9CLE9BQU8sRUFBRSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUN6QixJQUFJLENBQUMsVUFBVTtvQkFDYixVQUFVLEdBQUcsR0FBRyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzNFLENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFDRCxPQUFPLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztJQUM1RCxDQUFDO0lBRUQ7Ozs7TUFJRTtJQUNGLGlCQUFpQixDQUFDLE9BQWUsQ0FBQztRQUNoQyxJQUFHLElBQUksSUFBSSxDQUFDLEVBQUU7WUFDWixJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztZQUN6QixrQ0FBa0M7U0FDbkM7UUFDRCxJQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBcUIsRUFBRSxFQUFFO1lBQ25JLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRTtnQkFDZixJQUFJLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQTtnQkFDdkMsNkNBQTZDO2dCQUM3QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ3hDLElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3hCLEtBQUssQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUN0RCxLQUFLLENBQUMsYUFBYSxHQUFHLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDO29CQUNsSyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQzdELEtBQUssQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7b0JBQzVELElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNqQztnQkFDRCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO2dCQUNoRCxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUU7b0JBQ2IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztvQkFDL0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLFlBQVksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLEVBQUUsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztpQkFDdlc7cUJBQU07b0JBQ0wsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7b0JBQ3ZELElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7aUJBQy9CO2FBQ0Y7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7OztNQUlFO0lBQ0YsbUJBQW1CLENBQUMsT0FBZSxDQUFDO1FBQ2xDLElBQUcsSUFBSSxJQUFJLENBQUMsRUFBRTtZQUNaLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7WUFDM0IscUNBQXFDO1NBQ3RDO1FBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQXFCLEVBQUUsRUFBRTtZQUNySSxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUU7Z0JBQ2YsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUM7Z0JBQ3hDLDhDQUE4QztnQkFDOUMsZ0RBQWdEO2dCQUNoRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ3hDLElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3hCLEtBQUssQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUN0RCxLQUFLLENBQUMsYUFBYSxHQUFHLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDO29CQUNsSyxLQUFLLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7b0JBQ3BGLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDN0QsS0FBSyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDLENBQUM7b0JBQ3ZFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ25DO2dCQUNELElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFDbEQsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFO29CQUNiLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7b0JBQy9DLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxHQUFHLENBQUMsSUFBSSxFQUFFLE1BQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksRUFBRSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQ3ZXO3FCQUFNO29CQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUM7b0JBQ3pELElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7aUJBQy9CO2FBQ0Y7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7OztNQUlFO0lBQ0YsaUJBQWlCLENBQUMsT0FBZSxDQUFDO1FBQ2hDLElBQUcsSUFBSSxJQUFJLENBQUMsRUFBRTtZQUNaLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1lBQ3pCLG1DQUFtQztTQUNwQztRQUNELElBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFxQixFQUFFLEVBQUU7WUFDbkksSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFO2dCQUNmLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDO2dCQUN4Qyw2Q0FBNkM7Z0JBQzdDLDhDQUE4QztnQkFDOUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUN4QyxJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QixLQUFLLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDdEQsS0FBSyxDQUFDLGFBQWEsR0FBRyxLQUFLLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDN0osS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUM3RCxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztpQkFDakM7Z0JBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFDaEQsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFO29CQUNiLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7b0JBQy9DLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxHQUFHLENBQUMsSUFBSSxFQUFFLE1BQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksRUFBRSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQ3ZXO3FCQUFNO29CQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO29CQUN2RCxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDO2lCQUMvQjthQUNGO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsa0JBQWtCLENBQUMsT0FBZSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBcUIsRUFBRSxFQUFFO1lBQ2hJLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRTtnQkFDZixJQUFJLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQztnQkFDeEMsOENBQThDO2dCQUM5QywrQ0FBK0M7Z0JBQy9DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDeEMsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDeEIsS0FBSyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ3RELEtBQUssQ0FBQyxhQUFhLEdBQUcsS0FBSyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsZUFBZSxDQUFDLENBQUM7b0JBQ3RLLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDN0QsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQztvQkFDakssS0FBSyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDLENBQUM7b0JBQ3ZFLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNsQztnQkFDRCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUNqRCxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUU7b0JBQ2IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztvQkFDL0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUE0SCxFQUFFLE1BQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksRUFBRSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQy9kO3FCQUFNO29CQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDO29CQUN4RCxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDO2lCQUMvQjthQUNGO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUM7OztJQUdBO0lBQ0YsZ0JBQWdCLENBQUMsT0FBZSxDQUFDO1FBQy9CLElBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUNuRyxJQUFJLEVBQUUsQ0FBQyxHQUFxQixFQUFFLEVBQUU7Z0JBQzlCLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRTtvQkFDZixnQ0FBZ0M7b0JBQ2hDLCtDQUErQztvQkFDL0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO3dCQUN4QyxJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUN4QixJQUFJLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFOzRCQUM3QixpQ0FBaUM7NEJBQ2pDLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxDQUFDLENBQUM7NEJBQzVCLEtBQUssQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUN0RCxLQUFLLENBQUMsYUFBYSxHQUFHLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDOzRCQUN0SyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7NEJBQzdELEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7NEJBQzdFLEtBQUssQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQSxhQUFhLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQzs0QkFDMUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7eUJBQ2pDO3FCQUNGO29CQUNELElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7b0JBQ2hELElBQUksSUFBSSxJQUFJLENBQUMsRUFBRTt3QkFDYixJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO3dCQUMvQyxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsR0FBRyxDQUFDLElBQTRILEVBQUUsTUFBYyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLFlBQVksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLEVBQUUsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztxQkFDL2Q7eUJBQU07d0JBQ0wsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7d0JBQ3ZELElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7cUJBQy9CO2lCQUNGO1lBQ0gsQ0FBQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7Ozs7TUFLRTtJQUNGLGVBQWUsQ0FBQyxVQUFrQyxFQUFFLGFBQXFCLEVBQUUsU0FBaUI7UUFDMUYsSUFBSSxHQUFtQixDQUFDO1FBQ3hCLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUErQixFQUFFLEVBQUU7WUFDckQsSUFBSSxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksS0FBSyxhQUFhLEVBQUU7Z0JBQzFDLEdBQUcsR0FBRyxTQUFTLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQWlCLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLElBQUksU0FBUyxDQUFDLENBQUM7YUFDOUU7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsaUJBQWlCLENBQUMsTUFBVyxFQUFFLE9BQVk7UUFDekMsT0FBTyxPQUFPLE1BQU0sQ0FBQyxVQUFVLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM1SSxDQUFDO0lBR0Q7Ozs7T0FJRztJQUNILFVBQVUsQ0FBQyxNQUFXO1FBQ3BCLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUM1RCxDQUFDO0lBR0Q7Ozs7T0FJRztJQUNILG1CQUFtQixDQUFDLEtBQWE7UUFDL0IsT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQ25ILENBQUM7SUFBQSxDQUFDO0lBRUY7Ozs7T0FJRztJQUNILFlBQVksQ0FBQyxNQUFXLEVBQUUsT0FBWTtRQUNwQyxJQUFJLE1BQU0sQ0FBQyxLQUFLLEtBQUssWUFBWSxFQUFFO1lBQ2pDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDMUI7YUFBTSxJQUFJLE1BQU0sQ0FBQyxLQUFLLEtBQUssUUFBUSxFQUFFO1lBQ3BDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDdEI7SUFDSCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFlBQVksQ0FBQyxLQUFpQixFQUFFLFNBQWlCO1FBQy9DLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDLHlCQUF5QjtRQUNsRCxNQUFNLFlBQVksR0FBRyxpQkFBaUIsU0FBUyxFQUFFLENBQUM7UUFDbEQsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsUUFBUSxFQUFFLHFCQUFxQixDQUFDLENBQUM7SUFDN0QsQ0FBQzt1R0FseEJVLGtCQUFrQjsyRkFBbEIsa0JBQWtCLGlKQVNsQixZQUFZLDRSQUlaLGNBQWMscUVDdEMzQix1aVdBK0lBOzsyRkR0SGEsa0JBQWtCO2tCQUw5QixTQUFTOytCQUNFLGdCQUFnQjtpUkFNakIsZUFBZTtzQkFBdkIsS0FBSztnQkFPbUIsU0FBUztzQkFBakMsU0FBUzt1QkFBQyxZQUFZO2dCQUNxQixhQUFhO3NCQUF4RCxTQUFTO3VCQUFDLGFBQWEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7Z0JBRWQsYUFBYTtzQkFBeEMsU0FBUzt1QkFBQyxlQUFlO2dCQUNDLFdBQVc7c0JBQXJDLFNBQVM7dUJBQUMsY0FBYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgT25Jbml0LCBWaWV3Q2hpbGQsIElucHV0LCBTaW1wbGVDaGFuZ2VzLCBFdmVudEVtaXR0ZXIsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNYXRQYWdpbmF0b3IgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9wYWdpbmF0b3InO1xyXG5pbXBvcnQgeyBNYXRUYWJsZURhdGFTb3VyY2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC90YWJsZSc7XHJcbmltcG9ydCB7IEFwaVJlc3BvbnNlTW9kZWwsIEFwcG9pbnRtZW50TW9kZWwsIEN1c3RvbUVuY291bnRlck1vZGVsLCBDdXN0b21PYnNNb2RlbCwgQ3VzdG9tVmlzaXRNb2RlbCwgUHJvdmlkZXJBdHRyaWJ1dGVNb2RlbCwgUmVzY2hlZHVsZUFwcG9pbnRtZW50TW9kYWxSZXNwb25zZU1vZGVsIH0gZnJvbSAnLi4vLi4vbW9kZWwvbW9kZWwnO1xyXG5pbXBvcnQgeyBBcHBvaW50bWVudFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcHBvaW50bWVudC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVmlzaXRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvdmlzaXQuc2VydmljZSc7XHJcbi8vIGltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IENvcmVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvY29yZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVG9hc3RyU2VydmljZSB9IGZyb20gJ25neC10b2FzdHInO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XHJcbmltcG9ydCB7IGdldENhY2hlRGF0YSwgY2hlY2tJZkRhdGVPbGRUaGFuT25lRGF5IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbGl0eS1mdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBkb2N0b3JEZXRhaWxzLCBsYW5ndWFnZXMsIHZpc2l0VHlwZXMgfSBmcm9tICcuLi8uLi9jb25maWcvY29uc3RhbnQnO1xyXG4vLyBpbXBvcnQgeyBBcHBDb25maWdTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYXBwLWNvbmZpZy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWluZG1hcFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9taW5kbWFwLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgRm9ybUdyb3VwLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBNYXRNZW51VHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL21lbnUnO1xyXG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcclxuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi10YWJsZS1ncmlkJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vdGFibGUtZ3JpZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vdGFibGUtZ3JpZC5jb21wb25lbnQuc2NzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUYWJsZUdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIFxyXG4gIEBJbnB1dCgpIHBsdWdpbkNvbmZpZ09iczogYW55O1xyXG4gIGRpc3BsYXllZEFwcG9pbnRtZW50Q29sdW1uczogYW55ID0gW107XHJcbiAgZGlzcGxheWVkQ29sdW1uczogc3RyaW5nW10gPSBbXTtcclxuICBkYXRhU291cmNlID0gbmV3IE1hdFRhYmxlRGF0YVNvdXJjZTxhbnk+KCk7XHJcbiAgcGF0aWVudFJlZ0ZpZWxkczogc3RyaW5nW10gPSBbXTtcclxuICBpc01DQ1VzZXIgPSBmYWxzZTtcclxuXHJcbiAgQFZpZXdDaGlsZChNYXRQYWdpbmF0b3IpIHBhZ2luYXRvcjogTWF0UGFnaW5hdG9yO1xyXG4gIEBWaWV3Q2hpbGQoJ3NlYXJjaElucHV0JywgeyBzdGF0aWM6IHRydWUgfSkgc2VhcmNoRWxlbWVudDogRWxlbWVudFJlZjtcclxuICBmaWx0ZXJlZERhdGVBbmRSYW5nZUZvcm06IEZvcm1Hcm91cDtcclxuICBAVmlld0NoaWxkKCd0ZW1wUGFnaW5hdG9yJykgdGVtcFBhZ2luYXRvcjogTWF0UGFnaW5hdG9yO1xyXG4gIEBWaWV3Q2hpbGQoTWF0TWVudVRyaWdnZXIpIG1lbnVUcmlnZ2VyOiBNYXRNZW51VHJpZ2dlcjtcclxuXHJcbiAgcGFuZWxFeHBhbmRlZDogYm9vbGVhbiA9IHRydWU7XHJcbiAgbW9kZTogJ2RhdGUnIHwgJ3JhbmdlJyA9ICdkYXRlJztcclxuICBtYXhEYXRlOiBEYXRlO1xyXG5cclxuICBhcHBvaW50bWVudHM6IEFwcG9pbnRtZW50TW9kZWxbXSA9IFtdO1xyXG4gIHByaW9yaXR5VmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuICBhd2FpdGluZ1Zpc2l0czogQ3VzdG9tVmlzaXRNb2RlbFtdID0gW107XHJcbiAgaW5Qcm9ncmVzc1Zpc2l0czogQ3VzdG9tVmlzaXRNb2RlbFtdID0gW107XHJcbiAgY29tcGxldGVkVmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuICBmb2xsb3dVcFZpc2l0czogQ3VzdG9tVmlzaXRNb2RlbFtdID0gW107XHJcblxyXG4gIHNwZWNpYWxpemF0aW9uOiBzdHJpbmcgPSAnJztcclxuICB2aXNpdHNMZW5ndGhDb3VudDogbnVtYmVyID0gMDtcclxuICBpc0ZpbHRlckFwcGxpZWQgPSBmYWxzZTtcclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMucGFnaW5hdG9yO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGFwcG9pbnRtZW50U2VydmljZTogQXBwb2ludG1lbnRTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB2aXNpdFNlcnZpY2U6IFZpc2l0U2VydmljZSxcclxuICAgIHByaXZhdGUgY29yZVNlcnZpY2U6IENvcmVTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB0b2FzdHI6IFRvYXN0clNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHRyYW5zbGF0ZVNlcnZpY2U6IFRyYW5zbGF0ZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1pbmRtYXBTZXJ2aWNlOiBNaW5kbWFwU2VydmljZSxcclxuICAgIHByaXZhdGUgc2FuaXRpemVyOiBEb21TYW5pdGl6ZXJcclxuICAgIC8vIHByaXZhdGUgYXBwQ29uZmlnU2VydmljZTogQXBwQ29uZmlnU2VydmljZVxyXG4gICkgeyBcclxuICAgICAgLy8gT2JqZWN0LmtleXModGhpcy5hcHBDb25maWdTZXJ2aWNlLnBhdGllbnRfcmVnaXN0cmF0aW9uKS5mb3JFYWNoKG9iaj0+e1xyXG4gICAgICAvLyAgIHRoaXMucGF0aWVudFJlZ0ZpZWxkcy5wdXNoKC4uLnRoaXMuYXBwQ29uZmlnU2VydmljZS5wYXRpZW50X3JlZ2lzdHJhdGlvbltvYmpdLmZpbHRlcihlPT5lLmlzX2VuYWJsZWQpLm1hcChlPT5lLm5hbWUpKTtcclxuICAgICAgLy8gfSk7IFxyXG4gICAgICB0aGlzLmZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybSA9IHRoaXMuY3JlYXRlRmlsdGVyZWREYXRlUmFuZ2VGb3JtKCk7XHJcbiAgICAgIHRoaXMuZGlzcGxheWVkQ29sdW1ucyA9IHRoaXMuZGlzcGxheWVkQ29sdW1ucy5maWx0ZXIoY29sPT4oY29sIT09J2FnZScgfHwgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnQWdlJykpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBmaWx0ZXJlZCBkYXRlIHJhbmdlIGZvcm0gd2l0aCByZXF1aXJlZCBkYXRlIGZpZWxkc1xyXG4gICAqIEByZXR1cm4ge0Zvcm1Hcm91cH0gLSBUaGUgY3JlYXRlZCBmb3JtIGdyb3VwXHJcbiAgICovXHJcbiAgY3JlYXRlRmlsdGVyZWREYXRlUmFuZ2VGb3JtKCk6IEZvcm1Hcm91cCB7XHJcbiAgICByZXR1cm4gbmV3IEZvcm1Hcm91cCh7XHJcbiAgICAgIGRhdGU6IG5ldyBGb3JtQ29udHJvbCgnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdKSxcclxuICAgICAgc3RhcnREYXRlOiBuZXcgRm9ybUNvbnRyb2wobnVsbCwgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgIGVuZERhdGU6IG5ldyBGb3JtQ29udHJvbChudWxsLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UudXNlKGdldENhY2hlRGF0YShmYWxzZSwgbGFuZ3VhZ2VzLlNFTEVDVEVEX0xBTkdVQUdFKSk7XHJcbiAgICBsZXQgcHJvdmlkZXIgPSBnZXRDYWNoZURhdGEodHJ1ZSwgZG9jdG9yRGV0YWlscy5QUk9WSURFUik7XHJcbiAgICBpZiAocHJvdmlkZXIpIHtcclxuICAgICAgaWYgKHByb3ZpZGVyLmF0dHJpYnV0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVjaWFsaXphdGlvbiA9IHRoaXMuZ2V0U3BlY2lhbGl6YXRpb24ocHJvdmlkZXIuYXR0cmlidXRlcyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiQXBwb2ludG1lbnRcIil7XHJcbiAgICAgICAgdGhpcy5nZXRBcHBvaW50bWVudHMoKTtcclxuICAgICAgfVxyXG4gICAgICBpZih0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyA9PT0gXCJBd2FpdGluZ1wiKXtcclxuICAgICAgICB0aGlzLmdldEF3YWl0aW5nVmlzaXRzKDEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMucGx1Z2luQ29uZmlnT2JzPy5wbHVnaW5Db25maWdPYnNGbGFnID09PSBcIlByaW9yaXR5XCIpe1xyXG4gICAgICAgIHRoaXMuZ2V0UHJpb3JpdHlWaXNpdHMoMSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiSW5Qcm9ncmVzc1wiKXtcclxuICAgICAgICB0aGlzLmdldEluUHJvZ3Jlc3NWaXNpdHMoMSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiQ29tcGxldGVkXCIpe1xyXG4gICAgICAgIHRoaXMuZ2V0Q29tcGxldGVkVmlzaXRzKCk7XHJcbiAgICAgIH1pZih0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyA9PT0gXCJGb2xsb3dVcFwiKXtcclxuICAgICAgICB0aGlzLmdldEZvbGxvd1VwVmlzaXQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5tYXhEYXRlID0gdGhpcy5wbHVnaW5Db25maWdPYnMuZmlsdGVyT2JzLmZpbHRlckRhdGVNYXhcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIER5bm1haWMgbGFiZWwgRGlzcGxheVxyXG4gICAqIEBwYXJhbSBjaGFuZ2VzIHBsdWdpbkNvbmZpZ09icyBcclxuICAgKi9cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAoY2hhbmdlc1tcInBsdWdpbkNvbmZpZ09ic1wiXSAmJiBjaGFuZ2VzW1wicGx1Z2luQ29uZmlnT2JzXCJdLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICB0aGlzLmRpc3BsYXllZEFwcG9pbnRtZW50Q29sdW1ucyA9IHRoaXMucGx1Z2luQ29uZmlnT2JzLnRhYmxlQ29sdW1ucyB8fCBbXTtcclxuICAgICAgdGhpcy5kaXNwbGF5ZWRDb2x1bW5zID0gdGhpcy5kaXNwbGF5ZWRBcHBvaW50bWVudENvbHVtbnMubWFwKFxyXG4gICAgICAgIChjb2x1bW4pID0+IGNvbHVtbi5rZXlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgcGF0aWVudCB0eXBlIHN0eWxlXHJcbiAgICogQHBhcmFtIHR5cGUgXHJcbiAgICovXHJcblxyXG4gIGdldFBhdGllbnRUeXBlU3R5bGUodHlwZTogc3RyaW5nKTogeyBjb2xvcjogc3RyaW5nOyBiYWNrZ3JvdW5kQ29sb3I6IHN0cmluZyB9IHtcclxuICAgIGNvbnN0IHR5cGVDb25maWcgPSB0aGlzLnBsdWdpbkNvbmZpZ09icy5wYXRpZW50VHlwZS5maW5kKCh0OiBhbnkpID0+IHQua2V5ID09PSB0eXBlKTtcclxuICAgIHJldHVybiB0eXBlQ29uZmlnXHJcbiAgICAgID8gdHlwZUNvbmZpZy5zdHlsZVxyXG4gICAgICA6IHsgY29sb3I6IFwiIzAwMFwiLCBiYWNrZ3JvdW5kQ29sb3I6IFwiI2NjY1wiIH07IC8vIERlZmF1bHQgZmFsbGJhY2sgc3R5bGluZ1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBwYXRpZW50IHR5cGUgZWl0aGVyIG5ldyBvciBvbGQgXHJcbiAgICogQHBhcmFtIHR5cGUgXHJcbiAgICovXHJcbiAgZ2V0UGF0aWVudFR5cGVMYWJlbCh0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgdHlwZUNvbmZpZyA9IHRoaXMucGx1Z2luQ29uZmlnT2JzLnBhdGllbnRUeXBlLmZpbmQoKHQ6IGFueSkgPT4gdC5rZXkgPT09IHR5cGUpO1xyXG4gICAgcmV0dXJuIHR5cGVDb25maWcgPyB0eXBlQ29uZmlnLmxhYmVsIDogXCJVbmtub3duXCI7IC8vIERlZmF1bHQgZmFsbGJhY2sgbGFiZWxcclxuICB9XHJcblxyXG4gIGdldFZpc2l0VHlwZVN0eWxlKHR5cGU6IHN0cmluZyk6IHsgY29sb3I6IHN0cmluZzsgYmFja2dyb3VuZENvbG9yOiBzdHJpbmcgfSB7XHJcbiAgICBjb25zdCB2aXNpdFR5cGUgPSB0aGlzLnBsdWdpbkNvbmZpZ09icy52aXNpdFR5cGUuZmluZCgodjogYW55KSA9PiB2LnR5cGUgPT09IHR5cGUpO1xyXG4gICAgcmV0dXJuIHZpc2l0VHlwZT8uW3R5cGVdPy5zdHlsZSB8fCB7IGNvbG9yOiBcIiMwMDBcIiwgYmFja2dyb3VuZENvbG9yOiBcIiNjY2NcIiB9OyAvLyBEZWZhdWx0IHN0eWxlXHJcbiAgfVxyXG5cclxuICBnZXRWaXNpdFR5cGVMYWJlbCh0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgdmlzaXRUeXBlID0gdGhpcy5wbHVnaW5Db25maWdPYnMudmlzaXRUeXBlLmZpbmQoKHY6IGFueSkgPT4gdi50eXBlID09PSB0eXBlKTtcclxuICAgIHJldHVybiB2aXNpdFR5cGU/Llt0eXBlXT8ubGFiZWwgfHwgXCJVbmtub3duXCI7IC8vIERlZmF1bHQgbGFiZWxcclxuICB9XHJcblxyXG4gIGdldFZpc2l0VHlwZUljb24odHlwZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHZpc2l0VHlwZSA9IHRoaXMucGx1Z2luQ29uZmlnT2JzLnZpc2l0VHlwZS5maW5kKCh2OiBhbnkpID0+IHYudHlwZSA9PT0gdHlwZSk7XHJcbiAgICByZXR1cm4gdmlzaXRUeXBlPy5bdHlwZV0/LnN0eWxlPy5pY29uIHx8IFwiXCI7IC8vIERlZmF1bHQgZW1wdHkgaWNvblxyXG4gIH1cclxuXHJcbiAgZm9ybWF0VmlzaXREYXRlKGRhdGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gZGF0ZSA/IGZvcm1hdERhdGUoZGF0ZSwgJ2RkIE1NTSwgeXl5eScsICdlbi1VUycpIDogJyc7XHJcbiAgfVxyXG5cclxuXHJcbiBcclxuXHJcbiAgLyoqXHJcbiAgKiBSZXRyZWl2ZSB0aGUgY2hpZWYgY29tcGxhaW50cyBmb3IgdGhlIHZpc2l0XHJcbiAgKiBAcGFyYW0ge0N1c3RvbVZpc2l0TW9kZWx9IHZpc2l0IC0gVmlzaXRcclxuICAqIEByZXR1cm4ge3N0cmluZ1tdfSAtIENoaWVmIGNvbXBsYWludHMgYXJyYXlcclxuICAqL1xyXG4gIGdldENoZWlmQ29tcGxhaW50KHZpc2l0OiBDdXN0b21WaXNpdE1vZGVsKTogc3RyaW5nW10ge1xyXG4gICAgbGV0IHJlY2VudDogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IGVuY291bnRlcnMgPSB2aXNpdC5lbmNvdW50ZXJzO1xyXG4gICAgZW5jb3VudGVycy5mb3JFYWNoKChlbmNvdW50ZXI6IEN1c3RvbUVuY291bnRlck1vZGVsKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc3BsYXkgPSBlbmNvdW50ZXIudHlwZT8ubmFtZTtcclxuICAgICAgaWYgKGRpc3BsYXkubWF0Y2godmlzaXRUeXBlcy5BRFVMVElOSVRJQUwpICE9PSBudWxsKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzID0gZW5jb3VudGVyLm9icztcclxuICAgICAgICBvYnMuZm9yRWFjaCgoY3VycmVudE9iczogQ3VzdG9tT2JzTW9kZWwpID0+IHtcclxuICAgICAgICAgIGlmIChjdXJyZW50T2JzLmNvbmNlcHRfaWQgPT0gMTYzMjEyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb21wbGFpbnQgPSB0aGlzLnZpc2l0U2VydmljZS5nZXREYXRhMihjdXJyZW50T2JzKT8udmFsdWVfdGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAoJ+KWuicsICdnJyksICcnKS5zcGxpdCgnPGI+Jyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY3VycmVudENvbXBsYWludC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9iczEgPSBjdXJyZW50Q29tcGxhaW50W2ldLnNwbGl0KCc8Jyk7XHJcbiAgICAgICAgICAgICAgaWYgKCFvYnMxWzBdLm1hdGNoKHZpc2l0VHlwZXMuQVNTT0NJQVRFRF9TWU1QVE9NUykpIHtcclxuICAgICAgICAgICAgICAgIHJlY2VudC5wdXNoKG9iczFbMF0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZWNlbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIENoZWNrIGhvdyBvbGQgdGhlIGRhdGUgaXMgZnJvbSBub3dcclxuICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhIC0gRGF0ZSBpbiBzdHJpbmcgZm9ybWF0XHJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gUmV0dXJucyBob3cgb2xkIHRoZSBkYXRlIGlzIGZyb20gbm93XHJcbiAgKi9cclxuICBjaGVja0lmRGF0ZU9sZFRoYW5PbmVEYXkoZGF0YTogc3RyaW5nKSB7XHJcbiAgICBsZXQgaG91cnMgPSBtb21lbnQoZGF0YSkuZGlmZihtb21lbnQoKSwgJ2hvdXJzJyk7XHJcbiAgICBsZXQgbWludXRlcyA9IG1vbWVudChkYXRhKS5kaWZmKG1vbWVudCgpLCAnbWludXRlcycpO1xyXG4gICAgaWYoaG91cnMgPiAyNCkge1xyXG4gICAgICByZXR1cm4gbW9tZW50KGRhdGEpLmZvcm1hdCgnREQgTU1NLCBZWVlZIGhoOm1tIEEnKTtcclxuICAgIH07XHJcbiAgICBpZiAoaG91cnMgPCAxKSB7XHJcbiAgICAgIGlmKG1pbnV0ZXMgPCAwKSByZXR1cm4gYER1ZSA6ICR7bW9tZW50KGRhdGEpLmZvcm1hdCgnREQgTU1NLCBZWVlZIGhoOm1tIEEnKX1gO1xyXG4gICAgICByZXR1cm4gYCR7bWludXRlc30gbWludXRlc2A7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7aG91cnN9IGhyc2A7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJlc2NoZWR1bGUgYXBwb2ludG1lbnRcclxuICAqIEBwYXJhbSB7QXBwb2ludG1lbnRNb2RlbH0gYXBwb2ludG1lbnQgLSBBcHBvaW50bWVudCB0byBiZSByZXNjaGVkdWxlZFxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIHJlc2NoZWR1bGUoYXBwb2ludG1lbnQ6IEFwcG9pbnRtZW50TW9kZWwpIHtcclxuICAgIGNvbnN0IGxlbiA9IGFwcG9pbnRtZW50LnZpc2l0LmVuY291bnRlcnMuZmlsdGVyKChlOiBDdXN0b21FbmNvdW50ZXJNb2RlbCkgPT4ge1xyXG4gICAgICByZXR1cm4gKGUudHlwZS5uYW1lID09IHZpc2l0VHlwZXMuUEFUSUVOVF9FWElUX1NVUlZFWSB8fCBlLnR5cGUubmFtZSA9PSB2aXNpdFR5cGVzLlZJU0lUX0NPTVBMRVRFKTtcclxuICAgIH0pLmxlbmd0aDtcclxuICAgIGNvbnN0IGlzQ29tcGxldGVkID0gQm9vbGVhbihsZW4pO1xyXG4gICAgaWYgKGlzQ29tcGxldGVkKSB7XHJcbiAgICAgIHRoaXMudG9hc3RyLmVycm9yKHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KFwiVmlzaXQgaXMgYWxyZWFkeSBjb21wbGV0ZWQsIGl0IGNhbid0IGJlIHJlc2NoZWR1bGVkLlwiKSwgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1Jlc2NoZWR1bGluZyBmYWlsZWQhJykpO1xyXG4gICAgfSBlbHNlIGlmKGFwcG9pbnRtZW50LnZpc2l0U3RhdHVzID09ICdWaXNpdCBJbiBQcm9ncmVzcycpIHtcclxuICAgICAgdGhpcy50b2FzdHIuZXJyb3IodGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXCJWaXNpdCBpcyBpbiBwcm9ncmVzcywgaXQgY2FuJ3QgYmUgcmVzY2hlZHVsZWQuXCIpLCB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnUmVzY2hlZHVsaW5nIGZhaWxlZCEnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvcmVTZXJ2aWNlLm9wZW5SZXNjaGVkdWxlQXBwb2ludG1lbnRNb2RhbCh0aGlzLnBsdWdpbkNvbmZpZ09icy5taW5kbWFwVVJMLCBhcHBvaW50bWVudCkuc3Vic2NyaWJlKChyZXM6IFJlc2NoZWR1bGVBcHBvaW50bWVudE1vZGFsUmVzcG9uc2VNb2RlbCkgPT4ge1xyXG4gICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgIGxldCBuZXdTbG90ID0gcmVzO1xyXG4gICAgICAgICAgdGhpcy5jb3JlU2VydmljZS5vcGVuUmVzY2hlZHVsZUFwcG9pbnRtZW50Q29uZmlybU1vZGFsKHsgYXBwb2ludG1lbnQsIG5ld1Nsb3QgfSkuc3Vic2NyaWJlKChyZXN1bHQ6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgIGFwcG9pbnRtZW50LmFwcG9pbnRtZW50SWQgPSBhcHBvaW50bWVudC5pZDtcclxuICAgICAgICAgICAgICBhcHBvaW50bWVudC5zbG90RGF0ZSA9IG1vbWVudChuZXdTbG90LmRhdGUsIFwiWVlZWS1NTS1ERFwiKS5mb3JtYXQoJ0REL01NL1lZWVknKTtcclxuICAgICAgICAgICAgICBhcHBvaW50bWVudC5zbG90VGltZSA9IG5ld1Nsb3Quc2xvdDtcclxuICAgICAgICAgICAgICB0aGlzLmFwcG9pbnRtZW50U2VydmljZS5yZXNjaGVkdWxlQXBwb2ludG1lbnQodGhpcy5wbHVnaW5Db25maWdPYnMubWluZG1hcFVSTCwgYXBwb2ludG1lbnQpLnN1YnNjcmliZSgocmVzOiBBcGlSZXNwb25zZU1vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLm1pbmRtYXBTZXJ2aWNlLm5vdGlmeUh3Rm9yUmVzY2hlZHVsZUFwcG9pbnRtZW50KHRoaXMucGx1Z2luQ29uZmlnT2JzLm1pbmRtYXBVUkwsIGFwcG9pbnRtZW50KVxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmdldEFwcG9pbnRtZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRvYXN0ci5zdWNjZXNzKHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KFwiVGhlIGFwcG9pbnRtZW50IGhhcyBiZWVuIHJlc2NoZWR1bGVkIHN1Y2Nlc3NmdWxseSFcIiksIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdSZXNjaGVkdWxpbmcgc3VjY2Vzc2Z1bCEnKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRvYXN0ci5zdWNjZXNzKG1lc3NhZ2UsIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdSZXNjaGVkdWxpbmcgZmFpbGVkIScpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogQ2FuY2VsIGFwcG9pbnRtZW50XHJcbiAgKiBAcGFyYW0ge0FwcG9pbnRtZW50TW9kZWx9IGFwcG9pbnRtZW50IC0gQXBwb2ludG1lbnQgdG8gYmUgcmVzY2hlZHVsZWRcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICBjYW5jZWwoYXBwb2ludG1lbnQ6IEFwcG9pbnRtZW50TW9kZWwpIHtcclxuICAgIGlmKGFwcG9pbnRtZW50LnZpc2l0U3RhdHVzID09ICdWaXNpdCBJbiBQcm9ncmVzcycpIHtcclxuICAgICAgdGhpcy50b2FzdHIuZXJyb3IodGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXCJWaXNpdCBpcyBpbiBwcm9ncmVzcywgaXQgY2FuJ3QgYmUgY2FuY2VsbGVkLlwiKSwgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ0NhbmNlbGluZyBmYWlsZWQhJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvcmVTZXJ2aWNlLm9wZW5Db25maXJtQ2FuY2VsQXBwb2ludG1lbnRNb2RhbCh0aGlzLnBsdWdpbkNvbmZpZ09icz8ubWluZG1hcFVSTCwgYXBwb2ludG1lbnQpLnN1YnNjcmliZSgocmVzOiBib29sZWFuKSA9PiB7XHJcbiAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICB0aGlzLnRvYXN0ci5zdWNjZXNzKHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdUaGUgQXBwb2ludG1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGNhbmNlbGVkLicpLHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdDYW5jZWxpbmcgc3VjY2Vzc2Z1bCcpKTtcclxuICAgICAgICB0aGlzLmdldEFwcG9pbnRtZW50cygpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IHVzZXIgdXVpZCBmcm9tIGxvY2Fsc3RvcmFnZSB1c2VyXHJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVXNlciB1dWlkXHJcbiAgKi9cclxuICBnZXQgdXNlcklkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gZ2V0Q2FjaGVEYXRhKHRydWUsIGRvY3RvckRldGFpbHMuVVNFUikudXVpZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogQXBwbHkgZmlsdGVyIG9uIGEgZGF0YXNvdXJjZVxyXG4gICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBJbnB1dCdzIGNoYW5nZSBldmVudFxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGFwcGx5RmlsdGVyKGV2ZW50OiBFdmVudCkge1xyXG4gICAgY29uc3QgZmlsdGVyVmFsdWUgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgdGhpcy5kYXRhU291cmNlLmZpbHRlciA9IGZpbHRlclZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdGhpcy5pc0ZpbHRlckFwcGxpZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBDbGVhciBmaWx0ZXIgZnJvbSBhIGRhdGFzb3VyY2VcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICBjbGVhckZpbHRlcigpIHtcclxuICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXIgPSBudWxsO1xyXG4gICAgdGhpcy5zZWFyY2hFbGVtZW50Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgdGhpcy5pc0ZpbHRlckFwcGxpZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyBpZiB0aGUgZmllbGQgaXMgaW4gcGF0aWVudCByZWdpc3RyYXRpb24gZmllbGRzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIFRoZSBmaWVsZCBuYW1lXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gLSBUcnVlIGlmIHByZXNlbnQsIGVsc2UgZmFsc2VcclxuICAgKi9cclxuICBjaGVja1BhdGllbnRSZWdGaWVsZChmaWVsZE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMucGF0aWVudFJlZ0ZpZWxkcy5pbmRleE9mKGZpZWxkTmFtZSkgIT09IC0xO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBSZXR1cm5zIHRoZSBXaGF0c0FwcCBsaW5rIGZvciBhIGdpdmVuIHRlbGVwaG9uZSBudW1iZXJcclxuICAqIEBwYXJhbSB7c3RyaW5nfSB0ZWxlcGhvbmVOdW1iZXIgLSBUaGUgdGVsZXBob25lIG51bWJlciB0byBnZW5lcmF0ZSB0aGUgbGluayBmb3JcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBUaGUgV2hhdHNBcHAgbGlua1xyXG4gICovXHJcbiAgZ2V0V2hhdHNBcHBMaW5rKHRlbGVwaG9uZU51bWJlcjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLnZpc2l0U2VydmljZS5nZXRXaGF0c2FwcExpbmsodGVsZXBob25lTnVtYmVyKTtcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgLyoqXHJcbiAgICogUmV0cmlldmVzIHRoZSB0ZWxlcGhvbmUgbnVtYmVyIGZyb20gdGhlIHBlcnNvbidzIGF0dHJpYnV0ZXNcclxuICAgKiBAcGFyYW0ge0FwcG9pbnRtZW50TW9kZWxbJ3Zpc2l0J11bJ3BlcnNvbiddfSBwZXJzb24gLSBUaGUgcGVyc29uIG9iamVjdCBjb250YWluaW5nIGF0dHJpYnV0ZXNcclxuICAgKiBAcmV0dXJuIHtzdHJpbmcgfCB1bmRlZmluZWR9IC0gVGhlIHBlcnNvbidzIHRlbGVwaG9uZSBudW1iZXIgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxyXG4gICAqL1xyXG4gIGdldFRlbGVwaG9uZU51bWJlcihwZXJzb246IEFwcG9pbnRtZW50TW9kZWxbJ3Zpc2l0J11bJ3BlcnNvbiddKSB7XHJcbiAgICByZXR1cm4gcGVyc29uPy5wZXJzb25fYXR0cmlidXRlLmZpbmQoKHY6IHsgcGVyc29uX2F0dHJpYnV0ZV90eXBlX2lkOiBudW1iZXI7IH0pID0+IHYucGVyc29uX2F0dHJpYnV0ZV90eXBlX2lkID09IDgpPy52YWx1ZTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDbG9zZXMgdGhlIG1lbnUgaWYgaXQncyBvcGVuXHJcbiAgICovXHJcbiAgY2xvc2VNZW51KCkge1xyXG4gICAgaWYgKHRoaXMubWVudVRyaWdnZXIpIHtcclxuICAgICAgdGhpcy5tZW51VHJpZ2dlci5jbG9zZU1lbnUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBtb2RlIGZvciB0aGUgY29tcG9uZW50IChlaXRoZXIgJ2RhdGUnIG9yICdyYW5nZScpXHJcbiAgICogQHBhcmFtIHsnZGF0ZScgfCAncmFuZ2UnfSBtb2RlIC0gVGhlIG1vZGUgdG8gc2V0XHJcbiAgICovXHJcbiAgc2V0TW9kZShtb2RlOiAnZGF0ZScgfCAncmFuZ2UnKSB7XHJcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdHMgYSBkYXRlIGludG8gJ1lZWVktTU0tREQnIGZvcm1hdFxyXG4gICAqIEBwYXJhbSB7YW55fSBkYXRlIC0gVGhlIGRhdGUgdG8gZm9ybWF0XHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSBmb3JtYXR0ZWQgZGF0ZVxyXG4gICAqL1xyXG4gIGZvcm1hdERhdGUoZGF0ZTogYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGxvY2FsRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgY29uc3QgeWVhciA9IGxvY2FsRGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcobG9jYWxEYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGxvY2FsRGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0cyBhIHJlbGF0aXZlIHRpbWUgc3RyaW5nIChlLmcuLCBcIjIgaG91cnNcIiwgXCIxIGRheVwiKSB0byBhIGRhdGUgc3RyaW5nXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVGltZSAtIFRoZSByZWxhdGl2ZSB0aW1lIHN0cmluZ1xyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBUaGUgcmVzdWx0aW5nIGRhdGUgaW4gJ1lZWVktTU0tREQnIGZvcm1hdFxyXG4gICAqIEB0aHJvd3Mge0Vycm9yfSAtIFRocm93cyBlcnJvciBmb3IgaW52YWxpZCB0aW1lIHVuaXRzXHJcbiAgICovXHJcbiAgY29udmVydFRvRGF0ZShyZWxhdGl2ZVRpbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgW3ZhbHVlLCB1bml0XSA9IHJlbGF0aXZlVGltZS5zcGxpdCgnICcpO1xyXG4gICAgY29uc3QgYW1vdW50ID0gcGFyc2VJbnQodmFsdWUsIDEwKTsgICAgXHJcbiAgICBcclxuICAgIGlmIChbJ2hvdXInLCAnaG91cnMnXS5pbmNsdWRlcyh1bml0LnRvTG93ZXJDYXNlKCkpKSBub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgLSBhbW91bnQpO1xyXG4gICAgZWxzZSBpZiAoWydtaW51dGUnLCAnbWludXRlcyddLmluY2x1ZGVzKHVuaXQudG9Mb3dlckNhc2UoKSkpIG5vdy5zZXRNaW51dGVzKG5vdy5nZXRNaW51dGVzKCkgLSBhbW91bnQpO1xyXG4gICAgZWxzZSBpZiAoWydkYXknLCAnZGF5cyddLmluY2x1ZGVzKHVuaXQudG9Mb3dlckNhc2UoKSkpIG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBhbW91bnQpO1xyXG4gICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGltZSB1bml0LiBPbmx5IFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIG9yIFwiZGF5c1wiIGFyZSBzdXBwb3J0ZWQuJyk7XHJcbiAgXHJcbiAgICByZXR1cm4gbm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0cyBhIGZvbGxvdy11cCBkYXRlIHN0cmluZyB0byBJU08gZm9ybWF0XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvbGxvd1VwIC0gVGhlIGZvbGxvdy11cCBkYXRlIHN0cmluZ1xyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBUaGUgZm9sbG93LXVwIGRhdGUgaW4gSVNPIHN0cmluZyBmb3JtYXRcclxuICAgKi9cclxuICBjb252ZXJ0VG9JU08oZm9sbG93VXA6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZm9sbG93VXApO1xyXG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpKTtcclxuICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XHJcbiAgfVxyXG5cclxuICBcclxuICAvKipcclxuICAgKiBBcHBsaWVzIGRhdGUgb3IgcmFuZ2UgZmlsdGVyIHRvIHRoZSBkYXRhIHNvdXJjZSBiYXNlZCBvbiBzZWxlY3RlZCBkYXRlKHMpXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGVGaWVsZCAtIFRoZSBmaWVsZCBuYW1lIGZvciB0aGUgZGF0ZSB0byBmaWx0ZXJcclxuICAgKi9cclxuICBhcHBseURhdGVPclJhbmdlRmlsdGVyKGRhdGVGaWVsZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSB0aGlzLmZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5nZXQoJ2RhdGUnKT8udmFsdWU7XHJcbiAgICBjb25zdCBzdGFydERhdGUgPSB0aGlzLmZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5nZXQoJ3N0YXJ0RGF0ZScpPy52YWx1ZTtcclxuICAgIGNvbnN0IGVuZERhdGUgPSB0aGlzLmZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5nZXQoJ2VuZERhdGUnKT8udmFsdWU7XHJcbiAgXHJcbiAgICBpZiAoc2VsZWN0ZWREYXRlKSB7XHJcbiAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSB0aGlzLmZvcm1hdERhdGUoc2VsZWN0ZWREYXRlKTtcclxuXHJcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJQcmVkaWNhdGUgPSAoZGF0YTogYW55LCBmaWx0ZXI6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1EYXRlID0gZGF0ZUZpZWxkICE9PSBcImZvbGxvd1VwXCIgPyBkYXRhW2RhdGVGaWVsZF0uaW5jbHVkZXMoJywnKSA/IHRoaXMuZm9ybWF0RGF0ZShkYXRhW2RhdGVGaWVsZF0pIDogdGhpcy5jb252ZXJ0VG9EYXRlKGRhdGFbZGF0ZUZpZWxkXSkgOiB0aGlzLmZvcm1hdERhdGUodGhpcy5jb252ZXJ0VG9JU08oZGF0YS5mb2xsb3dVcCkpO1xyXG4gICAgICAgIHJldHVybiBpdGVtRGF0ZSA9PT0gZmlsdGVyO1xyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyID0gZm9ybWF0dGVkRGF0ZTtcclxuICAgIH0gZWxzZSBpZiAoc3RhcnREYXRlICYmIGVuZERhdGUpIHtcclxuICAgICAgY29uc3QgZm9ybWF0dGVkU3RhcnREYXRlID0gdGhpcy5mb3JtYXREYXRlKHN0YXJ0RGF0ZSk7XHJcbiAgICAgIGNvbnN0IGZvcm1hdHRlZEVuZERhdGUgPSB0aGlzLmZvcm1hdERhdGUoZW5kRGF0ZSk7XHJcbiAgXHJcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJQcmVkaWNhdGUgPSAoZGF0YTogYW55LCBmaWx0ZXI6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1EYXRlID0gZGF0ZUZpZWxkICE9PSBcImZvbGxvd1VwXCIgPyBkYXRhW2RhdGVGaWVsZF0uaW5jbHVkZXMoJywnKSA/IHRoaXMuZm9ybWF0RGF0ZShkYXRhW2RhdGVGaWVsZF0pIDogdGhpcy5jb252ZXJ0VG9EYXRlKGRhdGFbZGF0ZUZpZWxkXSkgOiB0aGlzLmZvcm1hdERhdGUodGhpcy5jb252ZXJ0VG9JU08oZGF0YS5mb2xsb3dVcCkpO1xyXG4gICAgICAgIHJldHVybiBpdGVtRGF0ZSA+PSBmb3JtYXR0ZWRTdGFydERhdGUgJiYgaXRlbURhdGUgPD0gZm9ybWF0dGVkRW5kRGF0ZTtcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlciA9IGAke2Zvcm1hdHRlZFN0YXJ0RGF0ZX06JHtmb3JtYXR0ZWRFbmREYXRlfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyID0gJyc7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRlbXBQYWdpbmF0b3IuZmlyc3RQYWdlKCk7XHJcbiAgICB0aGlzLmNsb3NlTWVudSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXRzIHRoZSBkYXRlIGZpbHRlciBmb3JtIGFuZCBjbGVhcnMgdGhlIGRhdGEgc291cmNlIGZpbHRlclxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZyAtIElmIHRydWUsIGRvZXNuJ3QgY2xvc2UgdGhlIG1lbnVcclxuICAgKi9cclxuICByZXNldERhdGUoZmxhZzogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLmZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5kYXRhU291cmNlLmZpbHRlciA9ICcnO1xyXG4gICAgdGhpcy5kYXRhU291cmNlLmZpbHRlclByZWRpY2F0ZSA9IChkYXRhOiBhbnksIGZpbHRlcjogc3RyaW5nKSA9PiB0cnVlO1xyXG4gICAgaWYgKCFmbGFnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VNZW51KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0cmlldmVzIGEgc3BlY2lmaWMgYXR0cmlidXRlIGRhdGEgZnJvbSB0aGUgcGVyc29uJ3MgYXR0cmlidXRlc1xyXG4gICAqIEBwYXJhbSB7YW55fSBkYXRhIC0gVGhlIGRhdGEgb2JqZWN0IGNvbnRhaW5pbmcgcGVyc29uIGF0dHJpYnV0ZXNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gcmV0cmlldmVcclxuICAgKiBAcmV0dXJuIHtPYmplY3QgfCBudWxsfSAtIFRoZSBhdHRyaWJ1dGUgbmFtZSBhbmQgdmFsdWUsIG9yIG51bGwgaWYgbm90IGZvdW5kXHJcbiAgICovXHJcbiAgZ2V0QXR0cmlidXRlRGF0YShkYXRhOiBhbnksIGF0dHJpYnV0ZU5hbWU6IHN0cmluZyk6IHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0gfCBudWxsIHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEucGVyc29uX2F0dHJpYnV0ZSkpIHtcclxuICAgICAgY29uc3QgYXR0cmlidXRlID0gZGF0YS5wZXJzb25fYXR0cmlidXRlLmZpbmQoXHJcbiAgICAgICAgKGF0dHI6IGFueSkgPT4gYXR0ci5wZXJzb25fYXR0cmlidXRlX3R5cGU/Lm5hbWUgPT09IGF0dHJpYnV0ZU5hbWVcclxuICAgICAgKTtcclxuICAgICAgaWYgKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBuYW1lOiBhdHRyaWJ1dGUucGVyc29uX2F0dHJpYnV0ZV90eXBlLm5hbWUsXHJcbiAgICAgICAgICB2YWx1ZTogYXR0cmlidXRlLnZhbHVlXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIEdldCBib29rZWQgYXBwb2ludG1lbnRzIGZvciBhIGxvZ2dlZC1pbiBkb2N0b3IgaW4gYSBjdXJyZW50IHllYXJcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICBnZXRBcHBvaW50bWVudHMoKSB7XHJcbiAgICB0aGlzLmFwcG9pbnRtZW50cyA9IFtdO1xyXG4gICAgdGhpcy5hcHBvaW50bWVudFNlcnZpY2UuZ2V0VXNlclNsb3RzKHRoaXMucGx1Z2luQ29uZmlnT2JzPy5taW5kbWFwVVJMLCBnZXRDYWNoZURhdGEodHJ1ZSwgZG9jdG9yRGV0YWlscy5VU0VSKS51dWlkLCBtb21lbnQoKS5zdGFydE9mKCd5ZWFyJykuZm9ybWF0KCdERC9NTS9ZWVlZJyksIG1vbWVudCgpLmVuZE9mKCd5ZWFyJykuZm9ybWF0KCdERC9NTS9ZWVlZJykpXHJcbiAgICAgIC5zdWJzY3JpYmUoKHJlczogQXBpUmVzcG9uc2VNb2RlbCkgPT4geyAgICAgICAgXHJcbiAgICAgICAgdGhpcy52aXNpdHNMZW5ndGhDb3VudCA9IHJlcy5kYXRhPy5sZW5ndGhcclxuICAgICAgICBsZXQgYXBwb2ludG1lbnRzZGF0YSA9IHJlcy5kYXRhO1xyXG4gICAgICAgIGFwcG9pbnRtZW50c2RhdGEuZm9yRWFjaCgoYXBwb2ludG1lbnQ6IEFwcG9pbnRtZW50TW9kZWwpID0+IHtcclxuICAgICAgICAgIGlmIChhcHBvaW50bWVudC5zdGF0dXMgPT0gJ2Jvb2tlZCcgJiYgKGFwcG9pbnRtZW50LnZpc2l0U3RhdHVzID09ICdBd2FpdGluZyBDb25zdWx0J3x8YXBwb2ludG1lbnQudmlzaXRTdGF0dXMgPT0gJ1Zpc2l0IEluIFByb2dyZXNzJykpIHtcclxuICAgICAgICAgICAgaWYgKGFwcG9pbnRtZW50LnZpc2l0KSB7XHJcbiAgICAgICAgICAgICAgYXBwb2ludG1lbnQuY2hlaWZfY29tcGxhaW50ID0gdGhpcy5nZXRDaGVpZkNvbXBsYWludChhcHBvaW50bWVudC52aXNpdCk7XHJcbiAgICAgICAgICAgICAgYXBwb2ludG1lbnQuc3RhcnRzX2luID0gY2hlY2tJZkRhdGVPbGRUaGFuT25lRGF5KGFwcG9pbnRtZW50LnNsb3RKc0RhdGUpO1xyXG4gICAgICAgICAgICAgIGFwcG9pbnRtZW50LnRlbGVwaG9uZSA9IHRoaXMuZ2V0VGVsZXBob25lTnVtYmVyKGFwcG9pbnRtZW50Py52aXNpdD8ucGVyc29uKTtcclxuICAgICAgICAgICAgICBhcHBvaW50bWVudC5UTUhfcGF0aWVudF9pZCA9IHRoaXMuZ2V0QXR0cmlidXRlRGF0YShhcHBvaW50bWVudC52aXNpdCwgXCJUTUggQ2FzZSBOdW1iZXJcIik7XHJcbiAgICAgICAgICAgICAgYXBwb2ludG1lbnQudXVpZCA9IGFwcG9pbnRtZW50LnZpc2l0VXVpZDtcclxuICAgICAgICAgICAgICB0aGlzLmFwcG9pbnRtZW50cy5wdXNoKGFwcG9pbnRtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhID0gWy4uLnRoaXMuYXBwb2ludG1lbnRzXTtcclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UucGFnaW5hdG9yID0gdGhpcy5wYWdpbmF0b3I7XHJcbiAgICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlclByZWRpY2F0ZSA9IChkYXRhLCBmaWx0ZXI6IHN0cmluZykgPT4gZGF0YT8ub3Blbk1yc0lkLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpICE9IC0xIHx8IGRhdGE/LnBhdGllbnROYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpICE9IC0xO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgLyoqXHJcbiAgKiBHZXQgZG9jdG9yIHNwZWNpYWxpdHlcclxuICAqIEBwYXJhbSB7UHJvdmlkZXJBdHRyaWJ1dGVNb2RlbFtdfSBhdHRyIC0gQXJyYXkgb2YgcHJvdmlkZXIgYXR0cmlidXRlc1xyXG4gICogQHJldHVybiB7c3RyaW5nfSAtIERvY3RvciBzcGVjaWFsaXR5XHJcbiAgKi9cclxuICBnZXRTcGVjaWFsaXphdGlvbihhdHRyOiBQcm92aWRlckF0dHJpYnV0ZU1vZGVsW10pIHtcclxuICAgIGxldCBzcGVjaWFsaXphdGlvbiA9ICcnO1xyXG4gICAgYXR0ci5mb3JFYWNoKChhOiBQcm92aWRlckF0dHJpYnV0ZU1vZGVsKSA9PiB7XHJcbiAgICAgIGlmIChhLmF0dHJpYnV0ZVR5cGUudXVpZCA9PSAnZWQxNzE1ZjUtOTNlMi00MDRlLWIzYzktMmEyZDk2MDBmMDYyJyAmJiAhYS52b2lkZWQpIHtcclxuICAgICAgICBzcGVjaWFsaXphdGlvbiA9IGEudmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHNwZWNpYWxpemF0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBSZXR1cm5zIHRoZSBhZ2UgaW4geWVhcnMgZnJvbSB0aGUgYmlydGhkYXRlXHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gYmlydGhkYXRlIC0gRGF0ZSBpbiBzdHJpbmcgZm9ybWF0XHJcbiAgKiBAcmV0dXJuIHtudW1iZXJ9IC0gQWdlXHJcbiAgKi9cclxuICBjYWxjdWxhdGVBZ2UoYmlydGhkYXRlOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBtb21lbnQoKS5kaWZmKGJpcnRoZGF0ZSwgJ3llYXJzJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJldHVybnMgdGhlIGNyZWF0ZWQgdGltZSBpbiB3b3JkcyBmcm9tIHRoZSBkYXRlXHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YSAtIERhdGVcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBDcmVhdGVkIHRpbWUgaW4gd29yZHMgZnJvbSB0aGUgZGF0ZVxyXG4gICovXHJcbiAgZ2V0Q3JlYXRlZEF0KGRhdGE6IHN0cmluZykge1xyXG4gICAgbGV0IGhvdXJzID0gbW9tZW50KCkuZGlmZihtb21lbnQoZGF0YSksICdob3VycycpO1xyXG4gICAgbGV0IG1pbnV0ZXMgPSBtb21lbnQoKS5kaWZmKG1vbWVudChkYXRhKSwgJ21pbnV0ZXMnKTtcclxuICAgIGlmIChob3VycyA+IDI0KSB7XHJcbiAgICAgIHJldHVybiBtb21lbnQoZGF0YSkuZm9ybWF0KCdERCBNTU0sIFlZWVknKTtcclxuICAgIH07XHJcbiAgICBpZiAoaG91cnMgPCAxKSB7XHJcbiAgICAgIHJldHVybiBgJHttaW51dGVzfSAke3RoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KFwiTWludXRlcyBhZ29cIil9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHtob3Vyc30gJHt0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChcIkhvdXJzIGFnb1wiKX1gO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAqIEdldCBlbmNvdW50ZXIgZGF0ZXRpbWUgZm9yIGEgZ2l2ZW4gZW5jb3VudGVyIHR5cGVcclxuICAqIEBwYXJhbSB7Q3VzdG9tVmlzaXRNb2RlbH0gdmlzaXQgLSBWaXNpdFxyXG4gICogQHBhcmFtIHtzdHJpbmd9IGVuY291bnRlck5hbWUgLSBFbmNvdW50ZXIgdHlwZVxyXG4gICogQHJldHVybiB7c3RyaW5nfSAtIEVuY291bnRlciBkYXRldGltZVxyXG4gICovXHJcbiAgZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdDogQ3VzdG9tVmlzaXRNb2RlbCwgZW5jb3VudGVyTmFtZTogc3RyaW5nKSB7XHJcbiAgICBsZXQgY3JlYXRlZF9hdCA9ICcnO1xyXG4gICAgY29uc3QgZW5jb3VudGVycyA9IHZpc2l0LmVuY291bnRlcnM7XHJcbiAgICBlbmNvdW50ZXJzLmZvckVhY2goKGVuY291bnRlcjogQ3VzdG9tRW5jb3VudGVyTW9kZWwpID0+IHtcclxuICAgICAgY29uc3QgZGlzcGxheSA9IGVuY291bnRlci50eXBlPy5uYW1lO1xyXG4gICAgICBpZiAoZGlzcGxheS5tYXRjaChlbmNvdW50ZXJOYW1lKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNyZWF0ZWRfYXQgPSB0aGlzLmdldENyZWF0ZWRBdChlbmNvdW50ZXIuZW5jb3VudGVyX2RhdGV0aW1lLnJlcGxhY2UoJ1onLCcrMDUzMCcpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gY3JlYXRlZF9hdDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgaWYgdGhlIGVuY291bnRlciBpcyBhIGZvbGxvdy11cCBvciBuZXcgdmlzaXRcclxuICAgKiBAcGFyYW0ge2FueX0gZW5jIC0gRW5jb3VudGVyIGRhdGFcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gJ0ZPTExPV19VUCcgb3IgJ05FVydcclxuICAgKi9cclxuICBnZXREZW1hcmNhdGlvbihlbmM6IGFueSkge1xyXG4gICAgbGV0IGlzRm9sbG93VXAgPSBmYWxzZTtcclxuICAgIGNvbnN0IGFkbEludGwgPSBlbmM/LmZpbmQ/LihlID0+IGU/LnR5cGU/Lm5hbWUgPT09IHZpc2l0VHlwZXMuQURVTFRJTklUSUFMKTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGFkbEludGw/Lm9icykpIHtcclxuICAgICAgYWRsSW50bD8ub2JzLmZvckVhY2gob2JzID0+IHtcclxuICAgICAgICBpZiAoIWlzRm9sbG93VXApXHJcbiAgICAgICAgICBpc0ZvbGxvd1VwID0gb2JzPy52YWx1ZV90ZXh0Py50b0xvd2VyQ2FzZT8uKCk/LmluY2x1ZGVzPy4oXCJmb2xsb3cgdXBcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzRm9sbG93VXAgPyB2aXNpdFR5cGVzLkZPTExPV19VUCA6IHZpc2l0VHlwZXMuTkVXO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgYXdhaXRpbmcgdmlzaXRzIGZvciBhIGdpdmVuIHBhZ2UgbnVtYmVyXHJcbiAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSAtIFBhZ2UgbnVtYmVyXHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgZ2V0QXdhaXRpbmdWaXNpdHMocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgaWYocGFnZSA9PSAxKSB7XHJcbiAgICAgIHRoaXMuYXdhaXRpbmdWaXNpdHMgPSBbXTtcclxuICAgICAgLy8gdGhpcy5hd2F0aW5nUmVjb3Jkc0ZldGNoZWQgPSAwO1xyXG4gICAgfSAgICBcclxuICAgIHRoaXMudmlzaXRTZXJ2aWNlLmdldEF3YWl0aW5nVmlzaXRzKHRoaXMucGx1Z2luQ29uZmlnT2JzPy5taW5kbWFwVVJMLCB0aGlzLnNwZWNpYWxpemF0aW9uLCBwYWdlKS5zdWJzY3JpYmUoKHJlczogQXBpUmVzcG9uc2VNb2RlbCkgPT4ge1xyXG4gICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcclxuICAgICAgICB0aGlzLnZpc2l0c0xlbmd0aENvdW50ID0gcmVzLnRvdGFsQ291bnRcclxuICAgICAgICAvLyB0aGlzLmF3YXRpbmdSZWNvcmRzRmV0Y2hlZCArPSB0aGlzLm9mZnNldDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgdmlzaXQgPSByZXMuZGF0YVtpXTtcclxuICAgICAgICAgIHZpc2l0LmNoZWlmX2NvbXBsYWludCA9IHRoaXMuZ2V0Q2hlaWZDb21wbGFpbnQodmlzaXQpO1xyXG4gICAgICAgICAgdmlzaXQudmlzaXRfY3JlYXRlZCA9IHZpc2l0Py5kYXRlX2NyZWF0ZWQgPyB0aGlzLmdldENyZWF0ZWRBdCh2aXNpdC5kYXRlX2NyZWF0ZWQucmVwbGFjZSgnWicsJyswNTMwJykpIDogdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLkFEVUxUSU5JVElBTCk7XHJcbiAgICAgICAgICB2aXNpdC5wZXJzb24uYWdlID0gdGhpcy5jYWxjdWxhdGVBZ2UodmlzaXQucGVyc29uLmJpcnRoZGF0ZSk7XHJcbiAgICAgICAgICB2aXNpdC5wYXRpZW50X3R5cGUgPSB0aGlzLmdldERlbWFyY2F0aW9uKHZpc2l0Py5lbmNvdW50ZXJzKTtcclxuICAgICAgICAgIHRoaXMuYXdhaXRpbmdWaXNpdHMucHVzaCh2aXNpdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhID0gWy4uLnRoaXMuYXdhaXRpbmdWaXNpdHNdO1xyXG4gICAgICAgIGlmIChwYWdlID09IDEpIHtcclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5wYWdpbmF0b3IgPSB0aGlzLnRlbXBQYWdpbmF0b3I7XHJcbiAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGEsIGZpbHRlcjogc3RyaW5nKSA9PiBkYXRhPy5wYXRpZW50LmlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTEgfHwgZGF0YT8ucGF0aWVudF9uYW1lLmdpdmVuX25hbWUuY29uY2F0KChkYXRhPy5wYXRpZW50X25hbWUubWlkZGxlX25hbWUgJiYgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnTWlkZGxlIE5hbWUnKSA/ICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSA6ICcnKSArICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5mYW1pbHlfbmFtZSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5sZW5ndGggPSB0aGlzLmF3YWl0aW5nVmlzaXRzLmxlbmd0aDtcclxuICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5uZXh0UGFnZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIEdldCBpbnByb2dyZXNzIHZpc2l0cyBmb3IgYSBnaXZlbiBwYWdlIG51bWJlclxyXG4gICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBQYWdlIG51bWJlclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldEluUHJvZ3Jlc3NWaXNpdHMocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgaWYocGFnZSA9PSAxKSB7XHJcbiAgICAgIHRoaXMuaW5Qcm9ncmVzc1Zpc2l0cyA9IFtdO1xyXG4gICAgICAvLyB0aGlzLmlucHJvZ3Jlc3NSZWNvcmRzRmV0Y2hlZCA9IDA7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZpc2l0U2VydmljZS5nZXRJblByb2dyZXNzVmlzaXRzKHRoaXMucGx1Z2luQ29uZmlnT2JzPy5taW5kbWFwVVJMLCB0aGlzLnNwZWNpYWxpemF0aW9uLCBwYWdlKS5zdWJzY3JpYmUoKHJlczogQXBpUmVzcG9uc2VNb2RlbCkgPT4ge1xyXG4gICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcclxuICAgICAgICB0aGlzLnZpc2l0c0xlbmd0aENvdW50ID0gcmVzLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgLy8gdGhpcy5pbnByb2dyZXNzVmlzaXRzQ291bnQgPSBpdi50b3RhbENvdW50O1xyXG4gICAgICAgIC8vIHRoaXMuaW5wcm9ncmVzc1JlY29yZHNGZXRjaGVkICs9IHRoaXMub2Zmc2V0O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCB2aXNpdCA9IHJlcy5kYXRhW2ldO1xyXG4gICAgICAgICAgdmlzaXQuY2hlaWZfY29tcGxhaW50ID0gdGhpcy5nZXRDaGVpZkNvbXBsYWludCh2aXNpdCk7XHJcbiAgICAgICAgICB2aXNpdC52aXNpdF9jcmVhdGVkID0gdmlzaXQ/LmRhdGVfY3JlYXRlZCA/IHRoaXMuZ2V0Q3JlYXRlZEF0KHZpc2l0LmRhdGVfY3JlYXRlZC5yZXBsYWNlKCdaJywnKzA1MzAnKSkgOiB0aGlzLmdldEVuY291bnRlckNyZWF0ZWQodmlzaXQsIHZpc2l0VHlwZXMuQURVTFRJTklUSUFMKTtcclxuICAgICAgICAgIHZpc2l0LnByZXNjcmlwdGlvbl9zdGFydGVkID0gdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLlZJU0lUX05PVEUpO1xyXG4gICAgICAgICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgICAgICAgdmlzaXQuVE1IX3BhdGllbnRfaWQgPSB0aGlzLmdldEF0dHJpYnV0ZURhdGEodmlzaXQsIFwiVE1IIENhc2UgTnVtYmVyXCIpO1xyXG4gICAgICAgICAgdGhpcy5pblByb2dyZXNzVmlzaXRzLnB1c2godmlzaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IFsuLi50aGlzLmluUHJvZ3Jlc3NWaXNpdHNdO1xyXG4gICAgICAgIGlmIChwYWdlID09IDEpIHtcclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5wYWdpbmF0b3IgPSB0aGlzLnRlbXBQYWdpbmF0b3I7XHJcbiAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGEsIGZpbHRlcjogc3RyaW5nKSA9PiBkYXRhPy5wYXRpZW50LmlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTEgfHwgZGF0YT8ucGF0aWVudF9uYW1lLmdpdmVuX25hbWUuY29uY2F0KChkYXRhPy5wYXRpZW50X25hbWUubWlkZGxlX25hbWUgJiYgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnTWlkZGxlIE5hbWUnKSA/ICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSA6ICcnKSArICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5mYW1pbHlfbmFtZSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5sZW5ndGggPSB0aGlzLmluUHJvZ3Jlc3NWaXNpdHMubGVuZ3RoO1xyXG4gICAgICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLm5leHRQYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IHByaW9yaXR5IHZpc2l0cyBmb3IgYSBnaXZlbiBwYWdlIG51bWJlclxyXG4gICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBQYWdlIG51bWJlclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldFByaW9yaXR5VmlzaXRzKHBhZ2U6IG51bWJlciA9IDEpIHtcclxuICAgIGlmKHBhZ2UgPT0gMSkge1xyXG4gICAgICB0aGlzLnByaW9yaXR5VmlzaXRzID0gW107XHJcbiAgICAgIC8vIHRoaXMucHJpb3JpdHlSZWNvcmRzRmV0Y2hlZCA9IDA7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZpc2l0U2VydmljZS5nZXRQcmlvcml0eVZpc2l0cyh0aGlzLnBsdWdpbkNvbmZpZ09icz8ubWluZG1hcFVSTCwgdGhpcy5zcGVjaWFsaXphdGlvbiwgcGFnZSkuc3Vic2NyaWJlKChyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHtcclxuICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7XHJcbiAgICAgICAgdGhpcy52aXNpdHNMZW5ndGhDb3VudCA9IHJlcy50b3RhbENvdW50O1xyXG4gICAgICAgIC8vIHRoaXMucHJpb3JpdHlWaXNpdHNDb3VudCA9IHJlcy50b3RhbENvdW50O1xyXG4gICAgICAgIC8vIHRoaXMucHJpb3JpdHlSZWNvcmRzRmV0Y2hlZCArPSB0aGlzLm9mZnNldDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgdmlzaXQgPSByZXMuZGF0YVtpXTtcclxuICAgICAgICAgIHZpc2l0LmNoZWlmX2NvbXBsYWludCA9IHRoaXMuZ2V0Q2hlaWZDb21wbGFpbnQodmlzaXQpO1xyXG4gICAgICAgICAgdmlzaXQudmlzaXRfY3JlYXRlZCA9IHZpc2l0Py5kYXRlX2NyZWF0ZWQgPyB0aGlzLmdldENyZWF0ZWRBdCh2aXNpdC5kYXRlX2NyZWF0ZWQucmVwbGFjZSgnWicsJyswNTMwJykpIDogdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLkZMQUdHRUQpO1xyXG4gICAgICAgICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgICAgICAgdGhpcy5wcmlvcml0eVZpc2l0cy5wdXNoKHZpc2l0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhU291cmNlLmRhdGEgPSBbLi4udGhpcy5wcmlvcml0eVZpc2l0c107XHJcbiAgICAgICAgaWYgKHBhZ2UgPT0gMSkge1xyXG4gICAgICAgICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMudGVtcFBhZ2luYXRvcjtcclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJQcmVkaWNhdGUgPSAoZGF0YSwgZmlsdGVyOiBzdHJpbmcpID0+IGRhdGE/LnBhdGllbnQuaWRlbnRpZmllci50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMSB8fCBkYXRhPy5wYXRpZW50X25hbWUuZ2l2ZW5fbmFtZS5jb25jYXQoKGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSAmJiB0aGlzLmNoZWNrUGF0aWVudFJlZ0ZpZWxkKCdNaWRkbGUgTmFtZScpID8gJyAnICsgZGF0YT8ucGF0aWVudF9uYW1lLm1pZGRsZV9uYW1lIDogJycpICsgJyAnICsgZGF0YT8ucGF0aWVudF9uYW1lLmZhbWlseV9uYW1lKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLmxlbmd0aCA9IHRoaXMucHJpb3JpdHlWaXNpdHMubGVuZ3RoO1xyXG4gICAgICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLm5leHRQYWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjb21wbGV0ZWQgdmlzaXRzIGNvdW50XHJcbiAgICogQHJldHVybiB7dm9pZH1cclxuICAgKi9cclxuICBnZXRDb21wbGV0ZWRWaXNpdHMocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgdGhpcy52aXNpdFNlcnZpY2UuZ2V0RW5kZWRWaXNpdHModGhpcy5wbHVnaW5Db25maWdPYnM/Lm1pbmRtYXBVUkwsIHRoaXMuc3BlY2lhbGl6YXRpb24sIHBhZ2UpLnN1YnNjcmliZSgocmVzOiBBcGlSZXNwb25zZU1vZGVsKSA9PiB7XHJcbiAgICAgIGlmIChyZXMuc3VjY2Vzcykge1xyXG4gICAgICAgIHRoaXMudmlzaXRzTGVuZ3RoQ291bnQgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAvLyB0aGlzLmNvbXBsZXRlZFZpc2l0c0NvdW50ID0gcmVzLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgLy8gdGhpcy5jb21wbGV0ZWRSZWNvcmRzRmV0Y2hlZCArPSB0aGlzLm9mZnNldDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgdmlzaXQgPSByZXMuZGF0YVtpXTtcclxuICAgICAgICAgIHZpc2l0LmNoZWlmX2NvbXBsYWludCA9IHRoaXMuZ2V0Q2hlaWZDb21wbGFpbnQodmlzaXQpO1xyXG4gICAgICAgICAgdmlzaXQudmlzaXRfY3JlYXRlZCA9IHZpc2l0Py5kYXRlX2NyZWF0ZWQgPyB0aGlzLmdldENyZWF0ZWRBdCh2aXNpdC5kYXRlX2NyZWF0ZWQucmVwbGFjZSgnWicsICcrMDUzMCcpKSA6IHRoaXMuZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdCwgdmlzaXRUeXBlcy5DT01QTEVURURfVklTSVQpO1xyXG4gICAgICAgICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgICAgICAgdmlzaXQuY29tcGxldGVkID0gdmlzaXQ/LmRhdGVfY3JlYXRlZCA/IHRoaXMuZ2V0Q3JlYXRlZEF0KHZpc2l0LmRhdGVfY3JlYXRlZC5yZXBsYWNlKCdaJywgJyswNTMwJykpIDogdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLlZJU0lUX0NPTVBMRVRFKTtcclxuICAgICAgICAgIHZpc2l0LlRNSF9wYXRpZW50X2lkID0gdGhpcy5nZXRBdHRyaWJ1dGVEYXRhKHZpc2l0LCBcIlRNSCBDYXNlIE51bWJlclwiKTtcclxuICAgICAgICAgIHRoaXMuY29tcGxldGVkVmlzaXRzLnB1c2godmlzaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IFsuLi50aGlzLmNvbXBsZXRlZFZpc2l0c107XHJcbiAgICAgICAgaWYgKHBhZ2UgPT0gMSkge1xyXG4gICAgICAgICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMudGVtcFBhZ2luYXRvcjtcclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJQcmVkaWNhdGUgPSAoZGF0YTogeyBwYXRpZW50OiB7IGlkZW50aWZpZXI6IHN0cmluZzsgfTsgcGF0aWVudF9uYW1lOiB7IGdpdmVuX25hbWU6IHN0cmluZzsgbWlkZGxlX25hbWU6IHN0cmluZzsgZmFtaWx5X25hbWU6IHN0cmluZzsgfTsgfSwgZmlsdGVyOiBzdHJpbmcpID0+IGRhdGE/LnBhdGllbnQuaWRlbnRpZmllci50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMSB8fCBkYXRhPy5wYXRpZW50X25hbWUuZ2l2ZW5fbmFtZS5jb25jYXQoKGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSAmJiB0aGlzLmNoZWNrUGF0aWVudFJlZ0ZpZWxkKCdNaWRkbGUgTmFtZScpID8gJyAnICsgZGF0YT8ucGF0aWVudF9uYW1lLm1pZGRsZV9uYW1lIDogJycpICsgJyAnICsgZGF0YT8ucGF0aWVudF9uYW1lLmZhbWlseV9uYW1lKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLmxlbmd0aCA9IHRoaXMuY29tcGxldGVkVmlzaXRzLmxlbmd0aDtcclxuICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5uZXh0UGFnZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAgIC8qKlxyXG4gICogR2V0IGZvbGxvdy11cCB2aXNpdHMgZm9yIGEgbG9nZ2VkLWluIGRvY3RvclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldEZvbGxvd1VwVmlzaXQocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgdGhpcy52aXNpdFNlcnZpY2UuZ2V0Rm9sbG93VXBWaXNpdHModGhpcy5wbHVnaW5Db25maWdPYnM/Lm1pbmRtYXBVUkwsIHRoaXMuc3BlY2lhbGl6YXRpb24pLnN1YnNjcmliZSh7XHJcbiAgICAgIG5leHQ6IChyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHtcclxuICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgIC8vIHRoaXMuZm9sbG93VXBWaXNpdHNDb3VudCA9IDA7XHJcbiAgICAgICAgICAvLyB0aGlzLmNvbXBsZXRlZFJlY29yZHNGZXRjaGVkICs9IHRoaXMub2Zmc2V0O1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmlzaXQgPSByZXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgaWYgKHZpc2l0Py5lbmNvdW50ZXJzPy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAvLyB0aGlzLmZvbGxvd1VwVmlzaXRzQ291bnQgKz0gMTtcclxuICAgICAgICAgICAgICB0aGlzLnZpc2l0c0xlbmd0aENvdW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgdmlzaXQuY2hlaWZfY29tcGxhaW50ID0gdGhpcy5nZXRDaGVpZkNvbXBsYWludCh2aXNpdCk7XHJcbiAgICAgICAgICAgICAgdmlzaXQudmlzaXRfY3JlYXRlZCA9IHZpc2l0Py5kYXRlX2NyZWF0ZWQgPyB0aGlzLmdldENyZWF0ZWRBdCh2aXNpdC5kYXRlX2NyZWF0ZWQucmVwbGFjZSgnWicsICcrMDUzMCcpKSA6IHRoaXMuZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdCwgdmlzaXRUeXBlcy5DT01QTEVURURfVklTSVQpO1xyXG4gICAgICAgICAgICAgIHZpc2l0LnBlcnNvbi5hZ2UgPSB0aGlzLmNhbGN1bGF0ZUFnZSh2aXNpdC5wZXJzb24uYmlydGhkYXRlKTtcclxuICAgICAgICAgICAgICB2aXNpdC5jb21wbGV0ZWQgPSB0aGlzLmdldEVuY291bnRlckNyZWF0ZWQodmlzaXQsIHZpc2l0VHlwZXMuVklTSVRfQ09NUExFVEUpO1xyXG4gICAgICAgICAgICAgIHZpc2l0LmZvbGxvd1VwID0gdGhpcy5wcm9jZXNzRm9sbG93VXBEYXRlKHRoaXMuZ2V0RW5jb3VudGVyT2JzKHZpc2l0LmVuY291bnRlcnMsIHZpc2l0VHlwZXMuVklTSVRfTk9URSwgMTYzMzQ1LypGb2xsb3ctdXAqLyk/LnZhbHVlX3RleHQpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZm9sbG93VXBWaXNpdHMucHVzaCh2aXNpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhID0gWy4uLnRoaXMuZm9sbG93VXBWaXNpdHNdO1xyXG4gICAgICAgICAgaWYgKHBhZ2UgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UucGFnaW5hdG9yID0gdGhpcy50ZW1wUGFnaW5hdG9yO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGE6IHsgcGF0aWVudDogeyBpZGVudGlmaWVyOiBzdHJpbmc7IH07IHBhdGllbnRfbmFtZTogeyBnaXZlbl9uYW1lOiBzdHJpbmc7IG1pZGRsZV9uYW1lOiBzdHJpbmc7IGZhbWlseV9uYW1lOiBzdHJpbmc7IH07IH0sIGZpbHRlcjogc3RyaW5nKSA9PiBkYXRhPy5wYXRpZW50LmlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTEgfHwgZGF0YT8ucGF0aWVudF9uYW1lLmdpdmVuX25hbWUuY29uY2F0KChkYXRhPy5wYXRpZW50X25hbWUubWlkZGxlX25hbWUgJiYgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnTWlkZGxlIE5hbWUnKSA/ICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSA6ICcnKSArICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5mYW1pbHlfbmFtZSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBQYWdpbmF0b3IubGVuZ3RoID0gdGhpcy5mb2xsb3dVcFZpc2l0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5uZXh0UGFnZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIEdldCBlbmNvdW50ZXIgZGF0ZXRpbWUgZm9yIGEgZ2l2ZW4gZW5jb3VudGVyIHR5cGVcclxuICAqIEBwYXJhbSB7Q3VzdG9tVmlzaXRNb2RlbH0gdmlzaXQgLSBWaXNpdFxyXG4gICogQHBhcmFtIHtzdHJpbmd9IGVuY291bnRlck5hbWUgLSBFbmNvdW50ZXIgdHlwZVxyXG4gICogQHJldHVybiB7c3RyaW5nfSAtIEVuY291bnRlciBkYXRldGltZVxyXG4gICovXHJcbiAgZ2V0RW5jb3VudGVyT2JzKGVuY291bnRlcnM6IEN1c3RvbUVuY291bnRlck1vZGVsW10sIGVuY291bnRlck5hbWU6IHN0cmluZywgY29uY2VwdElkOiBudW1iZXIpIHtcclxuICAgIGxldCBvYnM6IEN1c3RvbU9ic01vZGVsO1xyXG4gICAgZW5jb3VudGVycy5mb3JFYWNoKChlbmNvdW50ZXI6IEN1c3RvbUVuY291bnRlck1vZGVsKSA9PiB7XHJcbiAgICAgIGlmIChlbmNvdW50ZXIudHlwZT8ubmFtZSA9PT0gZW5jb3VudGVyTmFtZSkge1xyXG4gICAgICAgIG9icyA9IGVuY291bnRlcj8ub2JzPy5maW5kKChvOiBDdXN0b21PYnNNb2RlbCkgPT4gby5jb25jZXB0X2lkID09IGNvbmNlcHRJZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9icztcclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogUmVuZGVycyBIVE1MIGNvbnRlbnQgZm9yIGEgY29sdW1uLCBzYW5pdGl6ZWQgZm9yIHNlY3VyaXR5XHJcbiAgICogQHBhcmFtIHthbnl9IGNvbHVtbiAtIENvbHVtbiBkZWZpbml0aW9uXHJcbiAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgLSBEYXRhIGVsZW1lbnQgdG8gcmVuZGVyXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtIEZvcm1hdHRlZCBIVE1MIG9yIGVsZW1lbnQgdmFsdWVcclxuICAgKi9cclxuICByZW5kZXJIdG1sQ29udGVudChjb2x1bW46IGFueSwgZWxlbWVudDogYW55KTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0eXBlb2YgY29sdW1uLmZvcm1hdEh0bWwgPT09ICdmdW5jdGlvbicgPyB0aGlzLnNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0SHRtbChjb2x1bW4uZm9ybWF0SHRtbChlbGVtZW50KSkgOiBlbGVtZW50W2NvbHVtbi5rZXldO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzdHJpbmcgb2YgQ1NTIGNsYXNzZXMgZm9yIHRoZSBjb2x1bW5cclxuICAgKiBAcGFyYW0ge2FueX0gY29sdW1uIC0gQ29sdW1uIGRlZmluaXRpb25cclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gU3BhY2Utc2VwYXJhdGVkIGNsYXNzIG5hbWVzXHJcbiAgICovXHJcbiAgZ2V0Q2xhc3Nlcyhjb2x1bW46IGFueSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gY29sdW1uLmNsYXNzTGlzdCA/IGNvbHVtbi5jbGFzc0xpc3Quam9pbihcIiBcIikgOiBcIlwiO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdHMgdGhlIGZvbGxvdy11cCBkYXRlIGJ5IGNsZWFuaW5nIHVwIHRpbWUgZGV0YWlsc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIEZvbGxvdy11cCBkYXRlIHN0cmluZ1xyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBGb3JtYXR0ZWQgZGF0ZVxyXG4gICAqL1xyXG4gIHByb2Nlc3NGb2xsb3dVcERhdGUodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdmFsdWUuc3BsaXQoJywnKS5sZW5ndGggPiAxID8gYCR7dmFsdWUuc3BsaXQoJywnKVswXX0ke3ZhbHVlLnNwbGl0KCcsJylbMV0ucmVwbGFjZShcIlRpbWU6XCIsIFwiXCIpfWAgOiB2YWx1ZTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBFeGVjdXRlcyB0aGUgYWN0aW9uIGJhc2VkIG9uIGl0cyBsYWJlbCAoUmVzY2hlZHVsZSBvciBDYW5jZWwpXHJcbiAgICogQHBhcmFtIHthbnl9IGFjdGlvbiAtIEFjdGlvbiBvYmplY3RcclxuICAgKiBAcGFyYW0ge2FueX0gZWxlbWVudCAtIEVsZW1lbnQgdG8gcGVyZm9ybSB0aGUgYWN0aW9uIG9uXHJcbiAgICovXHJcbiAgaGFuZGxlQWN0aW9uKGFjdGlvbjogYW55LCBlbGVtZW50OiBhbnkpIHtcclxuICAgIGlmIChhY3Rpb24ubGFiZWwgPT09ICdSZXNjaGVkdWxlJykge1xyXG4gICAgICB0aGlzLnJlc2NoZWR1bGUoZWxlbWVudCk7XHJcbiAgICB9IGVsc2UgaWYgKGFjdGlvbi5sYWJlbCA9PT0gJ0NhbmNlbCcpIHtcclxuICAgICAgdGhpcy5jYW5jZWwoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPcGVucyBhIFdoYXRzQXBwIGNoYXQgd2l0aCB0aGUgZ2l2ZW4gcGhvbmUgbnVtYmVyXHJcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCAtIFRoZSBjbGljayBldmVudCB0byBwcmV2ZW50IHJvdyBuYXZpZ2F0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRlbGVwaG9uZSAtIFBob25lIG51bWJlciBmb3IgV2hhdHNBcHBcclxuICAgKi9cclxuICBvcGVuV2hhdHNBcHAoZXZlbnQ6IE1vdXNlRXZlbnQsIHRlbGVwaG9uZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudCByb3cgbmF2aWdhdGlvblxyXG4gICAgY29uc3Qgd2hhdHNhcHBMaW5rID0gYGh0dHBzOi8vd2EubWUvJHt0ZWxlcGhvbmV9YDtcclxuICAgIHdpbmRvdy5vcGVuKHdoYXRzYXBwTGluaywgJ19ibGFuaycsICdub29wZW5lcixub3JlZmVycmVyJyk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCI8ZGl2IGNsYXNzPVwicm93IG10LTNcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtMTIgcC0wXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXJpZ2h0IG15LTJcIj5cclxuICAgICAgICA8bWF0LWFjY29yZGlvbiBjbGFzcz1cImludGVsLWFjY29yZGlvbi1jb25cIiBtdWx0aSBkYXRhLXRlc3QtaWQ9XCJtYXRBY2NBcHBvaW50bWVudFwiPlxyXG4gICAgICAgICAgPG1hdC1leHBhbnNpb24tcGFuZWwgW2V4cGFuZGVkXT1cInRydWVcIiBkYXRhLXRlc3QtaWQ9XCJtYXRFeHBBcHBvaW50bWVudFwiPlxyXG4gICAgICAgICAgICA8bWF0LWV4cGFuc2lvbi1wYW5lbC1oZWFkZXIgZGF0YS10ZXN0LWlkPVwibWF0RXhwSGVhZGVyQXBwb2ludG1lbnRcIj5cclxuICAgICAgICAgICAgICA8bWF0LXBhbmVsLXRpdGxlPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cInt7cGx1Z2luQ29uZmlnT2JzLmFuY2hvcklkfX1cIiBjbGFzcz1cImFuY2hvci1jb25cIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnRlbC1hY2NvcmRpb24tdGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJ7eyBwbHVnaW5Db25maWdPYnMudGFibGVIZWFkZXJJY29uIH19XCIgYWx0PVwiXCIgd2lkdGg9XCI0NHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxoNiBjbGFzcz1cIm1iLTAgbWwtMlwiPnt7IHBsdWdpbkNvbmZpZ09icy50YWJsZUhlYWRlciB8IHRyYW5zbGF0ZSB9fSAoe3sgdmlzaXRzTGVuZ3RoQ291bnQgfX0pPC9oNj5cclxuICAgICAgICAgICAgICAgICAgPG1hdC1pY29uIGFyaWEtaGlkZGVuPVwiZmFsc2VcIiBhcmlhLWxhYmVsPVwiaGVscCBpY29uXCIgbWF0VG9vbHRpcD1cInt7IChwbHVnaW5Db25maWdPYnMudG9vbHRpcExhYmVsIHwgdHJhbnNsYXRlKSB9fVwiIG1hdFRvb2x0aXBQb3NpdGlvbj1cInJpZ2h0XCIgZGF0YS10ZXN0LWlkPVwibWF0SWNvSGVscEFwcG9pbnRtZW50XCI+aGVscF9vdXRsaW5lPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1sLWF1dG8gZmlsdGVyLXNlYXJjaC1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uICpuZ0lmPVwicGx1Z2luQ29uZmlnT2JzLmZpbHRlck9icy5maWx0ZXJGbGFnXCIgY2xhc3M9XCJtYXQtc3Ryb2tlZC1idXR0b25cIlttYXRNZW51VHJpZ2dlckZvcl09XCJmaWx0ZXJNZW51MVwiIGNsYXNzPVwiZmlsdGVyLWJ0blwiIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cInt7cGx1Z2luQ29uZmlnT2JzLmZpbHRlck9icy5maWx0ZXJJY29ufX1cIiBhbHQ9XCJcIj4ge3soIHBsdWdpbkNvbmZpZ09icy5maWx0ZXJPYnMuZmlsdGVyTGFiZWx8IHRyYW5zbGF0ZSl9fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxtYXQtbWVudSAjZmlsdGVyTWVudTE9XCJtYXRNZW51XCIgY2xhc3M9XCJjdXN0b20tbWVudVwiIFtoYXNCYWNrZHJvcF09XCJ0cnVlXCIgeFBvc2l0aW9uPVwiYmVmb3JlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9nZ2xlLWJ1dHRvbnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIiBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIiBtYXQtYnV0dG9uIFtjbGFzcy5hY3RpdmVdPVwibW9kZSA9PT0gJ2RhdGUnXCIgKGNsaWNrKT1cInNldE1vZGUoJ2RhdGUnKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyByZXNldERhdGUodHJ1ZSlcIj48c3BhbiBjbGFzcz1cIm1hdC1idXR0b24td3JhcHBlclwiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+e3snRGF0ZScgfCB0cmFuc2xhdGV9fTwvc3Bhbj48L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtYXQtZm9jdXMtaW5kaWNhdG9yIG1hdC1idXR0b24gbWF0LWJ1dHRvbi1iYXNlXCIgY2xhc3M9XCJtYXQtZm9jdXMtaW5kaWNhdG9yIG1hdC1idXR0b24gbWF0LWJ1dHRvbi1iYXNlXCIgbWF0LWJ1dHRvbiBbY2xhc3MuYWN0aXZlXT1cIm1vZGUgPT09ICdyYW5nZSdcIiAoY2xpY2spPVwic2V0TW9kZSgncmFuZ2UnKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyByZXNldERhdGUodHJ1ZSlcIj48c3BhbiBjbGFzcz1cIm1hdC1idXR0b24td3JhcHBlclwiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+e3snUmFuZ2UnIHwgdHJhbnNsYXRlfX08L3NwYW4+PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwibW9kZSA9PT0gJ2RhdGUnXCIgY2xhc3M9XCJkYXRlLXZpZXdcIiAoY2xpY2spPVwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIFtmb3JtR3JvdXBdPVwiZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWRhdGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibGFiZWwtdGV4dFwiPnt7ICdTZWxlY3QgZGF0ZScgfCB0cmFuc2xhdGV9fTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC13cmFwcGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBbbWF4XT1cIm1heERhdGVcIiBmb3JtQ29udHJvbE5hbWU9XCJkYXRlXCIgW21hdERhdGVwaWNrZXJdPVwiZG9iZHBcIiBwbGFjZWhvbGRlcj1cInt7J1NlbGVjdCBkYXRlJyB8IHRyYW5zbGF0ZX19XCIgYXJpYS1sYWJlbD1cIkRhdGVcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiYmFzaWMtYWRkb24xXCIgcmVhZG9ubHkgZGF0YS10ZXN0LWlkPVwiZXREYXRlXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtZGF0ZXBpY2tlciAjZG9iZHA+PC9tYXQtZGF0ZXBpY2tlcj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlIG1hdFN1ZmZpeCBbZm9yXT1cImRvYmRwXCIgZGF0YS10ZXN0LWlkPVwiZHBEYXRlXCIgY2xhc3M9XCJkYXRlcGlja2VyLWljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgbWF0RGF0ZXBpY2tlclRvZ2dsZUljb24gc3JjPVwiYXNzZXRzL3N2Z3MvY2FsZW5kYXItZGF0ZS5zdmdcIiBhbHQ9XCJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21hdC1kYXRlcGlja2VyLXRvZ2dsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIm1vZGUgPT09ICdyYW5nZSdcIiBjbGFzcz1cInJhbmdlLXZpZXdcIiAoY2xpY2spPVwiICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIFtmb3JtR3JvdXBdPVwiZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1kYXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1kYXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibGFiZWwtdGV4dFwiPnt7ICdTdGFydCBkYXRlJyB8IHRyYW5zbGF0ZSB9fTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LXdyYXBwZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgW21heF09XCJtYXhEYXRlXCIgZm9ybUNvbnRyb2xOYW1lPVwic3RhcnREYXRlXCIgW21hdERhdGVwaWNrZXJdPVwicGlja2VyMVwiIHBsYWNlaG9sZGVyPVwie3snU2VsZWN0IHN0YXJ0IGRhdGUnfHRyYW5zbGF0ZX19XCIgYXJpYS1sYWJlbD1cIlN0YXJ0IGRhdGVcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiYmFzaWMtYWRkb24xXCIgcmVhZG9ubHkgZGF0YS10ZXN0LWlkPVwiZXRTZWxTdGFydERhdGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtZGF0ZXBpY2tlciAjcGlja2VyMT48L21hdC1kYXRlcGlja2VyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1kYXRlcGlja2VyLXRvZ2dsZSBtYXRTdWZmaXggW2Zvcl09XCJwaWNrZXIxXCIgY2xhc3M9XCJkYXRlcGlja2VyLWljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBtYXREYXRlcGlja2VyVG9nZ2xlSWNvbiBzcmM9XCJhc3NldHMvc3Zncy9jYWxlbmRhci1kYXRlLnN2Z1wiIGFsdD1cIlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1kYXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1kYXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibGFiZWwtdGV4dFwiPnt7ICdFbmQgZGF0ZScgfCB0cmFuc2xhdGUgfX08L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC13cmFwcGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIFttYXhdPVwibWF4RGF0ZVwiIGZvcm1Db250cm9sTmFtZT1cImVuZERhdGVcIiBbbWF0RGF0ZXBpY2tlcl09XCJwaWNrZXIyXCIgcGxhY2Vob2xkZXI9XCJ7eydTZWxlY3QgZW5kIGRhdGUnfHRyYW5zbGF0ZX19XCIgYXJpYS1sYWJlbD1cIkVuZCBkYXRlXCIgYXJpYS1kZXNjcmliZWRieT1cImJhc2ljLWFkZG9uMlwiIHJlYWRvbmx5IGRhdGEtdGVzdC1pZD1cImV0U2VsRW5kRGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1kYXRlcGlja2VyICNwaWNrZXIyPjwvbWF0LWRhdGVwaWNrZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlIG1hdFN1ZmZpeCBbZm9yXT1cInBpY2tlcjJcIiBjbGFzcz1cImRhdGVwaWNrZXItaWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIG1hdERhdGVwaWNrZXJUb2dnbGVJY29uIHNyYz1cImFzc2V0cy9zdmdzL2NhbGVuZGFyLWRhdGUuc3ZnXCIgYWx0PVwiXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21hdC1kYXRlcGlja2VyLXRvZ2dsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbi1idXR0b25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gbWF0LWJ1dHRvbiBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgcmVzZXQtYnRuIG1hdC1idXR0b24gbWF0LWJ1dHRvbi1iYXNlXCIgKGNsaWNrKT1cInJlc2V0RGF0ZSgpO1wiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+e3sgJ1Jlc2V0J3wgdHJhbnNsYXRlIH19PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG1hdC1idXR0b24gY2xhc3M9XCJtYXQtZm9jdXMtaW5kaWNhdG9yIGFwcGx5LWJ0biBtYXQtYnV0dG9uIG1hdC1idXR0b24tYmFzZVwiIChjbGljayk9XCJhcHBseURhdGVPclJhbmdlRmlsdGVyKHBsdWdpbkNvbmZpZ09icy5maWx0ZXJPYnMuZmlsdGVyRGF0ZUZpZWxkKVwiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+e3sgJ0FwcGx5J3wgdHJhbnNsYXRlIH19PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9tYXQtbWVudT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgc2VhcmNoLWJhciBtbC1hdXRvXCIgKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiICNzZWFyY2hJbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwie3sgcGx1Z2luQ29uZmlnT2JzLnNlYXJjaFBsYWNlSG9sZGVyIHwgdHJhbnNsYXRlIH19XCIgYXJpYS1sYWJlbD1cInNlYXJjaDFcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiYmFzaWMtYWRkb24xXCIgKGtleXVwKT1cImFwcGx5RmlsdGVyKCRldmVudClcIiAoa2V5ZG93bi5TcGFjZSk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIiAoa2V5ZG93bi5FbnRlcik9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIiBkYXRhLXRlc3QtaWQ9XCJldFNlYXJjaEFwcG9pbnRtZW50RGFzaGJvYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAtYXBwZW5kXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtdGV4dFwiIGlkPVwiYmFzaWMtYWRkb24xXCIgICpuZ0lmPVwiIWlzRmlsdGVyQXBwbGllZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3N2Z3Mvc2VhcmNoLWljb24uc3ZnXCIgYWx0PVwiXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS10ZXN0LWlkPVwiYnRuUmVzZXRBcFNlcmFjaFwiICBjbGFzcz1cImJ0blJlc2V0QXBTZXJhY2hcIiBjbGFzcz1cImJ0blJlc2V0QXBTZXJhY2hcIiBjbGFzcz1cIm1hdC1pY29uLWJ1dHRvblwiIGFyaWEtbGFiZWw9XCJSZXNldCBhcHBvaW50bWVudCBzZWFyY2hcIiAgKGNsaWNrKT1cImNsZWFyRmlsdGVyKClcIiAgKm5nSWY9XCJpc0ZpbHRlckFwcGxpZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWljb24gY2xhc3M9XCJtbC0wXCIgc3R5bGU9XCJsaW5lLWhlaWdodDogbm9ybWFsO1wiPmNsb3NlPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L21hdC1wYW5lbC10aXRsZT5cclxuICAgICAgICAgICAgPC9tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlcj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hdC1lbGV2YXRpb24tejhcIj5cclxuICAgICAgICAgICAgICA8dGFibGUgbWF0LXRhYmxlIFtkYXRhU291cmNlXT1cImRhdGFTb3VyY2VcIj5cclxuXHJcbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgZGlzcGxheWVkQXBwb2ludG1lbnRDb2x1bW5zXCIgW21hdENvbHVtbkRlZl09XCJjb2x1bW4ua2V5XCI+XHJcbiAgICAgICAgICAgICAgICAgIDx0aCBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+e3sgY29sdW1uLmxhYmVsIHwgdHJhbnNsYXRlIH19PC90aD5cclxuXHJcbiAgICAgICAgICAgICAgICAgIDx0ZCBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCBlbGVtZW50OyBsZXQgaiA9IGluZGV4O1wiIFthdHRyLmRhdGEtdGVzdC1pZF09XCIndGQnICsgalwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2x1bW4ua2V5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxvYXQtbGVmdFwiIFtpbm5lckhUTUxdPVwicmVuZGVySHRtbENvbnRlbnQoY29sdW1uLCBlbGVtZW50KVwiIFtuZ0NsYXNzXT1cImdldENsYXNzZXMoY29sdW1uKVwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8IS0tIFN0YXJ0cyBJbiBDb2x1bW4gLS0+XHJcbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbHVtbi5rZXkgPT09ICd0ZWxlcGhvbmUnICYmIGVsZW1lbnQudGVsZXBob25lXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8YSAoY2xpY2spPVwib3BlbldoYXRzQXBwKCRldmVudCwgZWxlbWVudC50ZWxlcGhvbmUpXCIgY2xhc3M9XCJmbG9hdC1sZWZ0IGljb24tYnRuIG0tMFwiIFthdHRyLmRhdGEtdGVzdC1pZF09XCInbGlua1BhdGllbnRXaGF0c0FwcCcgKyBqXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3N2Z3Mvd2hhdHNhcHAtZ3JlZW4uc3ZnXCIgYWx0PVwiV2hhdHNBcHBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8IS0tIEFjdGlvbnMgSW4gQ29sdW1uIC0tPlxyXG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2x1bW4ua2V5ID09PSAnYWN0aW9ucydcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb25zLWJ0bi13cmFwIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBhY3Rpb24gb2YgY29sdW1uLmFjdGlvbkJ1dHRvbnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFtuZ1N0eWxlXT1cIntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBhY3Rpb24uc3R5bGU/LmNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBhY3Rpb24uc3R5bGU/LmJhY2tncm91bmRDb2xvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYWN0aW9uLWJ0biBtci0yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyBoYW5kbGVBY3Rpb24oYWN0aW9uLCBlbGVtZW50KVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBhY3Rpb24ubGFiZWwgfCB0cmFuc2xhdGUgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgXHJcblxyXG4gICAgICAgICAgICAgICAgPCEtLSBObyBEYXRhIFJvdyAtLT5cclxuICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cIm1hdC1yb3dcIiAqbWF0Tm9EYXRhUm93PlxyXG4gICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJtYXQtY2VsbCB0ZXh0LWNlbnRlclwiIFthdHRyLmNvbHNwYW5dPVwiZGlzcGxheWVkQ29sdW1ucy5sZW5ndGhcIj5cclxuICAgICAgICAgICAgICAgICAgICB7eyBwbHVnaW5Db25maWdPYnMubm9SZWNvcmRGb3VuZCB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuXHJcbiAgICAgICAgICAgICAgICA8IS0tIFJvdyBEZWZpbml0aW9ucyAtLT5cclxuICAgICAgICAgICAgICAgIDx0ciBtYXQtaGVhZGVyLXJvdyAqbWF0SGVhZGVyUm93RGVmPVwiZGlzcGxheWVkQ29sdW1uc1wiPjwvdHI+XHJcbiAgICAgICAgICAgICAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHJvdzsgbGV0IHggPSBpbmRleDsgY29sdW1uczogZGlzcGxheWVkQ29sdW1ucztcIiBbYXR0ci5kYXRhLXRlc3QtaWRdPVwiJ3RyJyArIHhcIiBbcm91dGVyTGlua109XCJbJy9kYXNoYm9hcmQvdmlzaXQtc3VtbWFyeScsIHJvdy51dWlkXVwiPjwvdHI+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgIDxtYXQtcGFnaW5hdG9yICN0ZW1wUGFnaW5hdG9yIGhpZGVQYWdlU2l6ZSBbcGFnZVNpemVPcHRpb25zXT1cIls1LCAxMCwgMjBdXCIgYXJpYS1sYWJlbD1cIlNlbGVjdCBwYWdlIG9mIHBlcmlvZGljIGVsZW1lbnRzXCI+PC9tYXQtcGFnaW5hdG9yPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvbWF0LWV4cGFuc2lvbi1wYW5lbD5cclxuICAgICAgICA8L21hdC1hY2NvcmRpb24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG4iXX0=