import { Component, ElementRef, ViewChild, Input, ChangeDetectionStrategy, Inject, Output, EventEmitter } from '@angular/core';
import { MatPaginator } from '@angular/material/paginator';
import { MatTableDataSource } from '@angular/material/table';
import { AppointmentService } from '../../services/appointment.service';
import { VisitService } from '../../services/visit.service';
import moment from 'moment';
import { CoreService } from '../../services/core.service';
import { ToastrService } from 'ngx-toastr';
import { TranslateService } from '@ngx-translate/core';
import { getCacheData, checkIfDateOldThanOneDay } from '../../utils/utility-functions';
import { doctorDetails, languages, visitTypes } from '../../config/constant';
import { MindmapService } from '../../services/mindmap.service';
import { AppConfigService } from '../../services/app-config.service';
import { FormControl, FormGroup, Validators } from '@angular/forms';
import { MatMenuTrigger } from '@angular/material/menu';
import { DomSanitizer } from '@angular/platform-browser';
import { NgxRolesService } from 'ngx-permissions';
import { MatSort } from '@angular/material/sort';
import { NgxUiLoaderService } from 'ngx-ui-loader';
import * as i0 from "@angular/core";
import * as i1 from "../../services/appointment.service";
import * as i2 from "../../services/visit.service";
import * as i3 from "../../services/core.service";
import * as i4 from "ngx-toastr";
import * as i5 from "@ngx-translate/core";
import * as i6 from "../../services/mindmap.service";
import * as i7 from "@angular/platform-browser";
import * as i8 from "../../services/app-config.service";
import * as i9 from "ngx-permissions";
import * as i10 from "ngx-ui-loader";
import * as i11 from "@angular/router";
import * as i12 from "@angular/common";
import * as i13 from "@angular/material/paginator";
import * as i14 from "@angular/material/tooltip";
import * as i15 from "@angular/material/form-field";
import * as i16 from "@angular/material/expansion";
import * as i17 from "@angular/material/menu";
import * as i18 from "@angular/material/table";
import * as i19 from "@angular/material/icon";
import * as i20 from "@angular/material/datepicker";
import * as i21 from "@angular/forms";
import * as i22 from "@angular/material/sort";
import * as i23 from "../../core/directives/default-image.directive";
export class TableGridComponent {
    appointmentService;
    visitService;
    coreService;
    toastr;
    translateService;
    mindmapService;
    sanitizer;
    appConfigService;
    rolesService;
    ngxLoader;
    pluginConfigObs;
    displayedAppointmentColumns = [];
    displayedColumns = [];
    dataSource = new MatTableDataSource();
    patientRegFields = [];
    isMCCUser = false;
    pageSizeOptions = [5, 10, 20];
    paginator;
    searchElement;
    filteredDateAndRangeForm;
    tempPaginator;
    menuTrigger;
    tableMatSort;
    panelExpanded = true;
    mode = 'date';
    maxDate;
    appointments = [];
    priorityVisits = [];
    awaitingVisits = [];
    inProgressVisits = [];
    completedVisits = [];
    followUpVisits = [];
    specialization = '';
    visitsCountDate = new EventEmitter();
    visitsLengthCount = 0;
    isFilterApplied = false;
    pvs;
    baseURL;
    isBrandName;
    ngAfterViewInit() {
        this.dataSource.paginator = this.paginator;
        // this.dataSource.sort = this.tableMatSort;
    }
    constructor(appointmentService, visitService, coreService, toastr, translateService, mindmapService, sanitizer, appConfigService, rolesService, ngxLoader, environment) {
        this.appointmentService = appointmentService;
        this.visitService = visitService;
        this.coreService = coreService;
        this.toastr = toastr;
        this.translateService = translateService;
        this.mindmapService = mindmapService;
        this.sanitizer = sanitizer;
        this.appConfigService = appConfigService;
        this.rolesService = rolesService;
        this.ngxLoader = ngxLoader;
        this.baseURL = environment.baseURL;
        this.filteredDateAndRangeForm = this.createFilteredDateRangeForm();
    }
    /**
     * Creates a filtered date range form with required date fields
     * @return {FormGroup} - The created form group
     */
    createFilteredDateRangeForm() {
        return new FormGroup({
            date: new FormControl('', [Validators.required]),
            startDate: new FormControl(null, Validators.required),
            endDate: new FormControl(null, Validators.required),
        });
    }
    ngOnInit() {
        this.isMCCUser = !!this.rolesService.getRole('ORGANIZATIONAL:MCC');
        this.appConfigService.load().then(() => {
            this.displayedColumns = this.displayedColumns.filter(col => (col !== 'age' || this.checkPatientRegField('Age')));
            Object.keys(this.appConfigService.patient_registration).forEach(obj => {
                this.patientRegFields.push(...this.appConfigService.patient_registration[obj].filter((e) => e.is_enabled).map((e) => e.name));
            });
            this.pvs = { ...this.appConfigService.patient_visit_summary };
            this.pvs.appointment_button = this.pvs.appointment_button;
            this.displayedColumns = this.displayedColumns.filter(col => {
                if (col === 'drName' && !this.isMCCUser)
                    return false;
                if (col === 'age')
                    return this.checkPatientRegField('Age');
                return true;
            });
            if (!this.pvs.awaiting_visits_patient_type_demarcation) {
                this.displayedColumns = this.displayedColumns.filter(col => (col !== 'patient_type'));
            }
        }).catch((error) => {
            console.error('Error loading app config', error);
        });
        this.translateService.use(getCacheData(false, languages.SELECTED_LANGUAGE));
        let provider = getCacheData(true, doctorDetails.PROVIDER);
        if (provider) {
            if (provider.attributes.length) {
                this.specialization = this.getSpecialization(provider.attributes);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Appointment") {
                this.getAppointments();
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Awaiting") {
                this.getAwaitingVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Priority") {
                this.getPriorityVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "InProgress") {
                this.getInProgressVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Completed") {
                this.getCompletedVisits();
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "FollowUp") {
                this.getFollowUpVisit();
            }
        }
        this.maxDate = this.pluginConfigObs.filterObs.filterDateMax;
        if (this.pluginConfigObs.hasOwnProperty("pageSizeOptions")) {
            this.pageSizeOptions = this.pluginConfigObs.pageSizeOptions;
        }
    }
    /**
     * Dynmaic label Display
     * @param changes pluginConfigObs
     */
    ngOnChanges(changes) {
        if (changes["pluginConfigObs"] && changes["pluginConfigObs"].currentValue) {
            this.displayedAppointmentColumns = [...changes["pluginConfigObs"].currentValue?.tableColumns];
            this.displayedColumns = this.displayedAppointmentColumns.map(column => column.key);
        }
        if ((!changes['pluginConfigObs'].firstChange) && this.pluginConfigObs.pluginConfigObsFlag == "Appointment" && changes["pluginConfigObs"].currentValue?.tableHeader !== changes["pluginConfigObs"].previousValue?.tableHeader) {
            this.getAppointments();
        }
    }
    /**
    * Retreive the chief complaints for the visit
    * @param {CustomVisitModel} visit - Visit
    * @return {string[]} - Chief complaints array
    */
    getCheifComplaint(visit) {
        let recent = [];
        const encounters = visit.encounters;
        encounters.forEach((encounter) => {
            const display = encounter.type?.name;
            if (display.match(visitTypes.ADULTINITIAL) !== null) {
                const obs = encounter.obs;
                obs.forEach((currentObs) => {
                    if (currentObs.concept_id == 163212) {
                        const currentComplaint = this.visitService.getData2(currentObs)?.value_text.replace(new RegExp('â–º', 'g'), '').split('<b>');
                        for (let i = 1; i < currentComplaint.length; i++) {
                            const obs1 = currentComplaint[i].split('<');
                            if (!obs1[0].match(visitTypes.ASSOCIATED_SYMPTOMS)) {
                                recent.push(obs1[0]);
                            }
                        }
                    }
                });
            }
        });
        return recent;
    }
    /**
    * Check how old the date is from now
    * @param {string} data - Date in string format
    * @return {string} - Returns how old the date is from now
    */
    checkIfDateOldThanOneDay(data) {
        let hours = moment(data).diff(moment(), 'hours');
        let minutes = moment(data).diff(moment(), 'minutes');
        if (hours > 24) {
            return moment(data).format('DD MMM, YYYY hh:mm A');
        }
        ;
        if (hours < 1) {
            if (minutes < 0)
                return `Due : ${moment(data).format('DD MMM, YYYY hh:mm A')}`;
            return `${minutes} minutes`;
        }
        return `${hours} hrs`;
    }
    /**
    * Reschedule appointment
    * @param {AppointmentModel} appointment - Appointment to be rescheduled
    * @param {boolean} isValidationRequired - If true, validation is required
    * @return {void}
    */
    reschedule(appointment, isValidationRequired) {
        const len = appointment.visit.encounters.filter((e) => {
            return (e.type.name == visitTypes.PATIENT_EXIT_SURVEY || e.type.name == visitTypes.VISIT_COMPLETE);
        }).length;
        const isCompleted = Boolean(len);
        if (isCompleted) {
            this.toastr.error(this.translateService.instant("Visit is already completed, it can't be rescheduled."), this.translateService.instant('Rescheduling failed!'));
        }
        else if (appointment.visitStatus == 'Visit In Progress' && isValidationRequired) {
            this.toastr.error(this.translateService.instant("Visit is in progress, it can't be rescheduled."), this.translateService.instant('Rescheduling failed!'));
        }
        else {
            this.coreService.openRescheduleAppointmentModal(appointment).subscribe((res) => {
                if (res) {
                    let newSlot = res;
                    this.coreService.openRescheduleAppointmentConfirmModal({ appointment, newSlot }).subscribe((result) => {
                        if (result) {
                            appointment.appointmentId = appointment.id;
                            appointment.slotDate = moment(newSlot.date, "YYYY-MM-DD").format('DD/MM/YYYY');
                            appointment.slotTime = newSlot.slot;
                            this.appointmentService.rescheduleAppointment(appointment).subscribe((res) => {
                                const message = res.message;
                                if (res.status) {
                                    this.mindmapService.notifyHwForRescheduleAppointment(appointment);
                                    this.getAppointments();
                                    this.toastr.success(this.translateService.instant("The appointment has been rescheduled successfully!"), this.translateService.instant('Rescheduling successful!'));
                                }
                                else {
                                    this.toastr.success(message, this.translateService.instant('Rescheduling failed!'));
                                }
                            });
                        }
                    });
                }
            });
        }
    }
    /**
    * Cancel appointment
    * @param {AppointmentModel} appointment - Appointment to be rescheduled
    * @param {boolean} isValidationRequired - If true, validation is required
    * @return {void}
    */
    cancel(appointment, isValidationRequired) {
        if (appointment.visitStatus == 'Visit In Progress' && isValidationRequired) {
            this.toastr.error(this.translateService.instant("Visit is in progress, it can't be cancelled."), this.translateService.instant('Canceling failed!'));
            return;
        }
        this.coreService.openConfirmCancelAppointmentModal(appointment).subscribe((res) => {
            if (res) {
                this.toastr.success(this.translateService.instant('The Appointment has been successfully canceled.'), this.translateService.instant('Canceling successful'));
                this.getAppointments();
            }
        });
    }
    /**
    * Get user uuid from localstorage user
    * @return {string} - User uuid
    */
    get userId() {
        return getCacheData(true, doctorDetails.USER).uuid;
    }
    /**
    * Apply filter on a datasource
    * @param {Event} event - Input's change event
    * @return {void}
    */
    applyFilter(event) {
        const filterValue = event.target.value;
        this.dataSource.filter = filterValue.trim().toLowerCase();
        this.isFilterApplied = true;
    }
    /**
    * Clear filter from a datasource
    * @return {void}
    */
    clearFilter() {
        this.dataSource.filter = null;
        this.searchElement.nativeElement.value = "";
        this.isFilterApplied = false;
    }
    /**
     * Checks if the field is in patient registration fields
     * @param {string} fieldName - The field name
     * @return {boolean} - True if present, else false
     */
    checkPatientRegField(fieldName) {
        return this.patientRegFields.indexOf(fieldName) !== -1;
    }
    /**
    * Returns the WhatsApp link for a given telephone number
    * @param {string} telephoneNumber - The telephone number to generate the link for
    * @return {string} - The WhatsApp link
    */
    getWhatsAppLink(telephoneNumber) {
        return this.visitService.getWhatsappLink(telephoneNumber);
    }
    /**
     * Retrieves the telephone number from the person's attributes
     * @param {AppointmentModel['visit']['person']} person - The person object containing attributes
     * @return {string | undefined} - The person's telephone number or undefined if not found
     */
    getTelephoneNumber(person) {
        return person?.person_attribute.find((v) => v.person_attribute_type_id == 8)?.value;
    }
    /**
     * Closes the menu if it's open
     */
    closeMenu() {
        if (this.menuTrigger) {
            this.menuTrigger.closeMenu();
        }
    }
    /**
     * Sets the mode for the component (either 'date' or 'range')
     * @param {'date' | 'range'} mode - The mode to set
     */
    setMode(mode) {
        this.mode = mode;
    }
    /**
     * Formats a date into 'YYYY-MM-DD' format
     * @param {any} date - The date to format
     * @return {string} - The formatted date
     */
    formatDate(date) {
        const localDate = new Date(date);
        const year = localDate.getFullYear();
        const month = String(localDate.getMonth() + 1).padStart(2, '0');
        const day = String(localDate.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }
    /**
     * Converts a relative time string (e.g., "2 hours", "1 day") to a date string
     * @param {string} relativeTime - The relative time string
     * @return {string} - The resulting date in 'YYYY-MM-DD' format
     * @throws {Error} - Throws error for invalid time units
     */
    convertToDate(relativeTime) {
        const now = new Date();
        const [value, unit] = relativeTime.split(' ');
        const amount = parseInt(value, 10);
        if (['hour', 'hours'].includes(unit.toLowerCase()))
            now.setHours(now.getHours() - amount);
        else if (['minute', 'minutes'].includes(unit.toLowerCase()))
            now.setMinutes(now.getMinutes() - amount);
        else if (['day', 'days'].includes(unit.toLowerCase()))
            now.setDate(now.getDate() - amount);
        else
            throw new Error('Invalid time unit. Only "hours", "minutes", or "days" are supported.');
        return now.toISOString().split('T')[0];
    }
    /**
     * Converts a follow-up date string to ISO format
     * @param {string} followUp - The follow-up date string
     * @return {string} - The follow-up date in ISO string format
     */
    convertToISO(followUp) {
        const date = new Date(followUp);
        date.setDate(date.getDate());
        return date.toISOString();
    }
    /**
     * Applies date or range filter to the data source based on selected date(s)
     * @param {string} dateField - The field name for the date to filter
     */
    applyDateOrRangeFilter(dateField) {
        const selectedDate = this.filteredDateAndRangeForm.get('date')?.value;
        const startDate = this.filteredDateAndRangeForm.get('startDate')?.value;
        const endDate = this.filteredDateAndRangeForm.get('endDate')?.value;
        if (selectedDate) {
            const formattedDate = this.formatDate(selectedDate);
            this.dataSource.filterPredicate = (data, filter) => {
                let itemDate;
                if (dateField === "followUp") {
                    itemDate = this.formatDate(this.convertToISO(data.followUp));
                }
                else if (dateField === "slotJsDate") {
                    itemDate = this.formatDate(data[dateField]);
                }
                else {
                    itemDate = data[dateField].includes(',') ? this.formatDate(data[dateField]) : this.convertToDate(data[dateField]);
                }
                return itemDate === filter;
            };
            this.dataSource.filter = formattedDate;
        }
        else if (startDate && endDate) {
            const formattedStartDate = this.formatDate(startDate);
            const formattedEndDate = this.formatDate(endDate);
            this.dataSource.filterPredicate = (data, filter) => {
                let itemDate;
                if (dateField === "followUp") {
                    itemDate = this.formatDate(this.convertToISO(data.followUp));
                }
                else if (dateField === "slotJsDate") {
                    itemDate = this.formatDate(data[dateField]);
                }
                else {
                    itemDate = data[dateField].includes(',') ? this.formatDate(data[dateField]) : this.convertToDate(data[dateField]);
                }
                return itemDate >= formattedStartDate && itemDate <= formattedEndDate;
            };
            this.dataSource.filter = `${formattedStartDate}:${formattedEndDate}`;
        }
        else {
            this.dataSource.filter = '';
        }
        this.tempPaginator.firstPage();
        this.closeMenu();
    }
    /**
     * Resets the date filter form and clears the data source filter
     * @param {boolean} flag - If true, doesn't close the menu
     */
    resetDate(flag = false) {
        this.filteredDateAndRangeForm.reset();
        this.dataSource.filter = '';
        this.dataSource.filterPredicate = (data, filter) => data?.openMrsId.toLowerCase().indexOf(filter) != -1 || data?.patientName.toLowerCase().indexOf(filter) != -1;
        if (!flag) {
            this.closeMenu();
        }
    }
    /**
     * Retrieves a specific attribute data from the person's attributes
     * @param {any} data - The data object containing person attributes
     * @param {string} attributeName - The name of the attribute to retrieve
     * @return {Object | null} - The attribute name and value, or null if not found
     */
    getAttributeData(data, attributeName) {
        if (Array.isArray(data.person_attribute)) {
            const attribute = data.person_attribute.find((attr) => attr.person_attribute_type?.name === attributeName);
            if (attribute) {
                return {
                    name: attribute.person_attribute_type.name,
                    value: attribute.value
                };
            }
        }
        return null;
    }
    /**
    * Get booked appointments for a logged-in doctor in a current year
    * @return {void}
    */
    getAppointments() {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Start section loader
        this.appointments = [];
        let fromDate = moment().startOf('year').format('DD/MM/YYYY');
        let toDate = moment().endOf('year').format('DD/MM/YYYY');
        let pending_visits = this.pluginConfigObs.filter?.hasOwnProperty("pending_visits") ? this.pluginConfigObs.filter?.pending_visits : null;
        if (this.pluginConfigObs?.filter) {
            fromDate = this.pluginConfigObs?.filter?.fromDate;
            toDate = this.pluginConfigObs?.filter?.toDate;
        }
        this.appointmentService.getUserSlots(getCacheData(true, doctorDetails.USER).uuid, fromDate, toDate, this.isMCCUser ? this.specialization : null, pending_visits)
            .subscribe({
            next: (res) => {
                this.visitsLengthCount = res.data?.length;
                this.emitVisitsCount(this.visitsLengthCount);
                let appointmentsdata = res.data;
                appointmentsdata.forEach((appointment) => {
                    if (appointment.status == 'booked' && (appointment.visitStatus == 'Awaiting Consult' || appointment.visitStatus == 'Visit In Progress')) {
                        if (appointment.visit) {
                            appointment.cheif_complaint = this.getCheifComplaint(appointment.visit);
                            appointment.starts_in = checkIfDateOldThanOneDay(appointment.slotJsDate);
                            appointment.telephone = this.getTelephoneNumber(appointment?.visit?.person);
                            appointment.TMH_patient_id = this.getAttributeData(appointment.visit, "TMH Case Number")?.value;
                            appointment.uuid = appointment.visitUuid;
                            appointment.location = appointment?.visit?.location?.name;
                            appointment.age = appointment?.patientAge + ' ' + this.translateService.instant('y');
                            this.appointments.push(appointment);
                        }
                    }
                });
                this.dataSource.data = [...this.appointments];
                this.dataSource.paginator = this.paginator;
                this.dataSource.sort = this.tableMatSort;
                this.dataSource.filterPredicate = (data, filter) => data?.openMrsId.toLowerCase().indexOf(filter) != -1 || data?.patientName.toLowerCase().indexOf(filter) != -1;
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Stop section loader
            }
        });
    }
    /**
    * Get doctor speciality
    * @param {ProviderAttributeModel[]} attr - Array of provider attributes
    * @return {string} - Doctor speciality
    */
    getSpecialization(attr) {
        let specialization = '';
        attr.forEach((a) => {
            if (a.attributeType.uuid == 'ed1715f5-93e2-404e-b3c9-2a2d9600f062' && !a.voided) {
                specialization = a.value;
            }
        });
        return specialization;
    }
    /**
    * Returns the age in years from the birthdate
    * @param {string} birthdate - Date in string format
    * @return {number} - Age
    */
    calculateAge(birthdate) {
        return moment().diff(birthdate, 'years');
    }
    /**
    * Returns the created time in words from the date
    * @param {string} data - Date
    * @return {string} - Created time in words from the date
    */
    getCreatedAt(data) {
        let hours = moment().diff(moment(data), 'hours');
        let minutes = moment().diff(moment(data), 'minutes');
        if (hours > 24) {
            return moment(data).format('DD MMM, YYYY');
        }
        ;
        if (hours < 1) {
            return `${minutes} ${this.translateService.instant("Minutes ago")}`;
        }
        return `${hours} ${this.translateService.instant("Hours ago")}`;
    }
    /**
    * Get encounter datetime for a given encounter type
    * @param {CustomVisitModel} visit - Visit
    * @param {string} encounterName - Encounter type
    * @return {string} - Encounter datetime
    */
    getEncounterCreated(visit, encounterName) {
        let created_at = '';
        const encounters = visit.encounters;
        encounters.forEach((encounter) => {
            const display = encounter.type?.name;
            if (display.match(encounterName) !== null) {
                created_at = this.getCreatedAt(encounter.encounter_datetime.replace('Z', '+0530'));
            }
        });
        return created_at;
    }
    /**
     * Determines if the encounter is a follow-up or new visit
     * @param {any} enc - Encounter data
     * @return {string} - 'FOLLOW_UP' or 'NEW'
     */
    getDemarcation(enc) {
        let isFollowUp = false;
        const adlIntl = enc?.find?.(e => e?.type?.name === visitTypes.ADULTINITIAL);
        if (Array.isArray(adlIntl?.obs)) {
            adlIntl?.obs.forEach(obs => {
                if (!isFollowUp)
                    isFollowUp = obs?.value_text?.toLowerCase?.()?.includes?.("follow up");
            });
        }
        return isFollowUp ? visitTypes.FOLLOW_UP : visitTypes.NEW;
    }
    /**
    * Get awaiting visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getAwaitingVisits(page = 1) {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Start section loader
        if (page == 1) {
            this.awaitingVisits = [];
        }
        this.visitService.getAwaitingVisits(this.specialization, page).subscribe({
            next: (res) => {
                if (res.success) {
                    this.visitsLengthCount = res.totalCount;
                    this.emitVisitsCount(this.visitsLengthCount);
                    for (let i = 0; i < res.data.length; i++) {
                        let visit = res.data[i];
                        visit.cheif_complaint = this.getCheifComplaint(visit);
                        visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.ADULTINITIAL);
                        visit.person.age = this.calculateAge(visit.person.birthdate);
                        visit.patient_type = this.getDemarcation(visit?.encounters);
                        visit.location = visit?.location?.name;
                        visit.age = visit?.person?.age + ' ' + this.translateService.instant('y');
                        this.awaitingVisits.push(visit);
                    }
                    this.dataSource.data = [...this.awaitingVisits];
                    if (page == 1) {
                        this.dataSource.paginator = this.tempPaginator;
                        this.dataSource.sort = this.tableMatSort;
                        this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                    }
                    else {
                        this.tempPaginator.length = this.awaitingVisits.length;
                        this.tempPaginator.nextPage();
                    }
                }
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Stop section loader
            }
        });
    }
    /**
    * Get inprogress visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getInProgressVisits(page = 1) {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Start section loader
        if (page == 1) {
            this.inProgressVisits = [];
        }
        this.visitService.getInProgressVisits(this.specialization, page).subscribe({
            next: (res) => {
                if (res.success) {
                    this.visitsLengthCount = res.totalCount;
                    this.emitVisitsCount(this.visitsLengthCount);
                    for (let i = 0; i < res.data.length; i++) {
                        let visit = res.data[i];
                        visit.cheif_complaint = this.getCheifComplaint(visit);
                        visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.ADULTINITIAL);
                        visit.prescription_started = this.getEncounterCreated(visit, visitTypes.VISIT_NOTE);
                        visit.person.age = this.calculateAge(visit.person.birthdate);
                        visit.TMH_patient_id = this.getAttributeData(visit, "TMH Case Number")?.value;
                        visit.location = visit?.location?.name;
                        visit.age = visit?.person?.age + ' ' + this.translateService.instant('y');
                        this.inProgressVisits.push(visit);
                    }
                    this.inProgressVisits.sort((a, b) => {
                        const parseTime = (value) => {
                            if (value.includes("minutes ago")) {
                                return { type: "minutes", time: parseInt(value) }; // Store only numeric minutes
                            }
                            if (value.includes("Hours ago")) {
                                return { type: "hours", time: parseInt(value) * 60 }; // Convert hours to minutes for correct comparison
                            }
                            return { type: "date", time: moment(value, "DD MMM, YYYY").valueOf() };
                        };
                        const visitA = parseTime(a.prescription_started);
                        const visitB = parseTime(b.prescription_started);
                        // Sort minutes first (ascending)
                        if (visitA.type === "minutes" && visitB.type === "minutes") {
                            return visitA.time - visitB.time;
                        }
                        // Sort hours first (ascending)
                        if (visitA.type === "hours" && visitB.type === "hours") {
                            return visitA.time - visitB.time;
                        }
                        // Sort dates (descending)
                        if (visitA.type === "date" && visitB.type === "date") {
                            return visitB.time - visitA.time;
                        }
                        // Prioritize minutes over hours, and hours over dates
                        if (visitA.type === "minutes")
                            return -1;
                        if (visitB.type === "minutes")
                            return 1;
                        if (visitA.type === "hours")
                            return -1;
                        if (visitB.type === "hours")
                            return 1;
                        return 0;
                    });
                    this.dataSource.data = [...this.inProgressVisits];
                    if (page == 1) {
                        this.dataSource.paginator = this.tempPaginator;
                        this.dataSource.sort = this.tableMatSort;
                        this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                    }
                    else {
                        this.tempPaginator.length = this.inProgressVisits.length;
                        this.tempPaginator.nextPage();
                    }
                }
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Stop section loader
            }
        });
    }
    /**
    * Get priority visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getPriorityVisits(page = 1) {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Start section loader
        if (page == 1) {
            this.priorityVisits = [];
        }
        this.visitService.getPriorityVisits(this.specialization, page).subscribe({
            next: (res) => {
                if (res.success) {
                    this.visitsLengthCount = res.totalCount;
                    this.emitVisitsCount(this.visitsLengthCount);
                    for (let i = 0; i < res.data.length; i++) {
                        let visit = res.data[i];
                        visit.cheif_complaint = this.getCheifComplaint(visit);
                        visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.FLAGGED);
                        visit.person.age = this.calculateAge(visit.person.birthdate);
                        visit.location = visit?.location?.name;
                        visit.age = visit?.person?.age + ' ' + this.translateService.instant('y');
                        this.priorityVisits.push(visit);
                    }
                    this.dataSource.data = [...this.priorityVisits];
                    if (page == 1) {
                        this.dataSource.paginator = this.tempPaginator;
                        this.dataSource.sort = this.tableMatSort;
                        this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                    }
                    else {
                        this.tempPaginator.length = this.priorityVisits.length;
                        this.tempPaginator.nextPage();
                    }
                }
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Stop section loader
            }
        });
    }
    /**
     * Get completed visits count
     * @return {void}
     */
    getCompletedVisits(page = 1) {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Start section loader
        this.visitService.getEndedVisits(this.specialization, page).subscribe({
            next: (res) => {
                if (res.success) {
                    this.visitsLengthCount = res.totalCount;
                    this.emitVisitsCount(this.visitsLengthCount);
                    for (let i = 0; i < res.data.length; i++) {
                        let visit = res.data[i];
                        visit.cheif_complaint = this.getCheifComplaint(visit);
                        visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.COMPLETED_VISIT);
                        visit.person.age = this.calculateAge(visit.person.birthdate);
                        visit.completed = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.VISIT_COMPLETE);
                        visit.TMH_patient_id = this.getAttributeData(visit, "TMH Case Number")?.value;
                        visit.location = visit?.location?.name;
                        visit.age = visit?.person?.age + ' ' + this.translateService.instant('y');
                        this.completedVisits.push(visit);
                    }
                    this.dataSource.data = [...this.completedVisits];
                    if (page == 1) {
                        this.dataSource.paginator = this.tempPaginator;
                        this.dataSource.sort = this.tableMatSort;
                        this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                    }
                    else {
                        this.tempPaginator.length = this.completedVisits.length;
                        this.tempPaginator.nextPage();
                    }
                }
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Stop section loader
            }
        });
    }
    /**
    * Get follow-up visits for a logged-in doctor
    * @return {void}
    */
    getFollowUpVisit(page = 1) {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Start section loader
        this.visitService.getFollowUpVisits(this.specialization).subscribe({
            next: (res) => {
                if (res.success) {
                    for (let i = 0; i < res.data.length; i++) {
                        let visit = res.data[i];
                        if (visit?.encounters?.length) {
                            this.visitsLengthCount += 1;
                            visit.cheif_complaint = this.getCheifComplaint(visit);
                            visit.visit_created = visit?.date_created ? this.getCreatedAt(visit.date_created.replace('Z', '+0530')) : this.getEncounterCreated(visit, visitTypes.COMPLETED_VISIT);
                            visit.person.age = this.calculateAge(visit.person.birthdate);
                            visit.completed = this.getEncounterCreated(visit, visitTypes.VISIT_COMPLETE);
                            visit.followUp = this.processFollowUpDate(this.getEncounterObs(visit.encounters, visitTypes.VISIT_NOTE, 163345 /*Follow-up*/)?.value_text);
                            visit.location = visit?.location?.name;
                            visit.age = visit?.person?.age + ' ' + this.translateService.instant('y');
                            this.followUpVisits.push(visit);
                        }
                    }
                    this.emitVisitsCount(this.visitsLengthCount);
                    this.dataSource.data = [...this.followUpVisits];
                    if (page == 1) {
                        this.dataSource.paginator = this.tempPaginator;
                        this.dataSource.sort = this.tableMatSort;
                        this.dataSource.filterPredicate = (data, filter) => data?.patient.identifier.toLowerCase().indexOf(filter) != -1 || data?.patient_name.given_name.concat((data?.patient_name.middle_name && this.checkPatientRegField('Middle Name') ? ' ' + data?.patient_name.middle_name : '') + ' ' + data?.patient_name.family_name).toLowerCase().indexOf(filter) != -1;
                    }
                    else {
                        this.tempPaginator.length = this.followUpVisits.length;
                        this.tempPaginator.nextPage();
                    }
                }
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Stop section loader
            }
        });
    }
    /**
    * Get encounter datetime for a given encounter type
    * @param {CustomVisitModel} visit - Visit
    * @param {string} encounterName - Encounter type
    * @return {string} - Encounter datetime
    */
    getEncounterObs(encounters, encounterName, conceptId) {
        let obs;
        encounters.forEach((encounter) => {
            if (encounter.type?.name === encounterName) {
                obs = encounter?.obs?.find((o) => o.concept_id == conceptId);
            }
        });
        return obs;
    }
    /**
     * Renders HTML content for a column, sanitized for security
     * @param {any} column - Column definition
     * @param {any} element - Data element to render
     * @return {string} - Formatted HTML or element value
     */
    renderHtmlContent(column, element) {
        return column.formatHtml && typeof column.formatHtml === 'function' ? this.sanitizer.bypassSecurityTrustHtml(column.formatHtml(element)) : element[column.key];
    }
    /**
     * Returns a string of CSS classes for the column
     * @param {any} column - Column definition
     * @return {string} - Space-separated class names
     */
    getClasses(column, element) {
        let classList = [];
        // If column has a static classList (array or string), add it
        if (column.classList) {
            classList = typeof column.classList === "function" ? column.classList(element) : column.classList;
        }
        return classList.join(" ");
    }
    /**
     * Formats the follow-up date by cleaning up time details
     * @param {string} value - Follow-up date string
     * @return {string} - Formatted date
     */
    processFollowUpDate(value) {
        return value ? value.split(',').length > 1 ? `${value.split(',')[0]}${value.split(',')[1].replace("Time:", "")}` : value : '';
    }
    ;
    /**
     * Executes the action based on its label (Reschedule or Cancel)
     * @param {any} action - Action object
     * @param {any} element - Element to perform the action on
     */
    handleAction(action, element) {
        const isValidationRequired = action.validationRequired !== undefined ? action.validationRequired : true;
        if (action.label === 'Reschedule') {
            this.reschedule(element, isValidationRequired);
        }
        else if (action.label === 'Cancel') {
            this.cancel(element, isValidationRequired);
        }
    }
    /**
     * Opens a WhatsApp chat with the given phone number
     * @param {MouseEvent} event - The click event to prevent row navigation
     * @param {string} telephone - Phone number for WhatsApp
     */
    openWhatsApp(event, telephone) {
        event.stopPropagation(); // Prevent row navigation
        const whatsappLink = `https://wa.me/${telephone}`;
        window.open(whatsappLink, '_blank', 'noopener,noreferrer');
    }
    /**
     * Emits the visits count data with the given table tag name and count
     * @param {number} visitsCount - The total visits count for the specific table
     */
    emitVisitsCount(visitsCount) {
        const visitsCountData = {
            tableTagName: this.pluginConfigObs.pluginConfigObsFlag,
            visitsCount: visitsCount
        };
        this.visitsCountDate.emit(visitsCountData);
    }
    static Éµfac = i0.ÉµÉµngDeclareFactory({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: TableGridComponent, deps: [{ token: i1.AppointmentService }, { token: i2.VisitService }, { token: i3.CoreService }, { token: i4.ToastrService }, { token: i5.TranslateService }, { token: i6.MindmapService }, { token: i7.DomSanitizer }, { token: i8.AppConfigService }, { token: i9.NgxRolesService }, { token: i10.NgxUiLoaderService }, { token: 'environment' }], target: i0.ÉµÉµFactoryTarget.Component });
    static Éµcmp = i0.ÉµÉµngDeclareComponent({ minVersion: "14.0.0", version: "14.3.0", type: TableGridComponent, selector: "lib-table-grid", inputs: { pluginConfigObs: "pluginConfigObs" }, outputs: { visitsCountDate: "visitsCountDate" }, viewQueries: [{ propertyName: "paginator", first: true, predicate: MatPaginator, descendants: true }, { propertyName: "searchElement", first: true, predicate: ["searchInput"], descendants: true, static: true }, { propertyName: "tempPaginator", first: true, predicate: ["tempPaginator"], descendants: true }, { propertyName: "menuTrigger", first: true, predicate: MatMenuTrigger, descendants: true }, { propertyName: "tableMatSort", first: true, predicate: ["tableMatSort"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: "<mat-expansion-panel [expanded]=\"true\" data-test-id=\"matExpAppointment\">\n  <mat-expansion-panel-header data-test-id=\"matExpHeaderAppointment\">\n    <mat-panel-title>\n      <div id=\"{{pluginConfigObs.anchorId}}\" class=\"anchor-con\"></div>\n      <div class=\"intel-accordion-title\">\n        <img src=\"{{ pluginConfigObs.tableHeaderIcon }}\" alt=\"\" width=\"44px\">\n        <h6 class=\"mb-0 ml-2\">{{ pluginConfigObs.tableHeader | translate }} ({{ visitsLengthCount }})</h6>\n        <mat-icon aria-hidden=\"false\" aria-label=\"help icon\" matTooltip=\"{{ (pluginConfigObs.tooltipLabel | translate) }}\" matTooltipPosition=\"right\" data-test-id=\"matIcoHelpAppointment\">help_outline</mat-icon>\n        <div class=\"ml-auto filter-search-container\">\n          <button *ngIf=\"pluginConfigObs.filterObs.filterFlag\" class=\"mat-stroked-button\"[matMenuTriggerFor]=\"filterMenu1\" class=\"filter-btn\" (click)=\"$event.stopPropagation();\">\n            <img src=\"{{pluginConfigObs.filterObs.filterIcon}}\" alt=\"\"> {{( pluginConfigObs.filterObs.filterLabel| translate)}}\n          </button>\n          <mat-menu #filterMenu1=\"matMenu\" class=\"custom-menu\" [hasBackdrop]=\"true\" xPosition=\"before\">\n            <div class=\"toggle-buttons\">\n              <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'date'\" (click)=\"setMode('date'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Date' | translate}}</span></span></button>\n              <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'range'\" (click)=\"setMode('range'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Range' | translate}}</span></span></button>\n            </div>\n            <div *ngIf=\"mode === 'date'\" class=\"date-view\" (click)=\"$event.stopPropagation()\">\n              <form [formGroup]=\"filteredDateAndRangeForm\">\n                <div class=\"form-date\">\n                  <div class=\"input-date\">\n                    <label class=\"label-text\">{{ 'Select date' | translate}}</label>\n                    <div class=\"input-wrapper\">\n                      <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"date\" [matDatepicker]=\"dobdp\" placeholder=\"{{'Select date' | translate}}\" aria-label=\"Date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etDate\"/>\n                      <mat-datepicker #dobdp></mat-datepicker>\n                      <mat-datepicker-toggle matSuffix [for]=\"dobdp\" data-test-id=\"dpDate\" class=\"datepicker-icon\">\n                        <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\n                      </mat-datepicker-toggle>\n                    </div>\n                  </div>\n                </div>\n              </form>\n              </div>\n              <div *ngIf=\"mode === 'range'\" class=\"range-view\" (click)=\" $event.stopPropagation()\">\n                <form [formGroup]=\"filteredDateAndRangeForm\">\n                  <div class=\"form-date\">\n                    <div class=\"input-date\">\n                      <label class=\"label-text\">{{ 'Start date' | translate }}</label>\n                      <div class=\"input-wrapper\">\n                        <input type=\"text\" class=\"form-control\" [max]=\"filteredDateAndRangeForm.value.endDate ? filteredDateAndRangeForm.value.endDate : maxDate\" formControlName=\"startDate\" [matDatepicker]=\"picker1\" placeholder=\"{{'Select start date'|translate}}\" aria-label=\"Start date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etSelStartDate\">\n                        <mat-datepicker #picker1></mat-datepicker>\n                        <mat-datepicker-toggle matSuffix [for]=\"picker1\" class=\"datepicker-icon\">\n                          <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\n                        </mat-datepicker-toggle>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"form-date\">\n                    <div class=\"input-date\">\n                      <label class=\"label-text\">{{ 'End date' | translate }}</label>\n                      <div class=\"input-wrapper\">\n                        <input type=\"text\" class=\"form-control\" [min]=\"filteredDateAndRangeForm.value.startDate\" [max]=\"maxDate\" formControlName=\"endDate\" [matDatepicker]=\"picker2\" placeholder=\"{{'Select end date'|translate}}\" aria-label=\"End date\" aria-describedby=\"basic-addon2\" readonly data-test-id=\"etSelEndDate\">\n                        <mat-datepicker #picker2></mat-datepicker>\n                        <mat-datepicker-toggle matSuffix [for]=\"picker2\" class=\"datepicker-icon\">\n                          <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\n                        </mat-datepicker-toggle>\n                      </div>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            <div class=\"action-buttons\">\n              <button mat-button class=\"mat-focus-indicator reset-btn mat-button mat-button-base\" (click)=\"resetDate();\"><span class=\"mat-button-wrapper\">{{ 'Reset'| translate }}</span></button>\n              <button mat-button class=\"mat-focus-indicator apply-btn mat-button mat-button-base\" (click)=\"applyDateOrRangeFilter(pluginConfigObs.filterObs.filterDateField)\"><span class=\"mat-button-wrapper\">{{ 'Apply'| translate }}</span></button>\n            </div>\n          </mat-menu>\n          <div class=\"input-group search-bar ml-auto\" (click)=\"$event.stopPropagation();\">\n            <input type=\"text\" #searchInput class=\"form-control\" placeholder=\"{{ pluginConfigObs.searchPlaceHolder | translate }}\" aria-label=\"search1\" aria-describedby=\"basic-addon1\" (keyup)=\"applyFilter($event)\" (keydown.Space)=\"$event.stopPropagation()\" (keydown.Enter)=\"$event.stopPropagation()\" data-test-id=\"etSearchAppointmentDashboard\">\n            <div class=\"input-group-append\">\n              <span class=\"input-group-text\" id=\"basic-addon1\"  *ngIf=\"!isFilterApplied\">\n                <img src=\"assets/svgs/search-icon.svg\" alt=\"\" width=\"20px\" height=\"20px\">\n              </span>\n              <button data-test-id=\"btnResetApSerach\"  class=\"btnResetApSerach\" class=\"btnResetApSerach\" class=\"mat-icon-button\" aria-label=\"Reset appointment search\"  (click)=\"clearFilter()\"  *ngIf=\"isFilterApplied\">\n                <mat-icon class=\"ml-0\" style=\"line-height: normal;\">close</mat-icon>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </mat-panel-title>\n  </mat-expansion-panel-header>\n  <div class=\"mat-elevation-z8\">\n    <ngx-ui-loader \n      [loaderId]=\"'table-loader-' + pluginConfigObs.pluginConfigObsFlag\" \n      [fgsType]=\"'ball-spin-clockwise'\" \n      [fgsColor]=\"'#aba4a4'\" \n      [fgsPosition]=\"'center-center'\" \n      [fgsSize]=\"50\" \n      [overlayColor]=\"'rgb(255, 255, 255)'\" \n      [hasProgressBar]=\"false\"\n      [text]=\"('Loading'|translate) + ' ' + (pluginConfigObs.pluginConfigObsFlag|translate) + ' ' + ('data'|translate) + '...'\"\n      [textColor]=\"'#333'\"\n      [textPosition]=\"'center-center'\"\n    ></ngx-ui-loader>\n\n    <table mat-table [dataSource]=\"dataSource\" #tableMatSort=\"matSort\" matSort>\n\n      <ng-container *ngFor=\"let column of displayedAppointmentColumns\" [matColumnDef]=\"column.key\">\n        <ng-container *ngIf=\"column.isSortable; else noSort\">\n          <th mat-header-cell *matHeaderCellDef mat-sort-header matSortDirection=\"asc\">\n            {{ column.label | translate }}\n          </th>\n        </ng-container>\n        <ng-template #noSort>\n          <th mat-header-cell *matHeaderCellDef>\n            {{ column.label | translate }}\n          </th>\n        </ng-template>\n\n        <td mat-cell *matCellDef=\"let element; let j = index;\" [attr.data-test-id]=\"'td' + j\">\n          <ng-container *ngIf=\"column.key !== 'patient_name'\">\n            <div class=\"float-left\" \n                [innerHTML]=\"renderHtmlContent(column, element)\" \n                [ngClass]=\"getClasses(column, element)\">\n            </div>\n          </ng-container>\n\n          <!-- Patient Name Column -->\n          <ng-container *ngIf=\"column.key === 'patient_name'\">\n            <div class=\"d-flex align-items-center\">\n              <img *ngIf=\"element.patientId\" src=\"{{ checkPatientRegField('Profile Photo') ? baseURL + '/personimage/' + element.patientId : '' }}\" alt=\"\" width=\"32px\" height=\"32px\" style=\"border-radius: 50%;\">\n              <img *ngIf=\"pluginConfigObs.pluginConfigObsFlag !== 'Appointment'\" src=\"{{ checkPatientRegField('Profile Photo') ? baseURL + '/personimage/' + element.person.uuid : '' }}\" alt=\"\" width=\"32px\" height=\"32px\" style=\"border-radius: 50%;\">\n              <div class=\"float-left\" \n                [innerHTML]=\"renderHtmlContent(column, element)\" \n                [ngClass]=\"getClasses(column, element)\">\n              </div>\n            </div>\n          </ng-container>\n\n          <!-- Telephone Column -->\n          <ng-container *ngIf=\"column.key === 'telephone' && element.telephone\">\n            <a (click)=\"openWhatsApp($event, element.telephone)\" class=\"float-left icon-btn m-0\" [attr.data-test-id]=\"'linkPatientWhatsApp' + j\">\n              <img src=\"assets/svgs/whatsapp-green.svg\" alt=\"WhatsApp\" />\n            </a>\n          </ng-container>\n\n          <!-- Actions Column -->\n          <ng-container *ngIf=\"column.key === 'actions'\">\n            <div class=\"actions-btn-wrap d-flex align-items-center\">\n              <button\n                *ngFor=\"let action of column.actionButtons\"\n                [ngStyle]=\"{\n                  color: action.style?.color,\n                  backgroundColor: action.style?.backgroundColor\n                }\"\n                class=\"action-btn mr-2\"\n                type=\"button\"\n                (click)=\"$event.stopPropagation(); handleAction(action, element)\"\n              >\n                {{ action.label | translate }}\n              </button>\n            </div>\n          </ng-container>\n        </td>\n      </ng-container>\n    \n\n      <!-- No Data Row -->\n      <tr class=\"mat-row\" *matNoDataRow>\n        <td class=\"mat-cell text-center\" [attr.colspan]=\"displayedColumns.length\">\n          {{ pluginConfigObs.noRecordFound | translate }}\n        </td>\n      </tr>\n\n      <!-- Row Definitions -->\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n      <tr mat-row *matRowDef=\"let row; let x = index; columns: displayedColumns;\" [attr.data-test-id]=\"'tr' + x\" [routerLink]=\"['/dashboard/visit-summary', row.uuid]\"></tr>\n      \n    </table>\n    <mat-paginator #tempPaginator hidePageSize [pageSizeOptions]=\"pageSizeOptions\" aria-label=\"Select page of periodic elements\"></mat-paginator>\n  </div>\n</mat-expansion-panel>\n", styles: [".mat-elevation-z8{box-shadow:none;width:100%;overflow-x:auto}table{width:100%;font-family:DM Sans}th.mat-header-cell{border:none;font-size:14px!important;font-weight:700;color:var(--color-gray);height:21px}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{border:none;min-width:60px;white-space:nowrap;padding-right:24px}th.mat-header-cell span.alert-danger,td.mat-cell span.alert-danger,td.mat-footer-cell span.alert-danger{color:var(--color-red);font-weight:700;background:transparent;border:none}th.mat-header-cell span.alert-success,td.mat-cell span.alert-success,td.mat-footer-cell span.alert-success{color:var(--color-green);font-weight:700;background:transparent;border:none}td.mat-cell{font-size:16px}tr.mat-row,tr.mat-footer-row{height:88px;border-radius:8px;cursor:pointer}tr.mat-row.upcoming{background:#e6fff3!important}tr.mat-row:nth-child(odd){background:#f7f7fa}td:first-child,th:first-child{border-radius:8px 0 0 8px}td:last-child,th:last-child{border-radius:0 8px 8px 0}.actions-btn-wrap .action-btn{outline:none;border:none;height:36px;min-width:102px;padding:6px 8px;background:#fff;border-radius:4px;color:var(--color-black);font-family:DM Sans;font-size:16px}.actions-btn-wrap .blue-btn{background:var(--color-lightGray);color:var(--color-darkBlue)}.actions-btn-wrap .pink-btn{background:var(--color-lightPink);color:var(--color-red)}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded .input-group{display:flex}.input-group{background:var(--color-white);border:1px solid rgba(127,123,146,.5);border-radius:6px;height:46px;align-items:center;max-width:60vw;width:300px;display:none}.input-group .input-group-text{background:none;border:none;cursor:default}.input-group .form-control{border:none;outline:none;background:transparent;font-size:16px;line-height:150%;padding-left:16px}.input-group .form-control:focus{box-shadow:none}.mat-expansion-panel{background:#fff;box-shadow:0 4px 24px #1f1c3a14;border-radius:20px!important;padding:24px;margin-bottom:24px}.mat-expansion-panel .mat-expansion-panel-header{padding:0}.mat-expansion-panel .mat-expansion-panel-header .mat-content{align-items:center}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:48px}.mat-expansion-panel .mat-expansion-panel-header:hover{background:transparent!important}.mat-expansion-panel .intel-accordion-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%}.mat-expansion-panel .intel-accordion-title .mat-icon{height:20px;width:20px;font-size:20px;color:#461d90;margin-left:8px}.mat-expansion-panel .intel-accordion-title h6{font-size:18px;font-weight:700;color:#000}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{padding:0;margin-top:24px;position:relative}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body:after{content:\"\";position:absolute;top:0;height:1px;left:0;right:0;background:#efe8ff}.anchor-con{position:absolute;top:-120px;left:0}@media (max-width: 768px){.input-group{width:100%;max-width:100%;margin:10px 0}.mat-expansion-panel .mat-expansion-panel-header,.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:fit-content}.info-icon{display:none}.anchor-con{top:-100px}}.matIconButton{border:none;background:transparent}::ng-deep .custom-menu{background:var(--color-white);border-radius:8px!important;padding:16px;width:352px;box-shadow:0 4px 8px #7f7b9229}.mat-expansion-panel.mat-expanded .mat-expansion-panel-header .filter-btn{display:flex!important}.btnResetApSerach{display:none}.filter-btn{background:none;align-items:center;border:1px solid rgba(127,123,146,.5);border-radius:6px;color:#2e1e91;font-weight:500;padding:4px 12px;white-space:nowrap;height:46px;display:none;gap:4px}.toggle-buttons{display:flex;justify-content:space-between;margin-bottom:16px;gap:16px}button.mat-button,.action-buttons button.mat-button{flex:1;color:#2e1e91;background:#fff;border-radius:8px;font-family:DM Sans;font-size:14px;font-weight:500;border:1.33px solid #EFE8FF}.action-buttons button.mat-button.reset-btn{font-size:12px;font-weight:700;margin:0 0 0 20px;width:96px}.action-buttons button.mat-button.apply-btn{color:#fff;background:var(--color-darkBlue);font-size:12px;font-weight:700;width:96px}button.mat-button.active{background:#efe8ff;color:#2e1e91}button.mat-button .reset-btn{color:var(--color-darkBlue)}.action-buttons{display:flex;justify-content:space-between;gap:16px}.reset-btn{color:var(--color-darkBlue);background:#f5f5f5;border-radius:8px}.filter-search-container{display:flex;align-items:center;gap:1rem}.form-date{margin-bottom:16px}.input-wrapper{position:relative;display:flex;align-items:center}.input-wrapper .form-control{width:100%;padding-right:40px;border:1px solid rgba(178,175,190,.2);background:transparent;border-radius:8px;height:48px;font-size:16px;color:var(--color-darkestBlue)}.datepicker-icon{position:absolute;right:4px;top:50%;transform:translateY(-50%);cursor:pointer;background:transparent;border:none}.form-control:focus{box-shadow:none}.label-text{font-size:14px;margin-bottom:8px;color:#7f7b92}.userImage{width:32px;height:32px;border-radius:50%}.red-pill{display:flex;flex-direction:row;align-items:center;background:#ffe8e8;border-radius:4px;height:32px;color:#ea315b;padding:4px 6px;width:fit-content}.left{text-align:left}.chip{display:flex;flex-direction:row;align-items:center;border-radius:4px;height:32px;padding:4px 6px;width:fit-content}.chip.green{color:#0fd197}.chip.blue{color:#2e1e91}.chip-item-blue{background:var(--color-lightGray)}.chip-item-green{background:#e6fff3}\n"], dependencies: [{ kind: "directive", type: i11.RouterLink, selector: "[routerLink]" }, { kind: "directive", type: i12.NgClass, selector: "[ngClass]" }, { kind: "directive", type: i12.NgForOf, selector: "[ngFor][ngForOf]" }, { kind: "directive", type: i12.NgIf, selector: "[ngIf]" }, { kind: "directive", type: i12.NgStyle, selector: "[ngStyle]" }, { kind: "component", type: i13.MatPaginator, selector: "mat-paginator", outputs: ["page"], exportAs: ["matPaginator"] }, { kind: "directive", type: i14.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "directive", type: i15.MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]" }, { kind: "component", type: i16.MatExpansionPanel, selector: "mat-expansion-panel", outputs: ["afterExpand", "afterCollapse"], exportAs: ["matExpansionPanel"] }, { kind: "component", type: i16.MatExpansionPanelHeader, selector: "mat-expansion-panel-header" }, { kind: "directive", type: i16.MatExpansionPanelTitle, selector: "mat-panel-title" }, { kind: "component", type: i17.MatMenu, selector: "mat-menu", outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "directive", type: i17.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "component", type: i18.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { kind: "directive", type: i18.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { kind: "directive", type: i18.MatHeaderRowDef, selector: "[matHeaderRowDef]" }, { kind: "directive", type: i18.MatColumnDef, selector: "[matColumnDef]" }, { kind: "directive", type: i18.MatCellDef, selector: "[matCellDef]" }, { kind: "directive", type: i18.MatRowDef, selector: "[matRowDef]" }, { kind: "directive", type: i18.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { kind: "directive", type: i18.MatCell, selector: "mat-cell, td[mat-cell]" }, { kind: "component", type: i18.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { kind: "component", type: i18.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { kind: "directive", type: i18.MatNoDataRow, selector: "ng-template[matNoDataRow]" }, { kind: "component", type: i19.MatIcon, selector: "mat-icon", exportAs: ["matIcon"] }, { kind: "component", type: i20.MatDatepicker, selector: "mat-datepicker", exportAs: ["matDatepicker"] }, { kind: "directive", type: i20.MatDatepickerInput, selector: "input[matDatepicker]", exportAs: ["matDatepickerInput"] }, { kind: "component", type: i20.MatDatepickerToggle, selector: "mat-datepicker-toggle", exportAs: ["matDatepickerToggle"] }, { kind: "directive", type: i20.MatDatepickerToggleIcon, selector: "[matDatepickerToggleIcon]" }, { kind: "directive", type: i21.ÉµNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i21.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i21.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i21.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i21.FormGroupDirective, selector: "[formGroup]", outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i21.FormControlName, selector: "[formControlName]", outputs: ["ngModelChange"] }, { kind: "directive", type: i22.MatSort, selector: "[matSort]", outputs: ["matSortChange"], exportAs: ["matSort"] }, { kind: "component", type: i22.MatSortHeader, selector: "[mat-sort-header]", exportAs: ["matSortHeader"] }, { kind: "component", type: i10.NgxUiLoaderComponent, selector: "ngx-ui-loader", inputs: ["bgsColor", "bgsOpacity", "bgsPosition", "bgsSize", "bgsTemplate", "bgsType", "fgsColor", "fgsPosition", "fgsSize", "fgsTemplate", "fgsType", "gap", "loaderId", "logoPosition", "logoSize", "logoUrl", "overlayBorderRadius", "overlayColor", "pbColor", "pbDirection", "pbThickness", "hasProgressBar", "text", "textColor", "textPosition"] }, { kind: "directive", type: i23.DefaultImageDirective, selector: "img[src]", inputs: ["src"] }, { kind: "pipe", type: i5.TranslatePipe, name: "translate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
}
i0.ÉµÉµngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: TableGridComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-table-grid', changeDetection: ChangeDetectionStrategy.OnPush, template: "<mat-expansion-panel [expanded]=\"true\" data-test-id=\"matExpAppointment\">\n  <mat-expansion-panel-header data-test-id=\"matExpHeaderAppointment\">\n    <mat-panel-title>\n      <div id=\"{{pluginConfigObs.anchorId}}\" class=\"anchor-con\"></div>\n      <div class=\"intel-accordion-title\">\n        <img src=\"{{ pluginConfigObs.tableHeaderIcon }}\" alt=\"\" width=\"44px\">\n        <h6 class=\"mb-0 ml-2\">{{ pluginConfigObs.tableHeader | translate }} ({{ visitsLengthCount }})</h6>\n        <mat-icon aria-hidden=\"false\" aria-label=\"help icon\" matTooltip=\"{{ (pluginConfigObs.tooltipLabel | translate) }}\" matTooltipPosition=\"right\" data-test-id=\"matIcoHelpAppointment\">help_outline</mat-icon>\n        <div class=\"ml-auto filter-search-container\">\n          <button *ngIf=\"pluginConfigObs.filterObs.filterFlag\" class=\"mat-stroked-button\"[matMenuTriggerFor]=\"filterMenu1\" class=\"filter-btn\" (click)=\"$event.stopPropagation();\">\n            <img src=\"{{pluginConfigObs.filterObs.filterIcon}}\" alt=\"\"> {{( pluginConfigObs.filterObs.filterLabel| translate)}}\n          </button>\n          <mat-menu #filterMenu1=\"matMenu\" class=\"custom-menu\" [hasBackdrop]=\"true\" xPosition=\"before\">\n            <div class=\"toggle-buttons\">\n              <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'date'\" (click)=\"setMode('date'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Date' | translate}}</span></span></button>\n              <button class=\"mat-focus-indicator mat-button mat-button-base\" class=\"mat-focus-indicator mat-button mat-button-base\" mat-button [class.active]=\"mode === 'range'\" (click)=\"setMode('range'); $event.stopPropagation(); resetDate(true)\"><span class=\"mat-button-wrapper\"><span class=\"mat-button-wrapper\">{{'Range' | translate}}</span></span></button>\n            </div>\n            <div *ngIf=\"mode === 'date'\" class=\"date-view\" (click)=\"$event.stopPropagation()\">\n              <form [formGroup]=\"filteredDateAndRangeForm\">\n                <div class=\"form-date\">\n                  <div class=\"input-date\">\n                    <label class=\"label-text\">{{ 'Select date' | translate}}</label>\n                    <div class=\"input-wrapper\">\n                      <input type=\"text\" class=\"form-control\" [max]=\"maxDate\" formControlName=\"date\" [matDatepicker]=\"dobdp\" placeholder=\"{{'Select date' | translate}}\" aria-label=\"Date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etDate\"/>\n                      <mat-datepicker #dobdp></mat-datepicker>\n                      <mat-datepicker-toggle matSuffix [for]=\"dobdp\" data-test-id=\"dpDate\" class=\"datepicker-icon\">\n                        <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\n                      </mat-datepicker-toggle>\n                    </div>\n                  </div>\n                </div>\n              </form>\n              </div>\n              <div *ngIf=\"mode === 'range'\" class=\"range-view\" (click)=\" $event.stopPropagation()\">\n                <form [formGroup]=\"filteredDateAndRangeForm\">\n                  <div class=\"form-date\">\n                    <div class=\"input-date\">\n                      <label class=\"label-text\">{{ 'Start date' | translate }}</label>\n                      <div class=\"input-wrapper\">\n                        <input type=\"text\" class=\"form-control\" [max]=\"filteredDateAndRangeForm.value.endDate ? filteredDateAndRangeForm.value.endDate : maxDate\" formControlName=\"startDate\" [matDatepicker]=\"picker1\" placeholder=\"{{'Select start date'|translate}}\" aria-label=\"Start date\" aria-describedby=\"basic-addon1\" readonly data-test-id=\"etSelStartDate\">\n                        <mat-datepicker #picker1></mat-datepicker>\n                        <mat-datepicker-toggle matSuffix [for]=\"picker1\" class=\"datepicker-icon\">\n                          <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\n                        </mat-datepicker-toggle>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"form-date\">\n                    <div class=\"input-date\">\n                      <label class=\"label-text\">{{ 'End date' | translate }}</label>\n                      <div class=\"input-wrapper\">\n                        <input type=\"text\" class=\"form-control\" [min]=\"filteredDateAndRangeForm.value.startDate\" [max]=\"maxDate\" formControlName=\"endDate\" [matDatepicker]=\"picker2\" placeholder=\"{{'Select end date'|translate}}\" aria-label=\"End date\" aria-describedby=\"basic-addon2\" readonly data-test-id=\"etSelEndDate\">\n                        <mat-datepicker #picker2></mat-datepicker>\n                        <mat-datepicker-toggle matSuffix [for]=\"picker2\" class=\"datepicker-icon\">\n                          <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"\">\n                        </mat-datepicker-toggle>\n                      </div>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            <div class=\"action-buttons\">\n              <button mat-button class=\"mat-focus-indicator reset-btn mat-button mat-button-base\" (click)=\"resetDate();\"><span class=\"mat-button-wrapper\">{{ 'Reset'| translate }}</span></button>\n              <button mat-button class=\"mat-focus-indicator apply-btn mat-button mat-button-base\" (click)=\"applyDateOrRangeFilter(pluginConfigObs.filterObs.filterDateField)\"><span class=\"mat-button-wrapper\">{{ 'Apply'| translate }}</span></button>\n            </div>\n          </mat-menu>\n          <div class=\"input-group search-bar ml-auto\" (click)=\"$event.stopPropagation();\">\n            <input type=\"text\" #searchInput class=\"form-control\" placeholder=\"{{ pluginConfigObs.searchPlaceHolder | translate }}\" aria-label=\"search1\" aria-describedby=\"basic-addon1\" (keyup)=\"applyFilter($event)\" (keydown.Space)=\"$event.stopPropagation()\" (keydown.Enter)=\"$event.stopPropagation()\" data-test-id=\"etSearchAppointmentDashboard\">\n            <div class=\"input-group-append\">\n              <span class=\"input-group-text\" id=\"basic-addon1\"  *ngIf=\"!isFilterApplied\">\n                <img src=\"assets/svgs/search-icon.svg\" alt=\"\" width=\"20px\" height=\"20px\">\n              </span>\n              <button data-test-id=\"btnResetApSerach\"  class=\"btnResetApSerach\" class=\"btnResetApSerach\" class=\"mat-icon-button\" aria-label=\"Reset appointment search\"  (click)=\"clearFilter()\"  *ngIf=\"isFilterApplied\">\n                <mat-icon class=\"ml-0\" style=\"line-height: normal;\">close</mat-icon>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </mat-panel-title>\n  </mat-expansion-panel-header>\n  <div class=\"mat-elevation-z8\">\n    <ngx-ui-loader \n      [loaderId]=\"'table-loader-' + pluginConfigObs.pluginConfigObsFlag\" \n      [fgsType]=\"'ball-spin-clockwise'\" \n      [fgsColor]=\"'#aba4a4'\" \n      [fgsPosition]=\"'center-center'\" \n      [fgsSize]=\"50\" \n      [overlayColor]=\"'rgb(255, 255, 255)'\" \n      [hasProgressBar]=\"false\"\n      [text]=\"('Loading'|translate) + ' ' + (pluginConfigObs.pluginConfigObsFlag|translate) + ' ' + ('data'|translate) + '...'\"\n      [textColor]=\"'#333'\"\n      [textPosition]=\"'center-center'\"\n    ></ngx-ui-loader>\n\n    <table mat-table [dataSource]=\"dataSource\" #tableMatSort=\"matSort\" matSort>\n\n      <ng-container *ngFor=\"let column of displayedAppointmentColumns\" [matColumnDef]=\"column.key\">\n        <ng-container *ngIf=\"column.isSortable; else noSort\">\n          <th mat-header-cell *matHeaderCellDef mat-sort-header matSortDirection=\"asc\">\n            {{ column.label | translate }}\n          </th>\n        </ng-container>\n        <ng-template #noSort>\n          <th mat-header-cell *matHeaderCellDef>\n            {{ column.label | translate }}\n          </th>\n        </ng-template>\n\n        <td mat-cell *matCellDef=\"let element; let j = index;\" [attr.data-test-id]=\"'td' + j\">\n          <ng-container *ngIf=\"column.key !== 'patient_name'\">\n            <div class=\"float-left\" \n                [innerHTML]=\"renderHtmlContent(column, element)\" \n                [ngClass]=\"getClasses(column, element)\">\n            </div>\n          </ng-container>\n\n          <!-- Patient Name Column -->\n          <ng-container *ngIf=\"column.key === 'patient_name'\">\n            <div class=\"d-flex align-items-center\">\n              <img *ngIf=\"element.patientId\" src=\"{{ checkPatientRegField('Profile Photo') ? baseURL + '/personimage/' + element.patientId : '' }}\" alt=\"\" width=\"32px\" height=\"32px\" style=\"border-radius: 50%;\">\n              <img *ngIf=\"pluginConfigObs.pluginConfigObsFlag !== 'Appointment'\" src=\"{{ checkPatientRegField('Profile Photo') ? baseURL + '/personimage/' + element.person.uuid : '' }}\" alt=\"\" width=\"32px\" height=\"32px\" style=\"border-radius: 50%;\">\n              <div class=\"float-left\" \n                [innerHTML]=\"renderHtmlContent(column, element)\" \n                [ngClass]=\"getClasses(column, element)\">\n              </div>\n            </div>\n          </ng-container>\n\n          <!-- Telephone Column -->\n          <ng-container *ngIf=\"column.key === 'telephone' && element.telephone\">\n            <a (click)=\"openWhatsApp($event, element.telephone)\" class=\"float-left icon-btn m-0\" [attr.data-test-id]=\"'linkPatientWhatsApp' + j\">\n              <img src=\"assets/svgs/whatsapp-green.svg\" alt=\"WhatsApp\" />\n            </a>\n          </ng-container>\n\n          <!-- Actions Column -->\n          <ng-container *ngIf=\"column.key === 'actions'\">\n            <div class=\"actions-btn-wrap d-flex align-items-center\">\n              <button\n                *ngFor=\"let action of column.actionButtons\"\n                [ngStyle]=\"{\n                  color: action.style?.color,\n                  backgroundColor: action.style?.backgroundColor\n                }\"\n                class=\"action-btn mr-2\"\n                type=\"button\"\n                (click)=\"$event.stopPropagation(); handleAction(action, element)\"\n              >\n                {{ action.label | translate }}\n              </button>\n            </div>\n          </ng-container>\n        </td>\n      </ng-container>\n    \n\n      <!-- No Data Row -->\n      <tr class=\"mat-row\" *matNoDataRow>\n        <td class=\"mat-cell text-center\" [attr.colspan]=\"displayedColumns.length\">\n          {{ pluginConfigObs.noRecordFound | translate }}\n        </td>\n      </tr>\n\n      <!-- Row Definitions -->\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n      <tr mat-row *matRowDef=\"let row; let x = index; columns: displayedColumns;\" [attr.data-test-id]=\"'tr' + x\" [routerLink]=\"['/dashboard/visit-summary', row.uuid]\"></tr>\n      \n    </table>\n    <mat-paginator #tempPaginator hidePageSize [pageSizeOptions]=\"pageSizeOptions\" aria-label=\"Select page of periodic elements\"></mat-paginator>\n  </div>\n</mat-expansion-panel>\n", styles: [".mat-elevation-z8{box-shadow:none;width:100%;overflow-x:auto}table{width:100%;font-family:DM Sans}th.mat-header-cell{border:none;font-size:14px!important;font-weight:700;color:var(--color-gray);height:21px}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{border:none;min-width:60px;white-space:nowrap;padding-right:24px}th.mat-header-cell span.alert-danger,td.mat-cell span.alert-danger,td.mat-footer-cell span.alert-danger{color:var(--color-red);font-weight:700;background:transparent;border:none}th.mat-header-cell span.alert-success,td.mat-cell span.alert-success,td.mat-footer-cell span.alert-success{color:var(--color-green);font-weight:700;background:transparent;border:none}td.mat-cell{font-size:16px}tr.mat-row,tr.mat-footer-row{height:88px;border-radius:8px;cursor:pointer}tr.mat-row.upcoming{background:#e6fff3!important}tr.mat-row:nth-child(odd){background:#f7f7fa}td:first-child,th:first-child{border-radius:8px 0 0 8px}td:last-child,th:last-child{border-radius:0 8px 8px 0}.actions-btn-wrap .action-btn{outline:none;border:none;height:36px;min-width:102px;padding:6px 8px;background:#fff;border-radius:4px;color:var(--color-black);font-family:DM Sans;font-size:16px}.actions-btn-wrap .blue-btn{background:var(--color-lightGray);color:var(--color-darkBlue)}.actions-btn-wrap .pink-btn{background:var(--color-lightPink);color:var(--color-red)}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded .input-group{display:flex}.input-group{background:var(--color-white);border:1px solid rgba(127,123,146,.5);border-radius:6px;height:46px;align-items:center;max-width:60vw;width:300px;display:none}.input-group .input-group-text{background:none;border:none;cursor:default}.input-group .form-control{border:none;outline:none;background:transparent;font-size:16px;line-height:150%;padding-left:16px}.input-group .form-control:focus{box-shadow:none}.mat-expansion-panel{background:#fff;box-shadow:0 4px 24px #1f1c3a14;border-radius:20px!important;padding:24px;margin-bottom:24px}.mat-expansion-panel .mat-expansion-panel-header{padding:0}.mat-expansion-panel .mat-expansion-panel-header .mat-content{align-items:center}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:48px}.mat-expansion-panel .mat-expansion-panel-header:hover{background:transparent!important}.mat-expansion-panel .intel-accordion-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%}.mat-expansion-panel .intel-accordion-title .mat-icon{height:20px;width:20px;font-size:20px;color:#461d90;margin-left:8px}.mat-expansion-panel .intel-accordion-title h6{font-size:18px;font-weight:700;color:#000}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{padding:0;margin-top:24px;position:relative}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body:after{content:\"\";position:absolute;top:0;height:1px;left:0;right:0;background:#efe8ff}.anchor-con{position:absolute;top:-120px;left:0}@media (max-width: 768px){.input-group{width:100%;max-width:100%;margin:10px 0}.mat-expansion-panel .mat-expansion-panel-header,.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:fit-content}.info-icon{display:none}.anchor-con{top:-100px}}.matIconButton{border:none;background:transparent}::ng-deep .custom-menu{background:var(--color-white);border-radius:8px!important;padding:16px;width:352px;box-shadow:0 4px 8px #7f7b9229}.mat-expansion-panel.mat-expanded .mat-expansion-panel-header .filter-btn{display:flex!important}.btnResetApSerach{display:none}.filter-btn{background:none;align-items:center;border:1px solid rgba(127,123,146,.5);border-radius:6px;color:#2e1e91;font-weight:500;padding:4px 12px;white-space:nowrap;height:46px;display:none;gap:4px}.toggle-buttons{display:flex;justify-content:space-between;margin-bottom:16px;gap:16px}button.mat-button,.action-buttons button.mat-button{flex:1;color:#2e1e91;background:#fff;border-radius:8px;font-family:DM Sans;font-size:14px;font-weight:500;border:1.33px solid #EFE8FF}.action-buttons button.mat-button.reset-btn{font-size:12px;font-weight:700;margin:0 0 0 20px;width:96px}.action-buttons button.mat-button.apply-btn{color:#fff;background:var(--color-darkBlue);font-size:12px;font-weight:700;width:96px}button.mat-button.active{background:#efe8ff;color:#2e1e91}button.mat-button .reset-btn{color:var(--color-darkBlue)}.action-buttons{display:flex;justify-content:space-between;gap:16px}.reset-btn{color:var(--color-darkBlue);background:#f5f5f5;border-radius:8px}.filter-search-container{display:flex;align-items:center;gap:1rem}.form-date{margin-bottom:16px}.input-wrapper{position:relative;display:flex;align-items:center}.input-wrapper .form-control{width:100%;padding-right:40px;border:1px solid rgba(178,175,190,.2);background:transparent;border-radius:8px;height:48px;font-size:16px;color:var(--color-darkestBlue)}.datepicker-icon{position:absolute;right:4px;top:50%;transform:translateY(-50%);cursor:pointer;background:transparent;border:none}.form-control:focus{box-shadow:none}.label-text{font-size:14px;margin-bottom:8px;color:#7f7b92}.userImage{width:32px;height:32px;border-radius:50%}.red-pill{display:flex;flex-direction:row;align-items:center;background:#ffe8e8;border-radius:4px;height:32px;color:#ea315b;padding:4px 6px;width:fit-content}.left{text-align:left}.chip{display:flex;flex-direction:row;align-items:center;border-radius:4px;height:32px;padding:4px 6px;width:fit-content}.chip.green{color:#0fd197}.chip.blue{color:#2e1e91}.chip-item-blue{background:var(--color-lightGray)}.chip-item-green{background:#e6fff3}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.AppointmentService }, { type: i2.VisitService }, { type: i3.CoreService }, { type: i4.ToastrService }, { type: i5.TranslateService }, { type: i6.MindmapService }, { type: i7.DomSanitizer }, { type: i8.AppConfigService }, { type: i9.NgxRolesService }, { type: i10.NgxUiLoaderService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: ['environment']
                }] }]; }, propDecorators: { pluginConfigObs: [{
                type: Input
            }], paginator: [{
                type: ViewChild,
                args: [MatPaginator]
            }], searchElement: [{
                type: ViewChild,
                args: ['searchInput', { static: true }]
            }], tempPaginator: [{
                type: ViewChild,
                args: ['tempPaginator']
            }], menuTrigger: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }], tableMatSort: [{
                type: ViewChild,
                args: ['tableMatSort', { static: true }]
            }], visitsCountDate: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9paC1saWJyYXJ5L3NyYy9saWIvY29tcG9uZW50cy90YWJsZS1ncmlkL3RhYmxlLWdyaWQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWgtbGlicmFyeS9zcmMvbGliL2NvbXBvbmVudHMvdGFibGUtZ3JpZC90YWJsZS1ncmlkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFVLFNBQVMsRUFBRSxLQUFLLEVBQWlCLHVCQUF1QixFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFnQixNQUFNLGVBQWUsQ0FBQztBQUNwSyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDM0QsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFN0QsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDeEUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQzVELE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUM1QixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUMzQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsWUFBWSxFQUFFLHdCQUF3QixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDdkYsT0FBTyxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDN0UsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FB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c0JBQXhDLFNBQVM7dUJBQUMsZUFBZTtnQkFDQyxXQUFXO3NCQUFyQyxTQUFTO3VCQUFDLGNBQWM7Z0JBQ21CLFlBQVk7c0JBQXZELFNBQVM7dUJBQUMsY0FBYyxFQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtnQkFlaEMsZUFBZTtzQkFBeEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgT25Jbml0LCBWaWV3Q2hpbGQsIElucHV0LCBTaW1wbGVDaGFuZ2VzLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgSW5qZWN0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQWZ0ZXJWaWV3SW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1hdFBhZ2luYXRvciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3BhZ2luYXRvcic7XHJcbmltcG9ydCB7IE1hdFRhYmxlRGF0YVNvdXJjZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3RhYmxlJztcclxuaW1wb3J0IHsgQXBpUmVzcG9uc2VNb2RlbCwgQXBwb2ludG1lbnRNb2RlbCwgQ3VzdG9tRW5jb3VudGVyTW9kZWwsIEN1c3RvbU9ic01vZGVsLCBDdXN0b21WaXNpdE1vZGVsLCBQcm92aWRlckF0dHJpYnV0ZU1vZGVsLCBSZXNjaGVkdWxlQXBwb2ludG1lbnRNb2RhbFJlc3BvbnNlTW9kZWwsIFBhdGllbnRWaXNpdFN1bW1hcnlDb25maWdNb2RlbCB9IGZyb20gJy4uLy4uL21vZGVsL21vZGVsJztcclxuaW1wb3J0IHsgQXBwb2ludG1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBwb2ludG1lbnQuc2VydmljZSc7XHJcbmltcG9ydCB7IFZpc2l0U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3Zpc2l0LnNlcnZpY2UnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IENvcmVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvY29yZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVG9hc3RyU2VydmljZSB9IGZyb20gJ25neC10b2FzdHInO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XHJcbmltcG9ydCB7IGdldENhY2hlRGF0YSwgY2hlY2tJZkRhdGVPbGRUaGFuT25lRGF5IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbGl0eS1mdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBkb2N0b3JEZXRhaWxzLCBsYW5ndWFnZXMsIHZpc2l0VHlwZXMgfSBmcm9tICcuLi8uLi9jb25maWcvY29uc3RhbnQnO1xyXG5pbXBvcnQgeyBNaW5kbWFwU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL21pbmRtYXAuc2VydmljZSc7XHJcbmltcG9ydCB7IEFwcENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcHAtY29uZmlnLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgRm9ybUdyb3VwLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBNYXRNZW51VHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL21lbnUnO1xyXG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcclxuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IE5neFJvbGVzU2VydmljZSB9IGZyb20gJ25neC1wZXJtaXNzaW9ucyc7XHJcbmltcG9ydCB7IE1hdFNvcnQgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9zb3J0JztcclxuaW1wb3J0IHsgTmd4VWlMb2FkZXJTZXJ2aWNlIH0gZnJvbSAnbmd4LXVpLWxvYWRlcic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi10YWJsZS1ncmlkJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vdGFibGUtZ3JpZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vdGFibGUtZ3JpZC5jb21wb25lbnQuc2NzcyddLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUYWJsZUdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXR7XHJcbiAgXHJcbiAgQElucHV0KCkgcGx1Z2luQ29uZmlnT2JzOiBhbnk7XHJcbiAgZGlzcGxheWVkQXBwb2ludG1lbnRDb2x1bW5zOiBhbnkgPSBbXTtcclxuICBkaXNwbGF5ZWRDb2x1bW5zOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGRhdGFTb3VyY2UgPSBuZXcgTWF0VGFibGVEYXRhU291cmNlPGFueT4oKTtcclxuICBwYXRpZW50UmVnRmllbGRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGlzTUNDVXNlciA9IGZhbHNlO1xyXG4gIHBhZ2VTaXplT3B0aW9ucyA9IFs1LCAxMCwgMjBdO1xyXG4gIFxyXG4gIEBWaWV3Q2hpbGQoTWF0UGFnaW5hdG9yKSBwYWdpbmF0b3I6IE1hdFBhZ2luYXRvcjtcclxuICBAVmlld0NoaWxkKCdzZWFyY2hJbnB1dCcsIHsgc3RhdGljOiB0cnVlIH0pIHNlYXJjaEVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcbiAgZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtOiBGb3JtR3JvdXA7XHJcbiAgQFZpZXdDaGlsZCgndGVtcFBhZ2luYXRvcicpIHRlbXBQYWdpbmF0b3I6IE1hdFBhZ2luYXRvcjtcclxuICBAVmlld0NoaWxkKE1hdE1lbnVUcmlnZ2VyKSBtZW51VHJpZ2dlcjogTWF0TWVudVRyaWdnZXI7XHJcbiAgQFZpZXdDaGlsZCgndGFibGVNYXRTb3J0Jyx7IHN0YXRpYzogdHJ1ZSB9KSB0YWJsZU1hdFNvcnQ6IE1hdFNvcnQ7XHJcblxyXG5cclxuICBwYW5lbEV4cGFuZGVkOiBib29sZWFuID0gdHJ1ZTtcclxuICBtb2RlOiAnZGF0ZScgfCAncmFuZ2UnID0gJ2RhdGUnO1xyXG4gIG1heERhdGU6IERhdGU7XHJcblxyXG4gIGFwcG9pbnRtZW50czogQXBwb2ludG1lbnRNb2RlbFtdID0gW107XHJcbiAgcHJpb3JpdHlWaXNpdHM6IEN1c3RvbVZpc2l0TW9kZWxbXSA9IFtdO1xyXG4gIGF3YWl0aW5nVmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuICBpblByb2dyZXNzVmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuICBjb21wbGV0ZWRWaXNpdHM6IEN1c3RvbVZpc2l0TW9kZWxbXSA9IFtdO1xyXG4gIGZvbGxvd1VwVmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuXHJcbiAgc3BlY2lhbGl6YXRpb246IHN0cmluZyA9ICcnO1xyXG4gIEBPdXRwdXQoKSB2aXNpdHNDb3VudERhdGUgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICB2aXNpdHNMZW5ndGhDb3VudDogbnVtYmVyID0gMDtcclxuICBpc0ZpbHRlckFwcGxpZWQgPSBmYWxzZTtcclxuICBwdnM6IFBhdGllbnRWaXNpdFN1bW1hcnlDb25maWdNb2RlbDtcclxuICBiYXNlVVJMOiBhbnk7XHJcbiAgaXNCcmFuZE5hbWU6IHN0cmluZztcclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMucGFnaW5hdG9yO1xyXG4gICAgLy8gdGhpcy5kYXRhU291cmNlLnNvcnQgPSB0aGlzLnRhYmxlTWF0U29ydDtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBhcHBvaW50bWVudFNlcnZpY2U6IEFwcG9pbnRtZW50U2VydmljZSxcclxuICAgIHByaXZhdGUgdmlzaXRTZXJ2aWNlOiBWaXNpdFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGNvcmVTZXJ2aWNlOiBDb3JlU2VydmljZSxcclxuICAgIHByaXZhdGUgdG9hc3RyOiBUb2FzdHJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtaW5kbWFwU2VydmljZTogTWluZG1hcFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHNhbml0aXplcjogRG9tU2FuaXRpemVyLFxyXG4gICAgcHJpdmF0ZSBhcHBDb25maWdTZXJ2aWNlOiBBcHBDb25maWdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSByb2xlc1NlcnZpY2U6IE5neFJvbGVzU2VydmljZSxcclxuICAgIHByaXZhdGUgbmd4TG9hZGVyOiBOZ3hVaUxvYWRlclNlcnZpY2UsXHJcbiAgICBASW5qZWN0KCdlbnZpcm9ubWVudCcpIGVudmlyb25tZW50XHJcbiAgKSB7IFxyXG4gICAgdGhpcy5iYXNlVVJMID0gZW52aXJvbm1lbnQuYmFzZVVSTDtcclxuICAgIHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtID0gdGhpcy5jcmVhdGVGaWx0ZXJlZERhdGVSYW5nZUZvcm0oKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBmaWx0ZXJlZCBkYXRlIHJhbmdlIGZvcm0gd2l0aCByZXF1aXJlZCBkYXRlIGZpZWxkc1xyXG4gICAqIEByZXR1cm4ge0Zvcm1Hcm91cH0gLSBUaGUgY3JlYXRlZCBmb3JtIGdyb3VwXHJcbiAgICovXHJcbiAgY3JlYXRlRmlsdGVyZWREYXRlUmFuZ2VGb3JtKCk6IEZvcm1Hcm91cCB7XHJcbiAgICByZXR1cm4gbmV3IEZvcm1Hcm91cCh7XHJcbiAgICAgIGRhdGU6IG5ldyBGb3JtQ29udHJvbCgnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdKSxcclxuICAgICAgc3RhcnREYXRlOiBuZXcgRm9ybUNvbnRyb2wobnVsbCwgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgIGVuZERhdGU6IG5ldyBGb3JtQ29udHJvbChudWxsLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzTUNDVXNlciA9ICEhdGhpcy5yb2xlc1NlcnZpY2UuZ2V0Um9sZSgnT1JHQU5JWkFUSU9OQUw6TUNDJyk7XHJcblxyXG4gICAgdGhpcy5hcHBDb25maWdTZXJ2aWNlLmxvYWQoKS50aGVuKCgpID0+IHtcclxuICAgIHRoaXMuZGlzcGxheWVkQ29sdW1ucyA9IHRoaXMuZGlzcGxheWVkQ29sdW1ucy5maWx0ZXIoY29sPT4oY29sIT09J2FnZScgfHwgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnQWdlJykpKTtcclxuICAgICAgT2JqZWN0LmtleXModGhpcy5hcHBDb25maWdTZXJ2aWNlLnBhdGllbnRfcmVnaXN0cmF0aW9uKS5mb3JFYWNoKG9iaj0+e1xyXG4gICAgICAgIHRoaXMucGF0aWVudFJlZ0ZpZWxkcy5wdXNoKC4uLnRoaXMuYXBwQ29uZmlnU2VydmljZS5wYXRpZW50X3JlZ2lzdHJhdGlvbltvYmpdLmZpbHRlcigoZTogeyBpc19lbmFibGVkOiBhbnk7IH0pPT5lLmlzX2VuYWJsZWQpLm1hcCgoZTogeyBuYW1lOiBhbnk7IH0pPT5lLm5hbWUpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMucHZzID0geyAuLi50aGlzLmFwcENvbmZpZ1NlcnZpY2UucGF0aWVudF92aXNpdF9zdW1tYXJ5IH07IFxyXG4gICAgICB0aGlzLnB2cy5hcHBvaW50bWVudF9idXR0b24gPSB0aGlzLnB2cy5hcHBvaW50bWVudF9idXR0b247XHJcbiAgICAgIHRoaXMuZGlzcGxheWVkQ29sdW1ucyA9IHRoaXMuZGlzcGxheWVkQ29sdW1ucy5maWx0ZXIoY29sPT4ge1xyXG4gICAgICAgIGlmKGNvbCA9PT0gJ2RyTmFtZScgJiYgIXRoaXMuaXNNQ0NVc2VyKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYoY29sID09PSAnYWdlJykgcmV0dXJuIHRoaXMuY2hlY2tQYXRpZW50UmVnRmllbGQoJ0FnZScpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmKCF0aGlzLnB2cy5hd2FpdGluZ192aXNpdHNfcGF0aWVudF90eXBlX2RlbWFyY2F0aW9uKXtcclxuICAgICAgICB0aGlzLmRpc3BsYXllZENvbHVtbnMgPSB0aGlzLmRpc3BsYXllZENvbHVtbnMuZmlsdGVyKGNvbD0+KGNvbCE9PSdwYXRpZW50X3R5cGUnKSk7XHJcbiAgICAgIH1cclxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGFwcCBjb25maWcnLCBlcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UudXNlKGdldENhY2hlRGF0YShmYWxzZSwgbGFuZ3VhZ2VzLlNFTEVDVEVEX0xBTkdVQUdFKSk7XHJcbiAgICBsZXQgcHJvdmlkZXIgPSBnZXRDYWNoZURhdGEodHJ1ZSwgZG9jdG9yRGV0YWlscy5QUk9WSURFUik7XHJcbiAgICBpZiAocHJvdmlkZXIpIHtcclxuICAgICAgaWYgKHByb3ZpZGVyLmF0dHJpYnV0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVjaWFsaXphdGlvbiA9IHRoaXMuZ2V0U3BlY2lhbGl6YXRpb24ocHJvdmlkZXIuYXR0cmlidXRlcyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiQXBwb2ludG1lbnRcIil7XHJcbiAgICAgICAgdGhpcy5nZXRBcHBvaW50bWVudHMoKTtcclxuICAgICAgfVxyXG4gICAgICBpZih0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyA9PT0gXCJBd2FpdGluZ1wiKXtcclxuICAgICAgICB0aGlzLmdldEF3YWl0aW5nVmlzaXRzKDEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMucGx1Z2luQ29uZmlnT2JzPy5wbHVnaW5Db25maWdPYnNGbGFnID09PSBcIlByaW9yaXR5XCIpe1xyXG4gICAgICAgIHRoaXMuZ2V0UHJpb3JpdHlWaXNpdHMoMSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiSW5Qcm9ncmVzc1wiKXtcclxuICAgICAgICB0aGlzLmdldEluUHJvZ3Jlc3NWaXNpdHMoMSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiQ29tcGxldGVkXCIpe1xyXG4gICAgICAgIHRoaXMuZ2V0Q29tcGxldGVkVmlzaXRzKCk7XHJcbiAgICAgIH1pZih0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyA9PT0gXCJGb2xsb3dVcFwiKXtcclxuICAgICAgICB0aGlzLmdldEZvbGxvd1VwVmlzaXQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5tYXhEYXRlID0gdGhpcy5wbHVnaW5Db25maWdPYnMuZmlsdGVyT2JzLmZpbHRlckRhdGVNYXg7XHJcbiAgICBpZih0aGlzLnBsdWdpbkNvbmZpZ09icy5oYXNPd25Qcm9wZXJ0eShcInBhZ2VTaXplT3B0aW9uc1wiKSl7XHJcbiAgICAgIHRoaXMucGFnZVNpemVPcHRpb25zID0gdGhpcy5wbHVnaW5Db25maWdPYnMucGFnZVNpemVPcHRpb25zXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEeW5tYWljIGxhYmVsIERpc3BsYXlcclxuICAgKiBAcGFyYW0gY2hhbmdlcyBwbHVnaW5Db25maWdPYnMgXHJcbiAgICovXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKGNoYW5nZXNbXCJwbHVnaW5Db25maWdPYnNcIl0gJiYgY2hhbmdlc1tcInBsdWdpbkNvbmZpZ09ic1wiXS5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgdGhpcy5kaXNwbGF5ZWRBcHBvaW50bWVudENvbHVtbnMgPSBbLi4uY2hhbmdlc1tcInBsdWdpbkNvbmZpZ09ic1wiXS5jdXJyZW50VmFsdWU/LnRhYmxlQ29sdW1uc11cclxuICAgICAgdGhpcy5kaXNwbGF5ZWRDb2x1bW5zID0gdGhpcy5kaXNwbGF5ZWRBcHBvaW50bWVudENvbHVtbnMubWFwKGNvbHVtbiA9PiBjb2x1bW4ua2V5KTtcclxuICAgIH1cclxuICAgIGlmKCAoIWNoYW5nZXNbJ3BsdWdpbkNvbmZpZ09icyddLmZpcnN0Q2hhbmdlKSAmJiB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnID09IFwiQXBwb2ludG1lbnRcIiAmJiBjaGFuZ2VzW1wicGx1Z2luQ29uZmlnT2JzXCJdLmN1cnJlbnRWYWx1ZT8udGFibGVIZWFkZXIgIT09IGNoYW5nZXNbXCJwbHVnaW5Db25maWdPYnNcIl0ucHJldmlvdXNWYWx1ZT8udGFibGVIZWFkZXIpe1xyXG4gICAgICB0aGlzLmdldEFwcG9pbnRtZW50cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBSZXRyZWl2ZSB0aGUgY2hpZWYgY29tcGxhaW50cyBmb3IgdGhlIHZpc2l0XHJcbiAgKiBAcGFyYW0ge0N1c3RvbVZpc2l0TW9kZWx9IHZpc2l0IC0gVmlzaXRcclxuICAqIEByZXR1cm4ge3N0cmluZ1tdfSAtIENoaWVmIGNvbXBsYWludHMgYXJyYXlcclxuICAqL1xyXG4gIGdldENoZWlmQ29tcGxhaW50KHZpc2l0OiBDdXN0b21WaXNpdE1vZGVsKTogc3RyaW5nW10ge1xyXG4gICAgbGV0IHJlY2VudDogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IGVuY291bnRlcnMgPSB2aXNpdC5lbmNvdW50ZXJzO1xyXG4gICAgZW5jb3VudGVycy5mb3JFYWNoKChlbmNvdW50ZXI6IEN1c3RvbUVuY291bnRlck1vZGVsKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc3BsYXkgPSBlbmNvdW50ZXIudHlwZT8ubmFtZTtcclxuICAgICAgaWYgKGRpc3BsYXkubWF0Y2godmlzaXRUeXBlcy5BRFVMVElOSVRJQUwpICE9PSBudWxsKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzID0gZW5jb3VudGVyLm9icztcclxuICAgICAgICBvYnMuZm9yRWFjaCgoY3VycmVudE9iczogQ3VzdG9tT2JzTW9kZWwpID0+IHtcclxuICAgICAgICAgIGlmIChjdXJyZW50T2JzLmNvbmNlcHRfaWQgPT0gMTYzMjEyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb21wbGFpbnQgPSB0aGlzLnZpc2l0U2VydmljZS5nZXREYXRhMihjdXJyZW50T2JzKT8udmFsdWVfdGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAoJ+KWuicsICdnJyksICcnKS5zcGxpdCgnPGI+Jyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY3VycmVudENvbXBsYWludC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9iczEgPSBjdXJyZW50Q29tcGxhaW50W2ldLnNwbGl0KCc8Jyk7XHJcbiAgICAgICAgICAgICAgaWYgKCFvYnMxWzBdLm1hdGNoKHZpc2l0VHlwZXMuQVNTT0NJQVRFRF9TWU1QVE9NUykpIHtcclxuICAgICAgICAgICAgICAgIHJlY2VudC5wdXNoKG9iczFbMF0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZWNlbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIENoZWNrIGhvdyBvbGQgdGhlIGRhdGUgaXMgZnJvbSBub3dcclxuICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhIC0gRGF0ZSBpbiBzdHJpbmcgZm9ybWF0XHJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gUmV0dXJucyBob3cgb2xkIHRoZSBkYXRlIGlzIGZyb20gbm93XHJcbiAgKi9cclxuICBjaGVja0lmRGF0ZU9sZFRoYW5PbmVEYXkoZGF0YTogc3RyaW5nKSB7XHJcbiAgICBsZXQgaG91cnMgPSBtb21lbnQoZGF0YSkuZGlmZihtb21lbnQoKSwgJ2hvdXJzJyk7XHJcbiAgICBsZXQgbWludXRlcyA9IG1vbWVudChkYXRhKS5kaWZmKG1vbWVudCgpLCAnbWludXRlcycpO1xyXG4gICAgaWYoaG91cnMgPiAyNCkge1xyXG4gICAgICByZXR1cm4gbW9tZW50KGRhdGEpLmZvcm1hdCgnREQgTU1NLCBZWVlZIGhoOm1tIEEnKTtcclxuICAgIH07XHJcbiAgICBpZiAoaG91cnMgPCAxKSB7XHJcbiAgICAgIGlmKG1pbnV0ZXMgPCAwKSByZXR1cm4gYER1ZSA6ICR7bW9tZW50KGRhdGEpLmZvcm1hdCgnREQgTU1NLCBZWVlZIGhoOm1tIEEnKX1gO1xyXG4gICAgICByZXR1cm4gYCR7bWludXRlc30gbWludXRlc2A7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7aG91cnN9IGhyc2A7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJlc2NoZWR1bGUgYXBwb2ludG1lbnRcclxuICAqIEBwYXJhbSB7QXBwb2ludG1lbnRNb2RlbH0gYXBwb2ludG1lbnQgLSBBcHBvaW50bWVudCB0byBiZSByZXNjaGVkdWxlZFxyXG4gICogQHBhcmFtIHtib29sZWFufSBpc1ZhbGlkYXRpb25SZXF1aXJlZCAtIElmIHRydWUsIHZhbGlkYXRpb24gaXMgcmVxdWlyZWRcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICByZXNjaGVkdWxlKGFwcG9pbnRtZW50OiBBcHBvaW50bWVudE1vZGVsLCBpc1ZhbGlkYXRpb25SZXF1aXJlZDogYm9vbGVhbikge1xyXG4gICAgY29uc3QgbGVuID0gYXBwb2ludG1lbnQudmlzaXQuZW5jb3VudGVycy5maWx0ZXIoKGU6IEN1c3RvbUVuY291bnRlck1vZGVsKSA9PiB7XHJcbiAgICAgIHJldHVybiAoZS50eXBlLm5hbWUgPT0gdmlzaXRUeXBlcy5QQVRJRU5UX0VYSVRfU1VSVkVZIHx8IGUudHlwZS5uYW1lID09IHZpc2l0VHlwZXMuVklTSVRfQ09NUExFVEUpO1xyXG4gICAgfSkubGVuZ3RoO1xyXG4gICAgY29uc3QgaXNDb21wbGV0ZWQgPSBCb29sZWFuKGxlbik7XHJcbiAgICBpZiAoaXNDb21wbGV0ZWQpIHtcclxuICAgICAgdGhpcy50b2FzdHIuZXJyb3IodGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXCJWaXNpdCBpcyBhbHJlYWR5IGNvbXBsZXRlZCwgaXQgY2FuJ3QgYmUgcmVzY2hlZHVsZWQuXCIpLCB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnUmVzY2hlZHVsaW5nIGZhaWxlZCEnKSk7XHJcbiAgICB9IGVsc2UgaWYoYXBwb2ludG1lbnQudmlzaXRTdGF0dXMgPT0gJ1Zpc2l0IEluIFByb2dyZXNzJyAmJiBpc1ZhbGlkYXRpb25SZXF1aXJlZCkge1xyXG4gICAgICB0aGlzLnRvYXN0ci5lcnJvcih0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChcIlZpc2l0IGlzIGluIHByb2dyZXNzLCBpdCBjYW4ndCBiZSByZXNjaGVkdWxlZC5cIiksIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdSZXNjaGVkdWxpbmcgZmFpbGVkIScpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY29yZVNlcnZpY2Uub3BlblJlc2NoZWR1bGVBcHBvaW50bWVudE1vZGFsKGFwcG9pbnRtZW50KS5zdWJzY3JpYmUoKHJlczogUmVzY2hlZHVsZUFwcG9pbnRtZW50TW9kYWxSZXNwb25zZU1vZGVsKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgbGV0IG5ld1Nsb3QgPSByZXM7XHJcbiAgICAgICAgICB0aGlzLmNvcmVTZXJ2aWNlLm9wZW5SZXNjaGVkdWxlQXBwb2ludG1lbnRDb25maXJtTW9kYWwoeyBhcHBvaW50bWVudCwgbmV3U2xvdCB9KS5zdWJzY3JpYmUoKHJlc3VsdDogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgYXBwb2ludG1lbnQuYXBwb2ludG1lbnRJZCA9IGFwcG9pbnRtZW50LmlkO1xyXG4gICAgICAgICAgICAgIGFwcG9pbnRtZW50LnNsb3REYXRlID0gbW9tZW50KG5ld1Nsb3QuZGF0ZSwgXCJZWVlZLU1NLUREXCIpLmZvcm1hdCgnREQvTU0vWVlZWScpO1xyXG4gICAgICAgICAgICAgIGFwcG9pbnRtZW50LnNsb3RUaW1lID0gbmV3U2xvdC5zbG90O1xyXG4gICAgICAgICAgICAgIHRoaXMuYXBwb2ludG1lbnRTZXJ2aWNlLnJlc2NoZWR1bGVBcHBvaW50bWVudChhcHBvaW50bWVudCkuc3Vic2NyaWJlKChyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXMubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMubWluZG1hcFNlcnZpY2Uubm90aWZ5SHdGb3JSZXNjaGVkdWxlQXBwb2ludG1lbnQoYXBwb2ludG1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmdldEFwcG9pbnRtZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRvYXN0ci5zdWNjZXNzKHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KFwiVGhlIGFwcG9pbnRtZW50IGhhcyBiZWVuIHJlc2NoZWR1bGVkIHN1Y2Nlc3NmdWxseSFcIiksIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdSZXNjaGVkdWxpbmcgc3VjY2Vzc2Z1bCEnKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRvYXN0ci5zdWNjZXNzKG1lc3NhZ2UsIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdSZXNjaGVkdWxpbmcgZmFpbGVkIScpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogQ2FuY2VsIGFwcG9pbnRtZW50XHJcbiAgKiBAcGFyYW0ge0FwcG9pbnRtZW50TW9kZWx9IGFwcG9pbnRtZW50IC0gQXBwb2ludG1lbnQgdG8gYmUgcmVzY2hlZHVsZWRcclxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNWYWxpZGF0aW9uUmVxdWlyZWQgLSBJZiB0cnVlLCB2YWxpZGF0aW9uIGlzIHJlcXVpcmVkXHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgY2FuY2VsKGFwcG9pbnRtZW50OiBBcHBvaW50bWVudE1vZGVsLCBpc1ZhbGlkYXRpb25SZXF1aXJlZDogYm9vbGVhbikge1xyXG4gICAgaWYgKGFwcG9pbnRtZW50LnZpc2l0U3RhdHVzID09ICdWaXNpdCBJbiBQcm9ncmVzcycgJiYgaXNWYWxpZGF0aW9uUmVxdWlyZWQpIHtcclxuICAgICAgdGhpcy50b2FzdHIuZXJyb3IodGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXCJWaXNpdCBpcyBpbiBwcm9ncmVzcywgaXQgY2FuJ3QgYmUgY2FuY2VsbGVkLlwiKSwgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ0NhbmNlbGluZyBmYWlsZWQhJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvcmVTZXJ2aWNlLm9wZW5Db25maXJtQ2FuY2VsQXBwb2ludG1lbnRNb2RhbChhcHBvaW50bWVudCkuc3Vic2NyaWJlKChyZXM6IGJvb2xlYW4pID0+IHtcclxuICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgIHRoaXMudG9hc3RyLnN1Y2Nlc3ModGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1RoZSBBcHBvaW50bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgY2FuY2VsZWQuJyksdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ0NhbmNlbGluZyBzdWNjZXNzZnVsJykpO1xyXG4gICAgICAgIHRoaXMuZ2V0QXBwb2ludG1lbnRzKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgdXNlciB1dWlkIGZyb20gbG9jYWxzdG9yYWdlIHVzZXJcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBVc2VyIHV1aWRcclxuICAqL1xyXG4gIGdldCB1c2VySWQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBnZXRDYWNoZURhdGEodHJ1ZSwgZG9jdG9yRGV0YWlscy5VU0VSKS51dWlkO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBBcHBseSBmaWx0ZXIgb24gYSBkYXRhc291cmNlXHJcbiAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIElucHV0J3MgY2hhbmdlIGV2ZW50XHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgYXBwbHlGaWx0ZXIoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICBjb25zdCBmaWx0ZXJWYWx1ZSA9IChldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyID0gZmlsdGVyVmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB0aGlzLmlzRmlsdGVyQXBwbGllZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIENsZWFyIGZpbHRlciBmcm9tIGEgZGF0YXNvdXJjZVxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGNsZWFyRmlsdGVyKCkge1xyXG4gICAgdGhpcy5kYXRhU291cmNlLmZpbHRlciA9IG51bGw7XHJcbiAgICB0aGlzLnNlYXJjaEVsZW1lbnQubmF0aXZlRWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcbiAgICB0aGlzLmlzRmlsdGVyQXBwbGllZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIHRoZSBmaWVsZCBpcyBpbiBwYXRpZW50IHJlZ2lzdHJhdGlvbiBmaWVsZHNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lIC0gVGhlIGZpZWxkIG5hbWVcclxuICAgKiBAcmV0dXJuIHtib29sZWFufSAtIFRydWUgaWYgcHJlc2VudCwgZWxzZSBmYWxzZVxyXG4gICAqL1xyXG4gIGNoZWNrUGF0aWVudFJlZ0ZpZWxkKGZpZWxkTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5wYXRpZW50UmVnRmllbGRzLmluZGV4T2YoZmllbGROYW1lKSAhPT0gLTE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJldHVybnMgdGhlIFdoYXRzQXBwIGxpbmsgZm9yIGEgZ2l2ZW4gdGVsZXBob25lIG51bWJlclxyXG4gICogQHBhcmFtIHtzdHJpbmd9IHRlbGVwaG9uZU51bWJlciAtIFRoZSB0ZWxlcGhvbmUgbnVtYmVyIHRvIGdlbmVyYXRlIHRoZSBsaW5rIGZvclxyXG4gICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSBXaGF0c0FwcCBsaW5rXHJcbiAgKi9cclxuICBnZXRXaGF0c0FwcExpbmsodGVsZXBob25lTnVtYmVyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMudmlzaXRTZXJ2aWNlLmdldFdoYXRzYXBwTGluayh0ZWxlcGhvbmVOdW1iZXIpO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgdGhlIHRlbGVwaG9uZSBudW1iZXIgZnJvbSB0aGUgcGVyc29uJ3MgYXR0cmlidXRlc1xyXG4gICAqIEBwYXJhbSB7QXBwb2ludG1lbnRNb2RlbFsndmlzaXQnXVsncGVyc29uJ119IHBlcnNvbiAtIFRoZSBwZXJzb24gb2JqZWN0IGNvbnRhaW5pbmcgYXR0cmlidXRlc1xyXG4gICAqIEByZXR1cm4ge3N0cmluZyB8IHVuZGVmaW5lZH0gLSBUaGUgcGVyc29uJ3MgdGVsZXBob25lIG51bWJlciBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kXHJcbiAgICovXHJcbiAgZ2V0VGVsZXBob25lTnVtYmVyKHBlcnNvbjogQXBwb2ludG1lbnRNb2RlbFsndmlzaXQnXVsncGVyc29uJ10pIHtcclxuICAgIHJldHVybiBwZXJzb24/LnBlcnNvbl9hdHRyaWJ1dGUuZmluZCgodjogeyBwZXJzb25fYXR0cmlidXRlX3R5cGVfaWQ6IG51bWJlcjsgfSkgPT4gdi5wZXJzb25fYXR0cmlidXRlX3R5cGVfaWQgPT0gOCk/LnZhbHVlO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENsb3NlcyB0aGUgbWVudSBpZiBpdCdzIG9wZW5cclxuICAgKi9cclxuICBjbG9zZU1lbnUoKSB7XHJcbiAgICBpZiAodGhpcy5tZW51VHJpZ2dlcikge1xyXG4gICAgICB0aGlzLm1lbnVUcmlnZ2VyLmNsb3NlTWVudSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIG1vZGUgZm9yIHRoZSBjb21wb25lbnQgKGVpdGhlciAnZGF0ZScgb3IgJ3JhbmdlJylcclxuICAgKiBAcGFyYW0geydkYXRlJyB8ICdyYW5nZSd9IG1vZGUgLSBUaGUgbW9kZSB0byBzZXRcclxuICAgKi9cclxuICBzZXRNb2RlKG1vZGU6ICdkYXRlJyB8ICdyYW5nZScpIHtcclxuICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0cyBhIGRhdGUgaW50byAnWVlZWS1NTS1ERCcgZm9ybWF0XHJcbiAgICogQHBhcmFtIHthbnl9IGRhdGUgLSBUaGUgZGF0ZSB0byBmb3JtYXRcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIGZvcm1hdHRlZCBkYXRlXHJcbiAgICovXHJcbiAgZm9ybWF0RGF0ZShkYXRlOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbG9jYWxEYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICBjb25zdCB5ZWFyID0gbG9jYWxEYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhsb2NhbERhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcobG9jYWxEYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnRzIGEgcmVsYXRpdmUgdGltZSBzdHJpbmcgKGUuZy4sIFwiMiBob3Vyc1wiLCBcIjEgZGF5XCIpIHRvIGEgZGF0ZSBzdHJpbmdcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVUaW1lIC0gVGhlIHJlbGF0aXZlIHRpbWUgc3RyaW5nXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSByZXN1bHRpbmcgZGF0ZSBpbiAnWVlZWS1NTS1ERCcgZm9ybWF0XHJcbiAgICogQHRocm93cyB7RXJyb3J9IC0gVGhyb3dzIGVycm9yIGZvciBpbnZhbGlkIHRpbWUgdW5pdHNcclxuICAgKi9cclxuICBjb252ZXJ0VG9EYXRlKHJlbGF0aXZlVGltZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBbdmFsdWUsIHVuaXRdID0gcmVsYXRpdmVUaW1lLnNwbGl0KCcgJyk7XHJcbiAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludCh2YWx1ZSwgMTApOyAgICBcclxuICAgIFxyXG4gICAgaWYgKFsnaG91cicsICdob3VycyddLmluY2x1ZGVzKHVuaXQudG9Mb3dlckNhc2UoKSkpIG5vdy5zZXRIb3Vycyhub3cuZ2V0SG91cnMoKSAtIGFtb3VudCk7XHJcbiAgICBlbHNlIGlmIChbJ21pbnV0ZScsICdtaW51dGVzJ10uaW5jbHVkZXModW5pdC50b0xvd2VyQ2FzZSgpKSkgbm93LnNldE1pbnV0ZXMobm93LmdldE1pbnV0ZXMoKSAtIGFtb3VudCk7XHJcbiAgICBlbHNlIGlmIChbJ2RheScsICdkYXlzJ10uaW5jbHVkZXModW5pdC50b0xvd2VyQ2FzZSgpKSkgbm93LnNldERhdGUobm93LmdldERhdGUoKSAtIGFtb3VudCk7XHJcbiAgICBlbHNlIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0aW1lIHVuaXQuIE9ubHkgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgb3IgXCJkYXlzXCIgYXJlIHN1cHBvcnRlZC4nKTtcclxuXHJcbiAgICByZXR1cm4gbm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnRzIGEgZm9sbG93LXVwIGRhdGUgc3RyaW5nIHRvIElTTyBmb3JtYXRcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9sbG93VXAgLSBUaGUgZm9sbG93LXVwIGRhdGUgc3RyaW5nXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSBmb2xsb3ctdXAgZGF0ZSBpbiBJU08gc3RyaW5nIGZvcm1hdFxyXG4gICAqL1xyXG4gIGNvbnZlcnRUb0lTTyhmb2xsb3dVcDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShmb2xsb3dVcCk7XHJcbiAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkpO1xyXG4gICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTtcclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogQXBwbGllcyBkYXRlIG9yIHJhbmdlIGZpbHRlciB0byB0aGUgZGF0YSBzb3VyY2UgYmFzZWQgb24gc2VsZWN0ZWQgZGF0ZShzKVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlRmllbGQgLSBUaGUgZmllbGQgbmFtZSBmb3IgdGhlIGRhdGUgdG8gZmlsdGVyXHJcbiAgICovXHJcbiAgYXBwbHlEYXRlT3JSYW5nZUZpbHRlcihkYXRlRmllbGQ6IHN0cmluZykge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gdGhpcy5maWx0ZXJlZERhdGVBbmRSYW5nZUZvcm0uZ2V0KCdkYXRlJyk/LnZhbHVlO1xyXG4gICAgY29uc3Qgc3RhcnREYXRlID0gdGhpcy5maWx0ZXJlZERhdGVBbmRSYW5nZUZvcm0uZ2V0KCdzdGFydERhdGUnKT8udmFsdWU7XHJcbiAgICBjb25zdCBlbmREYXRlID0gdGhpcy5maWx0ZXJlZERhdGVBbmRSYW5nZUZvcm0uZ2V0KCdlbmREYXRlJyk/LnZhbHVlO1xyXG4gIFxyXG4gICAgaWYgKHNlbGVjdGVkRGF0ZSkge1xyXG4gICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gdGhpcy5mb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSk7XHJcblxyXG4gICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGE6IGFueSwgZmlsdGVyOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBsZXQgaXRlbURhdGU7XHJcbiAgICAgICAgaWYoZGF0ZUZpZWxkID09PSBcImZvbGxvd1VwXCIpe1xyXG4gICAgICAgICAgaXRlbURhdGUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5jb252ZXJ0VG9JU08oZGF0YS5mb2xsb3dVcCkpO1xyXG4gICAgICAgIH0gZWxzZSBpZihkYXRlRmllbGQgPT09IFwic2xvdEpzRGF0ZVwiKXtcclxuICAgICAgICAgIGl0ZW1EYXRlID0gdGhpcy5mb3JtYXREYXRlKGRhdGFbZGF0ZUZpZWxkXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGl0ZW1EYXRlID0gZGF0YVtkYXRlRmllbGRdLmluY2x1ZGVzKCcsJykgPyB0aGlzLmZvcm1hdERhdGUoZGF0YVtkYXRlRmllbGRdKSA6IHRoaXMuY29udmVydFRvRGF0ZShkYXRhW2RhdGVGaWVsZF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbURhdGUgPT09IGZpbHRlcjtcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlciA9IGZvcm1hdHRlZERhdGU7XHJcbiAgICB9IGVsc2UgaWYgKHN0YXJ0RGF0ZSAmJiBlbmREYXRlKSB7XHJcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShzdGFydERhdGUpO1xyXG4gICAgICBjb25zdCBmb3JtYXR0ZWRFbmREYXRlID0gdGhpcy5mb3JtYXREYXRlKGVuZERhdGUpO1xyXG4gIFxyXG4gICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGE6IGFueSwgZmlsdGVyOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBsZXQgaXRlbURhdGU7XHJcbiAgICAgICAgaWYoZGF0ZUZpZWxkID09PSBcImZvbGxvd1VwXCIpe1xyXG4gICAgICAgICAgaXRlbURhdGUgPSB0aGlzLmZvcm1hdERhdGUodGhpcy5jb252ZXJ0VG9JU08oZGF0YS5mb2xsb3dVcCkpO1xyXG4gICAgICAgIH0gZWxzZSBpZihkYXRlRmllbGQgPT09IFwic2xvdEpzRGF0ZVwiKXtcclxuICAgICAgICAgIGl0ZW1EYXRlID0gdGhpcy5mb3JtYXREYXRlKGRhdGFbZGF0ZUZpZWxkXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGl0ZW1EYXRlID0gZGF0YVtkYXRlRmllbGRdLmluY2x1ZGVzKCcsJykgPyB0aGlzLmZvcm1hdERhdGUoZGF0YVtkYXRlRmllbGRdKSA6IHRoaXMuY29udmVydFRvRGF0ZShkYXRhW2RhdGVGaWVsZF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbURhdGUgPj0gZm9ybWF0dGVkU3RhcnREYXRlICYmIGl0ZW1EYXRlIDw9IGZvcm1hdHRlZEVuZERhdGU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyID0gYCR7Zm9ybWF0dGVkU3RhcnREYXRlfToke2Zvcm1hdHRlZEVuZERhdGV9YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXIgPSAnJztcclxuICAgIH1cclxuICAgIHRoaXMudGVtcFBhZ2luYXRvci5maXJzdFBhZ2UoKTtcclxuICAgIHRoaXMuY2xvc2VNZW51KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNldHMgdGhlIGRhdGUgZmlsdGVyIGZvcm0gYW5kIGNsZWFycyB0aGUgZGF0YSBzb3VyY2UgZmlsdGVyXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBmbGFnIC0gSWYgdHJ1ZSwgZG9lc24ndCBjbG9zZSB0aGUgbWVudVxyXG4gICAqL1xyXG4gIHJlc2V0RGF0ZShmbGFnOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyID0gJyc7XHJcbiAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGEsIGZpbHRlcjogc3RyaW5nKSA9PiBkYXRhPy5vcGVuTXJzSWQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTEgfHwgZGF0YT8ucGF0aWVudE5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTE7XHJcbiAgICBpZiAoIWZsYWcpIHtcclxuICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgYSBzcGVjaWZpYyBhdHRyaWJ1dGUgZGF0YSBmcm9tIHRoZSBwZXJzb24ncyBhdHRyaWJ1dGVzXHJcbiAgICogQHBhcmFtIHthbnl9IGRhdGEgLSBUaGUgZGF0YSBvYmplY3QgY29udGFpbmluZyBwZXJzb24gYXR0cmlidXRlc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0byByZXRyaWV2ZVxyXG4gICAqIEByZXR1cm4ge09iamVjdCB8IG51bGx9IC0gVGhlIGF0dHJpYnV0ZSBuYW1lIGFuZCB2YWx1ZSwgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICAgKi9cclxuICBnZXRBdHRyaWJ1dGVEYXRhKGRhdGE6IGFueSwgYXR0cmlidXRlTmFtZTogc3RyaW5nKTogeyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfSB8IG51bGwge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YS5wZXJzb25fYXR0cmlidXRlKSkge1xyXG4gICAgICBjb25zdCBhdHRyaWJ1dGUgPSBkYXRhLnBlcnNvbl9hdHRyaWJ1dGUuZmluZChcclxuICAgICAgICAoYXR0cjogYW55KSA9PiBhdHRyLnBlcnNvbl9hdHRyaWJ1dGVfdHlwZT8ubmFtZSA9PT0gYXR0cmlidXRlTmFtZVxyXG4gICAgICApO1xyXG4gICAgICBpZiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5hbWU6IGF0dHJpYnV0ZS5wZXJzb25fYXR0cmlidXRlX3R5cGUubmFtZSxcclxuICAgICAgICAgIHZhbHVlOiBhdHRyaWJ1dGUudmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IGJvb2tlZCBhcHBvaW50bWVudHMgZm9yIGEgbG9nZ2VkLWluIGRvY3RvciBpbiBhIGN1cnJlbnQgeWVhclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldEFwcG9pbnRtZW50cygpIHtcclxuICAgIHRoaXMubmd4TG9hZGVyLnN0YXJ0TG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdGFydCBzZWN0aW9uIGxvYWRlclxyXG4gICAgdGhpcy5hcHBvaW50bWVudHMgPSBbXTtcclxuICAgIGxldCBmcm9tRGF0ZSA9IG1vbWVudCgpLnN0YXJ0T2YoJ3llYXInKS5mb3JtYXQoJ0REL01NL1lZWVknKTtcclxuICAgIGxldCB0b0RhdGUgPSBtb21lbnQoKS5lbmRPZigneWVhcicpLmZvcm1hdCgnREQvTU0vWVlZWScpO1xyXG4gICAgbGV0IHBlbmRpbmdfdmlzaXRzID0gdGhpcy5wbHVnaW5Db25maWdPYnMuZmlsdGVyPy5oYXNPd25Qcm9wZXJ0eShcInBlbmRpbmdfdmlzaXRzXCIpICA/IHRoaXMucGx1Z2luQ29uZmlnT2JzLmZpbHRlcj8ucGVuZGluZ192aXNpdHMgOiBudWxsO1xyXG4gICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LmZpbHRlcil7XHJcbiAgICAgIGZyb21EYXRlID0gdGhpcy5wbHVnaW5Db25maWdPYnM/LmZpbHRlcj8uZnJvbURhdGVcclxuICAgICAgdG9EYXRlID0gdGhpcy5wbHVnaW5Db25maWdPYnM/LmZpbHRlcj8udG9EYXRlXHJcbiAgICB9XHJcbiAgICB0aGlzLmFwcG9pbnRtZW50U2VydmljZS5nZXRVc2VyU2xvdHMoZ2V0Q2FjaGVEYXRhKHRydWUsIGRvY3RvckRldGFpbHMuVVNFUikudXVpZCwgZnJvbURhdGUsIHRvRGF0ZSwgdGhpcy5pc01DQ1VzZXIgPyB0aGlzLnNwZWNpYWxpemF0aW9uIDogbnVsbCwgcGVuZGluZ192aXNpdHMpXHJcbiAgICAgIC5zdWJzY3JpYmUoe1xyXG4gICAgICAgIG5leHQ6IChyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHsgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy52aXNpdHNMZW5ndGhDb3VudCA9IHJlcy5kYXRhPy5sZW5ndGg7XHJcbiAgICAgICAgICB0aGlzLmVtaXRWaXNpdHNDb3VudCh0aGlzLnZpc2l0c0xlbmd0aENvdW50KTtcclxuICAgICAgICAgIGxldCBhcHBvaW50bWVudHNkYXRhID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICBhcHBvaW50bWVudHNkYXRhLmZvckVhY2goKGFwcG9pbnRtZW50OiBBcHBvaW50bWVudE1vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhcHBvaW50bWVudC5zdGF0dXMgPT0gJ2Jvb2tlZCcgJiYgKGFwcG9pbnRtZW50LnZpc2l0U3RhdHVzID09ICdBd2FpdGluZyBDb25zdWx0J3x8YXBwb2ludG1lbnQudmlzaXRTdGF0dXMgPT0gJ1Zpc2l0IEluIFByb2dyZXNzJykpIHtcclxuICAgICAgICAgICAgICBpZiAoYXBwb2ludG1lbnQudmlzaXQpIHtcclxuICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50LmNoZWlmX2NvbXBsYWludCA9IHRoaXMuZ2V0Q2hlaWZDb21wbGFpbnQoYXBwb2ludG1lbnQudmlzaXQpO1xyXG4gICAgICAgICAgICAgICAgYXBwb2ludG1lbnQuc3RhcnRzX2luID0gY2hlY2tJZkRhdGVPbGRUaGFuT25lRGF5KGFwcG9pbnRtZW50LnNsb3RKc0RhdGUpO1xyXG4gICAgICAgICAgICAgICAgYXBwb2ludG1lbnQudGVsZXBob25lID0gdGhpcy5nZXRUZWxlcGhvbmVOdW1iZXIoYXBwb2ludG1lbnQ/LnZpc2l0Py5wZXJzb24pO1xyXG4gICAgICAgICAgICAgICAgYXBwb2ludG1lbnQuVE1IX3BhdGllbnRfaWQgPSB0aGlzLmdldEF0dHJpYnV0ZURhdGEoYXBwb2ludG1lbnQudmlzaXQsIFwiVE1IIENhc2UgTnVtYmVyXCIpPy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50LnV1aWQgPSBhcHBvaW50bWVudC52aXNpdFV1aWQ7XHJcbiAgICAgICAgICAgICAgICBhcHBvaW50bWVudC5sb2NhdGlvbiA9IGFwcG9pbnRtZW50Py52aXNpdD8ubG9jYXRpb24/Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICBhcHBvaW50bWVudC5hZ2UgPSBhcHBvaW50bWVudD8ucGF0aWVudEFnZSArICcgJyArIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCd5Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcG9pbnRtZW50cy5wdXNoKGFwcG9pbnRtZW50KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5kYXRhU291cmNlLmRhdGEgPSBbLi4udGhpcy5hcHBvaW50bWVudHNdO1xyXG4gICAgICAgICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMucGFnaW5hdG9yO1xyXG4gICAgICAgICAgdGhpcy5kYXRhU291cmNlLnNvcnQgPSB0aGlzLnRhYmxlTWF0U29ydDtcclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJQcmVkaWNhdGUgPSAoZGF0YSwgZmlsdGVyOiBzdHJpbmcpID0+IGRhdGE/Lm9wZW5NcnNJZC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMSB8fCBkYXRhPy5wYXRpZW50TmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLm5neExvYWRlci5zdG9wTG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdG9wIHNlY3Rpb24gbG9hZGVyXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIC8qKlxyXG4gICogR2V0IGRvY3RvciBzcGVjaWFsaXR5XHJcbiAgKiBAcGFyYW0ge1Byb3ZpZGVyQXR0cmlidXRlTW9kZWxbXX0gYXR0ciAtIEFycmF5IG9mIHByb3ZpZGVyIGF0dHJpYnV0ZXNcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBEb2N0b3Igc3BlY2lhbGl0eVxyXG4gICovXHJcbiAgZ2V0U3BlY2lhbGl6YXRpb24oYXR0cjogUHJvdmlkZXJBdHRyaWJ1dGVNb2RlbFtdKSB7XHJcbiAgICBsZXQgc3BlY2lhbGl6YXRpb24gPSAnJztcclxuICAgIGF0dHIuZm9yRWFjaCgoYTogUHJvdmlkZXJBdHRyaWJ1dGVNb2RlbCkgPT4ge1xyXG4gICAgICBpZiAoYS5hdHRyaWJ1dGVUeXBlLnV1aWQgPT0gJ2VkMTcxNWY1LTkzZTItNDA0ZS1iM2M5LTJhMmQ5NjAwZjA2MicgJiYgIWEudm9pZGVkKSB7XHJcbiAgICAgICAgc3BlY2lhbGl6YXRpb24gPSBhLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzcGVjaWFsaXphdGlvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogUmV0dXJucyB0aGUgYWdlIGluIHllYXJzIGZyb20gdGhlIGJpcnRoZGF0ZVxyXG4gICogQHBhcmFtIHtzdHJpbmd9IGJpcnRoZGF0ZSAtIERhdGUgaW4gc3RyaW5nIGZvcm1hdFxyXG4gICogQHJldHVybiB7bnVtYmVyfSAtIEFnZVxyXG4gICovXHJcbiAgY2FsY3VsYXRlQWdlKGJpcnRoZGF0ZTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gbW9tZW50KCkuZGlmZihiaXJ0aGRhdGUsICd5ZWFycycpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBSZXR1cm5zIHRoZSBjcmVhdGVkIHRpbWUgaW4gd29yZHMgZnJvbSB0aGUgZGF0ZVxyXG4gICogQHBhcmFtIHtzdHJpbmd9IGRhdGEgLSBEYXRlXHJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gQ3JlYXRlZCB0aW1lIGluIHdvcmRzIGZyb20gdGhlIGRhdGVcclxuICAqL1xyXG4gIGdldENyZWF0ZWRBdChkYXRhOiBzdHJpbmcpIHtcclxuICAgIGxldCBob3VycyA9IG1vbWVudCgpLmRpZmYobW9tZW50KGRhdGEpLCAnaG91cnMnKTtcclxuICAgIGxldCBtaW51dGVzID0gbW9tZW50KCkuZGlmZihtb21lbnQoZGF0YSksICdtaW51dGVzJyk7XHJcbiAgICBpZiAoaG91cnMgPiAyNCkge1xyXG4gICAgICByZXR1cm4gbW9tZW50KGRhdGEpLmZvcm1hdCgnREQgTU1NLCBZWVlZJyk7XHJcbiAgICB9O1xyXG4gICAgaWYgKGhvdXJzIDwgMSkge1xyXG4gICAgICByZXR1cm4gYCR7bWludXRlc30gJHt0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChcIk1pbnV0ZXMgYWdvXCIpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7aG91cnN9ICR7dGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXCJIb3VycyBhZ29cIil9YDtcclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgKiBHZXQgZW5jb3VudGVyIGRhdGV0aW1lIGZvciBhIGdpdmVuIGVuY291bnRlciB0eXBlXHJcbiAgKiBAcGFyYW0ge0N1c3RvbVZpc2l0TW9kZWx9IHZpc2l0IC0gVmlzaXRcclxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvdW50ZXJOYW1lIC0gRW5jb3VudGVyIHR5cGVcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBFbmNvdW50ZXIgZGF0ZXRpbWVcclxuICAqL1xyXG4gIGdldEVuY291bnRlckNyZWF0ZWQodmlzaXQ6IEN1c3RvbVZpc2l0TW9kZWwsIGVuY291bnRlck5hbWU6IHN0cmluZykge1xyXG4gICAgbGV0IGNyZWF0ZWRfYXQgPSAnJztcclxuICAgIGNvbnN0IGVuY291bnRlcnMgPSB2aXNpdC5lbmNvdW50ZXJzO1xyXG4gICAgZW5jb3VudGVycy5mb3JFYWNoKChlbmNvdW50ZXI6IEN1c3RvbUVuY291bnRlck1vZGVsKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc3BsYXkgPSBlbmNvdW50ZXIudHlwZT8ubmFtZTtcclxuICAgICAgaWYgKGRpc3BsYXkubWF0Y2goZW5jb3VudGVyTmFtZSkgIT09IG51bGwpIHtcclxuICAgICAgICBjcmVhdGVkX2F0ID0gdGhpcy5nZXRDcmVhdGVkQXQoZW5jb3VudGVyLmVuY291bnRlcl9kYXRldGltZS5yZXBsYWNlKCdaJywnKzA1MzAnKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNyZWF0ZWRfYXQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBlbmNvdW50ZXIgaXMgYSBmb2xsb3ctdXAgb3IgbmV3IHZpc2l0XHJcbiAgICogQHBhcmFtIHthbnl9IGVuYyAtIEVuY291bnRlciBkYXRhXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtICdGT0xMT1dfVVAnIG9yICdORVcnXHJcbiAgICovXHJcbiAgZ2V0RGVtYXJjYXRpb24oZW5jOiBhbnkpIHtcclxuICAgIGxldCBpc0ZvbGxvd1VwID0gZmFsc2U7XHJcbiAgICBjb25zdCBhZGxJbnRsID0gZW5jPy5maW5kPy4oZSA9PiBlPy50eXBlPy5uYW1lID09PSB2aXNpdFR5cGVzLkFEVUxUSU5JVElBTCk7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhZGxJbnRsPy5vYnMpKSB7XHJcbiAgICAgIGFkbEludGw/Lm9icy5mb3JFYWNoKG9icyA9PiB7XHJcbiAgICAgICAgaWYgKCFpc0ZvbGxvd1VwKVxyXG4gICAgICAgICAgaXNGb2xsb3dVcCA9IG9icz8udmFsdWVfdGV4dD8udG9Mb3dlckNhc2U/LigpPy5pbmNsdWRlcz8uKFwiZm9sbG93IHVwXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBpc0ZvbGxvd1VwID8gdmlzaXRUeXBlcy5GT0xMT1dfVVAgOiB2aXNpdFR5cGVzLk5FVztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IGF3YWl0aW5nIHZpc2l0cyBmb3IgYSBnaXZlbiBwYWdlIG51bWJlclxyXG4gICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBQYWdlIG51bWJlclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldEF3YWl0aW5nVmlzaXRzKHBhZ2U6IG51bWJlciA9IDEpIHtcclxuICAgIHRoaXMubmd4TG9hZGVyLnN0YXJ0TG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdGFydCBzZWN0aW9uIGxvYWRlclxyXG4gICAgaWYocGFnZSA9PSAxKSB7XHJcbiAgICAgIHRoaXMuYXdhaXRpbmdWaXNpdHMgPSBbXTtcclxuICAgIH0gICAgXHJcbiAgICB0aGlzLnZpc2l0U2VydmljZS5nZXRBd2FpdGluZ1Zpc2l0cyh0aGlzLnNwZWNpYWxpemF0aW9uLCBwYWdlKS5zdWJzY3JpYmUoe1xyXG4gICAgICBuZXh0OihyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHtcclxuICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgIHRoaXMudmlzaXRzTGVuZ3RoQ291bnQgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAgIHRoaXMuZW1pdFZpc2l0c0NvdW50KHRoaXMudmlzaXRzTGVuZ3RoQ291bnQpO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmlzaXQgPSByZXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgdmlzaXQuY2hlaWZfY29tcGxhaW50ID0gdGhpcy5nZXRDaGVpZkNvbXBsYWludCh2aXNpdCk7XHJcbiAgICAgICAgICAgIHZpc2l0LnZpc2l0X2NyZWF0ZWQgPSB2aXNpdD8uZGF0ZV9jcmVhdGVkID8gdGhpcy5nZXRDcmVhdGVkQXQodmlzaXQuZGF0ZV9jcmVhdGVkLnJlcGxhY2UoJ1onLCcrMDUzMCcpKSA6IHRoaXMuZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdCwgdmlzaXRUeXBlcy5BRFVMVElOSVRJQUwpO1xyXG4gICAgICAgICAgICB2aXNpdC5wZXJzb24uYWdlID0gdGhpcy5jYWxjdWxhdGVBZ2UodmlzaXQucGVyc29uLmJpcnRoZGF0ZSk7XHJcbiAgICAgICAgICAgIHZpc2l0LnBhdGllbnRfdHlwZSA9IHRoaXMuZ2V0RGVtYXJjYXRpb24odmlzaXQ/LmVuY291bnRlcnMpO1xyXG4gICAgICAgICAgICB2aXNpdC5sb2NhdGlvbiA9IHZpc2l0Py5sb2NhdGlvbj8ubmFtZTtcclxuICAgICAgICAgICAgdmlzaXQuYWdlID0gdmlzaXQ/LnBlcnNvbj8uYWdlICsgJyAnICsgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ3knKTtcclxuICAgICAgICAgICAgdGhpcy5hd2FpdGluZ1Zpc2l0cy5wdXNoKHZpc2l0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhID0gWy4uLnRoaXMuYXdhaXRpbmdWaXNpdHNdO1xyXG4gICAgICAgICAgaWYgKHBhZ2UgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UucGFnaW5hdG9yID0gdGhpcy50ZW1wUGFnaW5hdG9yO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2Uuc29ydCA9IHRoaXMudGFibGVNYXRTb3J0O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGEsIGZpbHRlcjogc3RyaW5nKSA9PiBkYXRhPy5wYXRpZW50LmlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTEgfHwgZGF0YT8ucGF0aWVudF9uYW1lLmdpdmVuX25hbWUuY29uY2F0KChkYXRhPy5wYXRpZW50X25hbWUubWlkZGxlX25hbWUgJiYgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnTWlkZGxlIE5hbWUnKSA/ICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSA6ICcnKSArICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5mYW1pbHlfbmFtZSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBQYWdpbmF0b3IubGVuZ3RoID0gdGhpcy5hd2FpdGluZ1Zpc2l0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5uZXh0UGFnZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgY29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICB0aGlzLm5neExvYWRlci5zdG9wTG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdG9wIHNlY3Rpb24gbG9hZGVyXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgaW5wcm9ncmVzcyB2aXNpdHMgZm9yIGEgZ2l2ZW4gcGFnZSBudW1iZXJcclxuICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlIC0gUGFnZSBudW1iZXJcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICBnZXRJblByb2dyZXNzVmlzaXRzKHBhZ2U6IG51bWJlciA9IDEpIHtcclxuICAgIHRoaXMubmd4TG9hZGVyLnN0YXJ0TG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdGFydCBzZWN0aW9uIGxvYWRlclxyXG4gICAgaWYocGFnZSA9PSAxKSB7XHJcbiAgICAgIHRoaXMuaW5Qcm9ncmVzc1Zpc2l0cyA9IFtdO1xyXG4gICAgfVxyXG4gICAgdGhpcy52aXNpdFNlcnZpY2UuZ2V0SW5Qcm9ncmVzc1Zpc2l0cyh0aGlzLnNwZWNpYWxpemF0aW9uLCBwYWdlKS5zdWJzY3JpYmUoe1xyXG4gICAgICBuZXh0OihyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHtcclxuICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgIHRoaXMudmlzaXRzTGVuZ3RoQ291bnQgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAgIHRoaXMuZW1pdFZpc2l0c0NvdW50KHRoaXMudmlzaXRzTGVuZ3RoQ291bnQpO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmlzaXQgPSByZXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgdmlzaXQuY2hlaWZfY29tcGxhaW50ID0gdGhpcy5nZXRDaGVpZkNvbXBsYWludCh2aXNpdCk7XHJcbiAgICAgICAgICAgIHZpc2l0LnZpc2l0X2NyZWF0ZWQgPSB2aXNpdD8uZGF0ZV9jcmVhdGVkID8gdGhpcy5nZXRDcmVhdGVkQXQodmlzaXQuZGF0ZV9jcmVhdGVkLnJlcGxhY2UoJ1onLCcrMDUzMCcpKSA6IHRoaXMuZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdCwgdmlzaXRUeXBlcy5BRFVMVElOSVRJQUwpO1xyXG4gICAgICAgICAgICB2aXNpdC5wcmVzY3JpcHRpb25fc3RhcnRlZCA9IHRoaXMuZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdCwgdmlzaXRUeXBlcy5WSVNJVF9OT1RFKTtcclxuICAgICAgICAgICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgICAgICAgICB2aXNpdC5UTUhfcGF0aWVudF9pZCA9IHRoaXMuZ2V0QXR0cmlidXRlRGF0YSh2aXNpdCwgXCJUTUggQ2FzZSBOdW1iZXJcIik/LnZhbHVlO1xyXG4gICAgICAgICAgICB2aXNpdC5sb2NhdGlvbiA9IHZpc2l0Py5sb2NhdGlvbj8ubmFtZTtcclxuICAgICAgICAgICAgdmlzaXQuYWdlID0gdmlzaXQ/LnBlcnNvbj8uYWdlICsgJyAnICsgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ3knKTtcclxuICAgICAgICAgICAgdGhpcy5pblByb2dyZXNzVmlzaXRzLnB1c2godmlzaXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5pblByb2dyZXNzVmlzaXRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBwYXJzZVRpbWUgPSAodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5jbHVkZXMoXCJtaW51dGVzIGFnb1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJtaW51dGVzXCIsIHRpbWU6IHBhcnNlSW50KHZhbHVlKSB9OyAvLyBTdG9yZSBvbmx5IG51bWVyaWMgbWludXRlc1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbmNsdWRlcyhcIkhvdXJzIGFnb1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJob3Vyc1wiLCB0aW1lOiBwYXJzZUludCh2YWx1ZSkgKiA2MCB9OyAvLyBDb252ZXJ0IGhvdXJzIHRvIG1pbnV0ZXMgZm9yIGNvcnJlY3QgY29tcGFyaXNvblxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwiZGF0ZVwiLCB0aW1lOiBtb21lbnQodmFsdWUsIFwiREQgTU1NLCBZWVlZXCIpLnZhbHVlT2YoKSB9O1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IHZpc2l0QSA9IHBhcnNlVGltZShhLnByZXNjcmlwdGlvbl9zdGFydGVkKTtcclxuICAgICAgICAgICAgICBjb25zdCB2aXNpdEIgPSBwYXJzZVRpbWUoYi5wcmVzY3JpcHRpb25fc3RhcnRlZCk7XHJcbiAgICAgICAgICAgICAgLy8gU29ydCBtaW51dGVzIGZpcnN0IChhc2NlbmRpbmcpXHJcbiAgICAgICAgICAgICAgaWYgKHZpc2l0QS50eXBlID09PSBcIm1pbnV0ZXNcIiAmJiB2aXNpdEIudHlwZSA9PT0gXCJtaW51dGVzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpc2l0QS50aW1lIC0gdmlzaXRCLnRpbWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIFNvcnQgaG91cnMgZmlyc3QgKGFzY2VuZGluZylcclxuICAgICAgICAgICAgICBpZiAodmlzaXRBLnR5cGUgPT09IFwiaG91cnNcIiAmJiB2aXNpdEIudHlwZSA9PT0gXCJob3Vyc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB2aXNpdEEudGltZSAtIHZpc2l0Qi50aW1lO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyBTb3J0IGRhdGVzIChkZXNjZW5kaW5nKVxyXG4gICAgICAgICAgICAgIGlmICh2aXNpdEEudHlwZSA9PT0gXCJkYXRlXCIgJiYgdmlzaXRCLnR5cGUgPT09IFwiZGF0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB2aXNpdEIudGltZSAtIHZpc2l0QS50aW1lO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyBQcmlvcml0aXplIG1pbnV0ZXMgb3ZlciBob3VycywgYW5kIGhvdXJzIG92ZXIgZGF0ZXNcclxuICAgICAgICAgICAgICBpZiAodmlzaXRBLnR5cGUgPT09IFwibWludXRlc1wiKSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgaWYgKHZpc2l0Qi50eXBlID09PSBcIm1pbnV0ZXNcIikgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgaWYgKHZpc2l0QS50eXBlID09PSBcImhvdXJzXCIpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICBpZiAodmlzaXRCLnR5cGUgPT09IFwiaG91cnNcIikgcmV0dXJuIDE7XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgdGhpcy5kYXRhU291cmNlLmRhdGEgPSBbLi4udGhpcy5pblByb2dyZXNzVmlzaXRzXTtcclxuICAgICAgICAgIGlmIChwYWdlID09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMudGVtcFBhZ2luYXRvcjtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLnNvcnQgPSB0aGlzLnRhYmxlTWF0U29ydDtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlclByZWRpY2F0ZSA9IChkYXRhLCBmaWx0ZXI6IHN0cmluZykgPT4gZGF0YT8ucGF0aWVudC5pZGVudGlmaWVyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpICE9IC0xIHx8IGRhdGE/LnBhdGllbnRfbmFtZS5naXZlbl9uYW1lLmNvbmNhdCgoZGF0YT8ucGF0aWVudF9uYW1lLm1pZGRsZV9uYW1lICYmIHRoaXMuY2hlY2tQYXRpZW50UmVnRmllbGQoJ01pZGRsZSBOYW1lJykgPyAnICcgKyBkYXRhPy5wYXRpZW50X25hbWUubWlkZGxlX25hbWUgOiAnJykgKyAnICcgKyBkYXRhPy5wYXRpZW50X25hbWUuZmFtaWx5X25hbWUpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpICE9IC0xO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLmxlbmd0aCA9IHRoaXMuaW5Qcm9ncmVzc1Zpc2l0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5uZXh0UGFnZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgY29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICB0aGlzLm5neExvYWRlci5zdG9wTG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdG9wIHNlY3Rpb24gbG9hZGVyXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgcHJpb3JpdHkgdmlzaXRzIGZvciBhIGdpdmVuIHBhZ2UgbnVtYmVyXHJcbiAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSAtIFBhZ2UgbnVtYmVyXHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgZ2V0UHJpb3JpdHlWaXNpdHMocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgdGhpcy5uZ3hMb2FkZXIuc3RhcnRMb2FkZXIoJ3RhYmxlLWxvYWRlci0nICsgdGhpcy5wbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZyk7IC8vIFN0YXJ0IHNlY3Rpb24gbG9hZGVyXHJcbiAgICBpZihwYWdlID09IDEpIHtcclxuICAgICAgdGhpcy5wcmlvcml0eVZpc2l0cyA9IFtdO1xyXG4gICAgfVxyXG4gICAgdGhpcy52aXNpdFNlcnZpY2UuZ2V0UHJpb3JpdHlWaXNpdHModGhpcy5zcGVjaWFsaXphdGlvbiwgcGFnZSkuc3Vic2NyaWJlKHtcclxuICAgICAgbmV4dDoocmVzOiBBcGlSZXNwb25zZU1vZGVsKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7XHJcbiAgICAgICAgICB0aGlzLnZpc2l0c0xlbmd0aENvdW50ID0gcmVzLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgICB0aGlzLmVtaXRWaXNpdHNDb3VudCh0aGlzLnZpc2l0c0xlbmd0aENvdW50KTtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHZpc2l0ID0gcmVzLmRhdGFbaV07XHJcbiAgICAgICAgICAgIHZpc2l0LmNoZWlmX2NvbXBsYWludCA9IHRoaXMuZ2V0Q2hlaWZDb21wbGFpbnQodmlzaXQpO1xyXG4gICAgICAgICAgICB2aXNpdC52aXNpdF9jcmVhdGVkID0gdmlzaXQ/LmRhdGVfY3JlYXRlZCA/IHRoaXMuZ2V0Q3JlYXRlZEF0KHZpc2l0LmRhdGVfY3JlYXRlZC5yZXBsYWNlKCdaJywnKzA1MzAnKSkgOiB0aGlzLmdldEVuY291bnRlckNyZWF0ZWQodmlzaXQsIHZpc2l0VHlwZXMuRkxBR0dFRCk7XHJcbiAgICAgICAgICAgIHZpc2l0LnBlcnNvbi5hZ2UgPSB0aGlzLmNhbGN1bGF0ZUFnZSh2aXNpdC5wZXJzb24uYmlydGhkYXRlKTtcclxuICAgICAgICAgICAgdmlzaXQubG9jYXRpb24gPSB2aXNpdD8ubG9jYXRpb24/Lm5hbWU7XHJcbiAgICAgICAgICAgIHZpc2l0LmFnZSA9IHZpc2l0Py5wZXJzb24/LmFnZSArICcgJyArIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCd5Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJpb3JpdHlWaXNpdHMucHVzaCh2aXNpdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IFsuLi50aGlzLnByaW9yaXR5VmlzaXRzXTtcclxuICAgICAgICAgIGlmIChwYWdlID09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMudGVtcFBhZ2luYXRvcjtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLnNvcnQgPSB0aGlzLnRhYmxlTWF0U29ydDtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlclByZWRpY2F0ZSA9IChkYXRhLCBmaWx0ZXI6IHN0cmluZykgPT4gZGF0YT8ucGF0aWVudC5pZGVudGlmaWVyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpICE9IC0xIHx8IGRhdGE/LnBhdGllbnRfbmFtZS5naXZlbl9uYW1lLmNvbmNhdCgoZGF0YT8ucGF0aWVudF9uYW1lLm1pZGRsZV9uYW1lICYmIHRoaXMuY2hlY2tQYXRpZW50UmVnRmllbGQoJ01pZGRsZSBOYW1lJykgPyAnICcgKyBkYXRhPy5wYXRpZW50X25hbWUubWlkZGxlX25hbWUgOiAnJykgKyAnICcgKyBkYXRhPy5wYXRpZW50X25hbWUuZmFtaWx5X25hbWUpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpICE9IC0xO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLmxlbmd0aCA9IHRoaXMucHJpb3JpdHlWaXNpdHMubGVuZ3RoO1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBQYWdpbmF0b3IubmV4dFBhZ2UoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5uZ3hMb2FkZXIuc3RvcExvYWRlcigndGFibGUtbG9hZGVyLScgKyB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnKTsgLy8gU3RvcCBzZWN0aW9uIGxvYWRlclxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjb21wbGV0ZWQgdmlzaXRzIGNvdW50XHJcbiAgICogQHJldHVybiB7dm9pZH1cclxuICAgKi9cclxuICBnZXRDb21wbGV0ZWRWaXNpdHMocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgdGhpcy5uZ3hMb2FkZXIuc3RhcnRMb2FkZXIoJ3RhYmxlLWxvYWRlci0nICsgdGhpcy5wbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZyk7IC8vIFN0YXJ0IHNlY3Rpb24gbG9hZGVyXHJcbiAgICB0aGlzLnZpc2l0U2VydmljZS5nZXRFbmRlZFZpc2l0cyh0aGlzLnNwZWNpYWxpemF0aW9uLCBwYWdlKS5zdWJzY3JpYmUoe1xyXG4gICAgICBuZXh0OihyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHtcclxuICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgIHRoaXMudmlzaXRzTGVuZ3RoQ291bnQgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAgIHRoaXMuZW1pdFZpc2l0c0NvdW50KHRoaXMudmlzaXRzTGVuZ3RoQ291bnQpO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmlzaXQgPSByZXMuZGF0YVtpXTtcclxuICAgICAgICAgICAgdmlzaXQuY2hlaWZfY29tcGxhaW50ID0gdGhpcy5nZXRDaGVpZkNvbXBsYWludCh2aXNpdCk7XHJcbiAgICAgICAgICAgIHZpc2l0LnZpc2l0X2NyZWF0ZWQgPSB2aXNpdD8uZGF0ZV9jcmVhdGVkID8gdGhpcy5nZXRDcmVhdGVkQXQodmlzaXQuZGF0ZV9jcmVhdGVkLnJlcGxhY2UoJ1onLCAnKzA1MzAnKSkgOiB0aGlzLmdldEVuY291bnRlckNyZWF0ZWQodmlzaXQsIHZpc2l0VHlwZXMuQ09NUExFVEVEX1ZJU0lUKTtcclxuICAgICAgICAgICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgICAgICAgICB2aXNpdC5jb21wbGV0ZWQgPSB2aXNpdD8uZGF0ZV9jcmVhdGVkID8gdGhpcy5nZXRDcmVhdGVkQXQodmlzaXQuZGF0ZV9jcmVhdGVkLnJlcGxhY2UoJ1onLCAnKzA1MzAnKSkgOiB0aGlzLmdldEVuY291bnRlckNyZWF0ZWQodmlzaXQsIHZpc2l0VHlwZXMuVklTSVRfQ09NUExFVEUpO1xyXG4gICAgICAgICAgICB2aXNpdC5UTUhfcGF0aWVudF9pZCA9IHRoaXMuZ2V0QXR0cmlidXRlRGF0YSh2aXNpdCwgXCJUTUggQ2FzZSBOdW1iZXJcIik/LnZhbHVlO1xyXG4gICAgICAgICAgICB2aXNpdC5sb2NhdGlvbiA9IHZpc2l0Py5sb2NhdGlvbj8ubmFtZTtcclxuICAgICAgICAgICAgdmlzaXQuYWdlID0gdmlzaXQ/LnBlcnNvbj8uYWdlICsgJyAnICsgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ3knKTtcclxuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWRWaXNpdHMucHVzaCh2aXNpdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IFsuLi50aGlzLmNvbXBsZXRlZFZpc2l0c107XHJcbiAgICAgICAgICBpZiAocGFnZSA9PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5wYWdpbmF0b3IgPSB0aGlzLnRlbXBQYWdpbmF0b3I7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5zb3J0ID0gdGhpcy50YWJsZU1hdFNvcnQ7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJQcmVkaWNhdGUgPSAoZGF0YTogeyBwYXRpZW50OiB7IGlkZW50aWZpZXI6IHN0cmluZzsgfTsgcGF0aWVudF9uYW1lOiB7IGdpdmVuX25hbWU6IHN0cmluZzsgbWlkZGxlX25hbWU6IHN0cmluZzsgZmFtaWx5X25hbWU6IHN0cmluZzsgfTsgfSwgZmlsdGVyOiBzdHJpbmcpID0+IGRhdGE/LnBhdGllbnQuaWRlbnRpZmllci50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMSB8fCBkYXRhPy5wYXRpZW50X25hbWUuZ2l2ZW5fbmFtZS5jb25jYXQoKGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSAmJiB0aGlzLmNoZWNrUGF0aWVudFJlZ0ZpZWxkKCdNaWRkbGUgTmFtZScpID8gJyAnICsgZGF0YT8ucGF0aWVudF9uYW1lLm1pZGRsZV9uYW1lIDogJycpICsgJyAnICsgZGF0YT8ucGF0aWVudF9uYW1lLmZhbWlseV9uYW1lKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPSAtMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5sZW5ndGggPSB0aGlzLmNvbXBsZXRlZFZpc2l0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5uZXh0UGFnZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgY29tcGxldGU6ICgpID0+IHsgXHJcbiAgICAgICAgdGhpcy5uZ3hMb2FkZXIuc3RvcExvYWRlcigndGFibGUtbG9hZGVyLScgKyB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnKTsgLy8gU3RvcCBzZWN0aW9uIGxvYWRlclxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IGZvbGxvdy11cCB2aXNpdHMgZm9yIGEgbG9nZ2VkLWluIGRvY3RvclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldEZvbGxvd1VwVmlzaXQocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgdGhpcy5uZ3hMb2FkZXIuc3RhcnRMb2FkZXIoJ3RhYmxlLWxvYWRlci0nICsgdGhpcy5wbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZyk7IC8vIFN0YXJ0IHNlY3Rpb24gbG9hZGVyXHJcbiAgICB0aGlzLnZpc2l0U2VydmljZS5nZXRGb2xsb3dVcFZpc2l0cyh0aGlzLnNwZWNpYWxpemF0aW9uKS5zdWJzY3JpYmUoe1xyXG4gICAgICBuZXh0OiAocmVzOiBBcGlSZXNwb25zZU1vZGVsKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2aXNpdCA9IHJlcy5kYXRhW2ldO1xyXG4gICAgICAgICAgICBpZiAodmlzaXQ/LmVuY291bnRlcnM/Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIHRoaXMudmlzaXRzTGVuZ3RoQ291bnQgKz0gMTtcclxuICAgICAgICAgICAgICB2aXNpdC5jaGVpZl9jb21wbGFpbnQgPSB0aGlzLmdldENoZWlmQ29tcGxhaW50KHZpc2l0KTtcclxuICAgICAgICAgICAgICB2aXNpdC52aXNpdF9jcmVhdGVkID0gdmlzaXQ/LmRhdGVfY3JlYXRlZCA/IHRoaXMuZ2V0Q3JlYXRlZEF0KHZpc2l0LmRhdGVfY3JlYXRlZC5yZXBsYWNlKCdaJywgJyswNTMwJykpIDogdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLkNPTVBMRVRFRF9WSVNJVCk7XHJcbiAgICAgICAgICAgICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgICAgICAgICAgIHZpc2l0LmNvbXBsZXRlZCA9IHRoaXMuZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdCwgdmlzaXRUeXBlcy5WSVNJVF9DT01QTEVURSk7XHJcbiAgICAgICAgICAgICAgdmlzaXQuZm9sbG93VXAgPSB0aGlzLnByb2Nlc3NGb2xsb3dVcERhdGUodGhpcy5nZXRFbmNvdW50ZXJPYnModmlzaXQuZW5jb3VudGVycywgdmlzaXRUeXBlcy5WSVNJVF9OT1RFLCAxNjMzNDUvKkZvbGxvdy11cCovKT8udmFsdWVfdGV4dCk7XHJcbiAgICAgICAgICAgICAgdmlzaXQubG9jYXRpb24gPSB2aXNpdD8ubG9jYXRpb24/Lm5hbWU7XHJcbiAgICAgICAgICAgICAgdmlzaXQuYWdlID0gdmlzaXQ/LnBlcnNvbj8uYWdlICsgJyAnICsgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ3knKTtcclxuICAgICAgICAgICAgICB0aGlzLmZvbGxvd1VwVmlzaXRzLnB1c2godmlzaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmVtaXRWaXNpdHNDb3VudCh0aGlzLnZpc2l0c0xlbmd0aENvdW50KTtcclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5kYXRhID0gWy4uLnRoaXMuZm9sbG93VXBWaXNpdHNdO1xyXG4gICAgICAgICAgaWYgKHBhZ2UgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UucGFnaW5hdG9yID0gdGhpcy50ZW1wUGFnaW5hdG9yO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2Uuc29ydCA9IHRoaXMudGFibGVNYXRTb3J0O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyUHJlZGljYXRlID0gKGRhdGE6IHsgcGF0aWVudDogeyBpZGVudGlmaWVyOiBzdHJpbmc7IH07IHBhdGllbnRfbmFtZTogeyBnaXZlbl9uYW1lOiBzdHJpbmc7IG1pZGRsZV9uYW1lOiBzdHJpbmc7IGZhbWlseV9uYW1lOiBzdHJpbmc7IH07IH0sIGZpbHRlcjogc3RyaW5nKSA9PiBkYXRhPy5wYXRpZW50LmlkZW50aWZpZXIudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTEgfHwgZGF0YT8ucGF0aWVudF9uYW1lLmdpdmVuX25hbWUuY29uY2F0KChkYXRhPy5wYXRpZW50X25hbWUubWlkZGxlX25hbWUgJiYgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnTWlkZGxlIE5hbWUnKSA/ICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5taWRkbGVfbmFtZSA6ICcnKSArICcgJyArIGRhdGE/LnBhdGllbnRfbmFtZS5mYW1pbHlfbmFtZSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT0gLTE7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBQYWdpbmF0b3IubGVuZ3RoID0gdGhpcy5mb2xsb3dVcFZpc2l0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcFBhZ2luYXRvci5uZXh0UGFnZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgY29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICB0aGlzLm5neExvYWRlci5zdG9wTG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdG9wIHNlY3Rpb24gbG9hZGVyXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgZW5jb3VudGVyIGRhdGV0aW1lIGZvciBhIGdpdmVuIGVuY291bnRlciB0eXBlXHJcbiAgKiBAcGFyYW0ge0N1c3RvbVZpc2l0TW9kZWx9IHZpc2l0IC0gVmlzaXRcclxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvdW50ZXJOYW1lIC0gRW5jb3VudGVyIHR5cGVcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBFbmNvdW50ZXIgZGF0ZXRpbWVcclxuICAqL1xyXG4gIGdldEVuY291bnRlck9icyhlbmNvdW50ZXJzOiBDdXN0b21FbmNvdW50ZXJNb2RlbFtdLCBlbmNvdW50ZXJOYW1lOiBzdHJpbmcsIGNvbmNlcHRJZDogbnVtYmVyKSB7XHJcbiAgICBsZXQgb2JzOiBDdXN0b21PYnNNb2RlbDtcclxuICAgIGVuY291bnRlcnMuZm9yRWFjaCgoZW5jb3VudGVyOiBDdXN0b21FbmNvdW50ZXJNb2RlbCkgPT4ge1xyXG4gICAgICBpZiAoZW5jb3VudGVyLnR5cGU/Lm5hbWUgPT09IGVuY291bnRlck5hbWUpIHtcclxuICAgICAgICBvYnMgPSBlbmNvdW50ZXI/Lm9icz8uZmluZCgobzogQ3VzdG9tT2JzTW9kZWwpID0+IG8uY29uY2VwdF9pZCA9PSBjb25jZXB0SWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYnM7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFJlbmRlcnMgSFRNTCBjb250ZW50IGZvciBhIGNvbHVtbiwgc2FuaXRpemVkIGZvciBzZWN1cml0eVxyXG4gICAqIEBwYXJhbSB7YW55fSBjb2x1bW4gLSBDb2x1bW4gZGVmaW5pdGlvblxyXG4gICAqIEBwYXJhbSB7YW55fSBlbGVtZW50IC0gRGF0YSBlbGVtZW50IHRvIHJlbmRlclxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBGb3JtYXR0ZWQgSFRNTCBvciBlbGVtZW50IHZhbHVlXHJcbiAgICovXHJcbiAgcmVuZGVySHRtbENvbnRlbnQoY29sdW1uOiBhbnksIGVsZW1lbnQ6IGFueSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gY29sdW1uLmZvcm1hdEh0bWwgJiYgdHlwZW9mIGNvbHVtbi5mb3JtYXRIdG1sID09PSAnZnVuY3Rpb24nID8gdGhpcy5zYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdEh0bWwoY29sdW1uLmZvcm1hdEh0bWwoZWxlbWVudCkpIDogZWxlbWVudFtjb2x1bW4ua2V5XTtcclxuICB9XHJcbiAgICBcclxuICAvKipcclxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIG9mIENTUyBjbGFzc2VzIGZvciB0aGUgY29sdW1uXHJcbiAgICogQHBhcmFtIHthbnl9IGNvbHVtbiAtIENvbHVtbiBkZWZpbml0aW9uXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtIFNwYWNlLXNlcGFyYXRlZCBjbGFzcyBuYW1lc1xyXG4gICAqL1xyXG4gIGdldENsYXNzZXMoY29sdW1uOiBhbnksIGVsZW1lbnQ6IGFueSk6IHN0cmluZyB7XHJcbiAgICBsZXQgY2xhc3NMaXN0ID0gW107XHJcblxyXG4gICAgLy8gSWYgY29sdW1uIGhhcyBhIHN0YXRpYyBjbGFzc0xpc3QgKGFycmF5IG9yIHN0cmluZyksIGFkZCBpdFxyXG4gICAgaWYgKGNvbHVtbi5jbGFzc0xpc3QpIHtcclxuICAgICAgY2xhc3NMaXN0ID0gdHlwZW9mIGNvbHVtbi5jbGFzc0xpc3QgPT09IFwiZnVuY3Rpb25cIiA/IGNvbHVtbi5jbGFzc0xpc3QoZWxlbWVudCkgOiBjb2x1bW4uY2xhc3NMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjbGFzc0xpc3Quam9pbihcIiBcIik7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdHMgdGhlIGZvbGxvdy11cCBkYXRlIGJ5IGNsZWFuaW5nIHVwIHRpbWUgZGV0YWlsc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIEZvbGxvdy11cCBkYXRlIHN0cmluZ1xyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBGb3JtYXR0ZWQgZGF0ZVxyXG4gICAqL1xyXG4gIHByb2Nlc3NGb2xsb3dVcERhdGUodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZS5zcGxpdCgnLCcpLmxlbmd0aCA+IDEgPyBgJHt2YWx1ZS5zcGxpdCgnLCcpWzBdfSR7dmFsdWUuc3BsaXQoJywnKVsxXS5yZXBsYWNlKFwiVGltZTpcIiwgXCJcIil9YCA6IHZhbHVlIDogJyc7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogRXhlY3V0ZXMgdGhlIGFjdGlvbiBiYXNlZCBvbiBpdHMgbGFiZWwgKFJlc2NoZWR1bGUgb3IgQ2FuY2VsKVxyXG4gICAqIEBwYXJhbSB7YW55fSBhY3Rpb24gLSBBY3Rpb24gb2JqZWN0XHJcbiAgICogQHBhcmFtIHthbnl9IGVsZW1lbnQgLSBFbGVtZW50IHRvIHBlcmZvcm0gdGhlIGFjdGlvbiBvblxyXG4gICAqL1xyXG4gIGhhbmRsZUFjdGlvbihhY3Rpb246IGFueSwgZWxlbWVudDogYW55KSB7XHJcbiAgICBjb25zdCBpc1ZhbGlkYXRpb25SZXF1aXJlZCA9IGFjdGlvbi52YWxpZGF0aW9uUmVxdWlyZWQgIT09IHVuZGVmaW5lZCA/IGFjdGlvbi52YWxpZGF0aW9uUmVxdWlyZWQgOiB0cnVlO1xyXG4gICAgXHJcbiAgICBpZiAoYWN0aW9uLmxhYmVsID09PSAnUmVzY2hlZHVsZScpIHtcclxuICAgICAgdGhpcy5yZXNjaGVkdWxlKGVsZW1lbnQsIGlzVmFsaWRhdGlvblJlcXVpcmVkKTtcclxuICAgIH0gZWxzZSBpZiAoYWN0aW9uLmxhYmVsID09PSAnQ2FuY2VsJykge1xyXG4gICAgICB0aGlzLmNhbmNlbChlbGVtZW50LCBpc1ZhbGlkYXRpb25SZXF1aXJlZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPcGVucyBhIFdoYXRzQXBwIGNoYXQgd2l0aCB0aGUgZ2l2ZW4gcGhvbmUgbnVtYmVyXHJcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCAtIFRoZSBjbGljayBldmVudCB0byBwcmV2ZW50IHJvdyBuYXZpZ2F0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRlbGVwaG9uZSAtIFBob25lIG51bWJlciBmb3IgV2hhdHNBcHBcclxuICAgKi9cclxuICBvcGVuV2hhdHNBcHAoZXZlbnQ6IE1vdXNlRXZlbnQsIHRlbGVwaG9uZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudCByb3cgbmF2aWdhdGlvblxyXG4gICAgY29uc3Qgd2hhdHNhcHBMaW5rID0gYGh0dHBzOi8vd2EubWUvJHt0ZWxlcGhvbmV9YDtcclxuICAgIHdpbmRvdy5vcGVuKHdoYXRzYXBwTGluaywgJ19ibGFuaycsICdub29wZW5lcixub3JlZmVycmVyJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFbWl0cyB0aGUgdmlzaXRzIGNvdW50IGRhdGEgd2l0aCB0aGUgZ2l2ZW4gdGFibGUgdGFnIG5hbWUgYW5kIGNvdW50XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZpc2l0c0NvdW50IC0gVGhlIHRvdGFsIHZpc2l0cyBjb3VudCBmb3IgdGhlIHNwZWNpZmljIHRhYmxlXHJcbiAgICovXHJcbiAgZW1pdFZpc2l0c0NvdW50KHZpc2l0c0NvdW50OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IHZpc2l0c0NvdW50RGF0YSA9IHtcclxuICAgICAgdGFibGVUYWdOYW1lOiB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnLFxyXG4gICAgICB2aXNpdHNDb3VudDogdmlzaXRzQ291bnRcclxuICAgIH07XHJcbiAgICB0aGlzLnZpc2l0c0NvdW50RGF0ZS5lbWl0KHZpc2l0c0NvdW50RGF0YSk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCI8bWF0LWV4cGFuc2lvbi1wYW5lbCBbZXhwYW5kZWRdPVwidHJ1ZVwiIGRhdGEtdGVzdC1pZD1cIm1hdEV4cEFwcG9pbnRtZW50XCI+XG4gIDxtYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlciBkYXRhLXRlc3QtaWQ9XCJtYXRFeHBIZWFkZXJBcHBvaW50bWVudFwiPlxuICAgIDxtYXQtcGFuZWwtdGl0bGU+XG4gICAgICA8ZGl2IGlkPVwie3twbHVnaW5Db25maWdPYnMuYW5jaG9ySWR9fVwiIGNsYXNzPVwiYW5jaG9yLWNvblwiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImludGVsLWFjY29yZGlvbi10aXRsZVwiPlxuICAgICAgICA8aW1nIHNyYz1cInt7IHBsdWdpbkNvbmZpZ09icy50YWJsZUhlYWRlckljb24gfX1cIiBhbHQ9XCJcIiB3aWR0aD1cIjQ0cHhcIj5cbiAgICAgICAgPGg2IGNsYXNzPVwibWItMCBtbC0yXCI+e3sgcGx1Z2luQ29uZmlnT2JzLnRhYmxlSGVhZGVyIHwgdHJhbnNsYXRlIH19ICh7eyB2aXNpdHNMZW5ndGhDb3VudCB9fSk8L2g2PlxuICAgICAgICA8bWF0LWljb24gYXJpYS1oaWRkZW49XCJmYWxzZVwiIGFyaWEtbGFiZWw9XCJoZWxwIGljb25cIiBtYXRUb29sdGlwPVwie3sgKHBsdWdpbkNvbmZpZ09icy50b29sdGlwTGFiZWwgfCB0cmFuc2xhdGUpIH19XCIgbWF0VG9vbHRpcFBvc2l0aW9uPVwicmlnaHRcIiBkYXRhLXRlc3QtaWQ9XCJtYXRJY29IZWxwQXBwb2ludG1lbnRcIj5oZWxwX291dGxpbmU8L21hdC1pY29uPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibWwtYXV0byBmaWx0ZXItc2VhcmNoLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxidXR0b24gKm5nSWY9XCJwbHVnaW5Db25maWdPYnMuZmlsdGVyT2JzLmZpbHRlckZsYWdcIiBjbGFzcz1cIm1hdC1zdHJva2VkLWJ1dHRvblwiW21hdE1lbnVUcmlnZ2VyRm9yXT1cImZpbHRlck1lbnUxXCIgY2xhc3M9XCJmaWx0ZXItYnRuXCIgKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcIj5cbiAgICAgICAgICAgIDxpbWcgc3JjPVwie3twbHVnaW5Db25maWdPYnMuZmlsdGVyT2JzLmZpbHRlckljb259fVwiIGFsdD1cIlwiPiB7eyggcGx1Z2luQ29uZmlnT2JzLmZpbHRlck9icy5maWx0ZXJMYWJlbHwgdHJhbnNsYXRlKX19XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPG1hdC1tZW51ICNmaWx0ZXJNZW51MT1cIm1hdE1lbnVcIiBjbGFzcz1cImN1c3RvbS1tZW51XCIgW2hhc0JhY2tkcm9wXT1cInRydWVcIiB4UG9zaXRpb249XCJiZWZvcmVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2dnbGUtYnV0dG9uc1wiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibWF0LWZvY3VzLWluZGljYXRvciBtYXQtYnV0dG9uIG1hdC1idXR0b24tYmFzZVwiIGNsYXNzPVwibWF0LWZvY3VzLWluZGljYXRvciBtYXQtYnV0dG9uIG1hdC1idXR0b24tYmFzZVwiIG1hdC1idXR0b24gW2NsYXNzLmFjdGl2ZV09XCJtb2RlID09PSAnZGF0ZSdcIiAoY2xpY2spPVwic2V0TW9kZSgnZGF0ZScpOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IHJlc2V0RGF0ZSh0cnVlKVwiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+PHNwYW4gY2xhc3M9XCJtYXQtYnV0dG9uLXdyYXBwZXJcIj57eydEYXRlJyB8IHRyYW5zbGF0ZX19PC9zcGFuPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIiBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIiBtYXQtYnV0dG9uIFtjbGFzcy5hY3RpdmVdPVwibW9kZSA9PT0gJ3JhbmdlJ1wiIChjbGljayk9XCJzZXRNb2RlKCdyYW5nZScpOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IHJlc2V0RGF0ZSh0cnVlKVwiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+PHNwYW4gY2xhc3M9XCJtYXQtYnV0dG9uLXdyYXBwZXJcIj57eydSYW5nZScgfCB0cmFuc2xhdGV9fTwvc3Bhbj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJtb2RlID09PSAnZGF0ZSdcIiBjbGFzcz1cImRhdGUtdmlld1wiIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIj5cbiAgICAgICAgICAgICAgPGZvcm0gW2Zvcm1Hcm91cF09XCJmaWx0ZXJlZERhdGVBbmRSYW5nZUZvcm1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJsYWJlbC10ZXh0XCI+e3sgJ1NlbGVjdCBkYXRlJyB8IHRyYW5zbGF0ZX19PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIFttYXhdPVwibWF4RGF0ZVwiIGZvcm1Db250cm9sTmFtZT1cImRhdGVcIiBbbWF0RGF0ZXBpY2tlcl09XCJkb2JkcFwiIHBsYWNlaG9sZGVyPVwie3snU2VsZWN0IGRhdGUnIHwgdHJhbnNsYXRlfX1cIiBhcmlhLWxhYmVsPVwiRGF0ZVwiIGFyaWEtZGVzY3JpYmVkYnk9XCJiYXNpYy1hZGRvbjFcIiByZWFkb25seSBkYXRhLXRlc3QtaWQ9XCJldERhdGVcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgPG1hdC1kYXRlcGlja2VyICNkb2JkcD48L21hdC1kYXRlcGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgIDxtYXQtZGF0ZXBpY2tlci10b2dnbGUgbWF0U3VmZml4IFtmb3JdPVwiZG9iZHBcIiBkYXRhLXRlc3QtaWQ9XCJkcERhdGVcIiBjbGFzcz1cImRhdGVwaWNrZXItaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBtYXREYXRlcGlja2VyVG9nZ2xlSWNvbiBzcmM9XCJhc3NldHMvc3Zncy9jYWxlbmRhci1kYXRlLnN2Z1wiIGFsdD1cIlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDwvbWF0LWRhdGVwaWNrZXItdG9nZ2xlPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwibW9kZSA9PT0gJ3JhbmdlJ1wiIGNsYXNzPVwicmFuZ2Utdmlld1wiIChjbGljayk9XCIgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCI+XG4gICAgICAgICAgICAgICAgPGZvcm0gW2Zvcm1Hcm91cF09XCJmaWx0ZXJlZERhdGVBbmRSYW5nZUZvcm1cIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJsYWJlbC10ZXh0XCI+e3sgJ1N0YXJ0IGRhdGUnIHwgdHJhbnNsYXRlIH19PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBbbWF4XT1cImZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS52YWx1ZS5lbmREYXRlID8gZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLnZhbHVlLmVuZERhdGUgOiBtYXhEYXRlXCIgZm9ybUNvbnRyb2xOYW1lPVwic3RhcnREYXRlXCIgW21hdERhdGVwaWNrZXJdPVwicGlja2VyMVwiIHBsYWNlaG9sZGVyPVwie3snU2VsZWN0IHN0YXJ0IGRhdGUnfHRyYW5zbGF0ZX19XCIgYXJpYS1sYWJlbD1cIlN0YXJ0IGRhdGVcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiYmFzaWMtYWRkb24xXCIgcmVhZG9ubHkgZGF0YS10ZXN0LWlkPVwiZXRTZWxTdGFydERhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtZGF0ZXBpY2tlciAjcGlja2VyMT48L21hdC1kYXRlcGlja2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1kYXRlcGlja2VyLXRvZ2dsZSBtYXRTdWZmaXggW2Zvcl09XCJwaWNrZXIxXCIgY2xhc3M9XCJkYXRlcGlja2VyLWljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBtYXREYXRlcGlja2VyVG9nZ2xlSWNvbiBzcmM9XCJhc3NldHMvc3Zncy9jYWxlbmRhci1kYXRlLnN2Z1wiIGFsdD1cIlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwibGFiZWwtdGV4dFwiPnt7ICdFbmQgZGF0ZScgfCB0cmFuc2xhdGUgfX08L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIFttaW5dPVwiZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLnZhbHVlLnN0YXJ0RGF0ZVwiIFttYXhdPVwibWF4RGF0ZVwiIGZvcm1Db250cm9sTmFtZT1cImVuZERhdGVcIiBbbWF0RGF0ZXBpY2tlcl09XCJwaWNrZXIyXCIgcGxhY2Vob2xkZXI9XCJ7eydTZWxlY3QgZW5kIGRhdGUnfHRyYW5zbGF0ZX19XCIgYXJpYS1sYWJlbD1cIkVuZCBkYXRlXCIgYXJpYS1kZXNjcmliZWRieT1cImJhc2ljLWFkZG9uMlwiIHJlYWRvbmx5IGRhdGEtdGVzdC1pZD1cImV0U2VsRW5kRGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1kYXRlcGlja2VyICNwaWNrZXIyPjwvbWF0LWRhdGVwaWNrZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlIG1hdFN1ZmZpeCBbZm9yXT1cInBpY2tlcjJcIiBjbGFzcz1cImRhdGVwaWNrZXItaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIG1hdERhdGVwaWNrZXJUb2dnbGVJY29uIHNyYz1cImFzc2V0cy9zdmdzL2NhbGVuZGFyLWRhdGUuc3ZnXCIgYWx0PVwiXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L21hdC1kYXRlcGlja2VyLXRvZ2dsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbi1idXR0b25zXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gbWF0LWJ1dHRvbiBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgcmVzZXQtYnRuIG1hdC1idXR0b24gbWF0LWJ1dHRvbi1iYXNlXCIgKGNsaWNrKT1cInJlc2V0RGF0ZSgpO1wiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+e3sgJ1Jlc2V0J3wgdHJhbnNsYXRlIH19PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIG1hdC1idXR0b24gY2xhc3M9XCJtYXQtZm9jdXMtaW5kaWNhdG9yIGFwcGx5LWJ0biBtYXQtYnV0dG9uIG1hdC1idXR0b24tYmFzZVwiIChjbGljayk9XCJhcHBseURhdGVPclJhbmdlRmlsdGVyKHBsdWdpbkNvbmZpZ09icy5maWx0ZXJPYnMuZmlsdGVyRGF0ZUZpZWxkKVwiPjxzcGFuIGNsYXNzPVwibWF0LWJ1dHRvbi13cmFwcGVyXCI+e3sgJ0FwcGx5J3wgdHJhbnNsYXRlIH19PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9tYXQtbWVudT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgc2VhcmNoLWJhciBtbC1hdXRvXCIgKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiICNzZWFyY2hJbnB1dCBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwie3sgcGx1Z2luQ29uZmlnT2JzLnNlYXJjaFBsYWNlSG9sZGVyIHwgdHJhbnNsYXRlIH19XCIgYXJpYS1sYWJlbD1cInNlYXJjaDFcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiYmFzaWMtYWRkb24xXCIgKGtleXVwKT1cImFwcGx5RmlsdGVyKCRldmVudClcIiAoa2V5ZG93bi5TcGFjZSk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIiAoa2V5ZG93bi5FbnRlcik9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIiBkYXRhLXRlc3QtaWQ9XCJldFNlYXJjaEFwcG9pbnRtZW50RGFzaGJvYXJkXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAtYXBwZW5kXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtdGV4dFwiIGlkPVwiYmFzaWMtYWRkb24xXCIgICpuZ0lmPVwiIWlzRmlsdGVyQXBwbGllZFwiPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3N2Z3Mvc2VhcmNoLWljb24uc3ZnXCIgYWx0PVwiXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxidXR0b24gZGF0YS10ZXN0LWlkPVwiYnRuUmVzZXRBcFNlcmFjaFwiICBjbGFzcz1cImJ0blJlc2V0QXBTZXJhY2hcIiBjbGFzcz1cImJ0blJlc2V0QXBTZXJhY2hcIiBjbGFzcz1cIm1hdC1pY29uLWJ1dHRvblwiIGFyaWEtbGFiZWw9XCJSZXNldCBhcHBvaW50bWVudCBzZWFyY2hcIiAgKGNsaWNrKT1cImNsZWFyRmlsdGVyKClcIiAgKm5nSWY9XCJpc0ZpbHRlckFwcGxpZWRcIj5cbiAgICAgICAgICAgICAgICA8bWF0LWljb24gY2xhc3M9XCJtbC0wXCIgc3R5bGU9XCJsaW5lLWhlaWdodDogbm9ybWFsO1wiPmNsb3NlPC9tYXQtaWNvbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L21hdC1wYW5lbC10aXRsZT5cbiAgPC9tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlcj5cbiAgPGRpdiBjbGFzcz1cIm1hdC1lbGV2YXRpb24tejhcIj5cbiAgICA8bmd4LXVpLWxvYWRlciBcbiAgICAgIFtsb2FkZXJJZF09XCIndGFibGUtbG9hZGVyLScgKyBwbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZ1wiIFxuICAgICAgW2Znc1R5cGVdPVwiJ2JhbGwtc3Bpbi1jbG9ja3dpc2UnXCIgXG4gICAgICBbZmdzQ29sb3JdPVwiJyNhYmE0YTQnXCIgXG4gICAgICBbZmdzUG9zaXRpb25dPVwiJ2NlbnRlci1jZW50ZXInXCIgXG4gICAgICBbZmdzU2l6ZV09XCI1MFwiIFxuICAgICAgW292ZXJsYXlDb2xvcl09XCIncmdiKDI1NSwgMjU1LCAyNTUpJ1wiIFxuICAgICAgW2hhc1Byb2dyZXNzQmFyXT1cImZhbHNlXCJcbiAgICAgIFt0ZXh0XT1cIignTG9hZGluZyd8dHJhbnNsYXRlKSArICcgJyArIChwbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZ3x0cmFuc2xhdGUpICsgJyAnICsgKCdkYXRhJ3x0cmFuc2xhdGUpICsgJy4uLidcIlxuICAgICAgW3RleHRDb2xvcl09XCInIzMzMydcIlxuICAgICAgW3RleHRQb3NpdGlvbl09XCInY2VudGVyLWNlbnRlcidcIlxuICAgID48L25neC11aS1sb2FkZXI+XG5cbiAgICA8dGFibGUgbWF0LXRhYmxlIFtkYXRhU291cmNlXT1cImRhdGFTb3VyY2VcIiAjdGFibGVNYXRTb3J0PVwibWF0U29ydFwiIG1hdFNvcnQ+XG5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBkaXNwbGF5ZWRBcHBvaW50bWVudENvbHVtbnNcIiBbbWF0Q29sdW1uRGVmXT1cImNvbHVtbi5rZXlcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbHVtbi5pc1NvcnRhYmxlOyBlbHNlIG5vU29ydFwiPlxuICAgICAgICAgIDx0aCBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWYgbWF0LXNvcnQtaGVhZGVyIG1hdFNvcnREaXJlY3Rpb249XCJhc2NcIj5cbiAgICAgICAgICAgIHt7IGNvbHVtbi5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxuICAgICAgICAgIDwvdGg+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8bmctdGVtcGxhdGUgI25vU29ydD5cbiAgICAgICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPlxuICAgICAgICAgICAge3sgY29sdW1uLmxhYmVsIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgPC90aD5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cblxuICAgICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgZWxlbWVudDsgbGV0IGogPSBpbmRleDtcIiBbYXR0ci5kYXRhLXRlc3QtaWRdPVwiJ3RkJyArIGpcIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sdW1uLmtleSAhPT0gJ3BhdGllbnRfbmFtZSdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbG9hdC1sZWZ0XCIgXG4gICAgICAgICAgICAgICAgW2lubmVySFRNTF09XCJyZW5kZXJIdG1sQ29udGVudChjb2x1bW4sIGVsZW1lbnQpXCIgXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiZ2V0Q2xhc3Nlcyhjb2x1bW4sIGVsZW1lbnQpXCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgIDwhLS0gUGF0aWVudCBOYW1lIENvbHVtbiAtLT5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sdW1uLmtleSA9PT0gJ3BhdGllbnRfbmFtZSdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxpbWcgKm5nSWY9XCJlbGVtZW50LnBhdGllbnRJZFwiIHNyYz1cInt7IGNoZWNrUGF0aWVudFJlZ0ZpZWxkKCdQcm9maWxlIFBob3RvJykgPyBiYXNlVVJMICsgJy9wZXJzb25pbWFnZS8nICsgZWxlbWVudC5wYXRpZW50SWQgOiAnJyB9fVwiIGFsdD1cIlwiIHdpZHRoPVwiMzJweFwiIGhlaWdodD1cIjMycHhcIiBzdHlsZT1cImJvcmRlci1yYWRpdXM6IDUwJTtcIj5cbiAgICAgICAgICAgICAgPGltZyAqbmdJZj1cInBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnICE9PSAnQXBwb2ludG1lbnQnXCIgc3JjPVwie3sgY2hlY2tQYXRpZW50UmVnRmllbGQoJ1Byb2ZpbGUgUGhvdG8nKSA/IGJhc2VVUkwgKyAnL3BlcnNvbmltYWdlLycgKyBlbGVtZW50LnBlcnNvbi51dWlkIDogJycgfX1cIiBhbHQ9XCJcIiB3aWR0aD1cIjMycHhcIiBoZWlnaHQ9XCIzMnB4XCIgc3R5bGU9XCJib3JkZXItcmFkaXVzOiA1MCU7XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbG9hdC1sZWZ0XCIgXG4gICAgICAgICAgICAgICAgW2lubmVySFRNTF09XCJyZW5kZXJIdG1sQ29udGVudChjb2x1bW4sIGVsZW1lbnQpXCIgXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiZ2V0Q2xhc3Nlcyhjb2x1bW4sIGVsZW1lbnQpXCI+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICA8IS0tIFRlbGVwaG9uZSBDb2x1bW4gLS0+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbHVtbi5rZXkgPT09ICd0ZWxlcGhvbmUnICYmIGVsZW1lbnQudGVsZXBob25lXCI+XG4gICAgICAgICAgICA8YSAoY2xpY2spPVwib3BlbldoYXRzQXBwKCRldmVudCwgZWxlbWVudC50ZWxlcGhvbmUpXCIgY2xhc3M9XCJmbG9hdC1sZWZ0IGljb24tYnRuIG0tMFwiIFthdHRyLmRhdGEtdGVzdC1pZF09XCInbGlua1BhdGllbnRXaGF0c0FwcCcgKyBqXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3N2Z3Mvd2hhdHNhcHAtZ3JlZW4uc3ZnXCIgYWx0PVwiV2hhdHNBcHBcIiAvPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgPCEtLSBBY3Rpb25zIENvbHVtbiAtLT5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sdW1uLmtleSA9PT0gJ2FjdGlvbnMnXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9ucy1idG4td3JhcCBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgYWN0aW9uIG9mIGNvbHVtbi5hY3Rpb25CdXR0b25zXCJcbiAgICAgICAgICAgICAgICBbbmdTdHlsZV09XCJ7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogYWN0aW9uLnN0eWxlPy5jb2xvcixcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYWN0aW9uLnN0eWxlPy5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImFjdGlvbi1idG4gbXItMlwiXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgaGFuZGxlQWN0aW9uKGFjdGlvbiwgZWxlbWVudClcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3sgYWN0aW9uLmxhYmVsIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICBcblxuICAgICAgPCEtLSBObyBEYXRhIFJvdyAtLT5cbiAgICAgIDx0ciBjbGFzcz1cIm1hdC1yb3dcIiAqbWF0Tm9EYXRhUm93PlxuICAgICAgICA8dGQgY2xhc3M9XCJtYXQtY2VsbCB0ZXh0LWNlbnRlclwiIFthdHRyLmNvbHNwYW5dPVwiZGlzcGxheWVkQ29sdW1ucy5sZW5ndGhcIj5cbiAgICAgICAgICB7eyBwbHVnaW5Db25maWdPYnMubm9SZWNvcmRGb3VuZCB8IHRyYW5zbGF0ZSB9fVxuICAgICAgICA8L3RkPlxuICAgICAgPC90cj5cblxuICAgICAgPCEtLSBSb3cgRGVmaW5pdGlvbnMgLS0+XG4gICAgICA8dHIgbWF0LWhlYWRlci1yb3cgKm1hdEhlYWRlclJvd0RlZj1cImRpc3BsYXllZENvbHVtbnNcIj48L3RyPlxuICAgICAgPHRyIG1hdC1yb3cgKm1hdFJvd0RlZj1cImxldCByb3c7IGxldCB4ID0gaW5kZXg7IGNvbHVtbnM6IGRpc3BsYXllZENvbHVtbnM7XCIgW2F0dHIuZGF0YS10ZXN0LWlkXT1cIid0cicgKyB4XCIgW3JvdXRlckxpbmtdPVwiWycvZGFzaGJvYXJkL3Zpc2l0LXN1bW1hcnknLCByb3cudXVpZF1cIj48L3RyPlxuICAgICAgXG4gICAgPC90YWJsZT5cbiAgICA8bWF0LXBhZ2luYXRvciAjdGVtcFBhZ2luYXRvciBoaWRlUGFnZVNpemUgW3BhZ2VTaXplT3B0aW9uc109XCJwYWdlU2l6ZU9wdGlvbnNcIiBhcmlhLWxhYmVsPVwiU2VsZWN0IHBhZ2Ugb2YgcGVyaW9kaWMgZWxlbWVudHNcIj48L21hdC1wYWdpbmF0b3I+XG4gIDwvZGl2PlxuPC9tYXQtZXhwYW5zaW9uLXBhbmVsPlxuIl19