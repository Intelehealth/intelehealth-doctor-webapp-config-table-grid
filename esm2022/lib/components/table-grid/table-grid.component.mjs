import { Component, ElementRef, ViewChild, Input, ChangeDetectionStrategy, Inject, Output, EventEmitter } from '@angular/core';
import { MatPaginator } from '@angular/material/paginator';
import { AppointmentService } from '../../services/appointment.service';
import { VisitService } from '../../services/visit.service';
import moment from 'moment';
import { CoreService } from '../../services/core.service';
import { ToastrService } from 'ngx-toastr';
import { TranslateService } from '@ngx-translate/core';
import { getCacheData, checkIfDateOldThanOneDay, isFeaturePresent } from '../../utils/utility-functions';
import { doctorDetails, languages, visitTypes } from '../../config/constant';
import { MindmapService } from '../../services/mindmap.service';
import { AppConfigService } from '../../services/app-config.service';
import { FormControl, FormGroup, Validators } from '@angular/forms';
import { MatMenuTrigger } from '@angular/material/menu';
import { DomSanitizer } from '@angular/platform-browser';
import { NgxRolesService } from 'ngx-permissions';
import { NgxUiLoaderService } from 'ngx-ui-loader';
import * as i0 from "@angular/core";
import * as i1 from "../../services/appointment.service";
import * as i2 from "../../services/visit.service";
import * as i3 from "../../services/core.service";
import * as i4 from "ngx-toastr";
import * as i5 from "@ngx-translate/core";
import * as i6 from "../../services/mindmap.service";
import * as i7 from "@angular/platform-browser";
import * as i8 from "../../services/app-config.service";
import * as i9 from "ngx-permissions";
import * as i10 from "ngx-ui-loader";
import * as i11 from "@angular/router";
import * as i12 from "@angular/common";
import * as i13 from "@angular/material/paginator";
import * as i14 from "@angular/material/tooltip";
import * as i15 from "@angular/material/form-field";
import * as i16 from "@angular/material/expansion";
import * as i17 from "@angular/material/menu";
import * as i18 from "@angular/material/table";
import * as i19 from "@angular/material/icon";
import * as i20 from "@angular/material/datepicker";
import * as i21 from "@angular/forms";
import * as i22 from "../../core/directives/default-image.directive";
export class TableGridComponent {
    appointmentService;
    visitService;
    coreService;
    toastr;
    translateService;
    mindmapService;
    sanitizer;
    appConfigService;
    rolesService;
    ngxLoader;
    // Constants
    static DEFAULT_PAGE_SIZE_OPTIONS = [5, 10, 20, 25];
    static APPOINTMENT_PAGE_SIZE = 5;
    static SPECIALIZATION_UUID = 'ed1715f5-93e2-404e-b3c9-2a2d9600f062';
    static TELEPHONE_ATTRIBUTE_ID = 8;
    static FOLLOW_UP_CONCEPT_ID = 163345;
    static CHIEF_COMPLAINT_CONCEPT_ID = 163212;
    pluginConfigObs;
    displayedAppointmentColumns = [];
    displayedColumns = [];
    dataSource = [];
    filteredDataSource = [];
    paginatedDataSource = [];
    patientRegFields = [];
    isMCCUser = false;
    pageSizeOptions = TableGridComponent.DEFAULT_PAGE_SIZE_OPTIONS;
    // Unique component instance ID
    componentId;
    // @ViewChild(MatPaginator) paginator: MatPaginator;
    searchElement;
    filteredDateAndRangeForm;
    tempPaginator;
    paginatorEl;
    menuTrigger;
    // Date picker ViewChild references
    datePicker;
    startDatePicker;
    endDatePicker;
    filterMenu;
    panelExpanded = true;
    mode = 'date';
    maxDate;
    dateErrorMessage = '';
    startDateErrorMessage = '';
    endDateErrorMessage = '';
    appointments = [];
    priorityVisits = [];
    awaitingVisits = [];
    inProgressVisits = [];
    completedVisits = [];
    followUpVisits = [];
    specialization = '';
    visitsCountDate = new EventEmitter();
    pageIndex = 0;
    pageSize = 0;
    pageEvent;
    recordsFetched = 0;
    totalRecords = 0;
    isFilterApplied = false;
    pvs;
    baseURL;
    isBrandName;
    // to apply filter with date and text search
    dateField;
    dateFilter;
    originalData;
    filteredDataAfterDate;
    tableLoader;
    // Custom pagination properties
    currentPage = 0;
    itemsPerPage = 0;
    searchTerm = '';
    currentDateFilter = null;
    // Filtered data properties
    filteredTotalCount = 0;
    isFilterActive = false;
    paginationDisabled = false;
    ngAfterViewInit() {
        // Wait for the paginator to be fully initialized
        setTimeout(() => {
            if (this.paginatorEl && this.paginatorEl.nativeElement) {
                const el = this.paginatorEl.nativeElement;
                const suffix = this.pluginConfigObs?.pluginConfigObsFlag || '';
                el.querySelector('.mat-paginator-navigation-next')
                    ?.setAttribute('data-test-id', `paginator-next-${suffix}`);
                el.querySelector('.mat-paginator-navigation-previous')
                    ?.setAttribute('data-test-id', `paginator-prev-${suffix}`);
                el.querySelector('.mat-paginator-navigation-first')
                    ?.setAttribute('data-test-id', `paginator-first-${suffix}`);
                el.querySelector('.mat-paginator-navigation-last')
                    ?.setAttribute('data-test-id', `paginator-last-${suffix}`);
                el.querySelector('.mat-paginator-range-label')
                    ?.setAttribute('data-test-id', `paginator-range-label-${suffix}`);
            }
        }, 100);
    }
    constructor(appointmentService, visitService, coreService, toastr, translateService, mindmapService, sanitizer, appConfigService, rolesService, ngxLoader, environment) {
        this.appointmentService = appointmentService;
        this.visitService = visitService;
        this.coreService = coreService;
        this.toastr = toastr;
        this.translateService = translateService;
        this.mindmapService = mindmapService;
        this.sanitizer = sanitizer;
        this.appConfigService = appConfigService;
        this.rolesService = rolesService;
        this.ngxLoader = ngxLoader;
        this.isBrandName = environment.brandName;
        // Generate unique component ID
        this.componentId = 'table-grid-' + Math.random().toString(36).substr(2, 9);
        this.tableLoader = isFeaturePresent(environment.featureList, 'tableLoader');
        this.baseURL = environment.baseURL;
        this.pageSize = environment.recordsPerPage;
        this.itemsPerPage = environment.recordsPerPage;
        this.filteredDateAndRangeForm = this.createFilteredDateRangeForm();
    }
    /**
     * Creates a filtered date range form with required date fields
     * @return {FormGroup} - The created form group
     */
    createFilteredDateRangeForm() {
        return new FormGroup({
            date: new FormControl('', [Validators.required]),
            startDate: new FormControl(null, Validators.required),
            endDate: new FormControl(null, Validators.required),
        });
    }
    /**
     * Initialize component-specific state to prevent conflicts between multiple instances
     */
    initializeComponentState() {
        // Reset all component-specific arrays and objects
        this.appointments = [];
        this.priorityVisits = [];
        this.awaitingVisits = [];
        this.inProgressVisits = [];
        this.completedVisits = [];
        this.followUpVisits = [];
        // Reset pagination state
        this.pageIndex = 0;
        this.recordsFetched = 0;
        this.totalRecords = 0;
        // Reset filter state
        this.isFilterApplied = false;
        this.isFilterActive = false;
        this.filteredTotalCount = 0;
        this.paginationDisabled = false;
        this.originalData = [];
        this.filteredDataAfterDate = [];
        // Reset data arrays for this instance
        this.dataSource = [];
        this.filteredDataSource = [];
        this.paginatedDataSource = [];
        this.currentPage = 0;
        this.searchTerm = '';
        this.currentDateFilter = null;
        if (this.pluginConfigObs?.pluginConfigObsFlag === 'Appointment') {
            this.pageSize = TableGridComponent.APPOINTMENT_PAGE_SIZE;
            this.itemsPerPage = TableGridComponent.APPOINTMENT_PAGE_SIZE;
            console.log('itemsPerPage', this.itemsPerPage);
        }
    }
    /**
     * Apply custom pagination to the filtered data
     */
    applyPagination() {
        const startIndex = this.currentPage * this.itemsPerPage;
        const endIndex = startIndex + this.itemsPerPage;
        this.paginatedDataSource = this.filteredDataSource.slice(startIndex, endIndex);
    }
    /**
     * Calculate pagination indices
     */
    getPaginationIndices() {
        return {
            startIndex: this.currentPage * this.itemsPerPage,
            endIndex: (this.currentPage + 1) * this.itemsPerPage
        };
    }
    /**
     * Restore current page data from original data
     */
    restoreCurrentPageData() {
        const { startIndex, endIndex } = this.getPaginationIndices();
        this.paginatedDataSource = this.originalData.slice(startIndex, endIndex);
    }
    /**
     * Apply search filter to the current page data only
     */
    applySearchFilter() {
        if (!this.searchTerm.trim()) {
            this.restoreCurrentPageData();
        }
        else {
            const searchLower = this.searchTerm.toLowerCase();
            this.paginatedDataSource = this.paginatedDataSource.filter((item) => this.matchesSearchTerm(item, searchLower));
        }
    }
    /**
     * Get formatted date for an item based on the date field
     */
    getItemDate(item, dateField) {
        if (dateField === 'followUp') {
            return this.formatDate(this.convertToISO(item.followUp));
        }
        else if (dateField === 'slotJsDate') {
            return this.formatDate(item[dateField]);
        }
        else {
            return item[dateField].includes(',') ? this.formatDate(item[dateField]) : this.convertToDate(item[dateField]);
        }
    }
    /**
     * Check if item matches search term
     */
    matchesSearchTerm(item, searchLower) {
        if (this.pluginConfigObs?.pluginConfigObsFlag === 'Appointment') {
            return (item?.openMrsId?.toLowerCase().includes(searchLower) ||
                item?.patientName?.toLowerCase().includes(searchLower) ||
                item?.TMH_patient_id?.toLowerCase().includes(searchLower));
        }
        else {
            return (item?.patient?.identifier?.toLowerCase().includes(searchLower) ||
                item?.patient_name?.given_name?.toLowerCase().includes(searchLower) ||
                item?.patient_name?.family_name?.toLowerCase().includes(searchLower));
        }
    }
    /**
     * Apply multiple filters efficiently
     */
    applyFilters() {
        // Check if any filters are active
        this.isFilterActive = !!(this.searchTerm.trim() || this.currentDateFilter);
        this.paginationDisabled = this.isFilterActive;
        // If no search term and no date filter, restore current page data
        if (!this.isFilterActive) {
            this.restoreCurrentPageData();
            this.updatePaginatorLength();
            return;
        }
        // Always start with current page data from original data when applying filters
        const { startIndex, endIndex } = this.getPaginationIndices();
        let filteredData = this.originalData.slice(startIndex, endIndex);
        // Apply date filter
        if (this.currentDateFilter) {
            const { dateField, filterValue, isRange, startDate, endDate } = this.currentDateFilter;
            filteredData = filteredData.filter((item) => {
                const itemDate = this.getItemDate(item, dateField);
                if (isRange && startDate && endDate) {
                    return itemDate >= startDate && itemDate <= endDate;
                }
                else if (filterValue) {
                    return itemDate === filterValue;
                }
                return true;
            });
        }
        // Apply search filter
        if (this.searchTerm.trim()) {
            const searchLower = this.searchTerm.toLowerCase();
            filteredData = filteredData.filter((item) => this.matchesSearchTerm(item, searchLower));
        }
        // Update filtered count for current page
        this.filteredTotalCount = filteredData.length;
        this.paginatedDataSource = filteredData;
        // Update paginator length
        this.updatePaginatorLength();
    }
    /**
     * Update paginator length based on filter state
     */
    updatePaginatorLength() {
        if (this.tempPaginator) {
            this.tempPaginator.length = this.isFilterActive ? this.filteredTotalCount : this.totalRecords;
        }
    }
    /**
     * Check if pagination should be disabled
     */
    isPaginationDisabled() {
        return this.isFilterActive || this.paginationDisabled;
    }
    /**
     * Get the current total count (filtered or original)
     */
    getCurrentTotalCount() {
        return this.isFilterActive ? this.filteredTotalCount : this.totalRecords;
    }
    ngOnInit() {
        this.isMCCUser = !!this.rolesService.getRole('ORGANIZATIONAL:MCC');
        // Initialize component-specific state
        this.initializeComponentState();
        this.appConfigService.load().then(() => {
            this.displayedColumns = this.displayedColumns.filter(col => (col !== 'age' || this.checkPatientRegField('Age')));
            Object.keys(this.appConfigService.patient_registration).forEach(obj => {
                this.patientRegFields.push(...this.appConfigService.patient_registration[obj].filter((e) => e.is_enabled).map((e) => e.name));
            });
            this.pvs = { ...this.appConfigService.patient_visit_summary };
            this.pvs.appointment_button = this.pvs.appointment_button;
            this.displayedColumns = this.displayedColumns.filter(col => {
                if (col === 'drName' && !this.isMCCUser)
                    return false;
                if (col === 'age')
                    return this.checkPatientRegField('Age');
                return true;
            });
            if (!this.pvs.awaiting_visits_patient_type_demarcation) {
                this.displayedColumns = this.displayedColumns.filter(col => (col !== 'patient_type'));
            }
        }).catch((error) => {
            console.error('Error loading app config', error);
        });
        this.translateService.use(getCacheData(false, languages.SELECTED_LANGUAGE));
        let provider = getCacheData(true, doctorDetails.PROVIDER);
        if (provider) {
            if (provider.attributes.length) {
                this.specialization = this.getSpecialization(provider.attributes);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Appointment") {
                this.getAppointments();
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Awaiting") {
                this.getAwaitingVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Priority") {
                this.getPriorityVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "InProgress") {
                this.getInProgressVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "Completed") {
                this.getCompletedVisits(1);
            }
            if (this.pluginConfigObs?.pluginConfigObsFlag === "FollowUp") {
                this.getFollowUpVisit(1);
            }
        }
        this.maxDate = this.pluginConfigObs.filterObs.filterDateMax;
        if (this.pluginConfigObs.hasOwnProperty("pageSizeOptions")) {
            this.pageSizeOptions = this.pluginConfigObs.pageSizeOptions;
        }
    }
    /**
     * Dynmaic label Display
     * @param changes pluginConfigObs
     */
    ngOnChanges(changes) {
        if (changes["pluginConfigObs"] && changes["pluginConfigObs"].currentValue) {
            this.displayedAppointmentColumns = [...changes["pluginConfigObs"].currentValue?.tableColumns];
            this.displayedColumns = this.displayedAppointmentColumns.map(column => column.key);
        }
        if ((!changes['pluginConfigObs'].firstChange) && this.pluginConfigObs.pluginConfigObsFlag == "Appointment" && changes["pluginConfigObs"].currentValue?.tableHeader !== changes["pluginConfigObs"].previousValue?.tableHeader) {
            this.pageSize = TableGridComponent.APPOINTMENT_PAGE_SIZE;
            this.itemsPerPage = TableGridComponent.APPOINTMENT_PAGE_SIZE;
            this.getAppointments();
        }
        const prev = changes['pluginConfigObs'].previousValue;
        const curr = changes['pluginConfigObs'].currentValue;
        const prevType = prev?.filter?.filterType;
        const currType = curr?.filter?.filterType;
        if (prevType !== currType) {
            this.resetDateForm(); // Reset only when type has changed
        }
    }
    /**
    * Reset the date for appointments(Today's,upcoming,pending appoinments)  g
    */
    resetDateForm() {
        if (this.filteredDateAndRangeForm) {
            this.filteredDateAndRangeForm.reset({
                date: null,
                startDate: null,
                endDate: null
            });
        }
        this.mode = 'date';
        if (this.searchElement && this.searchElement.nativeElement) {
            this.searchElement.nativeElement.value = "";
        }
        this.isFilterApplied = false;
        this.dataSource.filter = null;
    }
    /**
    * Retreive the chief complaints for the visit
    * @param {CustomVisitModel} visit - Visit
    * @return {string[]} - Chief complaints array
    */
    getCheifComplaint(visit) {
        let recent = [];
        const encounters = visit.encounters;
        encounters.forEach((encounter) => {
            const display = encounter.type?.name;
            if (display.match(visitTypes.ADULTINITIAL) !== null) {
                const obs = encounter.obs;
                obs.forEach((currentObs) => {
                    if (currentObs.concept_id == TableGridComponent.CHIEF_COMPLAINT_CONCEPT_ID) {
                        const currentComplaint = this.visitService.getData2(currentObs)?.value_text.replace(new RegExp('â–º', 'g'), '').split('<b>');
                        for (let i = 1; i < currentComplaint.length; i++) {
                            const obs1 = currentComplaint[i].split('<');
                            if (!obs1[0].match(visitTypes.ASSOCIATED_SYMPTOMS)) {
                                recent.push(obs1[0]);
                            }
                        }
                    }
                });
            }
        });
        return recent;
    }
    /**
    * Check how old the date is from now
    * @param {string} data - Date in string format
    * @return {string} - Returns how old the date is from now
    */
    checkIfDateOldThanOneDay(data) {
        let hours = moment(data).diff(moment(), 'hours');
        let minutes = moment(data).diff(moment(), 'minutes');
        if (hours > 24) {
            return moment(data).format('DD MMM, YYYY hh:mm A');
        }
        ;
        if (hours < 1) {
            if (minutes < 0)
                return `Due : ${moment(data).format('DD MMM, YYYY hh:mm A')}`;
            return `${minutes} minutes`;
        }
        return `${hours} hrs`;
    }
    /**
    * Reschedule appointment
    * @param {AppointmentModel} appointment - Appointment to be rescheduled
    * @param {boolean} isValidationRequired - If true, validation is required
    * @return {void}
    */
    reschedule(appointment, isValidationRequired) {
        const len = appointment.visit.encounters.filter((e) => {
            return (e.type.name == visitTypes.PATIENT_EXIT_SURVEY || e.type.name == visitTypes.VISIT_COMPLETE);
        }).length;
        const isCompleted = Boolean(len);
        if (isCompleted) {
            this.toastr.error(this.translateService.instant("Visit is already completed, it can't be rescheduled."), this.translateService.instant('Rescheduling failed!'));
        }
        else if (appointment.visitStatus == 'Visit In Progress' && isValidationRequired) {
            this.toastr.error(this.translateService.instant("Visit is in progress, it can't be rescheduled."), this.translateService.instant('Rescheduling failed!'));
        }
        else {
            this.coreService.openRescheduleAppointmentModal(appointment).subscribe((res) => {
                if (res) {
                    let newSlot = res;
                    this.coreService.openRescheduleAppointmentConfirmModal({ appointment, newSlot }).subscribe((result) => {
                        if (result) {
                            appointment.appointmentId = appointment.id;
                            appointment.slotDate = moment(newSlot.date, "YYYY-MM-DD").format('DD/MM/YYYY');
                            appointment.slotTime = newSlot.slot;
                            this.appointmentService.rescheduleAppointment(appointment).subscribe((res) => {
                                const message = res.message;
                                if (res.status) {
                                    this.mindmapService.notifyHwForRescheduleAppointment(appointment);
                                    this.getAppointments();
                                    this.toastr.success(this.translateService.instant("The appointment has been rescheduled successfully!"), this.translateService.instant('Rescheduling successful!'));
                                }
                                else {
                                    this.toastr.success(message, this.translateService.instant('Rescheduling failed!'));
                                }
                            });
                        }
                    });
                }
            });
        }
    }
    /**
    * Cancel appointment
    * @param {AppointmentModel} appointment - Appointment to be rescheduled
    * @param {boolean} isValidationRequired - If true, validation is required
    * @return {void}
    */
    cancel(appointment, isValidationRequired) {
        if (appointment.visitStatus == 'Visit In Progress' && isValidationRequired) {
            this.toastr.error(this.translateService.instant("Visit is in progress, it can't be cancelled."), this.translateService.instant('Canceling failed!'));
            return;
        }
        this.coreService.openConfirmCancelAppointmentModal(appointment).subscribe((res) => {
            if (res) {
                this.toastr.success(this.translateService.instant('The Appointment has been successfully canceled.'), this.translateService.instant('Canceling successful'));
                this.getAppointments();
            }
        });
    }
    /**
    * Get user uuid from localstorage user
    * @return {string} - User uuid
    */
    get userId() {
        return getCacheData(true, doctorDetails.USER).uuid;
    }
    /**
    * Apply filter on a datasource
    * @param {Event} event - Input's change event
    * @return {void}
    */
    applyFilter(event) {
        this.searchTerm = event.target.value.trim();
        this.isFilterApplied = this.searchTerm.length > 0;
        this.applyFilters();
    }
    // Call this once after loading appointments
    storeOriginalData(originalData) {
        this.originalData = originalData ? [...originalData] : [...this.dataSource]; // Backup full data
        this.applyFilters(); // Apply any existing filters
    }
    /**
    * Clear filter from current page data
    * @return {void}
    */
    clearFilter() {
        this.searchTerm = '';
        this.currentDateFilter = null;
        this.isFilterApplied = false;
        this.isFilterActive = false;
        this.filteredTotalCount = 0;
        this.paginationDisabled = false;
        if (this.searchElement?.nativeElement) {
            this.searchElement.nativeElement.value = "";
        }
        this.filteredDateAndRangeForm.reset({
            date: null,
            startDate: null,
            endDate: null
        });
        this.mode = 'date';
        this.restoreCurrentPageData();
        this.updatePaginatorLength();
    }
    /**
     * Checks if the field is in patient registration fields
     * @param {string} fieldName - The field name
     * @return {boolean} - True if present, else false
     */
    checkPatientRegField(fieldName) {
        return this.patientRegFields.indexOf(fieldName) !== -1;
    }
    /**
    * Returns the WhatsApp link for a given telephone number
    * @param {string} telephoneNumber - The telephone number to generate the link for
    * @return {string} - The WhatsApp link
    */
    getWhatsAppLink(telephoneNumber) {
        return this.visitService.getWhatsappLink(telephoneNumber);
    }
    /**
     * Retrieves the telephone number from the person's attributes
     * @param {AppointmentModel['visit']['person']} person - The person object containing attributes
     * @return {string | undefined} - The person's telephone number or undefined if not found
     */
    getTelephoneNumber(person) {
        return person?.person_attribute.find((v) => v.person_attribute_type_id == TableGridComponent.TELEPHONE_ATTRIBUTE_ID)?.value;
    }
    /**
     * Closes the menu if it's open
     */
    closeMenu() {
        if (this.menuTrigger) {
            this.menuTrigger.closeMenu();
        }
    }
    /**
     * Sets the mode for the component (either 'date' or 'range')
     * @param {'date' | 'range'} mode - The mode to set
     */
    setMode(mode) {
        this.mode = mode;
        // Clear error messages when switching modes
        this.dateErrorMessage = '';
        this.startDateErrorMessage = '';
        this.endDateErrorMessage = '';
    }
    /**
     * Formats a date into 'YYYY-MM-DD' format
     * @param {any} date - The date to format
     * @return {string} - The formatted date
     */
    formatDate(date) {
        const localDate = new Date(date);
        const year = localDate.getFullYear();
        const month = String(localDate.getMonth() + 1).padStart(2, '0');
        const day = String(localDate.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }
    /**
     * Converts a relative time string (e.g., "2 hours", "1 day") to a date string
     * @param {string} relativeTime - The relative time string
     * @return {string} - The resulting date in 'YYYY-MM-DD' format
     * @throws {Error} - Throws error for invalid time units
     */
    convertToDate(relativeTime) {
        const now = new Date();
        const [value, unit] = relativeTime.split(' ');
        const amount = parseInt(value, 10);
        if (['hour', 'hours'].includes(unit.toLowerCase()))
            now.setHours(now.getHours() - amount);
        else if (['minute', 'minutes'].includes(unit.toLowerCase()))
            now.setMinutes(now.getMinutes() - amount);
        else if (['day', 'days'].includes(unit.toLowerCase()))
            now.setDate(now.getDate() - amount);
        else
            throw new Error('Invalid time unit. Only "hours", "minutes", or "days" are supported.');
        return now.toISOString().split('T')[0];
    }
    /**
     * Converts a follow-up date string to ISO format
     * @param {string} followUp - The follow-up date string
     * @return {string} - The follow-up date in ISO string format
     */
    convertToISO(followUp) {
        const date = new Date(followUp);
        date.setDate(date.getDate());
        return date.toISOString();
    }
    /**
     * Applies date or range filter to the data source based on selected date(s)
     * @param {string} dateField - The field name for the date to filter
     */
    applyDateOrRangeFilter(dateField) {
        const selectedDate = this.filteredDateAndRangeForm.get('date')?.value;
        const startDate = this.filteredDateAndRangeForm.get('startDate')?.value;
        const endDate = this.filteredDateAndRangeForm.get('endDate')?.value;
        // Clear previous error messages
        this.dateErrorMessage = '';
        this.startDateErrorMessage = '';
        this.endDateErrorMessage = '';
        // Validation for date mode
        if (this.mode === 'date' && !selectedDate) {
            this.dateErrorMessage = this.translateService.instant('Please select a date');
            return;
        }
        // Validation for range mode
        if (this.mode === 'range') {
            let hasError = false;
            if (!startDate) {
                this.startDateErrorMessage = this.translateService.instant('Please select start date');
                hasError = true;
            }
            if (!endDate) {
                this.endDateErrorMessage = this.translateService.instant('Please select end date');
                hasError = true;
            }
            if (hasError) {
                return;
            }
        }
        if (selectedDate) {
            const formattedDate = this.formatDate(selectedDate);
            this.dateFilter = this.formatDate(selectedDate);
            this.currentDateFilter = {
                dateField,
                filterValue: formattedDate,
                isRange: false
            };
        }
        else if (startDate && endDate) {
            const formattedStartDate = this.formatDate(startDate);
            const formattedEndDate = this.formatDate(endDate);
            this.dateFilter = `${this.formatDate(startDate)}:${this.formatDate(endDate)}`;
            this.currentDateFilter = {
                dateField,
                startDate: formattedStartDate,
                endDate: formattedEndDate,
                isRange: true
            };
        }
        else {
            this.dateFilter = '';
            this.currentDateFilter = null;
        }
        this.dateField = dateField;
        this.applyFilters();
        this.closeMenu();
    }
    /**
     * Resets the date filter form and clears the data source filter
     * @param {boolean} flag - If true, doesn't close the menu
     */
    resetDate(flag = false) {
        this.filteredDateAndRangeForm.reset();
        this.currentDateFilter = null;
        // Clear error messages
        this.dateErrorMessage = '';
        this.startDateErrorMessage = '';
        this.endDateErrorMessage = '';
        this.applyFilters();
        if (!flag) {
            this.closeMenu();
        }
    }
    /**
     * Retrieves a specific attribute data from the person's attributes
     * @param {any} data - The data object containing person attributes
     * @param {string} attributeName - The name of the attribute to retrieve
     * @return {Object | null} - The attribute name and value, or null if not found
     */
    getAttributeData(data, attributeName) {
        if (Array.isArray(data.person_attribute)) {
            const attribute = data.person_attribute.find((attr) => attr.person_attribute_type?.name === attributeName);
            if (attribute) {
                return {
                    name: attribute.person_attribute_type.name,
                    value: attribute.value
                };
            }
        }
        return null;
    }
    /**
    * Get booked appointments for a logged-in doctor in a current year
    * @return {void}
    */
    getAppointments() {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Start section loader
        this.appointments = [];
        let fromDate = moment().startOf('year').format('DD/MM/YYYY');
        let toDate = moment().endOf('year').format('DD/MM/YYYY');
        let pending_visits = this.pluginConfigObs.filter?.hasOwnProperty("pending_visits") ? this.pluginConfigObs.filter?.pending_visits : null;
        if (this.pluginConfigObs?.filter) {
            fromDate = this.pluginConfigObs?.filter?.fromDate;
            toDate = this.pluginConfigObs?.filter?.toDate;
        }
        this.appointmentService.getUserSlots(getCacheData(true, doctorDetails.USER).uuid, fromDate, toDate, this.isMCCUser ? this.specialization : null, pending_visits)
            .subscribe({
            next: (res) => {
                this.totalRecords = (res.data?.length > 1) ? res.data?.length - 1 : res.data?.length || 0;
                this.emitVisitsCount(this.totalRecords);
                let appointmentsdata = res.data;
                appointmentsdata.forEach((appointment) => {
                    if (appointment.status == 'booked' && (appointment.visitStatus == 'Awaiting Consult' || appointment.visitStatus == 'Visit In Progress')) {
                        if (appointment.visit) {
                            appointment.cheif_complaint = this.getCheifComplaint(appointment.visit);
                            appointment.starts_in = checkIfDateOldThanOneDay(appointment.slotJsDate);
                            appointment.telephone = this.getTelephoneNumber(appointment?.visit?.person);
                            appointment.TMH_patient_id = this.getAttributeData(appointment.visit, "TMH Case Number")?.value;
                            appointment.uuid = appointment.visitUuid;
                            appointment.location = appointment?.visit?.location?.name;
                            appointment.age = appointment?.patientAge + ' ' + this.translateService.instant('y');
                            this.appointments.push(appointment);
                        }
                    }
                });
                this.dataSource = [...this.appointments];
                this.storeOriginalData();
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag); // Stop section loader
                // Scroll to top after data is loaded
                this.scrollToTop();
            }
        });
    }
    /**
    * Get doctor speciality
    * @param {ProviderAttributeModel[]} attr - Array of provider attributes
    * @return {string} - Doctor speciality
    */
    getSpecialization(attr) {
        let specialization = '';
        attr.forEach((a) => {
            if (a.attributeType.uuid == TableGridComponent.SPECIALIZATION_UUID && !a.voided) {
                specialization = a.value;
            }
        });
        return specialization;
    }
    /**
    * Returns the age in years from the birthdate
    * @param {string} birthdate - Date in string format
    * @return {number} - Age
    */
    calculateAge(birthdate) {
        return moment().diff(birthdate, 'years');
    }
    /**
    * Returns the created time in words from the date
    * @param {string} data - Date
    * @return {string} - Created time in words from the date
    */
    getCreatedAt(data) {
        let hours = moment().diff(moment(data), 'hours');
        let minutes = moment().diff(moment(data), 'minutes');
        if (hours > 24) {
            return moment(data).format('DD MMM, YYYY');
        }
        ;
        if (hours < 1) {
            return `${minutes} ${this.translateService.instant("Minutes ago")}`;
        }
        return `${hours} ${this.translateService.instant("Hours ago")}`;
    }
    /**
    * Get encounter datetime for a given encounter type
    * @param {CustomVisitModel} visit - Visit
    * @param {string} encounterName - Encounter type
    * @return {string} - Encounter datetime
    */
    getEncounterCreated(visit, encounterName) {
        let created_at = '';
        const encounters = visit.encounters;
        encounters.forEach((encounter) => {
            const display = encounter.type?.name;
            if (display.match(encounterName) !== null) {
                created_at = this.getCreatedAt(encounter.encounter_datetime.replace('Z', '+0530'));
            }
        });
        return created_at;
    }
    /**
     * Determines if the encounter is a follow-up or new visit
     * @param {any} enc - Encounter data
     * @return {string} - 'FOLLOW_UP' or 'NEW'
     */
    getDemarcation(enc) {
        let isFollowUp = false;
        const adlIntl = enc?.find?.(e => e?.type?.name === visitTypes.ADULTINITIAL);
        if (Array.isArray(adlIntl?.obs)) {
            adlIntl?.obs.forEach(obs => {
                if (!isFollowUp)
                    isFollowUp = obs?.value_text?.toLowerCase?.()?.includes?.("follow up");
            });
        }
        return isFollowUp ? visitTypes.FOLLOW_UP : visitTypes.NEW;
    }
    /**
    * Get awaiting visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getAwaitingVisits(page = 1) {
        this.loadVisitData(page, this.awaitingVisits, this.visitService.getAwaitingVisits);
    }
    /**
    * Get inprogress visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getInProgressVisits(page = 1) {
        this.loadVisitData(page, this.inProgressVisits, this.visitService.getInProgressVisits, visitTypes.VISIT_NOTE, this.sortInProgressVisits.bind(this));
    }
    /**
    * Get priority visits for a given page number
    * @param {number} page - Page number
    * @return {void}
    */
    getPriorityVisits(page = 1) {
        this.loadVisitData(page, this.priorityVisits, this.visitService.getPriorityVisits, visitTypes.FLAGGED);
    }
    /**
     * Get completed visits count
     * @return {void}
     */
    getCompletedVisits(page = 1) {
        this.loadVisitData(page, this.completedVisits, this.visitService.getEndedVisits, visitTypes.COMPLETED_VISIT);
    }
    /**
    * Get follow-up visits for a logged-in doctor
    * @return {void}
    */
    getFollowUpVisit(page = 1) {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag);
        if (page === 1) {
            this.followUpVisits.length = 0;
            this.recordsFetched = 0;
        }
        this.visitService.getFollowUpVisits(this.specialization, page).subscribe({
            next: (res) => {
                if (res.success) {
                    this.totalRecords = res.totalCount;
                    this.recordsFetched += this.pageSize;
                    this.emitVisitsCount(this.totalRecords);
                    const processedVisits = res.data
                        .map(visit => this.processFollowUpVisitData(visit))
                        .filter(visit => visit !== null);
                    this.followUpVisits.push(...processedVisits);
                    this.updateDataSources(this.followUpVisits, processedVisits);
                }
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag);
                this.scrollToTop();
            }
        });
    }
    /**
    * Get encounter datetime for a given encounter type
    * @param {CustomVisitModel} visit - Visit
    * @param {string} encounterName - Encounter type
    * @return {string} - Encounter datetime
    */
    getEncounterObs(encounters, encounterName, conceptId) {
        let obs;
        encounters.forEach((encounter) => {
            if (encounter.type?.name === encounterName) {
                obs = encounter?.obs?.find((o) => o.concept_id == conceptId);
            }
        });
        return obs;
    }
    /**
     * Renders HTML content for a column, sanitized for security
     * @param {any} column - Column definition
     * @param {any} element - Data element to render
     * @return {SafeHtml | string} - Formatted HTML or element value
     */
    renderHtmlContent(column, element) {
        return column.formatHtml && typeof column.formatHtml === 'function' ? this.sanitizer.bypassSecurityTrustHtml(column.formatHtml(element)) : element[column.key];
    }
    /**
     * Returns a string of CSS classes for the column
     * @param {any} column - Column definition
     * @return {string} - Space-separated class names
     */
    getClasses(column, element) {
        let classList = [];
        // If column has a static classList (array or string), add it
        if (column.classList) {
            classList = typeof column.classList === "function" ? column.classList(element) : column.classList;
        }
        return classList.join(" ");
    }
    /**
     * Formats the follow-up date by cleaning up time details
     * @param {string} value - Follow-up date string
     * @return {string} - Formatted date
     */
    processFollowUpDate(value) {
        if (this.isBrandName === "NAS") {
            return value ? value.split(',').length > 1 ? `${value.split(',')[0]}` : value : '';
        }
        return value ? value.split(',').length > 1 ? `${value.split(',')[0]} ${value.split(',')[1].replace("Time:", "")}` : value : '';
    }
    ;
    /**
     * Executes the action based on its label (Reschedule or Cancel)
     * @param {any} action - Action object
     * @param {any} element - Element to perform the action on
     */
    handleAction(action, element) {
        const isValidationRequired = action.validationRequired !== undefined ? action.validationRequired : true;
        if (action.label === 'Reschedule') {
            this.reschedule(element, isValidationRequired);
        }
        else if (action.label === 'Cancel') {
            this.cancel(element, isValidationRequired);
        }
    }
    /**
     * Opens a WhatsApp chat with the given phone number
     * @param {MouseEvent} event - The click event to prevent row navigation
     * @param {string} telephone - Phone number for WhatsApp
     */
    openWhatsApp(event, telephone) {
        event.stopPropagation(); // Prevent row navigation
        const whatsappLink = `https://wa.me/${telephone}`;
        window.open(whatsappLink, '_blank', 'noopener,noreferrer');
    }
    /**
     * Emits the visits count data with the given table tag name and count
     * @param {number} visitsCount - The total visits count for the specific table
     */
    emitVisitsCount(visitsCount) {
        const visitsCountData = {
            tableTagName: this.pluginConfigObs.pluginConfigObsFlag,
            visitsCount: visitsCount
        };
        this.visitsCountDate.emit(visitsCountData);
    }
    getData(event) {
        this.pageIndex = event.pageIndex;
        this.pageSize = event.pageSize;
        this.currentPage = event.pageIndex;
        this.itemsPerPage = event.pageSize;
        // If filters are active, disable pagination and don't make API calls
        if (this.isFilterActive || this.paginationDisabled) {
            this.scrollToTop();
            return event;
        }
        const requiredRecords = (this.pageIndex + 1) * this.pageSize;
        // Check if we need to fetch more data from API
        if (requiredRecords > this.recordsFetched) {
            this.fetchMoreData();
        }
        else {
            // Data is already present, handle client-side pagination
            this.handleClientSidePagination();
        }
        // Scroll to top when pagination changes
        this.scrollToTop();
        return event;
    }
    /**
     * Fetch more data from API based on current plugin type
     */
    fetchMoreData() {
        const nextPage = (this.recordsFetched + this.pageSize) / this.pageSize;
        switch (this.pluginConfigObs?.pluginConfigObsFlag) {
            case "Awaiting":
                this.getAwaitingVisits(nextPage);
                break;
            case "Priority":
                this.getPriorityVisits(nextPage);
                break;
            case "InProgress":
                this.getInProgressVisits(nextPage);
                break;
            case "Completed":
                this.getCompletedVisits(nextPage);
                break;
            case "FollowUp":
                this.getFollowUpVisit(nextPage);
                break;
        }
    }
    /**
     * Handle client-side pagination for already loaded data
     */
    handleClientSidePagination() {
        // Ensure filteredDataSource has all the data from originalData
        if (this.filteredDataSource.length < this.originalData.length) {
            this.filteredDataSource = [...this.originalData];
        }
        // Apply pagination to the filtered data
        this.applyPagination();
        // Update paginator length to show correct total
        if (this.tempPaginator) {
            this.tempPaginator.length = this.totalRecords;
        }
    }
    /**
     * Handle sorting for current page data only
     * @param {string} column - Column to sort by
     * @param {string} direction - Sort direction ('asc' or 'desc')
     */
    handleSort(column, direction) {
        if (!column || !direction)
            return;
        // Sort only the current page data
        this.paginatedDataSource.sort((a, b) => {
            let aValue = this.getSortValue(a, column);
            let bValue = this.getSortValue(b, column);
            // Convert to string for comparison if needed
            if (typeof aValue === 'string')
                aValue = aValue.toLowerCase();
            if (typeof bValue === 'string')
                bValue = bValue.toLowerCase();
            return direction === 'asc'
                ? (aValue < bValue ? -1 : aValue > bValue ? 1 : 0)
                : (aValue > bValue ? -1 : aValue < bValue ? 1 : 0);
        });
    }
    /**
     * Get sort value for an item based on column
     */
    getSortValue(item, column) {
        if (column === 'patient_name') {
            return (item.patient_name?.given_name || '') + ' ' + (item.patient_name?.family_name || '');
        }
        return item[column];
    }
    /**
     * Process visit data with common fields
     */
    processVisitData(visit, encounterType) {
        visit.cheif_complaint = this.getCheifComplaint(visit);
        visit.visit_created = visit?.date_created
            ? this.getCreatedAt(visit.date_created.replace('Z', '+0530'))
            : this.getEncounterCreated(visit, encounterType || visitTypes.ADULTINITIAL);
        visit.person.age = this.calculateAge(visit.person.birthdate);
        visit.location = visit?.location?.name;
        visit.age = visit?.person?.age + ' ' + this.translateService.instant('y');
        // Add specific fields based on visit type
        if (encounterType === visitTypes.VISIT_NOTE) {
            visit.prescription_started = this.getEncounterCreated(visit, visitTypes.VISIT_NOTE);
        }
        if (encounterType === visitTypes.COMPLETED_VISIT) {
            visit.completed = visit?.date_created
                ? this.getCreatedAt(visit.date_created.replace('Z', '+0530'))
                : this.getEncounterCreated(visit, visitTypes.VISIT_COMPLETE);
        }
        if (encounterType === visitTypes.FLAGGED) {
            visit.visit_created = visit?.date_created
                ? this.getCreatedAt(visit.date_created.replace('Z', '+0530'))
                : this.getEncounterCreated(visit, visitTypes.FLAGGED);
        }
        // Add common fields
        visit.TMH_patient_id = this.getAttributeData(visit, "TMH Case Number")?.value;
        visit.patient_type = this.getDemarcation(visit?.encounters);
        return visit;
    }
    /**
     * Generic data loading method
     */
    loadVisitData(page, visitArray, serviceMethod, encounterType, customSorting) {
        this.ngxLoader.startLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag);
        if (page === 1) {
            visitArray.length = 0; // Clear array efficiently
            this.recordsFetched = 0;
        }
        serviceMethod.call(this.visitService, this.specialization, page).subscribe({
            next: (res) => {
                if (res.success) {
                    this.totalRecords = res.totalCount;
                    this.recordsFetched += this.pageSize;
                    this.emitVisitsCount(this.totalRecords);
                    const processedVisits = res.data.map(visit => this.processVisitData(visit, encounterType));
                    // Apply custom sorting if provided
                    const sortedVisits = customSorting ? customSorting(processedVisits) : processedVisits;
                    // Add to visit array
                    visitArray.push(...sortedVisits);
                    // Update data sources
                    this.updateDataSources(visitArray, sortedVisits);
                }
            },
            complete: () => {
                this.ngxLoader.stopLoader('table-loader-' + this.pluginConfigObs.pluginConfigObsFlag);
                this.scrollToTop();
            }
        });
    }
    /**
     * Update all data sources with new data
     */
    updateDataSources(visitArray, sortedVisits) {
        this.dataSource = sortedVisits ? [...sortedVisits] : [...visitArray];
        this.originalData = [...visitArray];
        this.filteredDataSource = [...visitArray];
        this.applyPagination();
    }
    /**
     * Custom sorting for in-progress visits by prescription time
     */
    sortInProgressVisits(visits) {
        return visits.sort((a, b) => {
            const parseTime = (value) => {
                if (value.includes("minutes ago")) {
                    return { type: "minutes", time: parseInt(value) };
                }
                if (value.includes("Hours ago")) {
                    return { type: "hours", time: parseInt(value) * 60 };
                }
                return { type: "date", time: moment(value, "DD MMM, YYYY").valueOf() };
            };
            const visitA = parseTime(a.prescription_started);
            const visitB = parseTime(b.prescription_started);
            // Sort minutes first (ascending)
            if (visitA.type === "minutes" && visitB.type === "minutes") {
                return visitA.time - visitB.time;
            }
            // Sort hours first (ascending)
            if (visitA.type === "hours" && visitB.type === "hours") {
                return visitA.time - visitB.time;
            }
            // Sort dates (descending)
            if (visitA.type === "date" && visitB.type === "date") {
                return visitB.time - visitA.time;
            }
            // Prioritize minutes over hours, and hours over dates
            if (visitA.type === "minutes")
                return -1;
            if (visitB.type === "minutes")
                return 1;
            if (visitA.type === "hours")
                return -1;
            if (visitB.type === "hours")
                return 1;
            return 0;
        });
    }
    /**
     * Process follow-up visit data with special handling
     */
    processFollowUpVisitData(visit) {
        if (!visit?.encounters?.length)
            return null;
        visit.cheif_complaint = this.getCheifComplaint(visit);
        visit.visit_created = visit?.date_created
            ? this.getCreatedAt(visit.date_created.replace('Z', '+0530'))
            : this.getEncounterCreated(visit, visitTypes.COMPLETED_VISIT);
        visit.person.age = this.calculateAge(visit.person.birthdate);
        visit.completed = this.getEncounterCreated(visit, visitTypes.VISIT_COMPLETE);
        visit.followUp = this.processFollowUpDate(this.getEncounterObs(visit.encounters, visitTypes.VISIT_NOTE, TableGridComponent.FOLLOW_UP_CONCEPT_ID)?.value_text);
        visit.location = visit?.location?.name;
        visit.age = visit?.person?.age + ' ' + this.translateService.instant('y');
        return visit;
    }
    /**
     * Scroll to top of the table container
     */
    scrollToTop() {
        // Find the table container and scroll to top using unique component ID
        const tableContainer = document.querySelector('#table-container-' + this.componentId);
        if (tableContainer) {
            tableContainer.scrollTop = 0;
        }
    }
    /**
     * Add data-test-ids to datepicker calendar navigation buttons and date cells
     */
    addCalendarNavigationTestIds() {
        setTimeout(() => {
            // Add test IDs to navigation buttons
            const prevButton = document.querySelector('.mat-calendar-previous-button');
            const nextButton = document.querySelector('.mat-calendar-next-button');
            if (prevButton && !prevButton.getAttribute('data-test-id')) {
                prevButton.setAttribute('data-test-id', 'calendarNavPrevious');
            }
            if (nextButton && !nextButton.getAttribute('data-test-id')) {
                nextButton.setAttribute('data-test-id', 'calendarNavNext');
            }
            // Add test IDs to all date cells
            const dateCells = document.querySelectorAll('.mat-calendar-body-cell');
            dateCells.forEach((cell) => {
                if (!cell.getAttribute('data-test-id')) {
                    const dateButton = cell.querySelector('.mat-calendar-body-cell-content');
                    if (dateButton) {
                        const dateValue = dateButton.textContent?.trim();
                        if (dateValue) {
                            cell.setAttribute('data-test-id', `calendarDate-${dateValue}`);
                        }
                    }
                }
            });
        }, 0);
    }
    static Éµfac = i0.ÉµÉµngDeclareFactory({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: TableGridComponent, deps: [{ token: i1.AppointmentService }, { token: i2.VisitService }, { token: i3.CoreService }, { token: i4.ToastrService }, { token: i5.TranslateService }, { token: i6.MindmapService }, { token: i7.DomSanitizer }, { token: i8.AppConfigService }, { token: i9.NgxRolesService }, { token: i10.NgxUiLoaderService }, { token: 'environment' }], target: i0.ÉµÉµFactoryTarget.Component });
    static Éµcmp = i0.ÉµÉµngDeclareComponent({ minVersion: "14.0.0", version: "14.3.0", type: TableGridComponent, selector: "lib-table-grid", inputs: { pluginConfigObs: "pluginConfigObs" }, outputs: { visitsCountDate: "visitsCountDate" }, viewQueries: [{ propertyName: "searchElement", first: true, predicate: ["searchInput"], descendants: true, static: true }, { propertyName: "tempPaginator", first: true, predicate: ["tempPaginator"], descendants: true }, { propertyName: "paginatorEl", first: true, predicate: ["tempPaginator"], descendants: true, read: ElementRef }, { propertyName: "menuTrigger", first: true, predicate: MatMenuTrigger, descendants: true }, { propertyName: "datePicker", first: true, predicate: ["datePicker"], descendants: true }, { propertyName: "startDatePicker", first: true, predicate: ["startDatePicker"], descendants: true }, { propertyName: "endDatePicker", first: true, predicate: ["endDatePicker"], descendants: true }, { propertyName: "filterMenu", first: true, predicate: ["filterMenu"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<mat-expansion-panel [expanded]=\"true\" data-test-id=\"matExpAppointment\">\r\n  <mat-expansion-panel-header data-test-id=\"matExpHeaderAppointment\">\r\n    <mat-panel-title data-test-id=\"matPanelTitleAppointment\">\r\n      <div\r\n        id=\"{{ pluginConfigObs.anchorId }}\"\r\n        class=\"anchor-con\"\r\n        data-test-id=\"divAnchorAppointment\"\r\n      ></div>\r\n      <div\r\n        class=\"intel-accordion-title\"\r\n        data-test-id=\"divAccordionTitleAppointment\"\r\n      >\r\n        <img\r\n          src=\"{{ pluginConfigObs.tableHeaderIcon }}\"\r\n          alt=\"\"\r\n          width=\"44px\"\r\n          data-test-id=\"imgTableHeaderIconAppointment\"\r\n        />\r\n        <h6 class=\"mb-0 ml-2\" [attr.data-test-id]=\"pluginConfigObs.tableHeader\">\r\n          {{ pluginConfigObs.tableHeader | translate }} ({{\r\n            getCurrentTotalCount()\r\n          }})\r\n        </h6>\r\n        <mat-icon\r\n          aria-hidden=\"false\"\r\n          aria-label=\"help icon\"\r\n          matTooltip=\"{{ pluginConfigObs.tooltipLabel | translate }}\"\r\n          matTooltipPosition=\"right\"\r\n          data-test-id=\"icoHelpAppointment\"\r\n          >help_outline</mat-icon\r\n        >\r\n\r\n        <!-- Filter button -->\r\n        <div\r\n          class=\"ml-auto filter-search-container\"\r\n          data-test-id=\"divFilterContainerAppointment\"\r\n        >\r\n          <button\r\n            *ngIf=\"pluginConfigObs.filterObs.filterFlag\"\r\n            class=\"mat-stroked-button filter-btn\"\r\n            [matMenuTriggerFor]=\"filterMenu\"\r\n            (click)=\"$event.stopPropagation()\"\r\n            data-test-id=\"btnFilterAppointment\"\r\n          >\r\n            <img\r\n              src=\"{{ pluginConfigObs.filterObs.filterIcon }}\"\r\n              alt=\"\"\r\n              data-test-id=\"imgFilterIconAppointment\"\r\n            />{{ pluginConfigObs.filterObs.filterLabel | translate }}\r\n          </button>\r\n          <!-- Filter Menu -->\r\n          <mat-menu\r\n            #filterMenu=\"matMenu\"\r\n            class=\"custom-menu\"\r\n            [hasBackdrop]=\"true\"\r\n            xPosition=\"before\"\r\n            data-test-id=\"menuFilterAppointment\"\r\n          >\r\n            <div\r\n              class=\"toggle-buttons\"\r\n              data-test-id=\"divToggleButtonsAppointment\"\r\n            >\r\n              <button\r\n                class=\"mat-focus-indicator mat-button mat-button-base\"\r\n                mat-button\r\n                [class.active]=\"mode === 'date'\"\r\n                (click)=\"\r\n                  setMode('date'); $event.stopPropagation(); resetDate(true)\r\n                \"\r\n                data-test-id=\"btnDateModeAppointment\"\r\n              >\r\n                {{ \"Date\" | translate }}\r\n              </button>\r\n              <button\r\n                class=\"mat-focus-indicator mat-button mat-button-base\"\r\n                mat-button\r\n                [class.active]=\"mode === 'range'\"\r\n                (click)=\"\r\n                  setMode('range'); $event.stopPropagation(); resetDate(true)\r\n                \"\r\n                data-test-id=\"btnRangeModeAppointment\"\r\n              >\r\n                {{ \"Range\" | translate }}\r\n              </button>\r\n            </div>\r\n            <!-- Date Mode -->\r\n            <div\r\n              *ngIf=\"mode === 'date'\"\r\n              class=\"date-view\"\r\n              (click)=\"$event.stopPropagation()\"\r\n              data-test-id=\"divDateModeAppointment\"\r\n            >\r\n              <form\r\n                [formGroup]=\"filteredDateAndRangeForm\"\r\n                data-test-id=\"formDateFilterAppointment\"\r\n              >\r\n                <div class=\"form-date\" data-test-id=\"divFormDateAppointment\">\r\n                  <div\r\n                    class=\"input-date\"\r\n                    data-test-id=\"divInputDateAppointment\"\r\n                  >\r\n                    <label\r\n                      class=\"label-text\"\r\n                      data-test-id=\"lblSelectDateAppointment\"\r\n                      >{{ \"Select date\" | translate }}</label\r\n                    >\r\n                    <div\r\n                      class=\"input-wrapper\"\r\n                      data-test-id=\"divInputWrapperDateAppointment\"\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        [class.error-border]=\"dateErrorMessage\"\r\n                        [max]=\"maxDate\"\r\n                        formControlName=\"date\"\r\n                        [matDatepicker]=\"datePicker\"\r\n                        [placeholder]=\"\r\n                          filteredDateAndRangeForm.get('date')?.value\r\n                            ? (filteredDateAndRangeForm.get('date')?.value\r\n                              | date: 'dd/MM/yyyy')\r\n                            : ('Select date' | translate)\r\n                        \"\r\n                        aria-label=\"Date\"\r\n                        readonly\r\n                        data-test-id=\"etDate\"\r\n                      />\r\n                      <mat-datepicker\r\n                        #datePicker\r\n                        (opened)=\"addCalendarNavigationTestIds()\"\r\n                        data-test-id=\"matDatePickerAppointment\"\r\n                      ></mat-datepicker>\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"datePicker\"\r\n                        data-test-id=\"dpDate\"\r\n                        class=\"datepicker-icon\"\r\n                      >\r\n                        <img\r\n                          matDatepickerToggleIcon\r\n                          src=\"assets/svgs/calendar-date.svg\"\r\n                          alt=\"\"\r\n                          data-test-id=\"imgDatePickerIconAppointment\"\r\n                        />\r\n                      </mat-datepicker-toggle>\r\n                    </div>\r\n                    <span\r\n                      *ngIf=\"dateErrorMessage\"\r\n                      class=\"error-message\"\r\n                      data-test-id=\"spanDateErrorMessageAppointment\"\r\n                      >{{ dateErrorMessage }}</span\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n            <div\r\n              *ngIf=\"mode === 'range'\"\r\n              class=\"range-view\"\r\n              (click)=\"$event.stopPropagation()\"\r\n              data-test-id=\"divRangeModeAppointment\"\r\n            >\r\n              <form\r\n                [formGroup]=\"filteredDateAndRangeForm\"\r\n                data-test-id=\"formRangeFilterAppointment\"\r\n              >\r\n                <div\r\n                  class=\"form-date\"\r\n                  data-test-id=\"divFormStartDateAppointment\"\r\n                >\r\n                  <div\r\n                    class=\"input-date\"\r\n                    data-test-id=\"divInputStartDateAppointment\"\r\n                  >\r\n                    <label\r\n                      class=\"label-text\"\r\n                      data-test-id=\"lblStartDateAppointment\"\r\n                      >{{ \"Start date\" | translate }}</label\r\n                    >\r\n                    <div\r\n                      class=\"input-wrapper\"\r\n                      data-test-id=\"divInputWrapperStartDateAppointment\"\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        [class.error-border]=\"startDateErrorMessage\"\r\n                        [max]=\"\r\n                          filteredDateAndRangeForm.value.endDate\r\n                            ? filteredDateAndRangeForm.value.endDate\r\n                            : maxDate\r\n                        \"\r\n                        formControlName=\"startDate\"\r\n                        [matDatepicker]=\"startDatePicker\"\r\n                        [placeholder]=\"\r\n                          filteredDateAndRangeForm.get('startDate')?.value\r\n                            ? (filteredDateAndRangeForm.get('startDate')?.value\r\n                              | date: 'dd/MM/yyyy')\r\n                            : ('Select start date' | translate)\r\n                        \"\r\n                        readonly\r\n                        data-test-id=\"etSelStartDate\"\r\n                      />\r\n                      <mat-datepicker\r\n                        #startDatePicker\r\n                        (opened)=\"addCalendarNavigationTestIds()\"\r\n                        data-test-id=\"matStartDatePickerAppointment\"\r\n                      ></mat-datepicker>\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"startDatePicker\"\r\n                        class=\"datepicker-icon\"\r\n                        data-test-id=\"dpStartDate\"\r\n                      >\r\n                        <img\r\n                          matDatepickerToggleIcon\r\n                          src=\"assets/svgs/calendar-date.svg\"\r\n                          alt=\"\"\r\n                          data-test-id=\"imgStartDatePickerIconAppointment\"\r\n                        />\r\n                      </mat-datepicker-toggle>\r\n                    </div>\r\n                    <span\r\n                      *ngIf=\"startDateErrorMessage\"\r\n                      class=\"error-message\"\r\n                      data-test-id=\"spanStartDateErrorMessageAppointment\"\r\n                      >{{ startDateErrorMessage }}</span\r\n                    >\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-date\" data-test-id=\"divFormEndDateAppointment\">\r\n                  <div\r\n                    class=\"input-date\"\r\n                    data-test-id=\"divInputEndDateAppointment\"\r\n                  >\r\n                    <label\r\n                      class=\"label-text\"\r\n                      data-test-id=\"lblEndDateAppointment\"\r\n                      >{{ \"End date\" | translate }}</label\r\n                    >\r\n                    <div\r\n                      class=\"input-wrapper\"\r\n                      data-test-id=\"divInputWrapperEndDateAppointment\"\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        [class.error-border]=\"endDateErrorMessage\"\r\n                        [min]=\"filteredDateAndRangeForm.value.startDate\"\r\n                        [max]=\"maxDate\"\r\n                        formControlName=\"endDate\"\r\n                        [matDatepicker]=\"endDatePicker\"\r\n                        [placeholder]=\"\r\n                          filteredDateAndRangeForm.get('endDate')?.value\r\n                            ? (filteredDateAndRangeForm.get('endDate')?.value\r\n                              | date: 'dd/MM/yyyy')\r\n                            : ('Select end date' | translate)\r\n                        \"\r\n                        readonly\r\n                        data-test-id=\"etSelEndDate\"\r\n                      />\r\n                      <mat-datepicker\r\n                        #endDatePicker\r\n                        (opened)=\"addCalendarNavigationTestIds()\"\r\n                        data-test-id=\"matEndDatePickerAppointment\"\r\n                      ></mat-datepicker>\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"endDatePicker\"\r\n                        class=\"datepicker-icon\"\r\n                        data-test-id=\"dpEndDate\"\r\n                      >\r\n                        <img\r\n                          matDatepickerToggleIcon\r\n                          src=\"assets/svgs/calendar-date.svg\"\r\n                          alt=\"\"\r\n                          data-test-id=\"imgEndDatePickerIconAppointment\"\r\n                        />\r\n                      </mat-datepicker-toggle>\r\n                    </div>\r\n                    <span\r\n                      *ngIf=\"endDateErrorMessage\"\r\n                      class=\"error-message\"\r\n                      data-test-id=\"spanEndDateErrorMessageAppointment\"\r\n                      >{{ endDateErrorMessage }}</span\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n            <div\r\n              class=\"action-buttons\"\r\n              data-test-id=\"divFilterActionBtnsAppointment\"\r\n            >\r\n              <button\r\n                mat-button\r\n                class=\"mat-focus-indicator reset-btn mat-button mat-button-base\"\r\n                (click)=\"resetDate(true); $event.stopPropagation()\"\r\n                data-test-id=\"btnResetFilterAppointment\"\r\n              >\r\n                {{ \"Reset\" | translate }}\r\n              </button>\r\n              <button\r\n                mat-button\r\n                class=\"mat-focus-indicator apply-btn mat-button mat-button-base\"\r\n                (click)=\"\r\n                  applyDateOrRangeFilter(\r\n                    pluginConfigObs.filterObs.filterDateField\r\n                  );\r\n                  $event.stopPropagation()\r\n                \"\r\n                data-test-id=\"btnApplyFilterAppointment\"\r\n              >\r\n                {{ \"Apply\" | translate }}\r\n              </button>\r\n            </div>\r\n          </mat-menu>\r\n          <div\r\n            class=\"input-group search-bar ml-auto\"\r\n            (click)=\"$event.stopPropagation()\"\r\n            data-test-id=\"divSearchAppointment\"\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              #searchInput\r\n              class=\"form-control\"\r\n              placeholder=\"{{ pluginConfigObs.searchPlaceHolder | translate }}\"\r\n              (keyup)=\"applyFilter($event)\"\r\n              (keydown.Space)=\"$event.stopPropagation()\"\r\n              (keydown.Enter)=\"$event.stopPropagation()\"\r\n              [attr.data-test-id]=\"'etSearch_' + pluginConfigObs.tableHeader\"\r\n            />\r\n            <div class=\"input-group-append\">\r\n              <button\r\n                data-test-id=\"btnResetSearchAppointment\"\r\n                class=\"btnResetApSerach mat-icon-button\"\r\n                aria-label=\"Reset appointment search\"\r\n                (click)=\"clearFilter(); $event.stopPropagation()\"\r\n                *ngIf=\"isFilterApplied\"\r\n              >\r\n                <mat-icon class=\"ml-0\" style=\"line-height: normal\"\r\n                  >close</mat-icon\r\n                >\r\n              </button>\r\n              <span\r\n                class=\"input-group-text search-icon-span\"\r\n                data-test-id=\"icoSearchAppointment\"\r\n              >\r\n                <img\r\n                  src=\"assets/svgs/search-icon.svg\"\r\n                  alt=\"\"\r\n                  width=\"20px\"\r\n                  height=\"20px\"\r\n                  data-test-id=\"imgSearchIconAppointment\"\r\n                />\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </mat-panel-title>\r\n  </mat-expansion-panel-header>\r\n  <div class=\"mat-elevation-z8\" data-test-id=\"divTableWrapperAppointment\">\r\n    <span *ngIf=\"tableLoader\">\r\n      <ngx-ui-loader\r\n        [loaderId]=\"'table-loader-' + pluginConfigObs.pluginConfigObsFlag\"\r\n        [fgsType]=\"'ball-spin-clockwise'\"\r\n        [fgsColor]=\"'#aba4a4'\"\r\n        [fgsPosition]=\"'center-center'\"\r\n        [fgsSize]=\"50\"\r\n        [overlayColor]=\"'rgb(255, 255, 255)'\"\r\n        [hasProgressBar]=\"false\"\r\n        [text]=\"\r\n          ('Loading' | translate) +\r\n          ' ' +\r\n          (pluginConfigObs.pluginConfigObsFlag | translate) +\r\n          ' ' +\r\n          ('data' | translate) +\r\n          '...'\r\n        \"\r\n        [textColor]=\"'#333'\"\r\n        [textPosition]=\"'center-center'\"\r\n        data-test-id=\"loaderAppointment\"\r\n      ></ngx-ui-loader>\r\n    </span>\r\n    <div class=\"table-container\" id=\"table-container-{{ componentId }}\">\r\n      <table mat-table [dataSource]=\"paginatedDataSource\">\r\n        <ng-container\r\n          *ngFor=\"let column of displayedAppointmentColumns\"\r\n          [matColumnDef]=\"column.key\"\r\n        >\r\n          <ng-container *ngIf=\"column.isSortable; else noSort\">\r\n            <th\r\n              mat-header-cell\r\n              *matHeaderCellDef\r\n              (click)=\"handleSort(column.key, 'asc')\"\r\n              [attr.data-test-id]=\"\r\n                'th-' + column.key + '-' + pluginConfigObs.pluginConfigObsFlag\r\n              \"\r\n              class=\"sortable-header\"\r\n            >\r\n              {{ column.label | translate }}\r\n              <mat-icon class=\"sort-icon\">arrow_upward</mat-icon>\r\n            </th>\r\n          </ng-container>\r\n          <ng-template #noSort>\r\n            <th\r\n              mat-header-cell\r\n              *matHeaderCellDef\r\n              [attr.data-test-id]=\"\r\n                'th-' + column.key + '-' + pluginConfigObs.pluginConfigObsFlag\r\n              \"\r\n            >\r\n              {{ column.label | translate }}\r\n            </th>\r\n          </ng-template>\r\n\r\n          <td\r\n            mat-cell\r\n            *matCellDef=\"let element; let j = index\"\r\n            [attr.data-test-id]=\"\r\n              'td-' +\r\n              column.key +\r\n              '-' +\r\n              pluginConfigObs.pluginConfigObsFlag +\r\n              '-' +\r\n              j\r\n            \"\r\n          >\r\n            <ng-container\r\n              *ngIf=\"\r\n                column.key !== 'patient_name' &&\r\n                column.key !== 'visit_completed'\r\n              \"\r\n            >\r\n              <div\r\n                class=\"float-left\"\r\n                [innerHTML]=\"renderHtmlContent(column, element)\"\r\n                [ngClass]=\"getClasses(column, element)\"\r\n              ></div>\r\n            </ng-container>\r\n\r\n            <!-- This is for visit_completed column -->\r\n            <ng-container *ngIf=\"column.key === 'visit_completed'\">\r\n              <div\r\n                class=\"d-flex align-items-center visit-completed-cell\"\r\n                [attr.data-test-id]=\"\r\n                  'td-visit_completed-' +\r\n                  pluginConfigObs.pluginConfigObsFlag +\r\n                  '-' +\r\n                  j\r\n                \"\r\n              >\r\n                <img\r\n                  src=\"assets/svgs/green-pad.svg\"\r\n                  alt=\"Completed\"\r\n                  class=\"mr-2\"\r\n                />\r\n                <span class=\"text-success\">\r\n                  {{ element.completed }}\r\n                </span>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <!-- Patient Name Column -->\r\n            <ng-container *ngIf=\"column.key === 'patient_name'\">\r\n              <div\r\n                class=\"d-flex align-items-center\"\r\n                [attr.data-test-id]=\"\r\n                  'td-patient_name-' +\r\n                  pluginConfigObs.pluginConfigObsFlag +\r\n                  '-' +\r\n                  j\r\n                \"\r\n              >\r\n                <img\r\n                  *ngIf=\"element.patientId\"\r\n                  src=\"{{\r\n                    checkPatientRegField('Profile Photo')\r\n                      ? baseURL + '/personimage/' + element.patientId\r\n                      : ''\r\n                  }}\"\r\n                  alt=\"\"\r\n                  width=\"32px\"\r\n                  height=\"32px\"\r\n                  style=\"border-radius: 50%\"\r\n                />\r\n                <img\r\n                  *ngIf=\"pluginConfigObs.pluginConfigObsFlag !== 'Appointment'\"\r\n                  src=\"{{\r\n                    checkPatientRegField('Profile Photo')\r\n                      ? baseURL + '/personimage/' + element.person.uuid\r\n                      : ''\r\n                  }}\"\r\n                  alt=\"\"\r\n                  width=\"32px\"\r\n                  height=\"32px\"\r\n                  style=\"border-radius: 50%\"\r\n                  [attr.data-test-id]=\"\r\n                    'td-patient_img-' +\r\n                    pluginConfigObs.pluginConfigObsFlag +\r\n                    '-' +\r\n                    j\r\n                  \"\r\n                />\r\n                <div\r\n                  class=\"float-left\"\r\n                  [innerHTML]=\"renderHtmlContent(column, element)\"\r\n                  [ngClass]=\"getClasses(column, element)\"\r\n                ></div>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <!-- Telephone Column -->\r\n            <ng-container\r\n              *ngIf=\"column.key === 'telephone' && element.telephone\"\r\n            >\r\n              <a\r\n                (click)=\"openWhatsApp($event, element.telephone)\"\r\n                class=\"float-left icon-btn m-0\"\r\n                [attr.data-test-id]=\"'linkPatientWhatsApp' + j\"\r\n              >\r\n                <img src=\"assets/svgs/whatsapp-green.svg\" alt=\"WhatsApp\" />\r\n              </a>\r\n            </ng-container>\r\n\r\n            <!-- Actions Column -->\r\n            <ng-container *ngIf=\"column.key === 'actions'\">\r\n              <div class=\"actions-btn-wrap d-flex align-items-center\">\r\n                <button\r\n                  *ngFor=\"let action of column.actionButtons; let k = index\"\r\n                  [ngStyle]=\"{\r\n                    color: action.style?.color,\r\n                    backgroundColor: action.style?.backgroundColor\r\n                  }\"\r\n                  class=\"action-btn mr-2\"\r\n                  type=\"button\"\r\n                  (click)=\"\r\n                    $event.stopPropagation(); handleAction(action, element)\r\n                  \"\r\n                  [attr.data-test-id]=\"'btn-action-' + action.label + '-' + k\"\r\n                >\r\n                  {{ action.label | translate }}\r\n                </button>\r\n              </div>\r\n            </ng-container>\r\n          </td>\r\n        </ng-container>\r\n\r\n        <!-- No Data Row -->\r\n        <tr class=\"mat-row\" *matNoDataRow>\r\n          <td\r\n            class=\"mat-cell text-center\"\r\n            [attr.colspan]=\"displayedColumns.length\"\r\n          >\r\n            {{ pluginConfigObs.noRecordFound | translate }}\r\n          </td>\r\n        </tr>\r\n\r\n        <!-- Row Definitions -->\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr\r\n          mat-row\r\n          *matRowDef=\"let row; let x = index; columns: displayedColumns\"\r\n          [attr.data-test-id]=\"'tr' + x\"\r\n          [routerLink]=\"['/dashboard/visit-summary', row.uuid]\"\r\n        ></tr>\r\n      </table>\r\n    </div>\r\n    <mat-paginator\r\n      *ngIf=\"pluginConfigObs?.pluginConfigObsFlag === 'Appointment'\"\r\n      #tempPaginator\r\n      hidePageSize\r\n      [pageSizeOptions]=\"pageSizeOptions\"\r\n      [length]=\"getCurrentTotalCount()\"\r\n      [pageIndex]=\"currentPage\"\r\n      [pageSize]=\"itemsPerPage\"\r\n      [disabled]=\"isPaginationDisabled()\"\r\n      aria-label=\"Select page of periodic elements\"\r\n    ></mat-paginator>\r\n    <mat-paginator\r\n      #tempPaginator\r\n      *ngIf=\"pluginConfigObs?.pluginConfigObsFlag !== 'Appointment'\"\r\n      hidePageSize\r\n      [pageSizeOptions]=\"pageSizeOptions\"\r\n      [length]=\"getCurrentTotalCount()\"\r\n      [pageIndex]=\"currentPage\"\r\n      [pageSize]=\"itemsPerPage\"\r\n      [disabled]=\"isPaginationDisabled()\"\r\n      (page)=\"pageEvent = getData($event)\"\r\n      aria-label=\"Select page of periodic elements\"\r\n    ></mat-paginator>\r\n  </div>\r\n</mat-expansion-panel>\r\n", styles: [".mat-elevation-z8{box-shadow:none;width:100%;overflow-x:auto}.table-container{max-height:440px;overflow-y:auto;overflow-x:auto}table{width:100%;font-family:DM Sans}th.mat-header-cell{border:none;font-size:14px!important;font-weight:700;color:var(--color-gray);height:21px}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{border:none;min-width:60px;white-space:nowrap;padding-right:24px}th.mat-header-cell span.alert-danger,td.mat-cell span.alert-danger,td.mat-footer-cell span.alert-danger{color:var(--color-red);font-weight:700;background:transparent;border:none}th.mat-header-cell span.alert-success,td.mat-cell span.alert-success,td.mat-footer-cell span.alert-success{color:var(--color-green);font-weight:700;background:transparent;border:none}td.mat-cell{font-size:16px}tr.mat-row,tr.mat-footer-row{height:88px;border-radius:8px;cursor:pointer}tr.mat-row.upcoming{background:#e6fff3!important}tr.mat-row:nth-child(odd){background:#f7f7fa}td:first-child,th:first-child{border-radius:8px 0 0 8px}td:last-child,th:last-child{border-radius:0 8px 8px 0}.actions-btn-wrap .action-btn{outline:none;border:none;height:36px;min-width:102px;padding:6px 8px;background:#fff;border-radius:4px;color:var(--color-black);font-family:DM Sans;font-size:16px}.actions-btn-wrap .blue-btn{background:var(--color-lightGray);color:var(--color-darkBlue)}.actions-btn-wrap .pink-btn{background:var(--color-lightPink);color:var(--color-red)}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded .input-group{display:flex}.input-group{background:var(--color-white);border:1px solid rgba(127,123,146,.5);border-radius:6px;height:46px;align-items:center;max-width:60vw;width:300px;display:none}.input-group .input-group-text{background:none;border:none;cursor:default}.input-group .form-control{border:none;outline:none;background:transparent;font-size:16px;line-height:150%;padding-left:16px}.input-group .form-control:focus{box-shadow:none}.mat-expansion-panel{background:#fff;box-shadow:0 4px 24px #1f1c3a14;border-radius:20px!important;padding:24px;margin-bottom:24px}.mat-expansion-panel .mat-expansion-panel-header{padding:0}.mat-expansion-panel .mat-expansion-panel-header .mat-content{align-items:center}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:48px}.mat-expansion-panel .mat-expansion-panel-header:hover{background:transparent!important}.mat-expansion-panel .intel-accordion-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%}.mat-expansion-panel .intel-accordion-title .mat-icon{height:20px;width:20px;font-size:20px;color:#461d90;margin-left:8px}.mat-expansion-panel .intel-accordion-title h6{font-size:18px;font-weight:700;color:#000}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{padding:0;margin-top:24px;position:relative}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body:after{content:\"\";position:absolute;top:0;height:1px;left:0;right:0;background:#efe8ff}.anchor-con{position:absolute;top:-120px;left:0}.visit-completed-cell{color:green!important;background-color:#d4edda!important}@media (max-width: 768px){.input-group{width:100%;max-width:100%;margin:10px 0}.mat-expansion-panel .mat-expansion-panel-header,.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:fit-content}.info-icon{display:none}.anchor-con{top:-100px}}.matIconButton{border:none;background:transparent}::ng-deep .custom-menu{background:var(--color-white);border-radius:8px!important;padding:16px;width:352px;box-shadow:0 4px 8px #7f7b9229}.mat-expansion-panel.mat-expanded .mat-expansion-panel-header .filter-btn{display:flex!important}.btnResetApSerach{border:none;background:transparent;cursor:pointer;padding:0;margin-right:4px;display:flex;align-items:center;justify-content:center}.btnResetApSerach .mat-icon{font-size:18px;width:18px;height:18px;color:#7f7b92}.btnResetApSerach:hover .mat-icon{color:#2e1e91}.search-icon-span{pointer-events:none}.filter-btn{background:none;align-items:center;border:1px solid rgba(127,123,146,.5);border-radius:6px;color:#2e1e91;font-weight:500;padding:4px 12px;white-space:nowrap;height:46px;display:none;gap:4px}.toggle-buttons{display:flex;justify-content:space-between;margin-bottom:16px;gap:16px}button.mat-button,.action-buttons button.mat-button{flex:1;color:#2e1e91;background:#fff;border-radius:8px;font-family:DM Sans;font-size:14px;font-weight:500;border:1.33px solid #EFE8FF}.action-buttons button.mat-button.reset-btn{font-size:12px;font-weight:700;margin:0 0 0 20px;width:96px}.action-buttons button.mat-button.apply-btn{color:#fff;background:var(--color-darkBlue);font-size:12px;font-weight:700;width:96px}button.mat-button.active{background:#efe8ff;color:#2e1e91}button.mat-button .reset-btn{color:var(--color-darkBlue)}.action-buttons{display:flex;justify-content:space-between;gap:16px}.reset-btn{color:var(--color-darkBlue);background:#f5f5f5;border-radius:8px}.filter-search-container{display:flex;align-items:center;gap:1rem}.form-date{margin-bottom:16px}.input-wrapper{position:relative;display:flex;align-items:center}.input-wrapper .form-control{width:100%;padding-right:40px;border:1px solid rgba(178,175,190,.2);background:transparent;border-radius:8px;height:48px;font-size:16px;color:var(--color-darkestBlue)}.datepicker-icon{position:absolute;right:4px;top:50%;transform:translateY(-50%);cursor:pointer;background:transparent;border:none}.form-control:focus{box-shadow:none}.label-text{font-size:14px;margin-bottom:8px;color:#7f7b92}.userImage{width:32px;height:32px;border-radius:50%}.red-pill{display:flex;flex-direction:row;align-items:center;background:#ffe8e8;border-radius:4px;height:32px;color:#ea315b;padding:4px 6px;width:fit-content}.left{text-align:left}.chip{display:flex;flex-direction:row;align-items:center;border-radius:4px;height:32px;padding:4px 6px;width:fit-content}.chip.green{color:#0fd197}.chip.blue{color:#2e1e91}.chip-item-blue{background:var(--color-lightGray)}.chip-item-green{background:#e6fff3}.error-message{color:#ea315b;font-size:12px;margin-top:4px;display:block;font-family:DM Sans}.error-border{border-color:#ea315b!important}\n"], dependencies: [{ kind: "directive", type: i11.RouterLink, selector: ":not(a):not(area)[routerLink]", inputs: ["queryParams", "fragment", "queryParamsHandling", "state", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i12.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i12.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i12.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i12.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "component", type: i13.MatPaginator, selector: "mat-paginator", inputs: ["disabled"], exportAs: ["matPaginator"] }, { kind: "directive", type: i14.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "directive", type: i15.MatSuffix, selector: "[matSuffix]" }, { kind: "component", type: i16.MatExpansionPanel, selector: "mat-expansion-panel", inputs: ["disabled", "expanded", "hideToggle", "togglePosition"], outputs: ["opened", "closed", "expandedChange", "afterExpand", "afterCollapse"], exportAs: ["matExpansionPanel"] }, { kind: "component", type: i16.MatExpansionPanelHeader, selector: "mat-expansion-panel-header", inputs: ["tabIndex", "expandedHeight", "collapsedHeight"] }, { kind: "directive", type: i16.MatExpansionPanelTitle, selector: "mat-panel-title" }, { kind: "component", type: i17.MatMenu, selector: "mat-menu", exportAs: ["matMenu"] }, { kind: "directive", type: i17.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", exportAs: ["matMenuTrigger"] }, { kind: "component", type: i18.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { kind: "directive", type: i18.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { kind: "directive", type: i18.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { kind: "directive", type: i18.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { kind: "directive", type: i18.MatCellDef, selector: "[matCellDef]" }, { kind: "directive", type: i18.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { kind: "directive", type: i18.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { kind: "directive", type: i18.MatCell, selector: "mat-cell, td[mat-cell]" }, { kind: "component", type: i18.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { kind: "component", type: i18.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { kind: "directive", type: i18.MatNoDataRow, selector: "ng-template[matNoDataRow]" }, { kind: "component", type: i19.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i20.MatDatepicker, selector: "mat-datepicker", exportAs: ["matDatepicker"] }, { kind: "directive", type: i20.MatDatepickerInput, selector: "input[matDatepicker]", inputs: ["matDatepicker", "min", "max", "matDatepickerFilter"], exportAs: ["matDatepickerInput"] }, { kind: "component", type: i20.MatDatepickerToggle, selector: "mat-datepicker-toggle", inputs: ["for", "tabIndex", "aria-label", "disabled", "disableRipple"], exportAs: ["matDatepickerToggle"] }, { kind: "directive", type: i20.MatDatepickerToggleIcon, selector: "[matDatepickerToggleIcon]" }, { kind: "directive", type: i21.ÉµNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i21.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i21.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i21.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i21.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i21.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "component", type: i10.NgxUiLoaderComponent, selector: "ngx-ui-loader", inputs: ["bgsColor", "bgsOpacity", "bgsPosition", "bgsSize", "bgsTemplate", "bgsType", "fgsColor", "fgsPosition", "fgsSize", "fgsTemplate", "fgsType", "gap", "loaderId", "logoPosition", "logoSize", "logoUrl", "overlayBorderRadius", "overlayColor", "pbColor", "pbDirection", "pbThickness", "hasProgressBar", "text", "textColor", "textPosition"] }, { kind: "directive", type: i22.DefaultImageDirective, selector: "img[src]", inputs: ["src"] }, { kind: "pipe", type: i12.DatePipe, name: "date" }, { kind: "pipe", type: i5.TranslatePipe, name: "translate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
}
i0.ÉµÉµngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: TableGridComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-table-grid', changeDetection: ChangeDetectionStrategy.OnPush, template: "<mat-expansion-panel [expanded]=\"true\" data-test-id=\"matExpAppointment\">\r\n  <mat-expansion-panel-header data-test-id=\"matExpHeaderAppointment\">\r\n    <mat-panel-title data-test-id=\"matPanelTitleAppointment\">\r\n      <div\r\n        id=\"{{ pluginConfigObs.anchorId }}\"\r\n        class=\"anchor-con\"\r\n        data-test-id=\"divAnchorAppointment\"\r\n      ></div>\r\n      <div\r\n        class=\"intel-accordion-title\"\r\n        data-test-id=\"divAccordionTitleAppointment\"\r\n      >\r\n        <img\r\n          src=\"{{ pluginConfigObs.tableHeaderIcon }}\"\r\n          alt=\"\"\r\n          width=\"44px\"\r\n          data-test-id=\"imgTableHeaderIconAppointment\"\r\n        />\r\n        <h6 class=\"mb-0 ml-2\" [attr.data-test-id]=\"pluginConfigObs.tableHeader\">\r\n          {{ pluginConfigObs.tableHeader | translate }} ({{\r\n            getCurrentTotalCount()\r\n          }})\r\n        </h6>\r\n        <mat-icon\r\n          aria-hidden=\"false\"\r\n          aria-label=\"help icon\"\r\n          matTooltip=\"{{ pluginConfigObs.tooltipLabel | translate }}\"\r\n          matTooltipPosition=\"right\"\r\n          data-test-id=\"icoHelpAppointment\"\r\n          >help_outline</mat-icon\r\n        >\r\n\r\n        <!-- Filter button -->\r\n        <div\r\n          class=\"ml-auto filter-search-container\"\r\n          data-test-id=\"divFilterContainerAppointment\"\r\n        >\r\n          <button\r\n            *ngIf=\"pluginConfigObs.filterObs.filterFlag\"\r\n            class=\"mat-stroked-button filter-btn\"\r\n            [matMenuTriggerFor]=\"filterMenu\"\r\n            (click)=\"$event.stopPropagation()\"\r\n            data-test-id=\"btnFilterAppointment\"\r\n          >\r\n            <img\r\n              src=\"{{ pluginConfigObs.filterObs.filterIcon }}\"\r\n              alt=\"\"\r\n              data-test-id=\"imgFilterIconAppointment\"\r\n            />{{ pluginConfigObs.filterObs.filterLabel | translate }}\r\n          </button>\r\n          <!-- Filter Menu -->\r\n          <mat-menu\r\n            #filterMenu=\"matMenu\"\r\n            class=\"custom-menu\"\r\n            [hasBackdrop]=\"true\"\r\n            xPosition=\"before\"\r\n            data-test-id=\"menuFilterAppointment\"\r\n          >\r\n            <div\r\n              class=\"toggle-buttons\"\r\n              data-test-id=\"divToggleButtonsAppointment\"\r\n            >\r\n              <button\r\n                class=\"mat-focus-indicator mat-button mat-button-base\"\r\n                mat-button\r\n                [class.active]=\"mode === 'date'\"\r\n                (click)=\"\r\n                  setMode('date'); $event.stopPropagation(); resetDate(true)\r\n                \"\r\n                data-test-id=\"btnDateModeAppointment\"\r\n              >\r\n                {{ \"Date\" | translate }}\r\n              </button>\r\n              <button\r\n                class=\"mat-focus-indicator mat-button mat-button-base\"\r\n                mat-button\r\n                [class.active]=\"mode === 'range'\"\r\n                (click)=\"\r\n                  setMode('range'); $event.stopPropagation(); resetDate(true)\r\n                \"\r\n                data-test-id=\"btnRangeModeAppointment\"\r\n              >\r\n                {{ \"Range\" | translate }}\r\n              </button>\r\n            </div>\r\n            <!-- Date Mode -->\r\n            <div\r\n              *ngIf=\"mode === 'date'\"\r\n              class=\"date-view\"\r\n              (click)=\"$event.stopPropagation()\"\r\n              data-test-id=\"divDateModeAppointment\"\r\n            >\r\n              <form\r\n                [formGroup]=\"filteredDateAndRangeForm\"\r\n                data-test-id=\"formDateFilterAppointment\"\r\n              >\r\n                <div class=\"form-date\" data-test-id=\"divFormDateAppointment\">\r\n                  <div\r\n                    class=\"input-date\"\r\n                    data-test-id=\"divInputDateAppointment\"\r\n                  >\r\n                    <label\r\n                      class=\"label-text\"\r\n                      data-test-id=\"lblSelectDateAppointment\"\r\n                      >{{ \"Select date\" | translate }}</label\r\n                    >\r\n                    <div\r\n                      class=\"input-wrapper\"\r\n                      data-test-id=\"divInputWrapperDateAppointment\"\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        [class.error-border]=\"dateErrorMessage\"\r\n                        [max]=\"maxDate\"\r\n                        formControlName=\"date\"\r\n                        [matDatepicker]=\"datePicker\"\r\n                        [placeholder]=\"\r\n                          filteredDateAndRangeForm.get('date')?.value\r\n                            ? (filteredDateAndRangeForm.get('date')?.value\r\n                              | date: 'dd/MM/yyyy')\r\n                            : ('Select date' | translate)\r\n                        \"\r\n                        aria-label=\"Date\"\r\n                        readonly\r\n                        data-test-id=\"etDate\"\r\n                      />\r\n                      <mat-datepicker\r\n                        #datePicker\r\n                        (opened)=\"addCalendarNavigationTestIds()\"\r\n                        data-test-id=\"matDatePickerAppointment\"\r\n                      ></mat-datepicker>\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"datePicker\"\r\n                        data-test-id=\"dpDate\"\r\n                        class=\"datepicker-icon\"\r\n                      >\r\n                        <img\r\n                          matDatepickerToggleIcon\r\n                          src=\"assets/svgs/calendar-date.svg\"\r\n                          alt=\"\"\r\n                          data-test-id=\"imgDatePickerIconAppointment\"\r\n                        />\r\n                      </mat-datepicker-toggle>\r\n                    </div>\r\n                    <span\r\n                      *ngIf=\"dateErrorMessage\"\r\n                      class=\"error-message\"\r\n                      data-test-id=\"spanDateErrorMessageAppointment\"\r\n                      >{{ dateErrorMessage }}</span\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n            <div\r\n              *ngIf=\"mode === 'range'\"\r\n              class=\"range-view\"\r\n              (click)=\"$event.stopPropagation()\"\r\n              data-test-id=\"divRangeModeAppointment\"\r\n            >\r\n              <form\r\n                [formGroup]=\"filteredDateAndRangeForm\"\r\n                data-test-id=\"formRangeFilterAppointment\"\r\n              >\r\n                <div\r\n                  class=\"form-date\"\r\n                  data-test-id=\"divFormStartDateAppointment\"\r\n                >\r\n                  <div\r\n                    class=\"input-date\"\r\n                    data-test-id=\"divInputStartDateAppointment\"\r\n                  >\r\n                    <label\r\n                      class=\"label-text\"\r\n                      data-test-id=\"lblStartDateAppointment\"\r\n                      >{{ \"Start date\" | translate }}</label\r\n                    >\r\n                    <div\r\n                      class=\"input-wrapper\"\r\n                      data-test-id=\"divInputWrapperStartDateAppointment\"\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        [class.error-border]=\"startDateErrorMessage\"\r\n                        [max]=\"\r\n                          filteredDateAndRangeForm.value.endDate\r\n                            ? filteredDateAndRangeForm.value.endDate\r\n                            : maxDate\r\n                        \"\r\n                        formControlName=\"startDate\"\r\n                        [matDatepicker]=\"startDatePicker\"\r\n                        [placeholder]=\"\r\n                          filteredDateAndRangeForm.get('startDate')?.value\r\n                            ? (filteredDateAndRangeForm.get('startDate')?.value\r\n                              | date: 'dd/MM/yyyy')\r\n                            : ('Select start date' | translate)\r\n                        \"\r\n                        readonly\r\n                        data-test-id=\"etSelStartDate\"\r\n                      />\r\n                      <mat-datepicker\r\n                        #startDatePicker\r\n                        (opened)=\"addCalendarNavigationTestIds()\"\r\n                        data-test-id=\"matStartDatePickerAppointment\"\r\n                      ></mat-datepicker>\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"startDatePicker\"\r\n                        class=\"datepicker-icon\"\r\n                        data-test-id=\"dpStartDate\"\r\n                      >\r\n                        <img\r\n                          matDatepickerToggleIcon\r\n                          src=\"assets/svgs/calendar-date.svg\"\r\n                          alt=\"\"\r\n                          data-test-id=\"imgStartDatePickerIconAppointment\"\r\n                        />\r\n                      </mat-datepicker-toggle>\r\n                    </div>\r\n                    <span\r\n                      *ngIf=\"startDateErrorMessage\"\r\n                      class=\"error-message\"\r\n                      data-test-id=\"spanStartDateErrorMessageAppointment\"\r\n                      >{{ startDateErrorMessage }}</span\r\n                    >\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-date\" data-test-id=\"divFormEndDateAppointment\">\r\n                  <div\r\n                    class=\"input-date\"\r\n                    data-test-id=\"divInputEndDateAppointment\"\r\n                  >\r\n                    <label\r\n                      class=\"label-text\"\r\n                      data-test-id=\"lblEndDateAppointment\"\r\n                      >{{ \"End date\" | translate }}</label\r\n                    >\r\n                    <div\r\n                      class=\"input-wrapper\"\r\n                      data-test-id=\"divInputWrapperEndDateAppointment\"\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        [class.error-border]=\"endDateErrorMessage\"\r\n                        [min]=\"filteredDateAndRangeForm.value.startDate\"\r\n                        [max]=\"maxDate\"\r\n                        formControlName=\"endDate\"\r\n                        [matDatepicker]=\"endDatePicker\"\r\n                        [placeholder]=\"\r\n                          filteredDateAndRangeForm.get('endDate')?.value\r\n                            ? (filteredDateAndRangeForm.get('endDate')?.value\r\n                              | date: 'dd/MM/yyyy')\r\n                            : ('Select end date' | translate)\r\n                        \"\r\n                        readonly\r\n                        data-test-id=\"etSelEndDate\"\r\n                      />\r\n                      <mat-datepicker\r\n                        #endDatePicker\r\n                        (opened)=\"addCalendarNavigationTestIds()\"\r\n                        data-test-id=\"matEndDatePickerAppointment\"\r\n                      ></mat-datepicker>\r\n                      <mat-datepicker-toggle\r\n                        matSuffix\r\n                        [for]=\"endDatePicker\"\r\n                        class=\"datepicker-icon\"\r\n                        data-test-id=\"dpEndDate\"\r\n                      >\r\n                        <img\r\n                          matDatepickerToggleIcon\r\n                          src=\"assets/svgs/calendar-date.svg\"\r\n                          alt=\"\"\r\n                          data-test-id=\"imgEndDatePickerIconAppointment\"\r\n                        />\r\n                      </mat-datepicker-toggle>\r\n                    </div>\r\n                    <span\r\n                      *ngIf=\"endDateErrorMessage\"\r\n                      class=\"error-message\"\r\n                      data-test-id=\"spanEndDateErrorMessageAppointment\"\r\n                      >{{ endDateErrorMessage }}</span\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n            <div\r\n              class=\"action-buttons\"\r\n              data-test-id=\"divFilterActionBtnsAppointment\"\r\n            >\r\n              <button\r\n                mat-button\r\n                class=\"mat-focus-indicator reset-btn mat-button mat-button-base\"\r\n                (click)=\"resetDate(true); $event.stopPropagation()\"\r\n                data-test-id=\"btnResetFilterAppointment\"\r\n              >\r\n                {{ \"Reset\" | translate }}\r\n              </button>\r\n              <button\r\n                mat-button\r\n                class=\"mat-focus-indicator apply-btn mat-button mat-button-base\"\r\n                (click)=\"\r\n                  applyDateOrRangeFilter(\r\n                    pluginConfigObs.filterObs.filterDateField\r\n                  );\r\n                  $event.stopPropagation()\r\n                \"\r\n                data-test-id=\"btnApplyFilterAppointment\"\r\n              >\r\n                {{ \"Apply\" | translate }}\r\n              </button>\r\n            </div>\r\n          </mat-menu>\r\n          <div\r\n            class=\"input-group search-bar ml-auto\"\r\n            (click)=\"$event.stopPropagation()\"\r\n            data-test-id=\"divSearchAppointment\"\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              #searchInput\r\n              class=\"form-control\"\r\n              placeholder=\"{{ pluginConfigObs.searchPlaceHolder | translate }}\"\r\n              (keyup)=\"applyFilter($event)\"\r\n              (keydown.Space)=\"$event.stopPropagation()\"\r\n              (keydown.Enter)=\"$event.stopPropagation()\"\r\n              [attr.data-test-id]=\"'etSearch_' + pluginConfigObs.tableHeader\"\r\n            />\r\n            <div class=\"input-group-append\">\r\n              <button\r\n                data-test-id=\"btnResetSearchAppointment\"\r\n                class=\"btnResetApSerach mat-icon-button\"\r\n                aria-label=\"Reset appointment search\"\r\n                (click)=\"clearFilter(); $event.stopPropagation()\"\r\n                *ngIf=\"isFilterApplied\"\r\n              >\r\n                <mat-icon class=\"ml-0\" style=\"line-height: normal\"\r\n                  >close</mat-icon\r\n                >\r\n              </button>\r\n              <span\r\n                class=\"input-group-text search-icon-span\"\r\n                data-test-id=\"icoSearchAppointment\"\r\n              >\r\n                <img\r\n                  src=\"assets/svgs/search-icon.svg\"\r\n                  alt=\"\"\r\n                  width=\"20px\"\r\n                  height=\"20px\"\r\n                  data-test-id=\"imgSearchIconAppointment\"\r\n                />\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </mat-panel-title>\r\n  </mat-expansion-panel-header>\r\n  <div class=\"mat-elevation-z8\" data-test-id=\"divTableWrapperAppointment\">\r\n    <span *ngIf=\"tableLoader\">\r\n      <ngx-ui-loader\r\n        [loaderId]=\"'table-loader-' + pluginConfigObs.pluginConfigObsFlag\"\r\n        [fgsType]=\"'ball-spin-clockwise'\"\r\n        [fgsColor]=\"'#aba4a4'\"\r\n        [fgsPosition]=\"'center-center'\"\r\n        [fgsSize]=\"50\"\r\n        [overlayColor]=\"'rgb(255, 255, 255)'\"\r\n        [hasProgressBar]=\"false\"\r\n        [text]=\"\r\n          ('Loading' | translate) +\r\n          ' ' +\r\n          (pluginConfigObs.pluginConfigObsFlag | translate) +\r\n          ' ' +\r\n          ('data' | translate) +\r\n          '...'\r\n        \"\r\n        [textColor]=\"'#333'\"\r\n        [textPosition]=\"'center-center'\"\r\n        data-test-id=\"loaderAppointment\"\r\n      ></ngx-ui-loader>\r\n    </span>\r\n    <div class=\"table-container\" id=\"table-container-{{ componentId }}\">\r\n      <table mat-table [dataSource]=\"paginatedDataSource\">\r\n        <ng-container\r\n          *ngFor=\"let column of displayedAppointmentColumns\"\r\n          [matColumnDef]=\"column.key\"\r\n        >\r\n          <ng-container *ngIf=\"column.isSortable; else noSort\">\r\n            <th\r\n              mat-header-cell\r\n              *matHeaderCellDef\r\n              (click)=\"handleSort(column.key, 'asc')\"\r\n              [attr.data-test-id]=\"\r\n                'th-' + column.key + '-' + pluginConfigObs.pluginConfigObsFlag\r\n              \"\r\n              class=\"sortable-header\"\r\n            >\r\n              {{ column.label | translate }}\r\n              <mat-icon class=\"sort-icon\">arrow_upward</mat-icon>\r\n            </th>\r\n          </ng-container>\r\n          <ng-template #noSort>\r\n            <th\r\n              mat-header-cell\r\n              *matHeaderCellDef\r\n              [attr.data-test-id]=\"\r\n                'th-' + column.key + '-' + pluginConfigObs.pluginConfigObsFlag\r\n              \"\r\n            >\r\n              {{ column.label | translate }}\r\n            </th>\r\n          </ng-template>\r\n\r\n          <td\r\n            mat-cell\r\n            *matCellDef=\"let element; let j = index\"\r\n            [attr.data-test-id]=\"\r\n              'td-' +\r\n              column.key +\r\n              '-' +\r\n              pluginConfigObs.pluginConfigObsFlag +\r\n              '-' +\r\n              j\r\n            \"\r\n          >\r\n            <ng-container\r\n              *ngIf=\"\r\n                column.key !== 'patient_name' &&\r\n                column.key !== 'visit_completed'\r\n              \"\r\n            >\r\n              <div\r\n                class=\"float-left\"\r\n                [innerHTML]=\"renderHtmlContent(column, element)\"\r\n                [ngClass]=\"getClasses(column, element)\"\r\n              ></div>\r\n            </ng-container>\r\n\r\n            <!-- This is for visit_completed column -->\r\n            <ng-container *ngIf=\"column.key === 'visit_completed'\">\r\n              <div\r\n                class=\"d-flex align-items-center visit-completed-cell\"\r\n                [attr.data-test-id]=\"\r\n                  'td-visit_completed-' +\r\n                  pluginConfigObs.pluginConfigObsFlag +\r\n                  '-' +\r\n                  j\r\n                \"\r\n              >\r\n                <img\r\n                  src=\"assets/svgs/green-pad.svg\"\r\n                  alt=\"Completed\"\r\n                  class=\"mr-2\"\r\n                />\r\n                <span class=\"text-success\">\r\n                  {{ element.completed }}\r\n                </span>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <!-- Patient Name Column -->\r\n            <ng-container *ngIf=\"column.key === 'patient_name'\">\r\n              <div\r\n                class=\"d-flex align-items-center\"\r\n                [attr.data-test-id]=\"\r\n                  'td-patient_name-' +\r\n                  pluginConfigObs.pluginConfigObsFlag +\r\n                  '-' +\r\n                  j\r\n                \"\r\n              >\r\n                <img\r\n                  *ngIf=\"element.patientId\"\r\n                  src=\"{{\r\n                    checkPatientRegField('Profile Photo')\r\n                      ? baseURL + '/personimage/' + element.patientId\r\n                      : ''\r\n                  }}\"\r\n                  alt=\"\"\r\n                  width=\"32px\"\r\n                  height=\"32px\"\r\n                  style=\"border-radius: 50%\"\r\n                />\r\n                <img\r\n                  *ngIf=\"pluginConfigObs.pluginConfigObsFlag !== 'Appointment'\"\r\n                  src=\"{{\r\n                    checkPatientRegField('Profile Photo')\r\n                      ? baseURL + '/personimage/' + element.person.uuid\r\n                      : ''\r\n                  }}\"\r\n                  alt=\"\"\r\n                  width=\"32px\"\r\n                  height=\"32px\"\r\n                  style=\"border-radius: 50%\"\r\n                  [attr.data-test-id]=\"\r\n                    'td-patient_img-' +\r\n                    pluginConfigObs.pluginConfigObsFlag +\r\n                    '-' +\r\n                    j\r\n                  \"\r\n                />\r\n                <div\r\n                  class=\"float-left\"\r\n                  [innerHTML]=\"renderHtmlContent(column, element)\"\r\n                  [ngClass]=\"getClasses(column, element)\"\r\n                ></div>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <!-- Telephone Column -->\r\n            <ng-container\r\n              *ngIf=\"column.key === 'telephone' && element.telephone\"\r\n            >\r\n              <a\r\n                (click)=\"openWhatsApp($event, element.telephone)\"\r\n                class=\"float-left icon-btn m-0\"\r\n                [attr.data-test-id]=\"'linkPatientWhatsApp' + j\"\r\n              >\r\n                <img src=\"assets/svgs/whatsapp-green.svg\" alt=\"WhatsApp\" />\r\n              </a>\r\n            </ng-container>\r\n\r\n            <!-- Actions Column -->\r\n            <ng-container *ngIf=\"column.key === 'actions'\">\r\n              <div class=\"actions-btn-wrap d-flex align-items-center\">\r\n                <button\r\n                  *ngFor=\"let action of column.actionButtons; let k = index\"\r\n                  [ngStyle]=\"{\r\n                    color: action.style?.color,\r\n                    backgroundColor: action.style?.backgroundColor\r\n                  }\"\r\n                  class=\"action-btn mr-2\"\r\n                  type=\"button\"\r\n                  (click)=\"\r\n                    $event.stopPropagation(); handleAction(action, element)\r\n                  \"\r\n                  [attr.data-test-id]=\"'btn-action-' + action.label + '-' + k\"\r\n                >\r\n                  {{ action.label | translate }}\r\n                </button>\r\n              </div>\r\n            </ng-container>\r\n          </td>\r\n        </ng-container>\r\n\r\n        <!-- No Data Row -->\r\n        <tr class=\"mat-row\" *matNoDataRow>\r\n          <td\r\n            class=\"mat-cell text-center\"\r\n            [attr.colspan]=\"displayedColumns.length\"\r\n          >\r\n            {{ pluginConfigObs.noRecordFound | translate }}\r\n          </td>\r\n        </tr>\r\n\r\n        <!-- Row Definitions -->\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr\r\n          mat-row\r\n          *matRowDef=\"let row; let x = index; columns: displayedColumns\"\r\n          [attr.data-test-id]=\"'tr' + x\"\r\n          [routerLink]=\"['/dashboard/visit-summary', row.uuid]\"\r\n        ></tr>\r\n      </table>\r\n    </div>\r\n    <mat-paginator\r\n      *ngIf=\"pluginConfigObs?.pluginConfigObsFlag === 'Appointment'\"\r\n      #tempPaginator\r\n      hidePageSize\r\n      [pageSizeOptions]=\"pageSizeOptions\"\r\n      [length]=\"getCurrentTotalCount()\"\r\n      [pageIndex]=\"currentPage\"\r\n      [pageSize]=\"itemsPerPage\"\r\n      [disabled]=\"isPaginationDisabled()\"\r\n      aria-label=\"Select page of periodic elements\"\r\n    ></mat-paginator>\r\n    <mat-paginator\r\n      #tempPaginator\r\n      *ngIf=\"pluginConfigObs?.pluginConfigObsFlag !== 'Appointment'\"\r\n      hidePageSize\r\n      [pageSizeOptions]=\"pageSizeOptions\"\r\n      [length]=\"getCurrentTotalCount()\"\r\n      [pageIndex]=\"currentPage\"\r\n      [pageSize]=\"itemsPerPage\"\r\n      [disabled]=\"isPaginationDisabled()\"\r\n      (page)=\"pageEvent = getData($event)\"\r\n      aria-label=\"Select page of periodic elements\"\r\n    ></mat-paginator>\r\n  </div>\r\n</mat-expansion-panel>\r\n", styles: [".mat-elevation-z8{box-shadow:none;width:100%;overflow-x:auto}.table-container{max-height:440px;overflow-y:auto;overflow-x:auto}table{width:100%;font-family:DM Sans}th.mat-header-cell{border:none;font-size:14px!important;font-weight:700;color:var(--color-gray);height:21px}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{border:none;min-width:60px;white-space:nowrap;padding-right:24px}th.mat-header-cell span.alert-danger,td.mat-cell span.alert-danger,td.mat-footer-cell span.alert-danger{color:var(--color-red);font-weight:700;background:transparent;border:none}th.mat-header-cell span.alert-success,td.mat-cell span.alert-success,td.mat-footer-cell span.alert-success{color:var(--color-green);font-weight:700;background:transparent;border:none}td.mat-cell{font-size:16px}tr.mat-row,tr.mat-footer-row{height:88px;border-radius:8px;cursor:pointer}tr.mat-row.upcoming{background:#e6fff3!important}tr.mat-row:nth-child(odd){background:#f7f7fa}td:first-child,th:first-child{border-radius:8px 0 0 8px}td:last-child,th:last-child{border-radius:0 8px 8px 0}.actions-btn-wrap .action-btn{outline:none;border:none;height:36px;min-width:102px;padding:6px 8px;background:#fff;border-radius:4px;color:var(--color-black);font-family:DM Sans;font-size:16px}.actions-btn-wrap .blue-btn{background:var(--color-lightGray);color:var(--color-darkBlue)}.actions-btn-wrap .pink-btn{background:var(--color-lightPink);color:var(--color-red)}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded .input-group{display:flex}.input-group{background:var(--color-white);border:1px solid rgba(127,123,146,.5);border-radius:6px;height:46px;align-items:center;max-width:60vw;width:300px;display:none}.input-group .input-group-text{background:none;border:none;cursor:default}.input-group .form-control{border:none;outline:none;background:transparent;font-size:16px;line-height:150%;padding-left:16px}.input-group .form-control:focus{box-shadow:none}.mat-expansion-panel{background:#fff;box-shadow:0 4px 24px #1f1c3a14;border-radius:20px!important;padding:24px;margin-bottom:24px}.mat-expansion-panel .mat-expansion-panel-header{padding:0}.mat-expansion-panel .mat-expansion-panel-header .mat-content{align-items:center}.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:48px}.mat-expansion-panel .mat-expansion-panel-header:hover{background:transparent!important}.mat-expansion-panel .intel-accordion-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;flex-wrap:wrap;width:100%}.mat-expansion-panel .intel-accordion-title .mat-icon{height:20px;width:20px;font-size:20px;color:#461d90;margin-left:8px}.mat-expansion-panel .intel-accordion-title h6{font-size:18px;font-weight:700;color:#000}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{padding:0;margin-top:24px;position:relative}.mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body:after{content:\"\";position:absolute;top:0;height:1px;left:0;right:0;background:#efe8ff}.anchor-con{position:absolute;top:-120px;left:0}.visit-completed-cell{color:green!important;background-color:#d4edda!important}@media (max-width: 768px){.input-group{width:100%;max-width:100%;margin:10px 0}.mat-expansion-panel .mat-expansion-panel-header,.mat-expansion-panel .mat-expansion-panel-header.mat-expanded{height:fit-content}.info-icon{display:none}.anchor-con{top:-100px}}.matIconButton{border:none;background:transparent}::ng-deep .custom-menu{background:var(--color-white);border-radius:8px!important;padding:16px;width:352px;box-shadow:0 4px 8px #7f7b9229}.mat-expansion-panel.mat-expanded .mat-expansion-panel-header .filter-btn{display:flex!important}.btnResetApSerach{border:none;background:transparent;cursor:pointer;padding:0;margin-right:4px;display:flex;align-items:center;justify-content:center}.btnResetApSerach .mat-icon{font-size:18px;width:18px;height:18px;color:#7f7b92}.btnResetApSerach:hover .mat-icon{color:#2e1e91}.search-icon-span{pointer-events:none}.filter-btn{background:none;align-items:center;border:1px solid rgba(127,123,146,.5);border-radius:6px;color:#2e1e91;font-weight:500;padding:4px 12px;white-space:nowrap;height:46px;display:none;gap:4px}.toggle-buttons{display:flex;justify-content:space-between;margin-bottom:16px;gap:16px}button.mat-button,.action-buttons button.mat-button{flex:1;color:#2e1e91;background:#fff;border-radius:8px;font-family:DM Sans;font-size:14px;font-weight:500;border:1.33px solid #EFE8FF}.action-buttons button.mat-button.reset-btn{font-size:12px;font-weight:700;margin:0 0 0 20px;width:96px}.action-buttons button.mat-button.apply-btn{color:#fff;background:var(--color-darkBlue);font-size:12px;font-weight:700;width:96px}button.mat-button.active{background:#efe8ff;color:#2e1e91}button.mat-button .reset-btn{color:var(--color-darkBlue)}.action-buttons{display:flex;justify-content:space-between;gap:16px}.reset-btn{color:var(--color-darkBlue);background:#f5f5f5;border-radius:8px}.filter-search-container{display:flex;align-items:center;gap:1rem}.form-date{margin-bottom:16px}.input-wrapper{position:relative;display:flex;align-items:center}.input-wrapper .form-control{width:100%;padding-right:40px;border:1px solid rgba(178,175,190,.2);background:transparent;border-radius:8px;height:48px;font-size:16px;color:var(--color-darkestBlue)}.datepicker-icon{position:absolute;right:4px;top:50%;transform:translateY(-50%);cursor:pointer;background:transparent;border:none}.form-control:focus{box-shadow:none}.label-text{font-size:14px;margin-bottom:8px;color:#7f7b92}.userImage{width:32px;height:32px;border-radius:50%}.red-pill{display:flex;flex-direction:row;align-items:center;background:#ffe8e8;border-radius:4px;height:32px;color:#ea315b;padding:4px 6px;width:fit-content}.left{text-align:left}.chip{display:flex;flex-direction:row;align-items:center;border-radius:4px;height:32px;padding:4px 6px;width:fit-content}.chip.green{color:#0fd197}.chip.blue{color:#2e1e91}.chip-item-blue{background:var(--color-lightGray)}.chip-item-green{background:#e6fff3}.error-message{color:#ea315b;font-size:12px;margin-top:4px;display:block;font-family:DM Sans}.error-border{border-color:#ea315b!important}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.AppointmentService }, { type: i2.VisitService }, { type: i3.CoreService }, { type: i4.ToastrService }, { type: i5.TranslateService }, { type: i6.MindmapService }, { type: i7.DomSanitizer }, { type: i8.AppConfigService }, { type: i9.NgxRolesService }, { type: i10.NgxUiLoaderService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: ['environment']
                }] }]; }, propDecorators: { pluginConfigObs: [{
                type: Input
            }], searchElement: [{
                type: ViewChild,
                args: ['searchInput', { static: true }]
            }], tempPaginator: [{
                type: ViewChild,
                args: ['tempPaginator']
            }], paginatorEl: [{
                type: ViewChild,
                args: ['tempPaginator', { read: ElementRef }]
            }], menuTrigger: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }], datePicker: [{
                type: ViewChild,
                args: ['datePicker']
            }], startDatePicker: [{
                type: ViewChild,
                args: ['startDatePicker']
            }], endDatePicker: [{
                type: ViewChild,
                args: ['endDatePicker']
            }], filterMenu: [{
                type: ViewChild,
                args: ['filterMenu']
            }], visitsCountDate: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9paC1saWJyYXJ5L3NyYy9saWIvY29tcG9uZW50cy90YWJsZS1ncmlkL3RhYmxlLWdyaWQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWgtbGlicmFyeS9zcmMvbGliL2NvbXBvbmVudHMvdGFibGUtZ3JpZC90YWJsZS1ncmlkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFVLFNBQVMsRUFBRSxLQUFLLEVBQWlCLHVCQUF1QixFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFnQixNQUFNLGVBQWUsQ0FBQztBQUNwSyxPQUFPLEVBQUUsWUFBWSxFQUFhLE1BQU0sNkJBQTZCLENBQUM7QUFFdEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDeEUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQzVELE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUM1QixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUMzQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsWUFBWSxFQUFFLHdCQUF3QixFQUFFLGdCQUFnQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDekcsT0FBTyxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDN0UsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ2hFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1D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QUFDLENBQUMsQ0FBQztJQUNSLENBQUM7dUdBeDFDVSxrQkFBa0Isb1VBd0huQixhQUFhOzJGQXhIWixrQkFBa0IsOGJBMkJPLFVBQVUsMkRBR25DLGNBQWMsaWNDdkQzQix3bHdCQWtsQkE7OzJGRHpqQmEsa0JBQWtCO2tCQU45QixTQUFTOytCQUNFLGdCQUFnQixtQkFHVCx1QkFBdUIsQ0FBQyxNQUFNOzswQkEwSDVDLE1BQU07MkJBQUMsYUFBYTs0Q0E5R2QsZUFBZTtzQkFBdkIsS0FBSztnQkFjc0MsYUFBYTtzQkFBeEQsU0FBUzt1QkFBQyxhQUFhLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUVkLGFBQWE7c0JBQXhDLFNBQVM7dUJBQUMsZUFBZTtnQkFFMUIsV0FBVztzQkFEVixTQUFTO3VCQUFDLGVBQWUsRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7Z0JBR3JCLFdBQVc7c0JBQXJDLFNBQVM7dUJBQUMsY0FBYztnQkFHQSxVQUFVO3NCQUFsQyxTQUFTO3VCQUFDLFlBQVk7Z0JBQ08sZUFBZTtzQkFBNUMsU0FBUzt1QkFBQyxpQkFBaUI7Z0JBQ0EsYUFBYTtzQkFBeEMsU0FBUzt1QkFBQyxlQUFlO2dCQUNELFVBQVU7c0JBQWxDLFNBQVM7dUJBQUMsWUFBWTtnQkFrQmIsZUFBZTtzQkFBeEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgT25Jbml0LCBWaWV3Q2hpbGQsIElucHV0LCBTaW1wbGVDaGFuZ2VzLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgSW5qZWN0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQWZ0ZXJWaWV3SW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1hdFBhZ2luYXRvciwgUGFnZUV2ZW50IH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvcGFnaW5hdG9yJztcclxuaW1wb3J0IHsgQXBpUmVzcG9uc2VNb2RlbCwgQXBwb2ludG1lbnRNb2RlbCwgQ3VzdG9tRW5jb3VudGVyTW9kZWwsIEN1c3RvbU9ic01vZGVsLCBDdXN0b21WaXNpdE1vZGVsLCBQcm92aWRlckF0dHJpYnV0ZU1vZGVsLCBSZXNjaGVkdWxlQXBwb2ludG1lbnRNb2RhbFJlc3BvbnNlTW9kZWwsIFBhdGllbnRWaXNpdFN1bW1hcnlDb25maWdNb2RlbCB9IGZyb20gJy4uLy4uL21vZGVsL21vZGVsJztcclxuaW1wb3J0IHsgQXBwb2ludG1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBwb2ludG1lbnQuc2VydmljZSc7XHJcbmltcG9ydCB7IFZpc2l0U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3Zpc2l0LnNlcnZpY2UnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IENvcmVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvY29yZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVG9hc3RyU2VydmljZSB9IGZyb20gJ25neC10b2FzdHInO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XHJcbmltcG9ydCB7IGdldENhY2hlRGF0YSwgY2hlY2tJZkRhdGVPbGRUaGFuT25lRGF5LCBpc0ZlYXR1cmVQcmVzZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbGl0eS1mdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBkb2N0b3JEZXRhaWxzLCBsYW5ndWFnZXMsIHZpc2l0VHlwZXMgfSBmcm9tICcuLi8uLi9jb25maWcvY29uc3RhbnQnO1xyXG5pbXBvcnQgeyBNaW5kbWFwU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL21pbmRtYXAuc2VydmljZSc7XHJcbmltcG9ydCB7IEFwcENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcHAtY29uZmlnLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgRm9ybUdyb3VwLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBNYXRNZW51VHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL21lbnUnO1xyXG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcclxuaW1wb3J0IHsgTmd4Um9sZXNTZXJ2aWNlIH0gZnJvbSAnbmd4LXBlcm1pc3Npb25zJztcclxuaW1wb3J0IHsgTmd4VWlMb2FkZXJTZXJ2aWNlIH0gZnJvbSAnbmd4LXVpLWxvYWRlcic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi10YWJsZS1ncmlkJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vdGFibGUtZ3JpZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vdGFibGUtZ3JpZC5jb21wb25lbnQuc2NzcyddLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUYWJsZUdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gIFxyXG4gIC8vIENvbnN0YW50c1xyXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfUEFHRV9TSVpFX09QVElPTlMgPSBbNSwgMTAsIDIwLCAyNV07XHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQVBQT0lOVE1FTlRfUEFHRV9TSVpFID0gNTtcclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTUEVDSUFMSVpBVElPTl9VVUlEID0gJ2VkMTcxNWY1LTkzZTItNDA0ZS1iM2M5LTJhMmQ5NjAwZjA2Mic7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVEVMRVBIT05FX0FUVFJJQlVURV9JRCA9IDg7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgRk9MTE9XX1VQX0NPTkNFUFRfSUQgPSAxNjMzNDU7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQ0hJRUZfQ09NUExBSU5UX0NPTkNFUFRfSUQgPSAxNjMyMTI7XHJcbiAgXHJcbiAgQElucHV0KCkgcGx1Z2luQ29uZmlnT2JzOiBhbnk7XHJcbiAgZGlzcGxheWVkQXBwb2ludG1lbnRDb2x1bW5zOiBhbnkgPSBbXTtcclxuICBkaXNwbGF5ZWRDb2x1bW5zOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGRhdGFTb3VyY2U6IGFueVtdID0gW107XHJcbiAgZmlsdGVyZWREYXRhU291cmNlOiBhbnlbXSA9IFtdO1xyXG4gIHBhZ2luYXRlZERhdGFTb3VyY2U6IGFueVtdID0gW107XHJcbiAgcGF0aWVudFJlZ0ZpZWxkczogc3RyaW5nW10gPSBbXTtcclxuICBpc01DQ1VzZXIgPSBmYWxzZTtcclxuICBwYWdlU2l6ZU9wdGlvbnMgPSBUYWJsZUdyaWRDb21wb25lbnQuREVGQVVMVF9QQUdFX1NJWkVfT1BUSU9OUztcclxuICBcclxuICAvLyBVbmlxdWUgY29tcG9uZW50IGluc3RhbmNlIElEXHJcbiAgY29tcG9uZW50SWQ6IHN0cmluZztcclxuICBcclxuICAvLyBAVmlld0NoaWxkKE1hdFBhZ2luYXRvcikgcGFnaW5hdG9yOiBNYXRQYWdpbmF0b3I7XHJcbiAgQFZpZXdDaGlsZCgnc2VhcmNoSW5wdXQnLCB7IHN0YXRpYzogdHJ1ZSB9KSBzZWFyY2hFbGVtZW50OiBFbGVtZW50UmVmO1xyXG4gIGZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybTogRm9ybUdyb3VwO1xyXG4gIEBWaWV3Q2hpbGQoJ3RlbXBQYWdpbmF0b3InKSB0ZW1wUGFnaW5hdG9yOiBNYXRQYWdpbmF0b3I7XHJcbiAgQFZpZXdDaGlsZCgndGVtcFBhZ2luYXRvcicsIHsgcmVhZDogRWxlbWVudFJlZiB9KVxyXG4gIHBhZ2luYXRvckVsITogRWxlbWVudFJlZjxIVE1MRWxlbWVudD47XHJcblxyXG4gIEBWaWV3Q2hpbGQoTWF0TWVudVRyaWdnZXIpIG1lbnVUcmlnZ2VyOiBNYXRNZW51VHJpZ2dlcjtcclxuICBcclxuICAvLyBEYXRlIHBpY2tlciBWaWV3Q2hpbGQgcmVmZXJlbmNlc1xyXG4gIEBWaWV3Q2hpbGQoJ2RhdGVQaWNrZXInKSBkYXRlUGlja2VyOiBhbnk7XHJcbiAgQFZpZXdDaGlsZCgnc3RhcnREYXRlUGlja2VyJykgc3RhcnREYXRlUGlja2VyOiBhbnk7XHJcbiAgQFZpZXdDaGlsZCgnZW5kRGF0ZVBpY2tlcicpIGVuZERhdGVQaWNrZXI6IGFueTtcclxuICBAVmlld0NoaWxkKCdmaWx0ZXJNZW51JykgZmlsdGVyTWVudTogYW55O1xyXG5cclxuXHJcbiAgcGFuZWxFeHBhbmRlZDogYm9vbGVhbiA9IHRydWU7XHJcbiAgbW9kZTogJ2RhdGUnIHwgJ3JhbmdlJyA9ICdkYXRlJztcclxuICBtYXhEYXRlOiBEYXRlO1xyXG4gIGRhdGVFcnJvck1lc3NhZ2U6IHN0cmluZyA9ICcnO1xyXG4gIHN0YXJ0RGF0ZUVycm9yTWVzc2FnZTogc3RyaW5nID0gJyc7XHJcbiAgZW5kRGF0ZUVycm9yTWVzc2FnZTogc3RyaW5nID0gJyc7XHJcblxyXG4gIGFwcG9pbnRtZW50czogQXBwb2ludG1lbnRNb2RlbFtdID0gW107XHJcbiAgcHJpb3JpdHlWaXNpdHM6IEN1c3RvbVZpc2l0TW9kZWxbXSA9IFtdO1xyXG4gIGF3YWl0aW5nVmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuICBpblByb2dyZXNzVmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuICBjb21wbGV0ZWRWaXNpdHM6IEN1c3RvbVZpc2l0TW9kZWxbXSA9IFtdO1xyXG4gIGZvbGxvd1VwVmlzaXRzOiBDdXN0b21WaXNpdE1vZGVsW10gPSBbXTtcclxuXHJcbiAgc3BlY2lhbGl6YXRpb246IHN0cmluZyA9ICcnO1xyXG4gIEBPdXRwdXQoKSB2aXNpdHNDb3VudERhdGUgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBwYWdlSW5kZXg6IG51bWJlciA9IDA7XHJcbiAgcGFnZVNpemU6IG51bWJlciA9IDA7XHJcbiAgcGFnZUV2ZW50OiBQYWdlRXZlbnQ7XHJcbiAgcmVjb3Jkc0ZldGNoZWQ6IG51bWJlciA9IDA7XHJcbiAgdG90YWxSZWNvcmRzOiBudW1iZXIgPSAwO1xyXG4gIFxyXG4gIGlzRmlsdGVyQXBwbGllZCA9IGZhbHNlO1xyXG4gIHB2czogUGF0aWVudFZpc2l0U3VtbWFyeUNvbmZpZ01vZGVsO1xyXG4gIGJhc2VVUkw6IGFueTtcclxuICBpc0JyYW5kTmFtZTogc3RyaW5nO1xyXG5cclxuICAvLyB0byBhcHBseSBmaWx0ZXIgd2l0aCBkYXRlIGFuZCB0ZXh0IHNlYXJjaFxyXG4gIGRhdGVGaWVsZDogc3RyaW5nO1xyXG4gIGRhdGVGaWx0ZXI6IHN0cmluZztcclxuICBvcmlnaW5hbERhdGE6IGFueVtdO1xyXG4gIGZpbHRlcmVkRGF0YUFmdGVyRGF0ZTogYW55W107XHJcbiAgdGFibGVMb2FkZXI6IGJvb2xlYW47XHJcbiAgXHJcbiAgLy8gQ3VzdG9tIHBhZ2luYXRpb24gcHJvcGVydGllc1xyXG4gIGN1cnJlbnRQYWdlOiBudW1iZXIgPSAwO1xyXG4gIGl0ZW1zUGVyUGFnZTogbnVtYmVyID0gMDtcclxuICBzZWFyY2hUZXJtOiBzdHJpbmcgPSAnJztcclxuICBjdXJyZW50RGF0ZUZpbHRlcjogYW55ID0gbnVsbDtcclxuICBcclxuICAvLyBGaWx0ZXJlZCBkYXRhIHByb3BlcnRpZXNcclxuICBmaWx0ZXJlZFRvdGFsQ291bnQ6IG51bWJlciA9IDA7XHJcbiAgaXNGaWx0ZXJBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwYWdpbmF0aW9uRGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblxyXG5uZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgLy8gV2FpdCBmb3IgdGhlIHBhZ2luYXRvciB0byBiZSBmdWxseSBpbml0aWFsaXplZFxyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMucGFnaW5hdG9yRWwgJiYgdGhpcy5wYWdpbmF0b3JFbC5uYXRpdmVFbGVtZW50KSB7XHJcbiAgICAgIGNvbnN0IGVsID0gdGhpcy5wYWdpbmF0b3JFbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICBjb25zdCBzdWZmaXggPSB0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyB8fCAnJztcclxuXHJcbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXQtcGFnaW5hdG9yLW5hdmlnYXRpb24tbmV4dCcpXHJcbiAgICAgICAgPy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGVzdC1pZCcsIGBwYWdpbmF0b3ItbmV4dC0ke3N1ZmZpeH1gKTtcclxuXHJcbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXQtcGFnaW5hdG9yLW5hdmlnYXRpb24tcHJldmlvdXMnKVxyXG4gICAgICAgID8uc2V0QXR0cmlidXRlKCdkYXRhLXRlc3QtaWQnLCBgcGFnaW5hdG9yLXByZXYtJHtzdWZmaXh9YCk7XHJcblxyXG4gICAgICBlbC5xdWVyeVNlbGVjdG9yKCcubWF0LXBhZ2luYXRvci1uYXZpZ2F0aW9uLWZpcnN0JylcclxuICAgICAgICA/LnNldEF0dHJpYnV0ZSgnZGF0YS10ZXN0LWlkJywgYHBhZ2luYXRvci1maXJzdC0ke3N1ZmZpeH1gKTtcclxuXHJcbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXQtcGFnaW5hdG9yLW5hdmlnYXRpb24tbGFzdCcpXHJcbiAgICAgICAgPy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGVzdC1pZCcsIGBwYWdpbmF0b3ItbGFzdC0ke3N1ZmZpeH1gKTtcclxuXHJcbiAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXQtcGFnaW5hdG9yLXJhbmdlLWxhYmVsJylcclxuICAgICAgICA/LnNldEF0dHJpYnV0ZSgnZGF0YS10ZXN0LWlkJywgYHBhZ2luYXRvci1yYW5nZS1sYWJlbC0ke3N1ZmZpeH1gKTtcclxuICAgIH1cclxuICB9LCAxMDApO1xyXG59XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGFwcG9pbnRtZW50U2VydmljZTogQXBwb2ludG1lbnRTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB2aXNpdFNlcnZpY2U6IFZpc2l0U2VydmljZSxcclxuICAgIHByaXZhdGUgY29yZVNlcnZpY2U6IENvcmVTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB0b2FzdHI6IFRvYXN0clNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHRyYW5zbGF0ZVNlcnZpY2U6IFRyYW5zbGF0ZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1pbmRtYXBTZXJ2aWNlOiBNaW5kbWFwU2VydmljZSxcclxuICAgIHByaXZhdGUgc2FuaXRpemVyOiBEb21TYW5pdGl6ZXIsXHJcbiAgICBwcml2YXRlIGFwcENvbmZpZ1NlcnZpY2U6IEFwcENvbmZpZ1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIHJvbGVzU2VydmljZTogTmd4Um9sZXNTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBuZ3hMb2FkZXI6IE5neFVpTG9hZGVyU2VydmljZSxcclxuICAgIEBJbmplY3QoJ2Vudmlyb25tZW50JykgZW52aXJvbm1lbnRcclxuICApIHsgXHJcbiAgICB0aGlzLmlzQnJhbmROYW1lID0gZW52aXJvbm1lbnQuYnJhbmROYW1lO1xyXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIGNvbXBvbmVudCBJRFxyXG4gICAgdGhpcy5jb21wb25lbnRJZCA9ICd0YWJsZS1ncmlkLScgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XHJcbiAgICB0aGlzLnRhYmxlTG9hZGVyID0gaXNGZWF0dXJlUHJlc2VudChlbnZpcm9ubWVudC5mZWF0dXJlTGlzdCwgJ3RhYmxlTG9hZGVyJyk7XHJcbiAgICB0aGlzLmJhc2VVUkwgPSBlbnZpcm9ubWVudC5iYXNlVVJMO1xyXG4gICAgdGhpcy5wYWdlU2l6ZSA9IGVudmlyb25tZW50LnJlY29yZHNQZXJQYWdlO1xyXG4gICAgdGhpcy5pdGVtc1BlclBhZ2UgPSBlbnZpcm9ubWVudC5yZWNvcmRzUGVyUGFnZTtcclxuICAgIHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtID0gdGhpcy5jcmVhdGVGaWx0ZXJlZERhdGVSYW5nZUZvcm0oKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBmaWx0ZXJlZCBkYXRlIHJhbmdlIGZvcm0gd2l0aCByZXF1aXJlZCBkYXRlIGZpZWxkc1xyXG4gICAqIEByZXR1cm4ge0Zvcm1Hcm91cH0gLSBUaGUgY3JlYXRlZCBmb3JtIGdyb3VwXHJcbiAgICovXHJcbiAgY3JlYXRlRmlsdGVyZWREYXRlUmFuZ2VGb3JtKCk6IEZvcm1Hcm91cCB7XHJcbiAgICByZXR1cm4gbmV3IEZvcm1Hcm91cCh7XHJcbiAgICAgIGRhdGU6IG5ldyBGb3JtQ29udHJvbCgnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdKSxcclxuICAgICAgc3RhcnREYXRlOiBuZXcgRm9ybUNvbnRyb2wobnVsbCwgVmFsaWRhdG9ycy5yZXF1aXJlZCksXHJcbiAgICAgIGVuZERhdGU6IG5ldyBGb3JtQ29udHJvbChudWxsLCBWYWxpZGF0b3JzLnJlcXVpcmVkKSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSBjb21wb25lbnQtc3BlY2lmaWMgc3RhdGUgdG8gcHJldmVudCBjb25mbGljdHMgYmV0d2VlbiBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVDb21wb25lbnRTdGF0ZSgpOiB2b2lkIHtcclxuICAgIC8vIFJlc2V0IGFsbCBjb21wb25lbnQtc3BlY2lmaWMgYXJyYXlzIGFuZCBvYmplY3RzXHJcbiAgICB0aGlzLmFwcG9pbnRtZW50cyA9IFtdO1xyXG4gICAgdGhpcy5wcmlvcml0eVZpc2l0cyA9IFtdO1xyXG4gICAgdGhpcy5hd2FpdGluZ1Zpc2l0cyA9IFtdO1xyXG4gICAgdGhpcy5pblByb2dyZXNzVmlzaXRzID0gW107XHJcbiAgICB0aGlzLmNvbXBsZXRlZFZpc2l0cyA9IFtdO1xyXG4gICAgdGhpcy5mb2xsb3dVcFZpc2l0cyA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyBSZXNldCBwYWdpbmF0aW9uIHN0YXRlXHJcbiAgICB0aGlzLnBhZ2VJbmRleCA9IDA7XHJcbiAgICB0aGlzLnJlY29yZHNGZXRjaGVkID0gMDtcclxuICAgIHRoaXMudG90YWxSZWNvcmRzID0gMDtcclxuICAgIFxyXG4gICAgLy8gUmVzZXQgZmlsdGVyIHN0YXRlXHJcbiAgICB0aGlzLmlzRmlsdGVyQXBwbGllZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pc0ZpbHRlckFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5maWx0ZXJlZFRvdGFsQ291bnQgPSAwO1xyXG4gICAgdGhpcy5wYWdpbmF0aW9uRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMub3JpZ2luYWxEYXRhID0gW107XHJcbiAgICB0aGlzLmZpbHRlcmVkRGF0YUFmdGVyRGF0ZSA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyBSZXNldCBkYXRhIGFycmF5cyBmb3IgdGhpcyBpbnN0YW5jZVxyXG4gICAgdGhpcy5kYXRhU291cmNlID0gW107XHJcbiAgICB0aGlzLmZpbHRlcmVkRGF0YVNvdXJjZSA9IFtdO1xyXG4gICAgdGhpcy5wYWdpbmF0ZWREYXRhU291cmNlID0gW107XHJcbiAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDtcclxuICAgIHRoaXMuc2VhcmNoVGVybSA9ICcnO1xyXG4gICAgdGhpcy5jdXJyZW50RGF0ZUZpbHRlciA9IG51bGw7XHJcbiAgIFxyXG4gICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09ICdBcHBvaW50bWVudCcpe1xyXG4gICAgICB0aGlzLnBhZ2VTaXplID0gVGFibGVHcmlkQ29tcG9uZW50LkFQUE9JTlRNRU5UX1BBR0VfU0laRTtcclxuICAgICAgdGhpcy5pdGVtc1BlclBhZ2UgPSBUYWJsZUdyaWRDb21wb25lbnQuQVBQT0lOVE1FTlRfUEFHRV9TSVpFO1xyXG4gICAgICBjb25zb2xlLmxvZygnaXRlbXNQZXJQYWdlJywgdGhpcy5pdGVtc1BlclBhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXBwbHkgY3VzdG9tIHBhZ2luYXRpb24gdG8gdGhlIGZpbHRlcmVkIGRhdGFcclxuICAgKi9cclxuICBwcml2YXRlIGFwcGx5UGFnaW5hdGlvbigpOiB2b2lkIHtcclxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSB0aGlzLmN1cnJlbnRQYWdlICogdGhpcy5pdGVtc1BlclBhZ2U7XHJcbiAgICBjb25zdCBlbmRJbmRleCA9IHN0YXJ0SW5kZXggKyB0aGlzLml0ZW1zUGVyUGFnZTtcclxuICAgIHRoaXMucGFnaW5hdGVkRGF0YVNvdXJjZSA9IHRoaXMuZmlsdGVyZWREYXRhU291cmNlLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGN1bGF0ZSBwYWdpbmF0aW9uIGluZGljZXNcclxuICAgKi9cclxuICBwcml2YXRlIGdldFBhZ2luYXRpb25JbmRpY2VzKCk6IHsgc3RhcnRJbmRleDogbnVtYmVyOyBlbmRJbmRleDogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3RhcnRJbmRleDogdGhpcy5jdXJyZW50UGFnZSAqIHRoaXMuaXRlbXNQZXJQYWdlLFxyXG4gICAgICBlbmRJbmRleDogKHRoaXMuY3VycmVudFBhZ2UgKyAxKSAqIHRoaXMuaXRlbXNQZXJQYWdlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdG9yZSBjdXJyZW50IHBhZ2UgZGF0YSBmcm9tIG9yaWdpbmFsIGRhdGFcclxuICAgKi9cclxuICBwcml2YXRlIHJlc3RvcmVDdXJyZW50UGFnZURhdGEoKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IHN0YXJ0SW5kZXgsIGVuZEluZGV4IH0gPSB0aGlzLmdldFBhZ2luYXRpb25JbmRpY2VzKCk7XHJcbiAgICB0aGlzLnBhZ2luYXRlZERhdGFTb3VyY2UgPSB0aGlzLm9yaWdpbmFsRGF0YS5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBcHBseSBzZWFyY2ggZmlsdGVyIHRvIHRoZSBjdXJyZW50IHBhZ2UgZGF0YSBvbmx5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhcHBseVNlYXJjaEZpbHRlcigpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5zZWFyY2hUZXJtLnRyaW0oKSkge1xyXG4gICAgICB0aGlzLnJlc3RvcmVDdXJyZW50UGFnZURhdGEoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaExvd2VyID0gdGhpcy5zZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIHRoaXMucGFnaW5hdGVkRGF0YVNvdXJjZSA9IHRoaXMucGFnaW5hdGVkRGF0YVNvdXJjZS5maWx0ZXIoKGl0ZW06IGFueSkgPT4gXHJcbiAgICAgICAgdGhpcy5tYXRjaGVzU2VhcmNoVGVybShpdGVtLCBzZWFyY2hMb3dlcilcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBmb3JtYXR0ZWQgZGF0ZSBmb3IgYW4gaXRlbSBiYXNlZCBvbiB0aGUgZGF0ZSBmaWVsZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0SXRlbURhdGUoaXRlbTogYW55LCBkYXRlRmllbGQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoZGF0ZUZpZWxkID09PSAnZm9sbG93VXAnKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5jb252ZXJ0VG9JU08oaXRlbS5mb2xsb3dVcCkpO1xyXG4gICAgfSBlbHNlIGlmIChkYXRlRmllbGQgPT09ICdzbG90SnNEYXRlJykge1xyXG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKGl0ZW1bZGF0ZUZpZWxkXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gaXRlbVtkYXRlRmllbGRdLmluY2x1ZGVzKCcsJykgPyB0aGlzLmZvcm1hdERhdGUoaXRlbVtkYXRlRmllbGRdKSA6IHRoaXMuY29udmVydFRvRGF0ZShpdGVtW2RhdGVGaWVsZF0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgaXRlbSBtYXRjaGVzIHNlYXJjaCB0ZXJtXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBtYXRjaGVzU2VhcmNoVGVybShpdGVtOiBhbnksIHNlYXJjaExvd2VyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyA9PT0gJ0FwcG9pbnRtZW50Jykge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIGl0ZW0/Lm9wZW5NcnNJZD8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcclxuICAgICAgICBpdGVtPy5wYXRpZW50TmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcclxuICAgICAgICBpdGVtPy5UTUhfcGF0aWVudF9pZD8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcilcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgaXRlbT8ucGF0aWVudD8uaWRlbnRpZmllcj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcclxuICAgICAgICBpdGVtPy5wYXRpZW50X25hbWU/LmdpdmVuX25hbWU/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XHJcbiAgICAgICAgaXRlbT8ucGF0aWVudF9uYW1lPy5mYW1pbHlfbmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcilcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFwcGx5IG11bHRpcGxlIGZpbHRlcnMgZWZmaWNpZW50bHlcclxuICAgKi9cclxuICBwcml2YXRlIGFwcGx5RmlsdGVycygpOiB2b2lkIHtcclxuICAgIC8vIENoZWNrIGlmIGFueSBmaWx0ZXJzIGFyZSBhY3RpdmVcclxuICAgIHRoaXMuaXNGaWx0ZXJBY3RpdmUgPSAhISh0aGlzLnNlYXJjaFRlcm0udHJpbSgpIHx8IHRoaXMuY3VycmVudERhdGVGaWx0ZXIpO1xyXG4gICAgdGhpcy5wYWdpbmF0aW9uRGlzYWJsZWQgPSB0aGlzLmlzRmlsdGVyQWN0aXZlO1xyXG4gICAgXHJcbiAgICAvLyBJZiBubyBzZWFyY2ggdGVybSBhbmQgbm8gZGF0ZSBmaWx0ZXIsIHJlc3RvcmUgY3VycmVudCBwYWdlIGRhdGFcclxuICAgIGlmICghdGhpcy5pc0ZpbHRlckFjdGl2ZSkge1xyXG4gICAgICB0aGlzLnJlc3RvcmVDdXJyZW50UGFnZURhdGEoKTtcclxuICAgICAgdGhpcy51cGRhdGVQYWdpbmF0b3JMZW5ndGgoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBbHdheXMgc3RhcnQgd2l0aCBjdXJyZW50IHBhZ2UgZGF0YSBmcm9tIG9yaWdpbmFsIGRhdGEgd2hlbiBhcHBseWluZyBmaWx0ZXJzXHJcbiAgICBjb25zdCB7IHN0YXJ0SW5kZXgsIGVuZEluZGV4IH0gPSB0aGlzLmdldFBhZ2luYXRpb25JbmRpY2VzKCk7XHJcbiAgICBsZXQgZmlsdGVyZWREYXRhID0gdGhpcy5vcmlnaW5hbERhdGEuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xyXG4gICAgXHJcbiAgICAvLyBBcHBseSBkYXRlIGZpbHRlclxyXG4gICAgaWYgKHRoaXMuY3VycmVudERhdGVGaWx0ZXIpIHtcclxuICAgICAgY29uc3QgeyBkYXRlRmllbGQsIGZpbHRlclZhbHVlLCBpc1JhbmdlLCBzdGFydERhdGUsIGVuZERhdGUgfSA9IHRoaXMuY3VycmVudERhdGVGaWx0ZXI7XHJcbiAgICAgIGZpbHRlcmVkRGF0YSA9IGZpbHRlcmVkRGF0YS5maWx0ZXIoKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1EYXRlID0gdGhpcy5nZXRJdGVtRGF0ZShpdGVtLCBkYXRlRmllbGQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc1JhbmdlICYmIHN0YXJ0RGF0ZSAmJiBlbmREYXRlKSB7XHJcbiAgICAgICAgICByZXR1cm4gaXRlbURhdGUgPj0gc3RhcnREYXRlICYmIGl0ZW1EYXRlIDw9IGVuZERhdGU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJWYWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGl0ZW1EYXRlID09PSBmaWx0ZXJWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBcHBseSBzZWFyY2ggZmlsdGVyXHJcbiAgICBpZiAodGhpcy5zZWFyY2hUZXJtLnRyaW0oKSkge1xyXG4gICAgICBjb25zdCBzZWFyY2hMb3dlciA9IHRoaXMuc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBmaWx0ZXJlZERhdGEgPSBmaWx0ZXJlZERhdGEuZmlsdGVyKChpdGVtOiBhbnkpID0+IHRoaXMubWF0Y2hlc1NlYXJjaFRlcm0oaXRlbSwgc2VhcmNoTG93ZXIpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIGZpbHRlcmVkIGNvdW50IGZvciBjdXJyZW50IHBhZ2VcclxuICAgIHRoaXMuZmlsdGVyZWRUb3RhbENvdW50ID0gZmlsdGVyZWREYXRhLmxlbmd0aDtcclxuICAgIHRoaXMucGFnaW5hdGVkRGF0YVNvdXJjZSA9IGZpbHRlcmVkRGF0YTtcclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIHBhZ2luYXRvciBsZW5ndGhcclxuICAgIHRoaXMudXBkYXRlUGFnaW5hdG9yTGVuZ3RoKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgcGFnaW5hdG9yIGxlbmd0aCBiYXNlZCBvbiBmaWx0ZXIgc3RhdGVcclxuICAgKi9cclxuICBwcml2YXRlIHVwZGF0ZVBhZ2luYXRvckxlbmd0aCgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnRlbXBQYWdpbmF0b3IpIHtcclxuICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLmxlbmd0aCA9IHRoaXMuaXNGaWx0ZXJBY3RpdmUgPyB0aGlzLmZpbHRlcmVkVG90YWxDb3VudCA6IHRoaXMudG90YWxSZWNvcmRzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgcGFnaW5hdGlvbiBzaG91bGQgYmUgZGlzYWJsZWRcclxuICAgKi9cclxuICBwdWJsaWMgaXNQYWdpbmF0aW9uRGlzYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5pc0ZpbHRlckFjdGl2ZSB8fCB0aGlzLnBhZ2luYXRpb25EaXNhYmxlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgY3VycmVudCB0b3RhbCBjb3VudCAoZmlsdGVyZWQgb3Igb3JpZ2luYWwpXHJcbiAgICovXHJcbiAgcHVibGljIGdldEN1cnJlbnRUb3RhbENvdW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5pc0ZpbHRlckFjdGl2ZSA/IHRoaXMuZmlsdGVyZWRUb3RhbENvdW50IDogdGhpcy50b3RhbFJlY29yZHM7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuaXNNQ0NVc2VyID0gISF0aGlzLnJvbGVzU2VydmljZS5nZXRSb2xlKCdPUkdBTklaQVRJT05BTDpNQ0MnKTtcclxuICAgIFxyXG4gICAgLy8gSW5pdGlhbGl6ZSBjb21wb25lbnQtc3BlY2lmaWMgc3RhdGVcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUNvbXBvbmVudFN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5hcHBDb25maWdTZXJ2aWNlLmxvYWQoKS50aGVuKCgpID0+IHtcclxuICAgIHRoaXMuZGlzcGxheWVkQ29sdW1ucyA9IHRoaXMuZGlzcGxheWVkQ29sdW1ucy5maWx0ZXIoY29sPT4oY29sIT09J2FnZScgfHwgdGhpcy5jaGVja1BhdGllbnRSZWdGaWVsZCgnQWdlJykpKTtcclxuICAgICAgT2JqZWN0LmtleXModGhpcy5hcHBDb25maWdTZXJ2aWNlLnBhdGllbnRfcmVnaXN0cmF0aW9uKS5mb3JFYWNoKG9iaj0+e1xyXG4gICAgICAgIHRoaXMucGF0aWVudFJlZ0ZpZWxkcy5wdXNoKC4uLnRoaXMuYXBwQ29uZmlnU2VydmljZS5wYXRpZW50X3JlZ2lzdHJhdGlvbltvYmpdLmZpbHRlcigoZTogeyBpc19lbmFibGVkOiBhbnk7IH0pPT5lLmlzX2VuYWJsZWQpLm1hcCgoZTogeyBuYW1lOiBhbnk7IH0pPT5lLm5hbWUpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMucHZzID0geyAuLi50aGlzLmFwcENvbmZpZ1NlcnZpY2UucGF0aWVudF92aXNpdF9zdW1tYXJ5IH07IFxyXG4gICAgICB0aGlzLnB2cy5hcHBvaW50bWVudF9idXR0b24gPSB0aGlzLnB2cy5hcHBvaW50bWVudF9idXR0b247XHJcbiAgICAgIHRoaXMuZGlzcGxheWVkQ29sdW1ucyA9IHRoaXMuZGlzcGxheWVkQ29sdW1ucy5maWx0ZXIoY29sPT4ge1xyXG4gICAgICAgIGlmKGNvbCA9PT0gJ2RyTmFtZScgJiYgIXRoaXMuaXNNQ0NVc2VyKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYoY29sID09PSAnYWdlJykgcmV0dXJuIHRoaXMuY2hlY2tQYXRpZW50UmVnRmllbGQoJ0FnZScpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmKCF0aGlzLnB2cy5hd2FpdGluZ192aXNpdHNfcGF0aWVudF90eXBlX2RlbWFyY2F0aW9uKXtcclxuICAgICAgICB0aGlzLmRpc3BsYXllZENvbHVtbnMgPSB0aGlzLmRpc3BsYXllZENvbHVtbnMuZmlsdGVyKGNvbD0+KGNvbCE9PSdwYXRpZW50X3R5cGUnKSk7XHJcbiAgICAgIH1cclxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGFwcCBjb25maWcnLCBlcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UudXNlKGdldENhY2hlRGF0YShmYWxzZSwgbGFuZ3VhZ2VzLlNFTEVDVEVEX0xBTkdVQUdFKSk7XHJcbiAgICBsZXQgcHJvdmlkZXIgPSBnZXRDYWNoZURhdGEodHJ1ZSwgZG9jdG9yRGV0YWlscy5QUk9WSURFUik7XHJcbiAgICBpZiAocHJvdmlkZXIpIHtcclxuICAgICAgaWYgKHByb3ZpZGVyLmF0dHJpYnV0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVjaWFsaXphdGlvbiA9IHRoaXMuZ2V0U3BlY2lhbGl6YXRpb24ocHJvdmlkZXIuYXR0cmlidXRlcyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiQXBwb2ludG1lbnRcIil7XHJcbiAgICAgICAgdGhpcy5nZXRBcHBvaW50bWVudHMoKTtcclxuICAgICAgfVxyXG4gICAgICBpZih0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyA9PT0gXCJBd2FpdGluZ1wiKXtcclxuICAgICAgICB0aGlzLmdldEF3YWl0aW5nVmlzaXRzKDEpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMucGx1Z2luQ29uZmlnT2JzPy5wbHVnaW5Db25maWdPYnNGbGFnID09PSBcIlByaW9yaXR5XCIpe1xyXG4gICAgICAgIHRoaXMuZ2V0UHJpb3JpdHlWaXNpdHMoMSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiSW5Qcm9ncmVzc1wiKXtcclxuICAgICAgICB0aGlzLmdldEluUHJvZ3Jlc3NWaXNpdHMoMSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiQ29tcGxldGVkXCIpe1xyXG4gICAgICAgIHRoaXMuZ2V0Q29tcGxldGVkVmlzaXRzKDEpO1xyXG4gICAgICB9aWYodGhpcy5wbHVnaW5Db25maWdPYnM/LnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT09IFwiRm9sbG93VXBcIil7XHJcbiAgICAgICAgdGhpcy5nZXRGb2xsb3dVcFZpc2l0KDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLm1heERhdGUgPSB0aGlzLnBsdWdpbkNvbmZpZ09icy5maWx0ZXJPYnMuZmlsdGVyRGF0ZU1heDtcclxuICAgIGlmKHRoaXMucGx1Z2luQ29uZmlnT2JzLmhhc093blByb3BlcnR5KFwicGFnZVNpemVPcHRpb25zXCIpKXtcclxuICAgICAgdGhpcy5wYWdlU2l6ZU9wdGlvbnMgPSB0aGlzLnBsdWdpbkNvbmZpZ09icy5wYWdlU2l6ZU9wdGlvbnNcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIER5bm1haWMgbGFiZWwgRGlzcGxheVxyXG4gICAqIEBwYXJhbSBjaGFuZ2VzIHBsdWdpbkNvbmZpZ09icyBcclxuICAgKi9cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAoY2hhbmdlc1tcInBsdWdpbkNvbmZpZ09ic1wiXSAmJiBjaGFuZ2VzW1wicGx1Z2luQ29uZmlnT2JzXCJdLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICB0aGlzLmRpc3BsYXllZEFwcG9pbnRtZW50Q29sdW1ucyA9IFsuLi5jaGFuZ2VzW1wicGx1Z2luQ29uZmlnT2JzXCJdLmN1cnJlbnRWYWx1ZT8udGFibGVDb2x1bW5zXVxyXG4gICAgICB0aGlzLmRpc3BsYXllZENvbHVtbnMgPSB0aGlzLmRpc3BsYXllZEFwcG9pbnRtZW50Q29sdW1ucy5tYXAoY29sdW1uID0+IGNvbHVtbi5rZXkpO1xyXG4gICAgfVxyXG4gICAgaWYoICghY2hhbmdlc1sncGx1Z2luQ29uZmlnT2JzJ10uZmlyc3RDaGFuZ2UpICYmIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcgPT0gXCJBcHBvaW50bWVudFwiICYmIGNoYW5nZXNbXCJwbHVnaW5Db25maWdPYnNcIl0uY3VycmVudFZhbHVlPy50YWJsZUhlYWRlciAhPT0gY2hhbmdlc1tcInBsdWdpbkNvbmZpZ09ic1wiXS5wcmV2aW91c1ZhbHVlPy50YWJsZUhlYWRlcil7XHJcbiAgICAgIHRoaXMucGFnZVNpemUgPSBUYWJsZUdyaWRDb21wb25lbnQuQVBQT0lOVE1FTlRfUEFHRV9TSVpFO1xyXG4gICAgICB0aGlzLml0ZW1zUGVyUGFnZSA9IFRhYmxlR3JpZENvbXBvbmVudC5BUFBPSU5UTUVOVF9QQUdFX1NJWkU7XHJcbiAgICAgIHRoaXMuZ2V0QXBwb2ludG1lbnRzKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwcmV2ID0gY2hhbmdlc1sncGx1Z2luQ29uZmlnT2JzJ10ucHJldmlvdXNWYWx1ZTtcclxuICAgIGNvbnN0IGN1cnIgPSBjaGFuZ2VzWydwbHVnaW5Db25maWdPYnMnXS5jdXJyZW50VmFsdWU7XHJcbiAgICBjb25zdCBwcmV2VHlwZSA9IHByZXY/LmZpbHRlcj8uZmlsdGVyVHlwZTtcclxuICAgIGNvbnN0IGN1cnJUeXBlID0gY3Vycj8uZmlsdGVyPy5maWx0ZXJUeXBlO1xyXG4gICAgaWYgKCBwcmV2VHlwZSAhPT0gY3VyclR5cGUpIHtcclxuICAgICAgdGhpcy5yZXNldERhdGVGb3JtKCk7IC8vIFJlc2V0IG9ubHkgd2hlbiB0eXBlIGhhcyBjaGFuZ2VkXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJlc2V0IHRoZSBkYXRlIGZvciBhcHBvaW50bWVudHMoVG9kYXkncyx1cGNvbWluZyxwZW5kaW5nIGFwcG9pbm1lbnRzKSAgZ1xyXG4gICovXHJcbiAgcmVzZXREYXRlRm9ybSgpIHtcclxuICAgIGlmICh0aGlzLmZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybSkge1xyXG4gICAgICB0aGlzLmZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5yZXNldCh7XHJcbiAgICAgICAgZGF0ZTogbnVsbCxcclxuICAgICAgICBzdGFydERhdGU6IG51bGwsXHJcbiAgICAgICAgZW5kRGF0ZTogbnVsbFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHRoaXMubW9kZSA9ICdkYXRlJzsgXHJcbiAgICBpZiAodGhpcy5zZWFyY2hFbGVtZW50ICYmIHRoaXMuc2VhcmNoRWxlbWVudC5uYXRpdmVFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoRWxlbWVudC5uYXRpdmVFbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgIH1cclxuICAgIHRoaXMuaXNGaWx0ZXJBcHBsaWVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmRhdGFTb3VyY2UuZmlsdGVyID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogUmV0cmVpdmUgdGhlIGNoaWVmIGNvbXBsYWludHMgZm9yIHRoZSB2aXNpdFxyXG4gICogQHBhcmFtIHtDdXN0b21WaXNpdE1vZGVsfSB2aXNpdCAtIFZpc2l0XHJcbiAgKiBAcmV0dXJuIHtzdHJpbmdbXX0gLSBDaGllZiBjb21wbGFpbnRzIGFycmF5XHJcbiAgKi9cclxuICBnZXRDaGVpZkNvbXBsYWludCh2aXNpdDogQ3VzdG9tVmlzaXRNb2RlbCk6IHN0cmluZ1tdIHtcclxuICAgIGxldCByZWNlbnQ6IHN0cmluZ1tdID0gW107XHJcbiAgICBjb25zdCBlbmNvdW50ZXJzID0gdmlzaXQuZW5jb3VudGVycztcclxuICAgIGVuY291bnRlcnMuZm9yRWFjaCgoZW5jb3VudGVyOiBDdXN0b21FbmNvdW50ZXJNb2RlbCkgPT4ge1xyXG4gICAgICBjb25zdCBkaXNwbGF5ID0gZW5jb3VudGVyLnR5cGU/Lm5hbWU7XHJcbiAgICAgIGlmIChkaXNwbGF5Lm1hdGNoKHZpc2l0VHlwZXMuQURVTFRJTklUSUFMKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IG9icyA9IGVuY291bnRlci5vYnM7XHJcbiAgICAgICAgb2JzLmZvckVhY2goKGN1cnJlbnRPYnM6IEN1c3RvbU9ic01vZGVsKSA9PiB7XHJcbiAgICAgICAgICBpZiAoY3VycmVudE9icy5jb25jZXB0X2lkID09IFRhYmxlR3JpZENvbXBvbmVudC5DSElFRl9DT01QTEFJTlRfQ09OQ0VQVF9JRCkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29tcGxhaW50ID0gdGhpcy52aXNpdFNlcnZpY2UuZ2V0RGF0YTIoY3VycmVudE9icyk/LnZhbHVlX3RleHQucmVwbGFjZShuZXcgUmVnRXhwKCfilronLCAnZycpLCAnJykuc3BsaXQoJzxiPicpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGN1cnJlbnRDb21wbGFpbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBjb25zdCBvYnMxID0gY3VycmVudENvbXBsYWludFtpXS5zcGxpdCgnPCcpO1xyXG4gICAgICAgICAgICAgIGlmICghb2JzMVswXS5tYXRjaCh2aXNpdFR5cGVzLkFTU09DSUFURURfU1lNUFRPTVMpKSB7XHJcbiAgICAgICAgICAgICAgICByZWNlbnQucHVzaChvYnMxWzBdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVjZW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBDaGVjayBob3cgb2xkIHRoZSBkYXRlIGlzIGZyb20gbm93XHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YSAtIERhdGUgaW4gc3RyaW5nIGZvcm1hdFxyXG4gICogQHJldHVybiB7c3RyaW5nfSAtIFJldHVybnMgaG93IG9sZCB0aGUgZGF0ZSBpcyBmcm9tIG5vd1xyXG4gICovXHJcbiAgY2hlY2tJZkRhdGVPbGRUaGFuT25lRGF5KGRhdGE6IHN0cmluZykge1xyXG4gICAgbGV0IGhvdXJzID0gbW9tZW50KGRhdGEpLmRpZmYobW9tZW50KCksICdob3VycycpO1xyXG4gICAgbGV0IG1pbnV0ZXMgPSBtb21lbnQoZGF0YSkuZGlmZihtb21lbnQoKSwgJ21pbnV0ZXMnKTtcclxuICAgIGlmKGhvdXJzID4gMjQpIHtcclxuICAgICAgcmV0dXJuIG1vbWVudChkYXRhKS5mb3JtYXQoJ0REIE1NTSwgWVlZWSBoaDptbSBBJyk7XHJcbiAgICB9O1xyXG4gICAgaWYgKGhvdXJzIDwgMSkge1xyXG4gICAgICBpZihtaW51dGVzIDwgMCkgcmV0dXJuIGBEdWUgOiAke21vbWVudChkYXRhKS5mb3JtYXQoJ0REIE1NTSwgWVlZWSBoaDptbSBBJyl9YDtcclxuICAgICAgcmV0dXJuIGAke21pbnV0ZXN9IG1pbnV0ZXNgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke2hvdXJzfSBocnNgO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBSZXNjaGVkdWxlIGFwcG9pbnRtZW50XHJcbiAgKiBAcGFyYW0ge0FwcG9pbnRtZW50TW9kZWx9IGFwcG9pbnRtZW50IC0gQXBwb2ludG1lbnQgdG8gYmUgcmVzY2hlZHVsZWRcclxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNWYWxpZGF0aW9uUmVxdWlyZWQgLSBJZiB0cnVlLCB2YWxpZGF0aW9uIGlzIHJlcXVpcmVkXHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgcmVzY2hlZHVsZShhcHBvaW50bWVudDogQXBwb2ludG1lbnRNb2RlbCwgaXNWYWxpZGF0aW9uUmVxdWlyZWQ6IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IGxlbiA9IGFwcG9pbnRtZW50LnZpc2l0LmVuY291bnRlcnMuZmlsdGVyKChlOiBDdXN0b21FbmNvdW50ZXJNb2RlbCkgPT4ge1xyXG4gICAgICByZXR1cm4gKGUudHlwZS5uYW1lID09IHZpc2l0VHlwZXMuUEFUSUVOVF9FWElUX1NVUlZFWSB8fCBlLnR5cGUubmFtZSA9PSB2aXNpdFR5cGVzLlZJU0lUX0NPTVBMRVRFKTtcclxuICAgIH0pLmxlbmd0aDtcclxuICAgIGNvbnN0IGlzQ29tcGxldGVkID0gQm9vbGVhbihsZW4pO1xyXG4gICAgaWYgKGlzQ29tcGxldGVkKSB7XHJcbiAgICAgIHRoaXMudG9hc3RyLmVycm9yKHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KFwiVmlzaXQgaXMgYWxyZWFkeSBjb21wbGV0ZWQsIGl0IGNhbid0IGJlIHJlc2NoZWR1bGVkLlwiKSwgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1Jlc2NoZWR1bGluZyBmYWlsZWQhJykpO1xyXG4gICAgfSBlbHNlIGlmKGFwcG9pbnRtZW50LnZpc2l0U3RhdHVzID09ICdWaXNpdCBJbiBQcm9ncmVzcycgJiYgaXNWYWxpZGF0aW9uUmVxdWlyZWQpIHtcclxuICAgICAgdGhpcy50b2FzdHIuZXJyb3IodGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXCJWaXNpdCBpcyBpbiBwcm9ncmVzcywgaXQgY2FuJ3QgYmUgcmVzY2hlZHVsZWQuXCIpLCB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnUmVzY2hlZHVsaW5nIGZhaWxlZCEnKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvcmVTZXJ2aWNlLm9wZW5SZXNjaGVkdWxlQXBwb2ludG1lbnRNb2RhbChhcHBvaW50bWVudCkuc3Vic2NyaWJlKChyZXM6IFJlc2NoZWR1bGVBcHBvaW50bWVudE1vZGFsUmVzcG9uc2VNb2RlbCkgPT4ge1xyXG4gICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgIGxldCBuZXdTbG90ID0gcmVzO1xyXG4gICAgICAgICAgdGhpcy5jb3JlU2VydmljZS5vcGVuUmVzY2hlZHVsZUFwcG9pbnRtZW50Q29uZmlybU1vZGFsKHsgYXBwb2ludG1lbnQsIG5ld1Nsb3QgfSkuc3Vic2NyaWJlKChyZXN1bHQ6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgIGFwcG9pbnRtZW50LmFwcG9pbnRtZW50SWQgPSBhcHBvaW50bWVudC5pZDtcclxuICAgICAgICAgICAgICBhcHBvaW50bWVudC5zbG90RGF0ZSA9IG1vbWVudChuZXdTbG90LmRhdGUsIFwiWVlZWS1NTS1ERFwiKS5mb3JtYXQoJ0REL01NL1lZWVknKTtcclxuICAgICAgICAgICAgICBhcHBvaW50bWVudC5zbG90VGltZSA9IG5ld1Nsb3Quc2xvdDtcclxuICAgICAgICAgICAgICB0aGlzLmFwcG9pbnRtZW50U2VydmljZS5yZXNjaGVkdWxlQXBwb2ludG1lbnQoYXBwb2ludG1lbnQpLnN1YnNjcmliZSgocmVzOiBBcGlSZXNwb25zZU1vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLm1pbmRtYXBTZXJ2aWNlLm5vdGlmeUh3Rm9yUmVzY2hlZHVsZUFwcG9pbnRtZW50KGFwcG9pbnRtZW50KTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5nZXRBcHBvaW50bWVudHMoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50b2FzdHIuc3VjY2Vzcyh0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChcIlRoZSBhcHBvaW50bWVudCBoYXMgYmVlbiByZXNjaGVkdWxlZCBzdWNjZXNzZnVsbHkhXCIpLCB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnUmVzY2hlZHVsaW5nIHN1Y2Nlc3NmdWwhJykpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50b2FzdHIuc3VjY2VzcyhtZXNzYWdlLCB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnUmVzY2hlZHVsaW5nIGZhaWxlZCEnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIENhbmNlbCBhcHBvaW50bWVudFxyXG4gICogQHBhcmFtIHtBcHBvaW50bWVudE1vZGVsfSBhcHBvaW50bWVudCAtIEFwcG9pbnRtZW50IHRvIGJlIHJlc2NoZWR1bGVkXHJcbiAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmFsaWRhdGlvblJlcXVpcmVkIC0gSWYgdHJ1ZSwgdmFsaWRhdGlvbiBpcyByZXF1aXJlZFxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGNhbmNlbChhcHBvaW50bWVudDogQXBwb2ludG1lbnRNb2RlbCwgaXNWYWxpZGF0aW9uUmVxdWlyZWQ6IGJvb2xlYW4pIHtcclxuICAgIGlmIChhcHBvaW50bWVudC52aXNpdFN0YXR1cyA9PSAnVmlzaXQgSW4gUHJvZ3Jlc3MnICYmIGlzVmFsaWRhdGlvblJlcXVpcmVkKSB7XHJcbiAgICAgIHRoaXMudG9hc3RyLmVycm9yKHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KFwiVmlzaXQgaXMgaW4gcHJvZ3Jlc3MsIGl0IGNhbid0IGJlIGNhbmNlbGxlZC5cIiksIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdDYW5jZWxpbmcgZmFpbGVkIScpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb3JlU2VydmljZS5vcGVuQ29uZmlybUNhbmNlbEFwcG9pbnRtZW50TW9kYWwoYXBwb2ludG1lbnQpLnN1YnNjcmliZSgocmVzOiBib29sZWFuKSA9PiB7XHJcbiAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICB0aGlzLnRvYXN0ci5zdWNjZXNzKHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdUaGUgQXBwb2ludG1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGNhbmNlbGVkLicpLHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdDYW5jZWxpbmcgc3VjY2Vzc2Z1bCcpKTtcclxuICAgICAgICB0aGlzLmdldEFwcG9pbnRtZW50cygpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IHVzZXIgdXVpZCBmcm9tIGxvY2Fsc3RvcmFnZSB1c2VyXHJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVXNlciB1dWlkXHJcbiAgKi9cclxuICBnZXQgdXNlcklkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gZ2V0Q2FjaGVEYXRhKHRydWUsIGRvY3RvckRldGFpbHMuVVNFUikudXVpZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogQXBwbHkgZmlsdGVyIG9uIGEgZGF0YXNvdXJjZVxyXG4gICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBJbnB1dCdzIGNoYW5nZSBldmVudFxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGFwcGx5RmlsdGVyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgdGhpcy5zZWFyY2hUZXJtID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZS50cmltKCk7XHJcbiAgICB0aGlzLmlzRmlsdGVyQXBwbGllZCA9IHRoaXMuc2VhcmNoVGVybS5sZW5ndGggPiAwO1xyXG4gICAgdGhpcy5hcHBseUZpbHRlcnMoKTtcclxuICB9XHJcblxyXG4gIC8vIENhbGwgdGhpcyBvbmNlIGFmdGVyIGxvYWRpbmcgYXBwb2ludG1lbnRzXHJcbiAgc3RvcmVPcmlnaW5hbERhdGEob3JpZ2luYWxEYXRhPzogYW55W10pIHtcclxuICAgIHRoaXMub3JpZ2luYWxEYXRhID0gb3JpZ2luYWxEYXRhPyBbLi4ub3JpZ2luYWxEYXRhXTogWy4uLnRoaXMuZGF0YVNvdXJjZV07IC8vIEJhY2t1cCBmdWxsIGRhdGFcclxuICAgIHRoaXMuYXBwbHlGaWx0ZXJzKCk7IC8vIEFwcGx5IGFueSBleGlzdGluZyBmaWx0ZXJzXHJcbiAgfVxyXG4gIC8qKlxyXG4gICogQ2xlYXIgZmlsdGVyIGZyb20gY3VycmVudCBwYWdlIGRhdGFcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICBjbGVhckZpbHRlcigpOiB2b2lkIHtcclxuICAgIHRoaXMuc2VhcmNoVGVybSA9ICcnO1xyXG4gICAgdGhpcy5jdXJyZW50RGF0ZUZpbHRlciA9IG51bGw7XHJcbiAgICB0aGlzLmlzRmlsdGVyQXBwbGllZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pc0ZpbHRlckFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5maWx0ZXJlZFRvdGFsQ291bnQgPSAwO1xyXG4gICAgdGhpcy5wYWdpbmF0aW9uRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuc2VhcmNoRWxlbWVudD8ubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICB0aGlzLnNlYXJjaEVsZW1lbnQubmF0aXZlRWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLnJlc2V0KHtcclxuICAgICAgZGF0ZTogbnVsbCxcclxuICAgICAgc3RhcnREYXRlOiBudWxsLFxyXG4gICAgICBlbmREYXRlOiBudWxsXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy5tb2RlID0gJ2RhdGUnO1xyXG4gICAgdGhpcy5yZXN0b3JlQ3VycmVudFBhZ2VEYXRhKCk7XHJcbiAgICB0aGlzLnVwZGF0ZVBhZ2luYXRvckxlbmd0aCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIHRoZSBmaWVsZCBpcyBpbiBwYXRpZW50IHJlZ2lzdHJhdGlvbiBmaWVsZHNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lIC0gVGhlIGZpZWxkIG5hbWVcclxuICAgKiBAcmV0dXJuIHtib29sZWFufSAtIFRydWUgaWYgcHJlc2VudCwgZWxzZSBmYWxzZVxyXG4gICAqL1xyXG4gIGNoZWNrUGF0aWVudFJlZ0ZpZWxkKGZpZWxkTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5wYXRpZW50UmVnRmllbGRzLmluZGV4T2YoZmllbGROYW1lKSAhPT0gLTE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJldHVybnMgdGhlIFdoYXRzQXBwIGxpbmsgZm9yIGEgZ2l2ZW4gdGVsZXBob25lIG51bWJlclxyXG4gICogQHBhcmFtIHtzdHJpbmd9IHRlbGVwaG9uZU51bWJlciAtIFRoZSB0ZWxlcGhvbmUgbnVtYmVyIHRvIGdlbmVyYXRlIHRoZSBsaW5rIGZvclxyXG4gICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSBXaGF0c0FwcCBsaW5rXHJcbiAgKi9cclxuICBnZXRXaGF0c0FwcExpbmsodGVsZXBob25lTnVtYmVyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMudmlzaXRTZXJ2aWNlLmdldFdoYXRzYXBwTGluayh0ZWxlcGhvbmVOdW1iZXIpO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgdGhlIHRlbGVwaG9uZSBudW1iZXIgZnJvbSB0aGUgcGVyc29uJ3MgYXR0cmlidXRlc1xyXG4gICAqIEBwYXJhbSB7QXBwb2ludG1lbnRNb2RlbFsndmlzaXQnXVsncGVyc29uJ119IHBlcnNvbiAtIFRoZSBwZXJzb24gb2JqZWN0IGNvbnRhaW5pbmcgYXR0cmlidXRlc1xyXG4gICAqIEByZXR1cm4ge3N0cmluZyB8IHVuZGVmaW5lZH0gLSBUaGUgcGVyc29uJ3MgdGVsZXBob25lIG51bWJlciBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kXHJcbiAgICovXHJcbiAgZ2V0VGVsZXBob25lTnVtYmVyKHBlcnNvbjogQXBwb2ludG1lbnRNb2RlbFsndmlzaXQnXVsncGVyc29uJ10pIHtcclxuICAgIHJldHVybiBwZXJzb24/LnBlcnNvbl9hdHRyaWJ1dGUuZmluZCgodjogeyBwZXJzb25fYXR0cmlidXRlX3R5cGVfaWQ6IG51bWJlcjsgfSkgPT4gdi5wZXJzb25fYXR0cmlidXRlX3R5cGVfaWQgPT0gVGFibGVHcmlkQ29tcG9uZW50LlRFTEVQSE9ORV9BVFRSSUJVVEVfSUQpPy52YWx1ZTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDbG9zZXMgdGhlIG1lbnUgaWYgaXQncyBvcGVuXHJcbiAgICovXHJcbiAgY2xvc2VNZW51KCkge1xyXG4gICAgaWYgKHRoaXMubWVudVRyaWdnZXIpIHtcclxuICAgICAgdGhpcy5tZW51VHJpZ2dlci5jbG9zZU1lbnUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBtb2RlIGZvciB0aGUgY29tcG9uZW50IChlaXRoZXIgJ2RhdGUnIG9yICdyYW5nZScpXHJcbiAgICogQHBhcmFtIHsnZGF0ZScgfCAncmFuZ2UnfSBtb2RlIC0gVGhlIG1vZGUgdG8gc2V0XHJcbiAgICovXHJcbiAgc2V0TW9kZShtb2RlOiAnZGF0ZScgfCAncmFuZ2UnKSB7XHJcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgLy8gQ2xlYXIgZXJyb3IgbWVzc2FnZXMgd2hlbiBzd2l0Y2hpbmcgbW9kZXNcclxuICAgIHRoaXMuZGF0ZUVycm9yTWVzc2FnZSA9ICcnO1xyXG4gICAgdGhpcy5zdGFydERhdGVFcnJvck1lc3NhZ2UgPSAnJztcclxuICAgIHRoaXMuZW5kRGF0ZUVycm9yTWVzc2FnZSA9ICcnO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdHMgYSBkYXRlIGludG8gJ1lZWVktTU0tREQnIGZvcm1hdFxyXG4gICAqIEBwYXJhbSB7YW55fSBkYXRlIC0gVGhlIGRhdGUgdG8gZm9ybWF0XHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSBmb3JtYXR0ZWQgZGF0ZVxyXG4gICAqL1xyXG4gIGZvcm1hdERhdGUoZGF0ZTogYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGxvY2FsRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgY29uc3QgeWVhciA9IGxvY2FsRGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcobG9jYWxEYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGxvY2FsRGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0cyBhIHJlbGF0aXZlIHRpbWUgc3RyaW5nIChlLmcuLCBcIjIgaG91cnNcIiwgXCIxIGRheVwiKSB0byBhIGRhdGUgc3RyaW5nXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVGltZSAtIFRoZSByZWxhdGl2ZSB0aW1lIHN0cmluZ1xyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBUaGUgcmVzdWx0aW5nIGRhdGUgaW4gJ1lZWVktTU0tREQnIGZvcm1hdFxyXG4gICAqIEB0aHJvd3Mge0Vycm9yfSAtIFRocm93cyBlcnJvciBmb3IgaW52YWxpZCB0aW1lIHVuaXRzXHJcbiAgICovXHJcbiAgY29udmVydFRvRGF0ZShyZWxhdGl2ZVRpbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgW3ZhbHVlLCB1bml0XSA9IHJlbGF0aXZlVGltZS5zcGxpdCgnICcpO1xyXG4gICAgY29uc3QgYW1vdW50ID0gcGFyc2VJbnQodmFsdWUsIDEwKTsgICAgXHJcbiAgICBcclxuICAgIGlmIChbJ2hvdXInLCAnaG91cnMnXS5pbmNsdWRlcyh1bml0LnRvTG93ZXJDYXNlKCkpKSBub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgLSBhbW91bnQpO1xyXG4gICAgZWxzZSBpZiAoWydtaW51dGUnLCAnbWludXRlcyddLmluY2x1ZGVzKHVuaXQudG9Mb3dlckNhc2UoKSkpIG5vdy5zZXRNaW51dGVzKG5vdy5nZXRNaW51dGVzKCkgLSBhbW91bnQpO1xyXG4gICAgZWxzZSBpZiAoWydkYXknLCAnZGF5cyddLmluY2x1ZGVzKHVuaXQudG9Mb3dlckNhc2UoKSkpIG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBhbW91bnQpO1xyXG4gICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGltZSB1bml0LiBPbmx5IFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIG9yIFwiZGF5c1wiIGFyZSBzdXBwb3J0ZWQuJyk7XHJcblxyXG4gICAgcmV0dXJuIG5vdy50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0cyBhIGZvbGxvdy11cCBkYXRlIHN0cmluZyB0byBJU08gZm9ybWF0XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvbGxvd1VwIC0gVGhlIGZvbGxvdy11cCBkYXRlIHN0cmluZ1xyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBUaGUgZm9sbG93LXVwIGRhdGUgaW4gSVNPIHN0cmluZyBmb3JtYXRcclxuICAgKi9cclxuICBjb252ZXJ0VG9JU08oZm9sbG93VXA6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZm9sbG93VXApO1xyXG4gICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpKTtcclxuICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEFwcGxpZXMgZGF0ZSBvciByYW5nZSBmaWx0ZXIgdG8gdGhlIGRhdGEgc291cmNlIGJhc2VkIG9uIHNlbGVjdGVkIGRhdGUocylcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZUZpZWxkIC0gVGhlIGZpZWxkIG5hbWUgZm9yIHRoZSBkYXRlIHRvIGZpbHRlclxyXG4gICAqL1xyXG4gIGFwcGx5RGF0ZU9yUmFuZ2VGaWx0ZXIoZGF0ZUZpZWxkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLmdldCgnZGF0ZScpPy52YWx1ZTtcclxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLmdldCgnc3RhcnREYXRlJyk/LnZhbHVlO1xyXG4gICAgY29uc3QgZW5kRGF0ZSA9IHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLmdldCgnZW5kRGF0ZScpPy52YWx1ZTtcclxuXHJcbiAgICAvLyBDbGVhciBwcmV2aW91cyBlcnJvciBtZXNzYWdlc1xyXG4gICAgdGhpcy5kYXRlRXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICB0aGlzLnN0YXJ0RGF0ZUVycm9yTWVzc2FnZSA9ICcnO1xyXG4gICAgdGhpcy5lbmREYXRlRXJyb3JNZXNzYWdlID0gJyc7XHJcblxyXG4gICAgLy8gVmFsaWRhdGlvbiBmb3IgZGF0ZSBtb2RlXHJcbiAgICBpZiAodGhpcy5tb2RlID09PSAnZGF0ZScgJiYgIXNlbGVjdGVkRGF0ZSkge1xyXG4gICAgICB0aGlzLmRhdGVFcnJvck1lc3NhZ2UgPSB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnUGxlYXNlIHNlbGVjdCBhIGRhdGUnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRpb24gZm9yIHJhbmdlIG1vZGVcclxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdyYW5nZScpIHtcclxuICAgICAgbGV0IGhhc0Vycm9yID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAoIXN0YXJ0RGF0ZSkge1xyXG4gICAgICAgIHRoaXMuc3RhcnREYXRlRXJyb3JNZXNzYWdlID0gdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1BsZWFzZSBzZWxlY3Qgc3RhcnQgZGF0ZScpO1xyXG4gICAgICAgIGhhc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWVuZERhdGUpIHtcclxuICAgICAgICB0aGlzLmVuZERhdGVFcnJvck1lc3NhZ2UgPSB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnUGxlYXNlIHNlbGVjdCBlbmQgZGF0ZScpO1xyXG4gICAgICAgIGhhc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGhhc0Vycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNlbGVjdGVkRGF0ZSkge1xyXG4gICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gdGhpcy5mb3JtYXREYXRlKHNlbGVjdGVkRGF0ZSk7XHJcbiAgICAgIHRoaXMuZGF0ZUZpbHRlciA9IHRoaXMuZm9ybWF0RGF0ZShzZWxlY3RlZERhdGUpO1xyXG4gICAgICB0aGlzLmN1cnJlbnREYXRlRmlsdGVyID0ge1xyXG4gICAgICAgIGRhdGVGaWVsZCxcclxuICAgICAgICBmaWx0ZXJWYWx1ZTogZm9ybWF0dGVkRGF0ZSxcclxuICAgICAgICBpc1JhbmdlOiBmYWxzZVxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmIChzdGFydERhdGUgJiYgZW5kRGF0ZSkge1xyXG4gICAgICBjb25zdCBmb3JtYXR0ZWRTdGFydERhdGUgPSB0aGlzLmZvcm1hdERhdGUoc3RhcnREYXRlKTtcclxuICAgICAgY29uc3QgZm9ybWF0dGVkRW5kRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShlbmREYXRlKTtcclxuICAgICAgdGhpcy5kYXRlRmlsdGVyID0gYCR7dGhpcy5mb3JtYXREYXRlKHN0YXJ0RGF0ZSl9OiR7dGhpcy5mb3JtYXREYXRlKGVuZERhdGUpfWA7XHJcbiAgICAgIHRoaXMuY3VycmVudERhdGVGaWx0ZXIgPSB7XHJcbiAgICAgICAgZGF0ZUZpZWxkLFxyXG4gICAgICAgIHN0YXJ0RGF0ZTogZm9ybWF0dGVkU3RhcnREYXRlLFxyXG4gICAgICAgIGVuZERhdGU6IGZvcm1hdHRlZEVuZERhdGUsXHJcbiAgICAgICAgaXNSYW5nZTogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kYXRlRmlsdGVyID0gJyc7XHJcbiAgICAgIHRoaXMuY3VycmVudERhdGVGaWx0ZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZGF0ZUZpZWxkID0gZGF0ZUZpZWxkO1xyXG4gICAgdGhpcy5hcHBseUZpbHRlcnMoKTtcclxuICAgIHRoaXMuY2xvc2VNZW51KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNldHMgdGhlIGRhdGUgZmlsdGVyIGZvcm0gYW5kIGNsZWFycyB0aGUgZGF0YSBzb3VyY2UgZmlsdGVyXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBmbGFnIC0gSWYgdHJ1ZSwgZG9lc24ndCBjbG9zZSB0aGUgbWVudVxyXG4gICAqL1xyXG4gIHJlc2V0RGF0ZShmbGFnOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIHRoaXMuZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLmN1cnJlbnREYXRlRmlsdGVyID0gbnVsbDtcclxuICAgIC8vIENsZWFyIGVycm9yIG1lc3NhZ2VzXHJcbiAgICB0aGlzLmRhdGVFcnJvck1lc3NhZ2UgPSAnJztcclxuICAgIHRoaXMuc3RhcnREYXRlRXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICB0aGlzLmVuZERhdGVFcnJvck1lc3NhZ2UgPSAnJztcclxuICAgIHRoaXMuYXBwbHlGaWx0ZXJzKCk7XHJcbiAgICBpZiAoIWZsYWcpIHtcclxuICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgYSBzcGVjaWZpYyBhdHRyaWJ1dGUgZGF0YSBmcm9tIHRoZSBwZXJzb24ncyBhdHRyaWJ1dGVzXHJcbiAgICogQHBhcmFtIHthbnl9IGRhdGEgLSBUaGUgZGF0YSBvYmplY3QgY29udGFpbmluZyBwZXJzb24gYXR0cmlidXRlc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0byByZXRyaWV2ZVxyXG4gICAqIEByZXR1cm4ge09iamVjdCB8IG51bGx9IC0gVGhlIGF0dHJpYnV0ZSBuYW1lIGFuZCB2YWx1ZSwgb3IgbnVsbCBpZiBub3QgZm91bmRcclxuICAgKi9cclxuICBnZXRBdHRyaWJ1dGVEYXRhKGRhdGE6IGFueSwgYXR0cmlidXRlTmFtZTogc3RyaW5nKTogeyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfSB8IG51bGwge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YS5wZXJzb25fYXR0cmlidXRlKSkge1xyXG4gICAgICBjb25zdCBhdHRyaWJ1dGUgPSBkYXRhLnBlcnNvbl9hdHRyaWJ1dGUuZmluZChcclxuICAgICAgICAoYXR0cjogYW55KSA9PiBhdHRyLnBlcnNvbl9hdHRyaWJ1dGVfdHlwZT8ubmFtZSA9PT0gYXR0cmlidXRlTmFtZVxyXG4gICAgICApO1xyXG4gICAgICBpZiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5hbWU6IGF0dHJpYnV0ZS5wZXJzb25fYXR0cmlidXRlX3R5cGUubmFtZSxcclxuICAgICAgICAgIHZhbHVlOiBhdHRyaWJ1dGUudmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IGJvb2tlZCBhcHBvaW50bWVudHMgZm9yIGEgbG9nZ2VkLWluIGRvY3RvciBpbiBhIGN1cnJlbnQgeWVhclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldEFwcG9pbnRtZW50cygpOiB2b2lkIHtcclxuICAgIHRoaXMubmd4TG9hZGVyLnN0YXJ0TG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpOyAvLyBTdGFydCBzZWN0aW9uIGxvYWRlclxyXG4gICAgdGhpcy5hcHBvaW50bWVudHMgPSBbXTtcclxuICAgIGxldCBmcm9tRGF0ZSA9IG1vbWVudCgpLnN0YXJ0T2YoJ3llYXInKS5mb3JtYXQoJ0REL01NL1lZWVknKTtcclxuICAgIGxldCB0b0RhdGUgPSBtb21lbnQoKS5lbmRPZigneWVhcicpLmZvcm1hdCgnREQvTU0vWVlZWScpO1xyXG4gICAgbGV0IHBlbmRpbmdfdmlzaXRzID0gdGhpcy5wbHVnaW5Db25maWdPYnMuZmlsdGVyPy5oYXNPd25Qcm9wZXJ0eShcInBlbmRpbmdfdmlzaXRzXCIpICA/IHRoaXMucGx1Z2luQ29uZmlnT2JzLmZpbHRlcj8ucGVuZGluZ192aXNpdHMgOiBudWxsO1xyXG4gICAgaWYodGhpcy5wbHVnaW5Db25maWdPYnM/LmZpbHRlcil7XHJcbiAgICAgIGZyb21EYXRlID0gdGhpcy5wbHVnaW5Db25maWdPYnM/LmZpbHRlcj8uZnJvbURhdGVcclxuICAgICAgdG9EYXRlID0gdGhpcy5wbHVnaW5Db25maWdPYnM/LmZpbHRlcj8udG9EYXRlXHJcbiAgICB9XHJcbiAgICB0aGlzLmFwcG9pbnRtZW50U2VydmljZS5nZXRVc2VyU2xvdHMoZ2V0Q2FjaGVEYXRhKHRydWUsIGRvY3RvckRldGFpbHMuVVNFUikudXVpZCwgZnJvbURhdGUsIHRvRGF0ZSwgdGhpcy5pc01DQ1VzZXIgPyB0aGlzLnNwZWNpYWxpemF0aW9uIDogbnVsbCwgcGVuZGluZ192aXNpdHMpXHJcbiAgICAgIC5zdWJzY3JpYmUoe1xyXG4gICAgICAgIG5leHQ6IChyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHsgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy50b3RhbFJlY29yZHMgPSAocmVzLmRhdGE/Lmxlbmd0aCA+IDEpID8gcmVzLmRhdGE/Lmxlbmd0aCAtIDEgOiByZXMuZGF0YT8ubGVuZ3RoIHx8IDA7XHJcbiAgICAgICAgICB0aGlzLmVtaXRWaXNpdHNDb3VudCh0aGlzLnRvdGFsUmVjb3Jkcyk7XHJcbiAgICAgICAgICBsZXQgYXBwb2ludG1lbnRzZGF0YSA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgYXBwb2ludG1lbnRzZGF0YS5mb3JFYWNoKChhcHBvaW50bWVudDogQXBwb2ludG1lbnRNb2RlbCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXBwb2ludG1lbnQuc3RhdHVzID09ICdib29rZWQnICYmIChhcHBvaW50bWVudC52aXNpdFN0YXR1cyA9PSAnQXdhaXRpbmcgQ29uc3VsdCd8fGFwcG9pbnRtZW50LnZpc2l0U3RhdHVzID09ICdWaXNpdCBJbiBQcm9ncmVzcycpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGFwcG9pbnRtZW50LnZpc2l0KSB7XHJcbiAgICAgICAgICAgICAgICBhcHBvaW50bWVudC5jaGVpZl9jb21wbGFpbnQgPSB0aGlzLmdldENoZWlmQ29tcGxhaW50KGFwcG9pbnRtZW50LnZpc2l0KTtcclxuICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50LnN0YXJ0c19pbiA9IGNoZWNrSWZEYXRlT2xkVGhhbk9uZURheShhcHBvaW50bWVudC5zbG90SnNEYXRlKTtcclxuICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50LnRlbGVwaG9uZSA9IHRoaXMuZ2V0VGVsZXBob25lTnVtYmVyKGFwcG9pbnRtZW50Py52aXNpdD8ucGVyc29uKTtcclxuICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50LlRNSF9wYXRpZW50X2lkID0gdGhpcy5nZXRBdHRyaWJ1dGVEYXRhKGFwcG9pbnRtZW50LnZpc2l0LCBcIlRNSCBDYXNlIE51bWJlclwiKT8udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBhcHBvaW50bWVudC51dWlkID0gYXBwb2ludG1lbnQudmlzaXRVdWlkO1xyXG4gICAgICAgICAgICAgICAgYXBwb2ludG1lbnQubG9jYXRpb24gPSBhcHBvaW50bWVudD8udmlzaXQ/LmxvY2F0aW9uPy5uYW1lO1xyXG4gICAgICAgICAgICAgICAgYXBwb2ludG1lbnQuYWdlID0gYXBwb2ludG1lbnQ/LnBhdGllbnRBZ2UgKyAnICcgKyB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgneScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBvaW50bWVudHMucHVzaChhcHBvaW50bWVudCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IFsuLi50aGlzLmFwcG9pbnRtZW50c107XHJcbiAgICAgICAgICB0aGlzLnN0b3JlT3JpZ2luYWxEYXRhKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5uZ3hMb2FkZXIuc3RvcExvYWRlcigndGFibGUtbG9hZGVyLScgKyB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnKTsgLy8gU3RvcCBzZWN0aW9uIGxvYWRlclxyXG4gICAgICAgICAgLy8gU2Nyb2xsIHRvIHRvcCBhZnRlciBkYXRhIGlzIGxvYWRlZFxyXG4gICAgICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAqIEdldCBkb2N0b3Igc3BlY2lhbGl0eVxyXG4gICogQHBhcmFtIHtQcm92aWRlckF0dHJpYnV0ZU1vZGVsW119IGF0dHIgLSBBcnJheSBvZiBwcm92aWRlciBhdHRyaWJ1dGVzXHJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gRG9jdG9yIHNwZWNpYWxpdHlcclxuICAqL1xyXG4gIGdldFNwZWNpYWxpemF0aW9uKGF0dHI6IFByb3ZpZGVyQXR0cmlidXRlTW9kZWxbXSk6IHN0cmluZyB7XHJcbiAgICBsZXQgc3BlY2lhbGl6YXRpb24gPSAnJztcclxuICAgIGF0dHIuZm9yRWFjaCgoYTogUHJvdmlkZXJBdHRyaWJ1dGVNb2RlbCkgPT4ge1xyXG4gICAgICBpZiAoYS5hdHRyaWJ1dGVUeXBlLnV1aWQgPT0gVGFibGVHcmlkQ29tcG9uZW50LlNQRUNJQUxJWkFUSU9OX1VVSUQgJiYgIWEudm9pZGVkKSB7XHJcbiAgICAgICAgc3BlY2lhbGl6YXRpb24gPSBhLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzcGVjaWFsaXphdGlvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogUmV0dXJucyB0aGUgYWdlIGluIHllYXJzIGZyb20gdGhlIGJpcnRoZGF0ZVxyXG4gICogQHBhcmFtIHtzdHJpbmd9IGJpcnRoZGF0ZSAtIERhdGUgaW4gc3RyaW5nIGZvcm1hdFxyXG4gICogQHJldHVybiB7bnVtYmVyfSAtIEFnZVxyXG4gICovXHJcbiAgY2FsY3VsYXRlQWdlKGJpcnRoZGF0ZTogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBtb21lbnQoKS5kaWZmKGJpcnRoZGF0ZSwgJ3llYXJzJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJldHVybnMgdGhlIGNyZWF0ZWQgdGltZSBpbiB3b3JkcyBmcm9tIHRoZSBkYXRlXHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YSAtIERhdGVcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBDcmVhdGVkIHRpbWUgaW4gd29yZHMgZnJvbSB0aGUgZGF0ZVxyXG4gICovXHJcbiAgZ2V0Q3JlYXRlZEF0KGRhdGE6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBsZXQgaG91cnMgPSBtb21lbnQoKS5kaWZmKG1vbWVudChkYXRhKSwgJ2hvdXJzJyk7XHJcbiAgICBsZXQgbWludXRlcyA9IG1vbWVudCgpLmRpZmYobW9tZW50KGRhdGEpLCAnbWludXRlcycpO1xyXG4gICAgaWYgKGhvdXJzID4gMjQpIHtcclxuICAgICAgcmV0dXJuIG1vbWVudChkYXRhKS5mb3JtYXQoJ0REIE1NTSwgWVlZWScpO1xyXG4gICAgfTtcclxuICAgIGlmIChob3VycyA8IDEpIHtcclxuICAgICAgcmV0dXJuIGAke21pbnV0ZXN9ICR7dGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXCJNaW51dGVzIGFnb1wiKX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke2hvdXJzfSAke3RoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KFwiSG91cnMgYWdvXCIpfWA7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICogR2V0IGVuY291bnRlciBkYXRldGltZSBmb3IgYSBnaXZlbiBlbmNvdW50ZXIgdHlwZVxyXG4gICogQHBhcmFtIHtDdXN0b21WaXNpdE1vZGVsfSB2aXNpdCAtIFZpc2l0XHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb3VudGVyTmFtZSAtIEVuY291bnRlciB0eXBlXHJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gRW5jb3VudGVyIGRhdGV0aW1lXHJcbiAgKi9cclxuICBnZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0OiBDdXN0b21WaXNpdE1vZGVsLCBlbmNvdW50ZXJOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgbGV0IGNyZWF0ZWRfYXQgPSAnJztcclxuICAgIGNvbnN0IGVuY291bnRlcnMgPSB2aXNpdC5lbmNvdW50ZXJzO1xyXG4gICAgZW5jb3VudGVycy5mb3JFYWNoKChlbmNvdW50ZXI6IEN1c3RvbUVuY291bnRlck1vZGVsKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc3BsYXkgPSBlbmNvdW50ZXIudHlwZT8ubmFtZTtcclxuICAgICAgaWYgKGRpc3BsYXkubWF0Y2goZW5jb3VudGVyTmFtZSkgIT09IG51bGwpIHtcclxuICAgICAgICBjcmVhdGVkX2F0ID0gdGhpcy5nZXRDcmVhdGVkQXQoZW5jb3VudGVyLmVuY291bnRlcl9kYXRldGltZS5yZXBsYWNlKCdaJywnKzA1MzAnKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNyZWF0ZWRfYXQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBlbmNvdW50ZXIgaXMgYSBmb2xsb3ctdXAgb3IgbmV3IHZpc2l0XHJcbiAgICogQHBhcmFtIHthbnl9IGVuYyAtIEVuY291bnRlciBkYXRhXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSAtICdGT0xMT1dfVVAnIG9yICdORVcnXHJcbiAgICovXHJcbiAgZ2V0RGVtYXJjYXRpb24oZW5jOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgbGV0IGlzRm9sbG93VXAgPSBmYWxzZTtcclxuICAgIGNvbnN0IGFkbEludGwgPSBlbmM/LmZpbmQ/LihlID0+IGU/LnR5cGU/Lm5hbWUgPT09IHZpc2l0VHlwZXMuQURVTFRJTklUSUFMKTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGFkbEludGw/Lm9icykpIHtcclxuICAgICAgYWRsSW50bD8ub2JzLmZvckVhY2gob2JzID0+IHtcclxuICAgICAgICBpZiAoIWlzRm9sbG93VXApXHJcbiAgICAgICAgICBpc0ZvbGxvd1VwID0gb2JzPy52YWx1ZV90ZXh0Py50b0xvd2VyQ2FzZT8uKCk/LmluY2x1ZGVzPy4oXCJmb2xsb3cgdXBcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzRm9sbG93VXAgPyB2aXNpdFR5cGVzLkZPTExPV19VUCA6IHZpc2l0VHlwZXMuTkVXO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgYXdhaXRpbmcgdmlzaXRzIGZvciBhIGdpdmVuIHBhZ2UgbnVtYmVyXHJcbiAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSAtIFBhZ2UgbnVtYmVyXHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgZ2V0QXdhaXRpbmdWaXNpdHMocGFnZTogbnVtYmVyID0gMSk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2FkVmlzaXREYXRhKHBhZ2UsIHRoaXMuYXdhaXRpbmdWaXNpdHMsIHRoaXMudmlzaXRTZXJ2aWNlLmdldEF3YWl0aW5nVmlzaXRzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IGlucHJvZ3Jlc3MgdmlzaXRzIGZvciBhIGdpdmVuIHBhZ2UgbnVtYmVyXHJcbiAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSAtIFBhZ2UgbnVtYmVyXHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgZ2V0SW5Qcm9ncmVzc1Zpc2l0cyhwYWdlOiBudW1iZXIgPSAxKTogdm9pZCB7XHJcbiAgICB0aGlzLmxvYWRWaXNpdERhdGEoXHJcbiAgICAgIHBhZ2UsIFxyXG4gICAgICB0aGlzLmluUHJvZ3Jlc3NWaXNpdHMsIFxyXG4gICAgICB0aGlzLnZpc2l0U2VydmljZS5nZXRJblByb2dyZXNzVmlzaXRzLFxyXG4gICAgICB2aXNpdFR5cGVzLlZJU0lUX05PVEUsXHJcbiAgICAgIHRoaXMuc29ydEluUHJvZ3Jlc3NWaXNpdHMuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogR2V0IHByaW9yaXR5IHZpc2l0cyBmb3IgYSBnaXZlbiBwYWdlIG51bWJlclxyXG4gICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBQYWdlIG51bWJlclxyXG4gICogQHJldHVybiB7dm9pZH1cclxuICAqL1xyXG4gIGdldFByaW9yaXR5VmlzaXRzKHBhZ2U6IG51bWJlciA9IDEpOiB2b2lkIHtcclxuICAgIHRoaXMubG9hZFZpc2l0RGF0YShwYWdlLCB0aGlzLnByaW9yaXR5VmlzaXRzLCB0aGlzLnZpc2l0U2VydmljZS5nZXRQcmlvcml0eVZpc2l0cywgdmlzaXRUeXBlcy5GTEFHR0VEKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjb21wbGV0ZWQgdmlzaXRzIGNvdW50XHJcbiAgICogQHJldHVybiB7dm9pZH1cclxuICAgKi9cclxuICBnZXRDb21wbGV0ZWRWaXNpdHMocGFnZTogbnVtYmVyID0gMSk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2FkVmlzaXREYXRhKHBhZ2UsIHRoaXMuY29tcGxldGVkVmlzaXRzLCB0aGlzLnZpc2l0U2VydmljZS5nZXRFbmRlZFZpc2l0cywgdmlzaXRUeXBlcy5DT01QTEVURURfVklTSVQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgZm9sbG93LXVwIHZpc2l0cyBmb3IgYSBsb2dnZWQtaW4gZG9jdG9yXHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgZ2V0Rm9sbG93VXBWaXNpdChwYWdlOiBudW1iZXIgPSAxKTogdm9pZCB7XHJcbiAgICB0aGlzLm5neExvYWRlci5zdGFydExvYWRlcigndGFibGUtbG9hZGVyLScgKyB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnKTtcclxuICAgIFxyXG4gICAgaWYgKHBhZ2UgPT09IDEpIHtcclxuICAgICAgdGhpcy5mb2xsb3dVcFZpc2l0cy5sZW5ndGggPSAwO1xyXG4gICAgICB0aGlzLnJlY29yZHNGZXRjaGVkID0gMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy52aXNpdFNlcnZpY2UuZ2V0Rm9sbG93VXBWaXNpdHModGhpcy5zcGVjaWFsaXphdGlvbiwgcGFnZSkuc3Vic2NyaWJlKHtcclxuICAgICAgbmV4dDogKHJlczogQXBpUmVzcG9uc2VNb2RlbCkgPT4ge1xyXG4gICAgICAgIGlmIChyZXMuc3VjY2Vzcykge1xyXG4gICAgICAgICAgdGhpcy50b3RhbFJlY29yZHMgPSByZXMudG90YWxDb3VudDtcclxuICAgICAgICAgIHRoaXMucmVjb3Jkc0ZldGNoZWQgKz0gdGhpcy5wYWdlU2l6ZTtcclxuICAgICAgICAgIHRoaXMuZW1pdFZpc2l0c0NvdW50KHRoaXMudG90YWxSZWNvcmRzKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgcHJvY2Vzc2VkVmlzaXRzID0gcmVzLmRhdGFcclxuICAgICAgICAgICAgLm1hcCh2aXNpdCA9PiB0aGlzLnByb2Nlc3NGb2xsb3dVcFZpc2l0RGF0YSh2aXNpdCkpXHJcbiAgICAgICAgICAgIC5maWx0ZXIodmlzaXQgPT4gdmlzaXQgIT09IG51bGwpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0aGlzLmZvbGxvd1VwVmlzaXRzLnB1c2goLi4ucHJvY2Vzc2VkVmlzaXRzKTtcclxuICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVNvdXJjZXModGhpcy5mb2xsb3dVcFZpc2l0cywgcHJvY2Vzc2VkVmlzaXRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5uZ3hMb2FkZXIuc3RvcExvYWRlcigndGFibGUtbG9hZGVyLScgKyB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnKTtcclxuICAgICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgZW5jb3VudGVyIGRhdGV0aW1lIGZvciBhIGdpdmVuIGVuY291bnRlciB0eXBlXHJcbiAgKiBAcGFyYW0ge0N1c3RvbVZpc2l0TW9kZWx9IHZpc2l0IC0gVmlzaXRcclxuICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvdW50ZXJOYW1lIC0gRW5jb3VudGVyIHR5cGVcclxuICAqIEByZXR1cm4ge3N0cmluZ30gLSBFbmNvdW50ZXIgZGF0ZXRpbWVcclxuICAqL1xyXG4gIGdldEVuY291bnRlck9icyhlbmNvdW50ZXJzOiBDdXN0b21FbmNvdW50ZXJNb2RlbFtdLCBlbmNvdW50ZXJOYW1lOiBzdHJpbmcsIGNvbmNlcHRJZDogbnVtYmVyKSB7XHJcbiAgICBsZXQgb2JzOiBDdXN0b21PYnNNb2RlbDtcclxuICAgIGVuY291bnRlcnMuZm9yRWFjaCgoZW5jb3VudGVyOiBDdXN0b21FbmNvdW50ZXJNb2RlbCkgPT4ge1xyXG4gICAgICBpZiAoZW5jb3VudGVyLnR5cGU/Lm5hbWUgPT09IGVuY291bnRlck5hbWUpIHtcclxuICAgICAgICBvYnMgPSBlbmNvdW50ZXI/Lm9icz8uZmluZCgobzogQ3VzdG9tT2JzTW9kZWwpID0+IG8uY29uY2VwdF9pZCA9PSBjb25jZXB0SWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYnM7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFJlbmRlcnMgSFRNTCBjb250ZW50IGZvciBhIGNvbHVtbiwgc2FuaXRpemVkIGZvciBzZWN1cml0eVxyXG4gICAqIEBwYXJhbSB7YW55fSBjb2x1bW4gLSBDb2x1bW4gZGVmaW5pdGlvblxyXG4gICAqIEBwYXJhbSB7YW55fSBlbGVtZW50IC0gRGF0YSBlbGVtZW50IHRvIHJlbmRlclxyXG4gICAqIEByZXR1cm4ge1NhZmVIdG1sIHwgc3RyaW5nfSAtIEZvcm1hdHRlZCBIVE1MIG9yIGVsZW1lbnQgdmFsdWVcclxuICAgKi9cclxuICByZW5kZXJIdG1sQ29udGVudChjb2x1bW46IGFueSwgZWxlbWVudDogYW55KTogaW1wb3J0KCdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJykuU2FmZUh0bWwgfCBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGNvbHVtbi5mb3JtYXRIdG1sICYmIHR5cGVvZiBjb2x1bW4uZm9ybWF0SHRtbCA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuc2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RIdG1sKGNvbHVtbi5mb3JtYXRIdG1sKGVsZW1lbnQpKSA6IGVsZW1lbnRbY29sdW1uLmtleV07XHJcbiAgfVxyXG4gICAgXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHN0cmluZyBvZiBDU1MgY2xhc3NlcyBmb3IgdGhlIGNvbHVtblxyXG4gICAqIEBwYXJhbSB7YW55fSBjb2x1bW4gLSBDb2x1bW4gZGVmaW5pdGlvblxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBTcGFjZS1zZXBhcmF0ZWQgY2xhc3MgbmFtZXNcclxuICAgKi9cclxuICBnZXRDbGFzc2VzKGNvbHVtbjogYW55LCBlbGVtZW50OiBhbnkpOiBzdHJpbmcge1xyXG4gICAgbGV0IGNsYXNzTGlzdCA9IFtdO1xyXG5cclxuICAgIC8vIElmIGNvbHVtbiBoYXMgYSBzdGF0aWMgY2xhc3NMaXN0IChhcnJheSBvciBzdHJpbmcpLCBhZGQgaXRcclxuICAgIGlmIChjb2x1bW4uY2xhc3NMaXN0KSB7XHJcbiAgICAgIGNsYXNzTGlzdCA9IHR5cGVvZiBjb2x1bW4uY2xhc3NMaXN0ID09PSBcImZ1bmN0aW9uXCIgPyBjb2x1bW4uY2xhc3NMaXN0KGVsZW1lbnQpIDogY29sdW1uLmNsYXNzTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2xhc3NMaXN0LmpvaW4oXCIgXCIpO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXRzIHRoZSBmb2xsb3ctdXAgZGF0ZSBieSBjbGVhbmluZyB1cCB0aW1lIGRldGFpbHNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBGb2xsb3ctdXAgZGF0ZSBzdHJpbmdcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gRm9ybWF0dGVkIGRhdGVcclxuICAgKi9cclxuICBwcm9jZXNzRm9sbG93VXBEYXRlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYodGhpcy5pc0JyYW5kTmFtZSA9PT0gXCJOQVNcIikge1xyXG4gICAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZS5zcGxpdCgnLCcpLmxlbmd0aCA+IDEgPyBgJHt2YWx1ZS5zcGxpdCgnLCcpWzBdfWAgOiB2YWx1ZSA6ICcnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlID8gdmFsdWUuc3BsaXQoJywnKS5sZW5ndGggPiAxID8gYCR7dmFsdWUuc3BsaXQoJywnKVswXX0gJHt2YWx1ZS5zcGxpdCgnLCcpWzFdLnJlcGxhY2UoXCJUaW1lOlwiLCBcIlwiKX1gIDogdmFsdWUgOiAnJztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBFeGVjdXRlcyB0aGUgYWN0aW9uIGJhc2VkIG9uIGl0cyBsYWJlbCAoUmVzY2hlZHVsZSBvciBDYW5jZWwpXHJcbiAgICogQHBhcmFtIHthbnl9IGFjdGlvbiAtIEFjdGlvbiBvYmplY3RcclxuICAgKiBAcGFyYW0ge2FueX0gZWxlbWVudCAtIEVsZW1lbnQgdG8gcGVyZm9ybSB0aGUgYWN0aW9uIG9uXHJcbiAgICovXHJcbiAgaGFuZGxlQWN0aW9uKGFjdGlvbjogYW55LCBlbGVtZW50OiBhbnkpIHtcclxuICAgIGNvbnN0IGlzVmFsaWRhdGlvblJlcXVpcmVkID0gYWN0aW9uLnZhbGlkYXRpb25SZXF1aXJlZCAhPT0gdW5kZWZpbmVkID8gYWN0aW9uLnZhbGlkYXRpb25SZXF1aXJlZCA6IHRydWU7XHJcbiAgICBcclxuICAgIGlmIChhY3Rpb24ubGFiZWwgPT09ICdSZXNjaGVkdWxlJykge1xyXG4gICAgICB0aGlzLnJlc2NoZWR1bGUoZWxlbWVudCwgaXNWYWxpZGF0aW9uUmVxdWlyZWQpO1xyXG4gICAgfSBlbHNlIGlmIChhY3Rpb24ubGFiZWwgPT09ICdDYW5jZWwnKSB7XHJcbiAgICAgIHRoaXMuY2FuY2VsKGVsZW1lbnQsIGlzVmFsaWRhdGlvblJlcXVpcmVkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wZW5zIGEgV2hhdHNBcHAgY2hhdCB3aXRoIHRoZSBnaXZlbiBwaG9uZSBudW1iZXJcclxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IC0gVGhlIGNsaWNrIGV2ZW50IHRvIHByZXZlbnQgcm93IG5hdmlnYXRpb25cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGVsZXBob25lIC0gUGhvbmUgbnVtYmVyIGZvciBXaGF0c0FwcFxyXG4gICAqL1xyXG4gIG9wZW5XaGF0c0FwcChldmVudDogTW91c2VFdmVudCwgdGVsZXBob25lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBQcmV2ZW50IHJvdyBuYXZpZ2F0aW9uXHJcbiAgICBjb25zdCB3aGF0c2FwcExpbmsgPSBgaHR0cHM6Ly93YS5tZS8ke3RlbGVwaG9uZX1gO1xyXG4gICAgd2luZG93Lm9wZW4od2hhdHNhcHBMaW5rLCAnX2JsYW5rJywgJ25vb3BlbmVyLG5vcmVmZXJyZXInKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVtaXRzIHRoZSB2aXNpdHMgY291bnQgZGF0YSB3aXRoIHRoZSBnaXZlbiB0YWJsZSB0YWcgbmFtZSBhbmQgY291bnRcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdmlzaXRzQ291bnQgLSBUaGUgdG90YWwgdmlzaXRzIGNvdW50IGZvciB0aGUgc3BlY2lmaWMgdGFibGVcclxuICAgKi9cclxuICBlbWl0VmlzaXRzQ291bnQodmlzaXRzQ291bnQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgY29uc3QgdmlzaXRzQ291bnREYXRhID0ge1xyXG4gICAgICB0YWJsZVRhZ05hbWU6IHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcsXHJcbiAgICAgIHZpc2l0c0NvdW50OiB2aXNpdHNDb3VudFxyXG4gICAgfTtcclxuICAgIHRoaXMudmlzaXRzQ291bnREYXRlLmVtaXQodmlzaXRzQ291bnREYXRhKTtcclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgZ2V0RGF0YShldmVudD86UGFnZUV2ZW50KXtcclxuICAgIHRoaXMucGFnZUluZGV4ID0gZXZlbnQucGFnZUluZGV4O1xyXG4gICAgdGhpcy5wYWdlU2l6ZSA9IGV2ZW50LnBhZ2VTaXplO1xyXG4gICAgdGhpcy5jdXJyZW50UGFnZSA9IGV2ZW50LnBhZ2VJbmRleDtcclxuICAgIHRoaXMuaXRlbXNQZXJQYWdlID0gZXZlbnQucGFnZVNpemU7XHJcbiAgICBcclxuICAgIC8vIElmIGZpbHRlcnMgYXJlIGFjdGl2ZSwgZGlzYWJsZSBwYWdpbmF0aW9uIGFuZCBkb24ndCBtYWtlIEFQSSBjYWxsc1xyXG4gICAgaWYgKHRoaXMuaXNGaWx0ZXJBY3RpdmUgfHwgdGhpcy5wYWdpbmF0aW9uRGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgICByZXR1cm4gZXZlbnQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHJlcXVpcmVkUmVjb3JkcyA9ICh0aGlzLnBhZ2VJbmRleCArIDEpICogdGhpcy5wYWdlU2l6ZTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBmZXRjaCBtb3JlIGRhdGEgZnJvbSBBUElcclxuICAgIGlmIChyZXF1aXJlZFJlY29yZHMgPiB0aGlzLnJlY29yZHNGZXRjaGVkKSB7XHJcbiAgICAgIHRoaXMuZmV0Y2hNb3JlRGF0YSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRGF0YSBpcyBhbHJlYWR5IHByZXNlbnQsIGhhbmRsZSBjbGllbnQtc2lkZSBwYWdpbmF0aW9uXHJcbiAgICAgIHRoaXMuaGFuZGxlQ2xpZW50U2lkZVBhZ2luYXRpb24oKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU2Nyb2xsIHRvIHRvcCB3aGVuIHBhZ2luYXRpb24gY2hhbmdlc1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZXZlbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBtb3JlIGRhdGEgZnJvbSBBUEkgYmFzZWQgb24gY3VycmVudCBwbHVnaW4gdHlwZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgZmV0Y2hNb3JlRGF0YSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IG5leHRQYWdlID0gKHRoaXMucmVjb3Jkc0ZldGNoZWQgKyB0aGlzLnBhZ2VTaXplKSAvIHRoaXMucGFnZVNpemU7XHJcbiAgICBcclxuICAgIHN3aXRjaCh0aGlzLnBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZykge1xyXG4gICAgICBjYXNlIFwiQXdhaXRpbmdcIjpcclxuICAgICAgICB0aGlzLmdldEF3YWl0aW5nVmlzaXRzKG5leHRQYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIlByaW9yaXR5XCI6XHJcbiAgICAgICAgdGhpcy5nZXRQcmlvcml0eVZpc2l0cyhuZXh0UGFnZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJJblByb2dyZXNzXCI6XHJcbiAgICAgICAgdGhpcy5nZXRJblByb2dyZXNzVmlzaXRzKG5leHRQYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIkNvbXBsZXRlZFwiOlxyXG4gICAgICAgIHRoaXMuZ2V0Q29tcGxldGVkVmlzaXRzKG5leHRQYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIkZvbGxvd1VwXCI6XHJcbiAgICAgICAgdGhpcy5nZXRGb2xsb3dVcFZpc2l0KG5leHRQYWdlKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSBjbGllbnQtc2lkZSBwYWdpbmF0aW9uIGZvciBhbHJlYWR5IGxvYWRlZCBkYXRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVDbGllbnRTaWRlUGFnaW5hdGlvbigpIHtcclxuICAgIC8vIEVuc3VyZSBmaWx0ZXJlZERhdGFTb3VyY2UgaGFzIGFsbCB0aGUgZGF0YSBmcm9tIG9yaWdpbmFsRGF0YVxyXG4gICAgaWYgKHRoaXMuZmlsdGVyZWREYXRhU291cmNlLmxlbmd0aCA8IHRoaXMub3JpZ2luYWxEYXRhLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmZpbHRlcmVkRGF0YVNvdXJjZSA9IFsuLi50aGlzLm9yaWdpbmFsRGF0YV07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEFwcGx5IHBhZ2luYXRpb24gdG8gdGhlIGZpbHRlcmVkIGRhdGFcclxuICAgIHRoaXMuYXBwbHlQYWdpbmF0aW9uKCk7IFxyXG4gICAgXHJcbiAgICAvLyBVcGRhdGUgcGFnaW5hdG9yIGxlbmd0aCB0byBzaG93IGNvcnJlY3QgdG90YWxcclxuICAgIGlmICh0aGlzLnRlbXBQYWdpbmF0b3IpIHtcclxuICAgICAgdGhpcy50ZW1wUGFnaW5hdG9yLmxlbmd0aCA9IHRoaXMudG90YWxSZWNvcmRzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIHNvcnRpbmcgZm9yIGN1cnJlbnQgcGFnZSBkYXRhIG9ubHlcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29sdW1uIC0gQ29sdW1uIHRvIHNvcnQgYnlcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGlyZWN0aW9uIC0gU29ydCBkaXJlY3Rpb24gKCdhc2MnIG9yICdkZXNjJylcclxuICAgKi9cclxuICBoYW5kbGVTb3J0KGNvbHVtbjogc3RyaW5nLCBkaXJlY3Rpb246IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKCFjb2x1bW4gfHwgIWRpcmVjdGlvbikgcmV0dXJuO1xyXG4gICAgXHJcbiAgICAvLyBTb3J0IG9ubHkgdGhlIGN1cnJlbnQgcGFnZSBkYXRhXHJcbiAgICB0aGlzLnBhZ2luYXRlZERhdGFTb3VyY2Uuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IHtcclxuICAgICAgbGV0IGFWYWx1ZSA9IHRoaXMuZ2V0U29ydFZhbHVlKGEsIGNvbHVtbik7XHJcbiAgICAgIGxldCBiVmFsdWUgPSB0aGlzLmdldFNvcnRWYWx1ZShiLCBjb2x1bW4pO1xyXG4gICAgICBcclxuICAgICAgLy8gQ29udmVydCB0byBzdHJpbmcgZm9yIGNvbXBhcmlzb24gaWYgbmVlZGVkXHJcbiAgICAgIGlmICh0eXBlb2YgYVZhbHVlID09PSAnc3RyaW5nJykgYVZhbHVlID0gYVZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGlmICh0eXBlb2YgYlZhbHVlID09PSAnc3RyaW5nJykgYlZhbHVlID0gYlZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gZGlyZWN0aW9uID09PSAnYXNjJyBcclxuICAgICAgICA/IChhVmFsdWUgPCBiVmFsdWUgPyAtMSA6IGFWYWx1ZSA+IGJWYWx1ZSA/IDEgOiAwKVxyXG4gICAgICAgIDogKGFWYWx1ZSA+IGJWYWx1ZSA/IC0xIDogYVZhbHVlIDwgYlZhbHVlID8gMSA6IDApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgc29ydCB2YWx1ZSBmb3IgYW4gaXRlbSBiYXNlZCBvbiBjb2x1bW5cclxuICAgKi9cclxuICBwcml2YXRlIGdldFNvcnRWYWx1ZShpdGVtOiBhbnksIGNvbHVtbjogc3RyaW5nKTogYW55IHtcclxuICAgIGlmIChjb2x1bW4gPT09ICdwYXRpZW50X25hbWUnKSB7XHJcbiAgICAgIHJldHVybiAoaXRlbS5wYXRpZW50X25hbWU/LmdpdmVuX25hbWUgfHwgJycpICsgJyAnICsgKGl0ZW0ucGF0aWVudF9uYW1lPy5mYW1pbHlfbmFtZSB8fCAnJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXRlbVtjb2x1bW5dO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUHJvY2VzcyB2aXNpdCBkYXRhIHdpdGggY29tbW9uIGZpZWxkc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgcHJvY2Vzc1Zpc2l0RGF0YSh2aXNpdDogYW55LCBlbmNvdW50ZXJUeXBlPzogc3RyaW5nKTogYW55IHtcclxuICAgIHZpc2l0LmNoZWlmX2NvbXBsYWludCA9IHRoaXMuZ2V0Q2hlaWZDb21wbGFpbnQodmlzaXQpO1xyXG4gICAgdmlzaXQudmlzaXRfY3JlYXRlZCA9IHZpc2l0Py5kYXRlX2NyZWF0ZWQgXHJcbiAgICAgID8gdGhpcy5nZXRDcmVhdGVkQXQodmlzaXQuZGF0ZV9jcmVhdGVkLnJlcGxhY2UoJ1onLCcrMDUzMCcpKSBcclxuICAgICAgOiB0aGlzLmdldEVuY291bnRlckNyZWF0ZWQodmlzaXQsIGVuY291bnRlclR5cGUgfHwgdmlzaXRUeXBlcy5BRFVMVElOSVRJQUwpO1xyXG4gICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgdmlzaXQubG9jYXRpb24gPSB2aXNpdD8ubG9jYXRpb24/Lm5hbWU7XHJcbiAgICB2aXNpdC5hZ2UgPSB2aXNpdD8ucGVyc29uPy5hZ2UgKyAnICcgKyB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgneScpO1xyXG4gICAgXHJcbiAgICAvLyBBZGQgc3BlY2lmaWMgZmllbGRzIGJhc2VkIG9uIHZpc2l0IHR5cGVcclxuICAgIGlmIChlbmNvdW50ZXJUeXBlID09PSB2aXNpdFR5cGVzLlZJU0lUX05PVEUpIHtcclxuICAgICAgdmlzaXQucHJlc2NyaXB0aW9uX3N0YXJ0ZWQgPSB0aGlzLmdldEVuY291bnRlckNyZWF0ZWQodmlzaXQsIHZpc2l0VHlwZXMuVklTSVRfTk9URSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZW5jb3VudGVyVHlwZSA9PT0gdmlzaXRUeXBlcy5DT01QTEVURURfVklTSVQpIHtcclxuICAgICAgdmlzaXQuY29tcGxldGVkID0gdmlzaXQ/LmRhdGVfY3JlYXRlZCBcclxuICAgICAgICA/IHRoaXMuZ2V0Q3JlYXRlZEF0KHZpc2l0LmRhdGVfY3JlYXRlZC5yZXBsYWNlKCdaJywgJyswNTMwJykpIFxyXG4gICAgICAgIDogdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLlZJU0lUX0NPTVBMRVRFKTtcclxuICAgIH1cclxuICAgIGlmIChlbmNvdW50ZXJUeXBlID09PSB2aXNpdFR5cGVzLkZMQUdHRUQpIHtcclxuICAgICAgdmlzaXQudmlzaXRfY3JlYXRlZCA9IHZpc2l0Py5kYXRlX2NyZWF0ZWQgXHJcbiAgICAgICAgPyB0aGlzLmdldENyZWF0ZWRBdCh2aXNpdC5kYXRlX2NyZWF0ZWQucmVwbGFjZSgnWicsJyswNTMwJykpIFxyXG4gICAgICAgIDogdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLkZMQUdHRUQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBZGQgY29tbW9uIGZpZWxkc1xyXG4gICAgdmlzaXQuVE1IX3BhdGllbnRfaWQgPSB0aGlzLmdldEF0dHJpYnV0ZURhdGEodmlzaXQsIFwiVE1IIENhc2UgTnVtYmVyXCIpPy52YWx1ZTtcclxuICAgIHZpc2l0LnBhdGllbnRfdHlwZSA9IHRoaXMuZ2V0RGVtYXJjYXRpb24odmlzaXQ/LmVuY291bnRlcnMpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdmlzaXQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmljIGRhdGEgbG9hZGluZyBtZXRob2RcclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRWaXNpdERhdGEoXHJcbiAgICBwYWdlOiBudW1iZXIsIFxyXG4gICAgdmlzaXRBcnJheTogYW55W10sIFxyXG4gICAgc2VydmljZU1ldGhvZDogKHNwZWNpYWxpemF0aW9uOiBzdHJpbmcsIHBhZ2U6IG51bWJlcikgPT4gYW55LFxyXG4gICAgZW5jb3VudGVyVHlwZT86IHN0cmluZyxcclxuICAgIGN1c3RvbVNvcnRpbmc/OiAodmlzaXRzOiBhbnlbXSkgPT4gYW55W11cclxuICApOiB2b2lkIHtcclxuICAgIHRoaXMubmd4TG9hZGVyLnN0YXJ0TG9hZGVyKCd0YWJsZS1sb2FkZXItJyArIHRoaXMucGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcpO1xyXG4gICAgXHJcbiAgICBpZiAocGFnZSA9PT0gMSkge1xyXG4gICAgICB2aXNpdEFycmF5Lmxlbmd0aCA9IDA7IC8vIENsZWFyIGFycmF5IGVmZmljaWVudGx5XHJcbiAgICAgIHRoaXMucmVjb3Jkc0ZldGNoZWQgPSAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXJ2aWNlTWV0aG9kLmNhbGwodGhpcy52aXNpdFNlcnZpY2UsIHRoaXMuc3BlY2lhbGl6YXRpb24sIHBhZ2UpLnN1YnNjcmliZSh7XHJcbiAgICAgIG5leHQ6IChyZXM6IEFwaVJlc3BvbnNlTW9kZWwpID0+IHtcclxuICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgIHRoaXMudG90YWxSZWNvcmRzID0gcmVzLnRvdGFsQ291bnQ7XHJcbiAgICAgICAgICB0aGlzLnJlY29yZHNGZXRjaGVkICs9IHRoaXMucGFnZVNpemU7XHJcbiAgICAgICAgICB0aGlzLmVtaXRWaXNpdHNDb3VudCh0aGlzLnRvdGFsUmVjb3Jkcyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFZpc2l0cyA9IHJlcy5kYXRhLm1hcCh2aXNpdCA9PiB0aGlzLnByb2Nlc3NWaXNpdERhdGEodmlzaXQsIGVuY291bnRlclR5cGUpKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHNvcnRpbmcgaWYgcHJvdmlkZWRcclxuICAgICAgICAgIGNvbnN0IHNvcnRlZFZpc2l0cyA9IGN1c3RvbVNvcnRpbmcgPyBjdXN0b21Tb3J0aW5nKHByb2Nlc3NlZFZpc2l0cykgOiBwcm9jZXNzZWRWaXNpdHM7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFkZCB0byB2aXNpdCBhcnJheVxyXG4gICAgICAgICAgdmlzaXRBcnJheS5wdXNoKC4uLnNvcnRlZFZpc2l0cyk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFVwZGF0ZSBkYXRhIHNvdXJjZXNcclxuICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVNvdXJjZXModmlzaXRBcnJheSwgc29ydGVkVmlzaXRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5uZ3hMb2FkZXIuc3RvcExvYWRlcigndGFibGUtbG9hZGVyLScgKyB0aGlzLnBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnKTtcclxuICAgICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGFsbCBkYXRhIHNvdXJjZXMgd2l0aCBuZXcgZGF0YVxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBkYXRlRGF0YVNvdXJjZXModmlzaXRBcnJheTogYW55W10sIHNvcnRlZFZpc2l0cz86IGFueVtdKTogdm9pZCB7XHJcbiAgICB0aGlzLmRhdGFTb3VyY2UgPSBzb3J0ZWRWaXNpdHMgPyBbLi4uc29ydGVkVmlzaXRzXSA6IFsuLi52aXNpdEFycmF5XTtcclxuICAgIHRoaXMub3JpZ2luYWxEYXRhID0gWy4uLnZpc2l0QXJyYXldO1xyXG4gICAgdGhpcy5maWx0ZXJlZERhdGFTb3VyY2UgPSBbLi4udmlzaXRBcnJheV07XHJcbiAgICB0aGlzLmFwcGx5UGFnaW5hdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3VzdG9tIHNvcnRpbmcgZm9yIGluLXByb2dyZXNzIHZpc2l0cyBieSBwcmVzY3JpcHRpb24gdGltZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc29ydEluUHJvZ3Jlc3NWaXNpdHModmlzaXRzOiBhbnlbXSk6IGFueVtdIHtcclxuICAgIHJldHVybiB2aXNpdHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICBjb25zdCBwYXJzZVRpbWUgPSAodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmICh2YWx1ZS5pbmNsdWRlcyhcIm1pbnV0ZXMgYWdvXCIpKSB7XHJcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiBcIm1pbnV0ZXNcIiwgdGltZTogcGFyc2VJbnQodmFsdWUpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZS5pbmNsdWRlcyhcIkhvdXJzIGFnb1wiKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJob3Vyc1wiLCB0aW1lOiBwYXJzZUludCh2YWx1ZSkgKiA2MCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyB0eXBlOiBcImRhdGVcIiwgdGltZTogbW9tZW50KHZhbHVlLCBcIkREIE1NTSwgWVlZWVwiKS52YWx1ZU9mKCkgfTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHZpc2l0QSA9IHBhcnNlVGltZShhLnByZXNjcmlwdGlvbl9zdGFydGVkKTtcclxuICAgICAgY29uc3QgdmlzaXRCID0gcGFyc2VUaW1lKGIucHJlc2NyaXB0aW9uX3N0YXJ0ZWQpO1xyXG4gICAgICBcclxuICAgICAgLy8gU29ydCBtaW51dGVzIGZpcnN0IChhc2NlbmRpbmcpXHJcbiAgICAgIGlmICh2aXNpdEEudHlwZSA9PT0gXCJtaW51dGVzXCIgJiYgdmlzaXRCLnR5cGUgPT09IFwibWludXRlc1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIHZpc2l0QS50aW1lIC0gdmlzaXRCLnRpbWU7XHJcbiAgICAgIH1cclxuICAgICAgLy8gU29ydCBob3VycyBmaXJzdCAoYXNjZW5kaW5nKVxyXG4gICAgICBpZiAodmlzaXRBLnR5cGUgPT09IFwiaG91cnNcIiAmJiB2aXNpdEIudHlwZSA9PT0gXCJob3Vyc1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIHZpc2l0QS50aW1lIC0gdmlzaXRCLnRpbWU7XHJcbiAgICAgIH1cclxuICAgICAgLy8gU29ydCBkYXRlcyAoZGVzY2VuZGluZylcclxuICAgICAgaWYgKHZpc2l0QS50eXBlID09PSBcImRhdGVcIiAmJiB2aXNpdEIudHlwZSA9PT0gXCJkYXRlXCIpIHtcclxuICAgICAgICByZXR1cm4gdmlzaXRCLnRpbWUgLSB2aXNpdEEudGltZTtcclxuICAgICAgfVxyXG4gICAgICAvLyBQcmlvcml0aXplIG1pbnV0ZXMgb3ZlciBob3VycywgYW5kIGhvdXJzIG92ZXIgZGF0ZXNcclxuICAgICAgaWYgKHZpc2l0QS50eXBlID09PSBcIm1pbnV0ZXNcIikgcmV0dXJuIC0xO1xyXG4gICAgICBpZiAodmlzaXRCLnR5cGUgPT09IFwibWludXRlc1wiKSByZXR1cm4gMTtcclxuICAgICAgaWYgKHZpc2l0QS50eXBlID09PSBcImhvdXJzXCIpIHJldHVybiAtMTtcclxuICAgICAgaWYgKHZpc2l0Qi50eXBlID09PSBcImhvdXJzXCIpIHJldHVybiAxO1xyXG5cclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3MgZm9sbG93LXVwIHZpc2l0IGRhdGEgd2l0aCBzcGVjaWFsIGhhbmRsaW5nXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwcm9jZXNzRm9sbG93VXBWaXNpdERhdGEodmlzaXQ6IGFueSk6IGFueSB7XHJcbiAgICBpZiAoIXZpc2l0Py5lbmNvdW50ZXJzPy5sZW5ndGgpIHJldHVybiBudWxsO1xyXG4gICAgXHJcbiAgICB2aXNpdC5jaGVpZl9jb21wbGFpbnQgPSB0aGlzLmdldENoZWlmQ29tcGxhaW50KHZpc2l0KTtcclxuICAgIHZpc2l0LnZpc2l0X2NyZWF0ZWQgPSB2aXNpdD8uZGF0ZV9jcmVhdGVkIFxyXG4gICAgICA/IHRoaXMuZ2V0Q3JlYXRlZEF0KHZpc2l0LmRhdGVfY3JlYXRlZC5yZXBsYWNlKCdaJywgJyswNTMwJykpIFxyXG4gICAgICA6IHRoaXMuZ2V0RW5jb3VudGVyQ3JlYXRlZCh2aXNpdCwgdmlzaXRUeXBlcy5DT01QTEVURURfVklTSVQpO1xyXG4gICAgdmlzaXQucGVyc29uLmFnZSA9IHRoaXMuY2FsY3VsYXRlQWdlKHZpc2l0LnBlcnNvbi5iaXJ0aGRhdGUpO1xyXG4gICAgdmlzaXQuY29tcGxldGVkID0gdGhpcy5nZXRFbmNvdW50ZXJDcmVhdGVkKHZpc2l0LCB2aXNpdFR5cGVzLlZJU0lUX0NPTVBMRVRFKTtcclxuICAgIHZpc2l0LmZvbGxvd1VwID0gdGhpcy5wcm9jZXNzRm9sbG93VXBEYXRlKFxyXG4gICAgICB0aGlzLmdldEVuY291bnRlck9icyh2aXNpdC5lbmNvdW50ZXJzLCB2aXNpdFR5cGVzLlZJU0lUX05PVEUsIFRhYmxlR3JpZENvbXBvbmVudC5GT0xMT1dfVVBfQ09OQ0VQVF9JRCk/LnZhbHVlX3RleHRcclxuICAgICk7XHJcbiAgICB2aXNpdC5sb2NhdGlvbiA9IHZpc2l0Py5sb2NhdGlvbj8ubmFtZTtcclxuICAgIHZpc2l0LmFnZSA9IHZpc2l0Py5wZXJzb24/LmFnZSArICcgJyArIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCd5Jyk7XHJcbiAgICBcclxuICAgIHJldHVybiB2aXNpdDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNjcm9sbCB0byB0b3Agb2YgdGhlIHRhYmxlIGNvbnRhaW5lclxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2Nyb2xsVG9Ub3AoKSB7XHJcbiAgICAvLyBGaW5kIHRoZSB0YWJsZSBjb250YWluZXIgYW5kIHNjcm9sbCB0byB0b3AgdXNpbmcgdW5pcXVlIGNvbXBvbmVudCBJRFxyXG4gICAgY29uc3QgdGFibGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFibGUtY29udGFpbmVyLScgKyB0aGlzLmNvbXBvbmVudElkKTtcclxuICAgIGlmICh0YWJsZUNvbnRhaW5lcikge1xyXG4gICAgICB0YWJsZUNvbnRhaW5lci5zY3JvbGxUb3AgPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGRhdGEtdGVzdC1pZHMgdG8gZGF0ZXBpY2tlciBjYWxlbmRhciBuYXZpZ2F0aW9uIGJ1dHRvbnMgYW5kIGRhdGUgY2VsbHNcclxuICAgKi9cclxuICBhZGRDYWxlbmRhck5hdmlnYXRpb25UZXN0SWRzKCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIC8vIEFkZCB0ZXN0IElEcyB0byBuYXZpZ2F0aW9uIGJ1dHRvbnNcclxuICAgICAgY29uc3QgcHJldkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXQtY2FsZW5kYXItcHJldmlvdXMtYnV0dG9uJyk7XHJcbiAgICAgIGNvbnN0IG5leHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWF0LWNhbGVuZGFyLW5leHQtYnV0dG9uJyk7XHJcblxyXG4gICAgICBpZiAocHJldkJ1dHRvbiAmJiAhcHJldkJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVzdC1pZCcpKSB7XHJcbiAgICAgICAgcHJldkJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGVzdC1pZCcsICdjYWxlbmRhck5hdlByZXZpb3VzJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChuZXh0QnV0dG9uICYmICFuZXh0QnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXN0LWlkJykpIHtcclxuICAgICAgICBuZXh0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS10ZXN0LWlkJywgJ2NhbGVuZGFyTmF2TmV4dCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBZGQgdGVzdCBJRHMgdG8gYWxsIGRhdGUgY2VsbHNcclxuICAgICAgY29uc3QgZGF0ZUNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hdC1jYWxlbmRhci1ib2R5LWNlbGwnKTtcclxuICAgICAgZGF0ZUNlbGxzLmZvckVhY2goKGNlbGw6IEVsZW1lbnQpID0+IHtcclxuICAgICAgICBpZiAoIWNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLXRlc3QtaWQnKSkge1xyXG4gICAgICAgICAgY29uc3QgZGF0ZUJ1dHRvbiA9IGNlbGwucXVlcnlTZWxlY3RvcignLm1hdC1jYWxlbmRhci1ib2R5LWNlbGwtY29udGVudCcpO1xyXG4gICAgICAgICAgaWYgKGRhdGVCdXR0b24pIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlID0gZGF0ZUJ1dHRvbi50ZXh0Q29udGVudD8udHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGVzdC1pZCcsIGBjYWxlbmRhckRhdGUtJHtkYXRlVmFsdWV9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCI8bWF0LWV4cGFuc2lvbi1wYW5lbCBbZXhwYW5kZWRdPVwidHJ1ZVwiIGRhdGEtdGVzdC1pZD1cIm1hdEV4cEFwcG9pbnRtZW50XCI+XHJcbiAgPG1hdC1leHBhbnNpb24tcGFuZWwtaGVhZGVyIGRhdGEtdGVzdC1pZD1cIm1hdEV4cEhlYWRlckFwcG9pbnRtZW50XCI+XHJcbiAgICA8bWF0LXBhbmVsLXRpdGxlIGRhdGEtdGVzdC1pZD1cIm1hdFBhbmVsVGl0bGVBcHBvaW50bWVudFwiPlxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgaWQ9XCJ7eyBwbHVnaW5Db25maWdPYnMuYW5jaG9ySWQgfX1cIlxyXG4gICAgICAgIGNsYXNzPVwiYW5jaG9yLWNvblwiXHJcbiAgICAgICAgZGF0YS10ZXN0LWlkPVwiZGl2QW5jaG9yQXBwb2ludG1lbnRcIlxyXG4gICAgICA+PC9kaXY+XHJcbiAgICAgIDxkaXZcclxuICAgICAgICBjbGFzcz1cImludGVsLWFjY29yZGlvbi10aXRsZVwiXHJcbiAgICAgICAgZGF0YS10ZXN0LWlkPVwiZGl2QWNjb3JkaW9uVGl0bGVBcHBvaW50bWVudFwiXHJcbiAgICAgID5cclxuICAgICAgICA8aW1nXHJcbiAgICAgICAgICBzcmM9XCJ7eyBwbHVnaW5Db25maWdPYnMudGFibGVIZWFkZXJJY29uIH19XCJcclxuICAgICAgICAgIGFsdD1cIlwiXHJcbiAgICAgICAgICB3aWR0aD1cIjQ0cHhcIlxyXG4gICAgICAgICAgZGF0YS10ZXN0LWlkPVwiaW1nVGFibGVIZWFkZXJJY29uQXBwb2ludG1lbnRcIlxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGg2IGNsYXNzPVwibWItMCBtbC0yXCIgW2F0dHIuZGF0YS10ZXN0LWlkXT1cInBsdWdpbkNvbmZpZ09icy50YWJsZUhlYWRlclwiPlxyXG4gICAgICAgICAge3sgcGx1Z2luQ29uZmlnT2JzLnRhYmxlSGVhZGVyIHwgdHJhbnNsYXRlIH19ICh7e1xyXG4gICAgICAgICAgICBnZXRDdXJyZW50VG90YWxDb3VudCgpXHJcbiAgICAgICAgICB9fSlcclxuICAgICAgICA8L2g2PlxyXG4gICAgICAgIDxtYXQtaWNvblxyXG4gICAgICAgICAgYXJpYS1oaWRkZW49XCJmYWxzZVwiXHJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiaGVscCBpY29uXCJcclxuICAgICAgICAgIG1hdFRvb2x0aXA9XCJ7eyBwbHVnaW5Db25maWdPYnMudG9vbHRpcExhYmVsIHwgdHJhbnNsYXRlIH19XCJcclxuICAgICAgICAgIG1hdFRvb2x0aXBQb3NpdGlvbj1cInJpZ2h0XCJcclxuICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImljb0hlbHBBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICA+aGVscF9vdXRsaW5lPC9tYXQtaWNvblxyXG4gICAgICAgID5cclxuXHJcbiAgICAgICAgPCEtLSBGaWx0ZXIgYnV0dG9uIC0tPlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIGNsYXNzPVwibWwtYXV0byBmaWx0ZXItc2VhcmNoLWNvbnRhaW5lclwiXHJcbiAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJkaXZGaWx0ZXJDb250YWluZXJBcHBvaW50bWVudFwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAqbmdJZj1cInBsdWdpbkNvbmZpZ09icy5maWx0ZXJPYnMuZmlsdGVyRmxhZ1wiXHJcbiAgICAgICAgICAgIGNsYXNzPVwibWF0LXN0cm9rZWQtYnV0dG9uIGZpbHRlci1idG5cIlxyXG4gICAgICAgICAgICBbbWF0TWVudVRyaWdnZXJGb3JdPVwiZmlsdGVyTWVudVwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxyXG4gICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJidG5GaWx0ZXJBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICBzcmM9XCJ7eyBwbHVnaW5Db25maWdPYnMuZmlsdGVyT2JzLmZpbHRlckljb24gfX1cIlxyXG4gICAgICAgICAgICAgIGFsdD1cIlwiXHJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiaW1nRmlsdGVySWNvbkFwcG9pbnRtZW50XCJcclxuICAgICAgICAgICAgLz57eyBwbHVnaW5Db25maWdPYnMuZmlsdGVyT2JzLmZpbHRlckxhYmVsIHwgdHJhbnNsYXRlIH19XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwhLS0gRmlsdGVyIE1lbnUgLS0+XHJcbiAgICAgICAgICA8bWF0LW1lbnVcclxuICAgICAgICAgICAgI2ZpbHRlck1lbnU9XCJtYXRNZW51XCJcclxuICAgICAgICAgICAgY2xhc3M9XCJjdXN0b20tbWVudVwiXHJcbiAgICAgICAgICAgIFtoYXNCYWNrZHJvcF09XCJ0cnVlXCJcclxuICAgICAgICAgICAgeFBvc2l0aW9uPVwiYmVmb3JlXCJcclxuICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwibWVudUZpbHRlckFwcG9pbnRtZW50XCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgIGNsYXNzPVwidG9nZ2xlLWJ1dHRvbnNcIlxyXG4gICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImRpdlRvZ2dsZUJ1dHRvbnNBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIlxyXG4gICAgICAgICAgICAgICAgbWF0LWJ1dHRvblxyXG4gICAgICAgICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJtb2RlID09PSAnZGF0ZSdcIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cIlxyXG4gICAgICAgICAgICAgICAgICBzZXRNb2RlKCdkYXRlJyk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgcmVzZXREYXRlKHRydWUpXHJcbiAgICAgICAgICAgICAgICBcIlxyXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiYnRuRGF0ZU1vZGVBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge3sgXCJEYXRlXCIgfCB0cmFuc2xhdGUgfX1cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cIm1hdC1mb2N1cy1pbmRpY2F0b3IgbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIlxyXG4gICAgICAgICAgICAgICAgbWF0LWJ1dHRvblxyXG4gICAgICAgICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJtb2RlID09PSAncmFuZ2UnXCJcclxuICAgICAgICAgICAgICAgIChjbGljayk9XCJcclxuICAgICAgICAgICAgICAgICAgc2V0TW9kZSgncmFuZ2UnKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyByZXNldERhdGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgIFwiXHJcbiAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJidG5SYW5nZU1vZGVBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge3sgXCJSYW5nZVwiIHwgdHJhbnNsYXRlIH19XHJcbiAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8IS0tIERhdGUgTW9kZSAtLT5cclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICpuZ0lmPVwibW9kZSA9PT0gJ2RhdGUnXCJcclxuICAgICAgICAgICAgICBjbGFzcz1cImRhdGUtdmlld1wiXHJcbiAgICAgICAgICAgICAgKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiXHJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZGl2RGF0ZU1vZGVBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8Zm9ybVxyXG4gICAgICAgICAgICAgICAgW2Zvcm1Hcm91cF09XCJmaWx0ZXJlZERhdGVBbmRSYW5nZUZvcm1cIlxyXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZm9ybURhdGVGaWx0ZXJBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZGF0ZVwiIGRhdGEtdGVzdC1pZD1cImRpdkZvcm1EYXRlQXBwb2ludG1lbnRcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiaW5wdXQtZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZGl2SW5wdXREYXRlQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImxhYmVsLXRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwibGJsU2VsZWN0RGF0ZUFwcG9pbnRtZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgID57eyBcIlNlbGVjdCBkYXRlXCIgfCB0cmFuc2xhdGUgfX08L2xhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiaW5wdXQtd3JhcHBlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJkaXZJbnB1dFdyYXBwZXJEYXRlQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2NsYXNzLmVycm9yLWJvcmRlcl09XCJkYXRlRXJyb3JNZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW21heF09XCJtYXhEYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFttYXREYXRlcGlja2VyXT1cImRhdGVQaWNrZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLmdldCgnZGF0ZScpPy52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLmdldCgnZGF0ZScpPy52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGRhdGU6ICdkZC9NTS95eXl5JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCdTZWxlY3QgZGF0ZScgfCB0cmFuc2xhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJEYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZG9ubHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZXREYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgI2RhdGVQaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKG9wZW5lZCk9XCJhZGRDYWxlbmRhck5hdmlnYXRpb25UZXN0SWRzKClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJtYXREYXRlUGlja2VyQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgPjwvbWF0LWRhdGVwaWNrZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdFN1ZmZpeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbZm9yXT1cImRhdGVQaWNrZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJkcERhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRhdGVwaWNrZXItaWNvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXREYXRlcGlja2VyVG9nZ2xlSWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1cImFzc2V0cy9zdmdzL2NhbGVuZGFyLWRhdGUuc3ZnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImltZ0RhdGVQaWNrZXJJY29uQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiZGF0ZUVycm9yTWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwic3BhbkRhdGVFcnJvck1lc3NhZ2VBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICA+e3sgZGF0ZUVycm9yTWVzc2FnZSB9fTwvc3BhblxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgKm5nSWY9XCJtb2RlID09PSAncmFuZ2UnXCJcclxuICAgICAgICAgICAgICBjbGFzcz1cInJhbmdlLXZpZXdcIlxyXG4gICAgICAgICAgICAgIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxyXG4gICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImRpdlJhbmdlTW9kZUFwcG9pbnRtZW50XCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxmb3JtXHJcbiAgICAgICAgICAgICAgICBbZm9ybUdyb3VwXT1cImZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybVwiXHJcbiAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJmb3JtUmFuZ2VGaWx0ZXJBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tZGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImRpdkZvcm1TdGFydERhdGVBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0LWRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImRpdklucHV0U3RhcnREYXRlQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImxhYmVsLXRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwibGJsU3RhcnREYXRlQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgPnt7IFwiU3RhcnQgZGF0ZVwiIHwgdHJhbnNsYXRlIH19PC9sYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0LXdyYXBwZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZGl2SW5wdXRXcmFwcGVyU3RhcnREYXRlQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2NsYXNzLmVycm9yLWJvcmRlcl09XCJzdGFydERhdGVFcnJvck1lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbWF4XT1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS52YWx1ZS5lbmREYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS52YWx1ZS5lbmREYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG1heERhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwic3RhcnREYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW21hdERhdGVwaWNrZXJdPVwic3RhcnREYXRlUGlja2VyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5nZXQoJ3N0YXJ0RGF0ZScpPy52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLmdldCgnc3RhcnREYXRlJyk/LnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZGF0ZTogJ2RkL01NL3l5eXknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoJ1NlbGVjdCBzdGFydCBkYXRlJyB8IHRyYW5zbGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZG9ubHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZXRTZWxTdGFydERhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxtYXQtZGF0ZXBpY2tlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjc3RhcnREYXRlUGlja2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChvcGVuZWQpPVwiYWRkQ2FsZW5kYXJOYXZpZ2F0aW9uVGVzdElkcygpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwibWF0U3RhcnREYXRlUGlja2VyQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgPjwvbWF0LWRhdGVwaWNrZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdFN1ZmZpeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbZm9yXT1cInN0YXJ0RGF0ZVBpY2tlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGF0ZXBpY2tlci1pY29uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZHBTdGFydERhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0RGF0ZXBpY2tlclRvZ2dsZUljb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCJhc3NldHMvc3Zncy9jYWxlbmRhci1kYXRlLnN2Z1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJpbWdTdGFydERhdGVQaWNrZXJJY29uQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwic3RhcnREYXRlRXJyb3JNZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZXJyb3ItbWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJzcGFuU3RhcnREYXRlRXJyb3JNZXNzYWdlQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgPnt7IHN0YXJ0RGF0ZUVycm9yTWVzc2FnZSB9fTwvc3BhblxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWRhdGVcIiBkYXRhLXRlc3QtaWQ9XCJkaXZGb3JtRW5kRGF0ZUFwcG9pbnRtZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0LWRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImRpdklucHV0RW5kRGF0ZUFwcG9pbnRtZW50XCJcclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsYWJlbC10ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImxibEVuZERhdGVBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICA+e3sgXCJFbmQgZGF0ZVwiIHwgdHJhbnNsYXRlIH19PC9sYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0LXdyYXBwZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZGl2SW5wdXRXcmFwcGVyRW5kRGF0ZUFwcG9pbnRtZW50XCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtjbGFzcy5lcnJvci1ib3JkZXJdPVwiZW5kRGF0ZUVycm9yTWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFttaW5dPVwiZmlsdGVyZWREYXRlQW5kUmFuZ2VGb3JtLnZhbHVlLnN0YXJ0RGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFttYXhdPVwibWF4RGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImVuZERhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbWF0RGF0ZXBpY2tlcl09XCJlbmREYXRlUGlja2VyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5nZXQoJ2VuZERhdGUnKT8udmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGZpbHRlcmVkRGF0ZUFuZFJhbmdlRm9ybS5nZXQoJ2VuZERhdGUnKT8udmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBkYXRlOiAnZGQvTU0veXl5eScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgnU2VsZWN0IGVuZCBkYXRlJyB8IHRyYW5zbGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZG9ubHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZXRTZWxFbmREYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgI2VuZERhdGVQaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKG9wZW5lZCk9XCJhZGRDYWxlbmRhck5hdmlnYXRpb25UZXN0SWRzKClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9XCJtYXRFbmREYXRlUGlja2VyQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgPjwvbWF0LWRhdGVwaWNrZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdFN1ZmZpeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbZm9yXT1cImVuZERhdGVQaWNrZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRhdGVwaWNrZXItaWNvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImRwRW5kRGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXREYXRlcGlja2VyVG9nZ2xlSWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1cImFzc2V0cy9zdmdzL2NhbGVuZGFyLWRhdGUuc3ZnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImltZ0VuZERhdGVQaWNrZXJJY29uQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiZW5kRGF0ZUVycm9yTWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwic3BhbkVuZERhdGVFcnJvck1lc3NhZ2VBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICA+e3sgZW5kRGF0ZUVycm9yTWVzc2FnZSB9fTwvc3BhblxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgY2xhc3M9XCJhY3Rpb24tYnV0dG9uc1wiXHJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiZGl2RmlsdGVyQWN0aW9uQnRuc0FwcG9pbnRtZW50XCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG1hdC1idXR0b25cclxuICAgICAgICAgICAgICAgIGNsYXNzPVwibWF0LWZvY3VzLWluZGljYXRvciByZXNldC1idG4gbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cInJlc2V0RGF0ZSh0cnVlKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCJcclxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImJ0blJlc2V0RmlsdGVyQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt7IFwiUmVzZXRcIiB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG1hdC1idXR0b25cclxuICAgICAgICAgICAgICAgIGNsYXNzPVwibWF0LWZvY3VzLWluZGljYXRvciBhcHBseS1idG4gbWF0LWJ1dHRvbiBtYXQtYnV0dG9uLWJhc2VcIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cIlxyXG4gICAgICAgICAgICAgICAgICBhcHBseURhdGVPclJhbmdlRmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbkNvbmZpZ09icy5maWx0ZXJPYnMuZmlsdGVyRGF0ZUZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gICAgICAgICAgICAgICAgXCJcclxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImJ0bkFwcGx5RmlsdGVyQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt7IFwiQXBwbHlcIiB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvbWF0LW1lbnU+XHJcbiAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgIGNsYXNzPVwiaW5wdXQtZ3JvdXAgc2VhcmNoLWJhciBtbC1hdXRvXCJcclxuICAgICAgICAgICAgKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiXHJcbiAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImRpdlNlYXJjaEFwcG9pbnRtZW50XCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICNzZWFyY2hJbnB1dFxyXG4gICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInt7IHBsdWdpbkNvbmZpZ09icy5zZWFyY2hQbGFjZUhvbGRlciB8IHRyYW5zbGF0ZSB9fVwiXHJcbiAgICAgICAgICAgICAgKGtleXVwKT1cImFwcGx5RmlsdGVyKCRldmVudClcIlxyXG4gICAgICAgICAgICAgIChrZXlkb3duLlNwYWNlKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiXHJcbiAgICAgICAgICAgICAgKGtleWRvd24uRW50ZXIpPVwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCJcclxuICAgICAgICAgICAgICBbYXR0ci5kYXRhLXRlc3QtaWRdPVwiJ2V0U2VhcmNoXycgKyBwbHVnaW5Db25maWdPYnMudGFibGVIZWFkZXJcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAtYXBwZW5kXCI+XHJcbiAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiYnRuUmVzZXRTZWFyY2hBcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImJ0blJlc2V0QXBTZXJhY2ggbWF0LWljb24tYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJSZXNldCBhcHBvaW50bWVudCBzZWFyY2hcIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cImNsZWFyRmlsdGVyKCk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiXHJcbiAgICAgICAgICAgICAgICAqbmdJZj1cImlzRmlsdGVyQXBwbGllZFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwibWwtMFwiIHN0eWxlPVwibGluZS1oZWlnaHQ6IG5vcm1hbFwiXHJcbiAgICAgICAgICAgICAgICAgID5jbG9zZTwvbWF0LWljb25cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJpbnB1dC1ncm91cC10ZXh0IHNlYXJjaC1pY29uLXNwYW5cIlxyXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwiaWNvU2VhcmNoQXBwb2ludG1lbnRcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgc3JjPVwiYXNzZXRzL3N2Z3Mvc2VhcmNoLWljb24uc3ZnXCJcclxuICAgICAgICAgICAgICAgICAgYWx0PVwiXCJcclxuICAgICAgICAgICAgICAgICAgd2lkdGg9XCIyMHB4XCJcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMjBweFwiXHJcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImltZ1NlYXJjaEljb25BcHBvaW50bWVudFwiXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L21hdC1wYW5lbC10aXRsZT5cclxuICA8L21hdC1leHBhbnNpb24tcGFuZWwtaGVhZGVyPlxyXG4gIDxkaXYgY2xhc3M9XCJtYXQtZWxldmF0aW9uLXo4XCIgZGF0YS10ZXN0LWlkPVwiZGl2VGFibGVXcmFwcGVyQXBwb2ludG1lbnRcIj5cclxuICAgIDxzcGFuICpuZ0lmPVwidGFibGVMb2FkZXJcIj5cclxuICAgICAgPG5neC11aS1sb2FkZXJcclxuICAgICAgICBbbG9hZGVySWRdPVwiJ3RhYmxlLWxvYWRlci0nICsgcGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWdcIlxyXG4gICAgICAgIFtmZ3NUeXBlXT1cIidiYWxsLXNwaW4tY2xvY2t3aXNlJ1wiXHJcbiAgICAgICAgW2Znc0NvbG9yXT1cIicjYWJhNGE0J1wiXHJcbiAgICAgICAgW2Znc1Bvc2l0aW9uXT1cIidjZW50ZXItY2VudGVyJ1wiXHJcbiAgICAgICAgW2Znc1NpemVdPVwiNTBcIlxyXG4gICAgICAgIFtvdmVybGF5Q29sb3JdPVwiJ3JnYigyNTUsIDI1NSwgMjU1KSdcIlxyXG4gICAgICAgIFtoYXNQcm9ncmVzc0Jhcl09XCJmYWxzZVwiXHJcbiAgICAgICAgW3RleHRdPVwiXHJcbiAgICAgICAgICAoJ0xvYWRpbmcnIHwgdHJhbnNsYXRlKSArXHJcbiAgICAgICAgICAnICcgK1xyXG4gICAgICAgICAgKHBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnIHwgdHJhbnNsYXRlKSArXHJcbiAgICAgICAgICAnICcgK1xyXG4gICAgICAgICAgKCdkYXRhJyB8IHRyYW5zbGF0ZSkgK1xyXG4gICAgICAgICAgJy4uLidcclxuICAgICAgICBcIlxyXG4gICAgICAgIFt0ZXh0Q29sb3JdPVwiJyMzMzMnXCJcclxuICAgICAgICBbdGV4dFBvc2l0aW9uXT1cIidjZW50ZXItY2VudGVyJ1wiXHJcbiAgICAgICAgZGF0YS10ZXN0LWlkPVwibG9hZGVyQXBwb2ludG1lbnRcIlxyXG4gICAgICA+PC9uZ3gtdWktbG9hZGVyPlxyXG4gICAgPC9zcGFuPlxyXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLWNvbnRhaW5lclwiIGlkPVwidGFibGUtY29udGFpbmVyLXt7IGNvbXBvbmVudElkIH19XCI+XHJcbiAgICAgIDx0YWJsZSBtYXQtdGFibGUgW2RhdGFTb3VyY2VdPVwicGFnaW5hdGVkRGF0YVNvdXJjZVwiPlxyXG4gICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgZGlzcGxheWVkQXBwb2ludG1lbnRDb2x1bW5zXCJcclxuICAgICAgICAgIFttYXRDb2x1bW5EZWZdPVwiY29sdW1uLmtleVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbHVtbi5pc1NvcnRhYmxlOyBlbHNlIG5vU29ydFwiPlxyXG4gICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICBtYXQtaGVhZGVyLWNlbGxcclxuICAgICAgICAgICAgICAqbWF0SGVhZGVyQ2VsbERlZlxyXG4gICAgICAgICAgICAgIChjbGljayk9XCJoYW5kbGVTb3J0KGNvbHVtbi5rZXksICdhc2MnKVwiXHJcbiAgICAgICAgICAgICAgW2F0dHIuZGF0YS10ZXN0LWlkXT1cIlxyXG4gICAgICAgICAgICAgICAgJ3RoLScgKyBjb2x1bW4ua2V5ICsgJy0nICsgcGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWdcclxuICAgICAgICAgICAgICBcIlxyXG4gICAgICAgICAgICAgIGNsYXNzPVwic29ydGFibGUtaGVhZGVyXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHt7IGNvbHVtbi5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICAgIDxtYXQtaWNvbiBjbGFzcz1cInNvcnQtaWNvblwiPmFycm93X3Vwd2FyZDwvbWF0LWljb24+XHJcbiAgICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjbm9Tb3J0PlxyXG4gICAgICAgICAgICA8dGhcclxuICAgICAgICAgICAgICBtYXQtaGVhZGVyLWNlbGxcclxuICAgICAgICAgICAgICAqbWF0SGVhZGVyQ2VsbERlZlxyXG4gICAgICAgICAgICAgIFthdHRyLmRhdGEtdGVzdC1pZF09XCJcclxuICAgICAgICAgICAgICAgICd0aC0nICsgY29sdW1uLmtleSArICctJyArIHBsdWdpbkNvbmZpZ09icy5wbHVnaW5Db25maWdPYnNGbGFnXHJcbiAgICAgICAgICAgICAgXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHt7IGNvbHVtbi5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuXHJcbiAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgbWF0LWNlbGxcclxuICAgICAgICAgICAgKm1hdENlbGxEZWY9XCJsZXQgZWxlbWVudDsgbGV0IGogPSBpbmRleFwiXHJcbiAgICAgICAgICAgIFthdHRyLmRhdGEtdGVzdC1pZF09XCJcclxuICAgICAgICAgICAgICAndGQtJyArXHJcbiAgICAgICAgICAgICAgY29sdW1uLmtleSArXHJcbiAgICAgICAgICAgICAgJy0nICtcclxuICAgICAgICAgICAgICBwbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZyArXHJcbiAgICAgICAgICAgICAgJy0nICtcclxuICAgICAgICAgICAgICBqXHJcbiAgICAgICAgICAgIFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgICAgICAqbmdJZj1cIlxyXG4gICAgICAgICAgICAgICAgY29sdW1uLmtleSAhPT0gJ3BhdGllbnRfbmFtZScgJiZcclxuICAgICAgICAgICAgICAgIGNvbHVtbi5rZXkgIT09ICd2aXNpdF9jb21wbGV0ZWQnXHJcbiAgICAgICAgICAgICAgXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZmxvYXQtbGVmdFwiXHJcbiAgICAgICAgICAgICAgICBbaW5uZXJIVE1MXT1cInJlbmRlckh0bWxDb250ZW50KGNvbHVtbiwgZWxlbWVudClcIlxyXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiZ2V0Q2xhc3Nlcyhjb2x1bW4sIGVsZW1lbnQpXCJcclxuICAgICAgICAgICAgICA+PC9kaXY+XHJcbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG5cclxuICAgICAgICAgICAgPCEtLSBUaGlzIGlzIGZvciB2aXNpdF9jb21wbGV0ZWQgY29sdW1uIC0tPlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sdW1uLmtleSA9PT0gJ3Zpc2l0X2NvbXBsZXRlZCdcIj5cclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgdmlzaXQtY29tcGxldGVkLWNlbGxcIlxyXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS10ZXN0LWlkXT1cIlxyXG4gICAgICAgICAgICAgICAgICAndGQtdmlzaXRfY29tcGxldGVkLScgK1xyXG4gICAgICAgICAgICAgICAgICBwbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZyArXHJcbiAgICAgICAgICAgICAgICAgICctJyArXHJcbiAgICAgICAgICAgICAgICAgIGpcclxuICAgICAgICAgICAgICAgIFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICBzcmM9XCJhc3NldHMvc3Zncy9ncmVlbi1wYWQuc3ZnXCJcclxuICAgICAgICAgICAgICAgICAgYWx0PVwiQ29tcGxldGVkXCJcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJtci0yXCJcclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtc3VjY2Vzc1wiPlxyXG4gICAgICAgICAgICAgICAgICB7eyBlbGVtZW50LmNvbXBsZXRlZCB9fVxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuXHJcbiAgICAgICAgICAgIDwhLS0gUGF0aWVudCBOYW1lIENvbHVtbiAtLT5cclxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbHVtbi5rZXkgPT09ICdwYXRpZW50X25hbWUnXCI+XHJcbiAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCJcclxuICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtdGVzdC1pZF09XCJcclxuICAgICAgICAgICAgICAgICAgJ3RkLXBhdGllbnRfbmFtZS0nICtcclxuICAgICAgICAgICAgICAgICAgcGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcgK1xyXG4gICAgICAgICAgICAgICAgICAnLScgK1xyXG4gICAgICAgICAgICAgICAgICBqXHJcbiAgICAgICAgICAgICAgICBcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgKm5nSWY9XCJlbGVtZW50LnBhdGllbnRJZFwiXHJcbiAgICAgICAgICAgICAgICAgIHNyYz1cInt7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tQYXRpZW50UmVnRmllbGQoJ1Byb2ZpbGUgUGhvdG8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgPyBiYXNlVVJMICsgJy9wZXJzb25pbWFnZS8nICsgZWxlbWVudC5wYXRpZW50SWRcclxuICAgICAgICAgICAgICAgICAgICAgIDogJydcclxuICAgICAgICAgICAgICAgICAgfX1cIlxyXG4gICAgICAgICAgICAgICAgICBhbHQ9XCJcIlxyXG4gICAgICAgICAgICAgICAgICB3aWR0aD1cIjMycHhcIlxyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIzMnB4XCJcclxuICAgICAgICAgICAgICAgICAgc3R5bGU9XCJib3JkZXItcmFkaXVzOiA1MCVcIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgKm5nSWY9XCJwbHVnaW5Db25maWdPYnMucGx1Z2luQ29uZmlnT2JzRmxhZyAhPT0gJ0FwcG9pbnRtZW50J1wiXHJcbiAgICAgICAgICAgICAgICAgIHNyYz1cInt7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tQYXRpZW50UmVnRmllbGQoJ1Byb2ZpbGUgUGhvdG8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgPyBiYXNlVVJMICsgJy9wZXJzb25pbWFnZS8nICsgZWxlbWVudC5wZXJzb24udXVpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xyXG4gICAgICAgICAgICAgICAgICB9fVwiXHJcbiAgICAgICAgICAgICAgICAgIGFsdD1cIlwiXHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMzJweFwiXHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjMycHhcIlxyXG4gICAgICAgICAgICAgICAgICBzdHlsZT1cImJvcmRlci1yYWRpdXM6IDUwJVwiXHJcbiAgICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtdGVzdC1pZF09XCJcclxuICAgICAgICAgICAgICAgICAgICAndGQtcGF0aWVudF9pbWctJyArXHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luQ29uZmlnT2JzLnBsdWdpbkNvbmZpZ09ic0ZsYWcgK1xyXG4gICAgICAgICAgICAgICAgICAgICctJyArXHJcbiAgICAgICAgICAgICAgICAgICAgalxyXG4gICAgICAgICAgICAgICAgICBcIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmbG9hdC1sZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgW2lubmVySFRNTF09XCJyZW5kZXJIdG1sQ29udGVudChjb2x1bW4sIGVsZW1lbnQpXCJcclxuICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiZ2V0Q2xhc3Nlcyhjb2x1bW4sIGVsZW1lbnQpXCJcclxuICAgICAgICAgICAgICAgID48L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcblxyXG4gICAgICAgICAgICA8IS0tIFRlbGVwaG9uZSBDb2x1bW4gLS0+XHJcbiAgICAgICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgICAgICAqbmdJZj1cImNvbHVtbi5rZXkgPT09ICd0ZWxlcGhvbmUnICYmIGVsZW1lbnQudGVsZXBob25lXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwib3BlbldoYXRzQXBwKCRldmVudCwgZWxlbWVudC50ZWxlcGhvbmUpXCJcclxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZmxvYXQtbGVmdCBpY29uLWJ0biBtLTBcIlxyXG4gICAgICAgICAgICAgICAgW2F0dHIuZGF0YS10ZXN0LWlkXT1cIidsaW5rUGF0aWVudFdoYXRzQXBwJyArIGpcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3N2Z3Mvd2hhdHNhcHAtZ3JlZW4uc3ZnXCIgYWx0PVwiV2hhdHNBcHBcIiAvPlxyXG4gICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcblxyXG4gICAgICAgICAgICA8IS0tIEFjdGlvbnMgQ29sdW1uIC0tPlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sdW1uLmtleSA9PT0gJ2FjdGlvbnMnXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbnMtYnRuLXdyYXAgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgYWN0aW9uIG9mIGNvbHVtbi5hY3Rpb25CdXR0b25zOyBsZXQgayA9IGluZGV4XCJcclxuICAgICAgICAgICAgICAgICAgW25nU3R5bGVdPVwie1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBhY3Rpb24uc3R5bGU/LmNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYWN0aW9uLnN0eWxlPy5iYWNrZ3JvdW5kQ29sb3JcclxuICAgICAgICAgICAgICAgICAgfVwiXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYWN0aW9uLWJ0biBtci0yXCJcclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIChjbGljayk9XCJcclxuICAgICAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IGhhbmRsZUFjdGlvbihhY3Rpb24sIGVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgIFwiXHJcbiAgICAgICAgICAgICAgICAgIFthdHRyLmRhdGEtdGVzdC1pZF09XCInYnRuLWFjdGlvbi0nICsgYWN0aW9uLmxhYmVsICsgJy0nICsga1wiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIHt7IGFjdGlvbi5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgPC90ZD5cclxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuXHJcbiAgICAgICAgPCEtLSBObyBEYXRhIFJvdyAtLT5cclxuICAgICAgICA8dHIgY2xhc3M9XCJtYXQtcm93XCIgKm1hdE5vRGF0YVJvdz5cclxuICAgICAgICAgIDx0ZFxyXG4gICAgICAgICAgICBjbGFzcz1cIm1hdC1jZWxsIHRleHQtY2VudGVyXCJcclxuICAgICAgICAgICAgW2F0dHIuY29sc3Bhbl09XCJkaXNwbGF5ZWRDb2x1bW5zLmxlbmd0aFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHt7IHBsdWdpbkNvbmZpZ09icy5ub1JlY29yZEZvdW5kIHwgdHJhbnNsYXRlIH19XHJcbiAgICAgICAgICA8L3RkPlxyXG4gICAgICAgIDwvdHI+XHJcblxyXG4gICAgICAgIDwhLS0gUm93IERlZmluaXRpb25zIC0tPlxyXG4gICAgICAgIDx0ciBtYXQtaGVhZGVyLXJvdyAqbWF0SGVhZGVyUm93RGVmPVwiZGlzcGxheWVkQ29sdW1uc1wiPjwvdHI+XHJcbiAgICAgICAgPHRyXHJcbiAgICAgICAgICBtYXQtcm93XHJcbiAgICAgICAgICAqbWF0Um93RGVmPVwibGV0IHJvdzsgbGV0IHggPSBpbmRleDsgY29sdW1uczogZGlzcGxheWVkQ29sdW1uc1wiXHJcbiAgICAgICAgICBbYXR0ci5kYXRhLXRlc3QtaWRdPVwiJ3RyJyArIHhcIlxyXG4gICAgICAgICAgW3JvdXRlckxpbmtdPVwiWycvZGFzaGJvYXJkL3Zpc2l0LXN1bW1hcnknLCByb3cudXVpZF1cIlxyXG4gICAgICAgID48L3RyPlxyXG4gICAgICA8L3RhYmxlPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8bWF0LXBhZ2luYXRvclxyXG4gICAgICAqbmdJZj1cInBsdWdpbkNvbmZpZ09icz8ucGx1Z2luQ29uZmlnT2JzRmxhZyA9PT0gJ0FwcG9pbnRtZW50J1wiXHJcbiAgICAgICN0ZW1wUGFnaW5hdG9yXHJcbiAgICAgIGhpZGVQYWdlU2l6ZVxyXG4gICAgICBbcGFnZVNpemVPcHRpb25zXT1cInBhZ2VTaXplT3B0aW9uc1wiXHJcbiAgICAgIFtsZW5ndGhdPVwiZ2V0Q3VycmVudFRvdGFsQ291bnQoKVwiXHJcbiAgICAgIFtwYWdlSW5kZXhdPVwiY3VycmVudFBhZ2VcIlxyXG4gICAgICBbcGFnZVNpemVdPVwiaXRlbXNQZXJQYWdlXCJcclxuICAgICAgW2Rpc2FibGVkXT1cImlzUGFnaW5hdGlvbkRpc2FibGVkKClcIlxyXG4gICAgICBhcmlhLWxhYmVsPVwiU2VsZWN0IHBhZ2Ugb2YgcGVyaW9kaWMgZWxlbWVudHNcIlxyXG4gICAgPjwvbWF0LXBhZ2luYXRvcj5cclxuICAgIDxtYXQtcGFnaW5hdG9yXHJcbiAgICAgICN0ZW1wUGFnaW5hdG9yXHJcbiAgICAgICpuZ0lmPVwicGx1Z2luQ29uZmlnT2JzPy5wbHVnaW5Db25maWdPYnNGbGFnICE9PSAnQXBwb2ludG1lbnQnXCJcclxuICAgICAgaGlkZVBhZ2VTaXplXHJcbiAgICAgIFtwYWdlU2l6ZU9wdGlvbnNdPVwicGFnZVNpemVPcHRpb25zXCJcclxuICAgICAgW2xlbmd0aF09XCJnZXRDdXJyZW50VG90YWxDb3VudCgpXCJcclxuICAgICAgW3BhZ2VJbmRleF09XCJjdXJyZW50UGFnZVwiXHJcbiAgICAgIFtwYWdlU2l6ZV09XCJpdGVtc1BlclBhZ2VcIlxyXG4gICAgICBbZGlzYWJsZWRdPVwiaXNQYWdpbmF0aW9uRGlzYWJsZWQoKVwiXHJcbiAgICAgIChwYWdlKT1cInBhZ2VFdmVudCA9IGdldERhdGEoJGV2ZW50KVwiXHJcbiAgICAgIGFyaWEtbGFiZWw9XCJTZWxlY3QgcGFnZSBvZiBwZXJpb2RpYyBlbGVtZW50c1wiXHJcbiAgICA+PC9tYXQtcGFnaW5hdG9yPlxyXG4gIDwvZGl2PlxyXG48L21hdC1leHBhbnNpb24tcGFuZWw+XHJcbiJdfQ==