import { formatDate } from '@angular/common';
import { Component, Inject } from '@angular/core';
import { DateAdapter, MAT_DATE_FORMATS, NativeDateAdapter } from '@angular/material/core';
import { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';
import { TranslateService } from '@ngx-translate/core';
// import * as moment from 'moment';
import moment from 'moment';
import { ToastrService } from 'ngx-toastr';
import { AppointmentService } from '../../services/appointment.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
import * as i2 from "../../services/appointment.service";
import * as i3 from "ngx-toastr";
import * as i4 from "@ngx-translate/core";
import * as i5 from "@angular/material/form-field";
import * as i6 from "@angular/common";
import * as i7 from "@angular/forms";
import * as i8 from "@angular/material/datepicker";
export const PICK_FORMATS = {
    parse: { dateInput: { month: 'short', year: 'numeric', day: 'numeric' } },
    display: {
        dateInput: 'input',
        monthYearLabel: { year: 'numeric', month: 'short' },
        dateA11yLabel: { year: 'numeric', month: 'long', day: 'numeric' },
        monthYearA11yLabel: { year: 'numeric', month: 'long' }
    }
};
class PickDateAdapter extends NativeDateAdapter {
    format(date, displayFormat) {
        if (displayFormat === 'input') {
            return formatDate(date, 'dd MMMM yyyy', this.locale);
        }
        else {
            return date.toDateString();
        }
    }
}
export class RescheduleAppointmentComponent {
    data;
    dialogRef;
    appointmentService;
    toastr;
    translate;
    minDate;
    scheduleData = {
        morning: [],
        afternoon: [],
        evening: []
    };
    selectedDate = moment().format("YYYY-MM-DD");
    slots = [];
    selectedSlot;
    constructor(data, dialogRef, appointmentService, toastr, translate) {
        this.data = data;
        this.dialogRef = dialogRef;
        this.appointmentService = appointmentService;
        this.toastr = toastr;
        this.translate = translate;
        this.minDate = new Date();
    }
    ngOnInit() {
        this.getAppointmentSlots();
    }
    /**
    * Callback for date change event
    * @param {Event} event - Date changed event
    * @return {void}
    */
    dateChanged(event) {
        this.selectedSlot = null;
        this.selectedDate = moment(event.target.value).format("YYYY-MM-DD");
        this.getAppointmentSlots();
    }
    /**
    * Get appointment slots for a given speciality, from and to date
    * @param {string} fromDate - From date
    * @param {string} toDate - To date
    * @param {string} speciality - Speciality
    * @return {void}
    */
    getAppointmentSlots(fromDate = this.selectedDate, toDate = this.selectedDate, speciality = this.data?.speciality) {
        this.scheduleData = {
            morning: [],
            afternoon: [],
            evening: []
        };
        this.appointmentService.getAppointmentSlots(moment(fromDate).format("DD/MM/YYYY"), moment(toDate).format("DD/MM/YYYY"), speciality).subscribe((res) => {
            this.slots = res.dates;
            this.slots.forEach((slot) => {
                if (moment(slot.slotTime, "LT").isBefore(moment("12:00 PM", "LT"))) {
                    this.scheduleData.morning.push(slot.slotTime);
                }
                else if (moment(slot.slotTime, "LT").isBetween(moment("11:30 AM", "LT"), moment("5:00 PM", "LT"))) {
                    this.scheduleData.afternoon.push(slot.slotTime);
                }
                else {
                    this.scheduleData.evening.push(slot.slotTime);
                }
            });
        });
    }
    /**
    * Reschedule appointment
    * @return {void}
    */
    reschedule() {
        if (this.selectedDate && this.selectedSlot) {
            this.close({ date: this.selectedDate, slot: this.selectedSlot });
        }
        else {
            this.toastr.warning(this.translate.instant("Please select slot to reschedule."), this.translate.instant("Select Slot"));
        }
    }
    /**
    * Close modal
    * @param {boolean|RescheduleAppointmentModalResponseModel} val - Dialog result
    * @return {void}
    */
    close(val) {
        this.dialogRef.close(val);
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: RescheduleAppointmentComponent, deps: [{ token: MAT_DIALOG_DATA }, { token: i1.MatDialogRef }, { token: i2.AppointmentService }, { token: i3.ToastrService }, { token: i4.TranslateService }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.3.0", type: RescheduleAppointmentComponent, selector: "app-reschedule-appointment", providers: [
            { provide: DateAdapter, useClass: PickDateAdapter },
            { provide: MAT_DATE_FORMATS, useValue: PICK_FORMATS }
        ], ngImport: i0, template: "<div class=\"reschedule-modal\" data-test-id=\"rescheduleModal\">\r\n  <div class=\"modal-title\" data-test-id=\"rescheduleModalTitleContainer\">\r\n    <h6 class=\"mb-0\" data-test-id=\"rescheduleModalTitle\">{{ 'Reschedule appointment' | translate }}</h6>\r\n    <button class=\"modal-close-btn\" (click)=\"close(false)\" data-test-id=\"btnCloseRescheduleModal\">\r\n      <img src=\"assets/svgs/Close.svg\" alt=\"close icon\">\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"modal-body\" data-test-id=\"rescheduleModalBody\">\r\n    <div class=\"container-fluid\" data-test-id=\"rescheduleModalContainer\">\r\n      <div class=\"row\" data-test-id=\"rescheduleModalRow\">\r\n        <div class=\"col-md-12 p-0\" data-test-id=\"rescheduleModalCol\">\r\n\r\n          <div class=\"select-date-con\" data-test-id=\"dateSelectionContainer\">\r\n            <div class=\"form-group row\" data-test-id=\"dateSelectionFormGroup\">\r\n              <label for=\"expiryDate\" class=\"col-sm-3 col-form-label\" data-test-id=\"lblSelectDate\">\r\n                {{ 'Select Date' | translate }}\r\n              </label>\r\n              <div class=\"col-sm-6\" data-test-id=\"dateInputCol\">\r\n                <div class=\"input-group\" data-test-id=\"dateInputGroup\">\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    [(ngModel)]=\"selectedDate\"\r\n                    (dateChange)=\"dateChanged($event)\"\r\n                    [min]=\"minDate\"\r\n                    [matDatepicker]=\"dp1\"\r\n                    placeholder=\"{{'Select date'|translate}}\"\r\n                    aria-label=\"Date\"\r\n                    aria-describedby=\"basic-addon1\"\r\n                    readonly\r\n                    data-test-id=\"etDate\"\r\n                  >\r\n                  <mat-datepicker #dp1 data-test-id=\"matDatepicker\"></mat-datepicker>\r\n                  <div class=\"input-group-append\" data-test-id=\"datePickerAppend\">\r\n                    <span class=\"input-group-text\" id=\"basic-addon1\" data-test-id=\"datePickerIconWrapper\">\r\n                      <mat-datepicker-toggle matSuffix [for]=\"dp1\" data-test-id=\"dpDate\">\r\n                        <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"calendar icon\" data-test-id=\"dpDateIcon\">\r\n                      </mat-datepicker-toggle>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"slots-con\" data-test-id=\"slotsContainer\">\r\n            <h6 data-test-id=\"slotsTitle\">{{ 'Select a timeslot' | translate }}</h6>\r\n\r\n            <div class=\"slot-section\" *ngIf=\"scheduleData.morning.length;\" data-test-id=\"slotSectionMorning\">\r\n              <h6 data-test-id=\"slotMorningTitle\">\r\n                <img src=\"assets/svgs/sunrise.svg\" alt=\"morning icon\" class=\"mr-2\" data-test-id=\"slotMorningIcon\" />\r\n                {{ 'Morning' | translate }}\r\n              </h6>\r\n              <div class=\"slot-chips\" data-test-id=\"slotMorningChips\">\r\n                <div\r\n                  class=\"slot-chip-item\"\r\n                  [class.selected]=\"selectedSlot == s\"\r\n                  *ngFor=\"let s of scheduleData.morning;\"\r\n                  (click)=\"selectedSlot = s\"\r\n                  data-test-id=\"slotMorningChip\"\r\n                >\r\n                  {{s}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"slot-section\" *ngIf=\"scheduleData.afternoon.length;\" data-test-id=\"slotSectionAfternoon\">\r\n              <h6 data-test-id=\"slotAfternoonTitle\">\r\n                <img src=\"assets/svgs/sun.svg\" alt=\"afternoon icon\" class=\"mr-2\" data-test-id=\"slotAfternoonIcon\" />\r\n                {{ 'Afternoon' | translate }}\r\n              </h6>\r\n              <div class=\"slot-chips\" data-test-id=\"slotAfternoonChips\">\r\n                <div\r\n                  class=\"slot-chip-item\"\r\n                  [class.selected]=\"selectedSlot == s\"\r\n                  *ngFor=\"let s of scheduleData.afternoon;\"\r\n                  (click)=\"selectedSlot = s\"\r\n                  data-test-id=\"slotAfternoonChip\"\r\n                >\r\n                  {{s}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"slot-section\" *ngIf=\"scheduleData.evening.length;\" data-test-id=\"slotSectionEvening\">\r\n              <h6 data-test-id=\"slotEveningTitle\">\r\n                <img src=\"assets/svgs/sunset.svg\" alt=\"evening icon\" class=\"mr-2\" data-test-id=\"slotEveningIcon\" />\r\n                {{ 'Evening' | translate }}\r\n              </h6>\r\n              <div class=\"slot-chips\" data-test-id=\"slotEveningChips\">\r\n                <div\r\n                  class=\"slot-chip-item\"\r\n                  [class.selected]=\"selectedSlot == s\"\r\n                  *ngFor=\"let s of scheduleData.evening;\"\r\n                  (click)=\"selectedSlot = s\"\r\n                  data-test-id=\"slotEveningChip\"\r\n                >\r\n                  {{s}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-center py-2\" data-test-id=\"rescheduleActionContainer\">\r\n            <button class=\"confirm-btn\" type=\"button\" (click)=\"reschedule()\" data-test-id=\"btnSubmitRescheduleModal\">\r\n              {{ 'Reschedule' | translate }}\r\n            </button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".reschedule-modal{font-family:DM Sans}.reschedule-modal .modal-title{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:24px;width:100%;height:70px;background:var(--color-lightGray)}.reschedule-modal .modal-title h6{font-weight:700;font-size:20px;color:var(--color-darkestBlue)}.reschedule-modal .modal-title .modal-close-btn{border:none;background:transparent}.reschedule-modal .modal-body{padding:24px}.reschedule-modal .modal-body .select-date-con{border-bottom:1px solid rgba(178,175,190,.2);margin:10px 0}.reschedule-modal .modal-body .slots-con{max-height:55vh;overflow:auto}.reschedule-modal .modal-body .slots-con h6{font-weight:700;font-size:16px;color:var(--color-darkestBlue);display:flex;align-items:center}.reschedule-modal .modal-body .slots-con .slot-section{padding:10px 0}.reschedule-modal .modal-body .slots-con .slot-section .slot-chips{display:flex;flex-wrap:wrap;align-items:center}.reschedule-modal .modal-body .slots-con .slot-section .slot-chips .slot-chip-item{padding:8px;background:var(--color-lightGray);border:1px solid rgba(178,175,190,.2);border-radius:6px;font-size:14px;line-height:150%;color:var(--color-darkestBlue);margin-right:5px;margin-bottom:5px;cursor:pointer}.reschedule-modal .modal-body .slots-con .slot-section .slot-chips .slot-chip-item.selected{background:var(--color-darkBlue);border:none;border-radius:6px;color:var(--color-white)}.cancel-btn{padding:8px 24px;min-width:119px;height:48px;background:var(--color-white);border:1px solid var(--color-lightGray);border-radius:8px;font-size:18px;line-height:150%;color:var(--color-darkBlue);font-weight:700}.confirm-btn{padding:8px 24px;min-width:119px;height:48px;background:var(--color-darkBlue);border:1px solid var(--color-darkBlue);border-radius:8px;font-size:18px;line-height:150%;color:var(--color-white);font-weight:700}.form-group label{font-size:14px;color:var(--color-darkestBlue);font-weight:700}.form-group .input-group{border:1px solid rgba(178,175,190,.2);background:var(--color-offWhite);border-radius:8px;height:48px}.form-group .input-group .form-control{padding:14px 16px;height:48px;font-size:16px;color:var(--color-darkestBlue);border:none;background:transparent}.form-group .input-group .form-control:focus{box-shadow:none}.form-group .input-group .input-group-append .input-group-text{background:transparent;border:none;padding:0}\n"], dependencies: [{ kind: "directive", type: i5.MatSuffix, selector: "[matSuffix]" }, { kind: "directive", type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i7.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i7.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i8.MatDatepicker, selector: "mat-datepicker", exportAs: ["matDatepicker"] }, { kind: "directive", type: i8.MatDatepickerInput, selector: "input[matDatepicker]", inputs: ["matDatepicker", "min", "max", "matDatepickerFilter"], exportAs: ["matDatepickerInput"] }, { kind: "component", type: i8.MatDatepickerToggle, selector: "mat-datepicker-toggle", inputs: ["for", "tabIndex", "aria-label", "disabled", "disableRipple"], exportAs: ["matDatepickerToggle"] }, { kind: "directive", type: i8.MatDatepickerToggleIcon, selector: "[matDatepickerToggleIcon]" }, { kind: "pipe", type: i4.TranslatePipe, name: "translate" }] });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: RescheduleAppointmentComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-reschedule-appointment', providers: [
                        { provide: DateAdapter, useClass: PickDateAdapter },
                        { provide: MAT_DATE_FORMATS, useValue: PICK_FORMATS }
                    ], template: "<div class=\"reschedule-modal\" data-test-id=\"rescheduleModal\">\r\n  <div class=\"modal-title\" data-test-id=\"rescheduleModalTitleContainer\">\r\n    <h6 class=\"mb-0\" data-test-id=\"rescheduleModalTitle\">{{ 'Reschedule appointment' | translate }}</h6>\r\n    <button class=\"modal-close-btn\" (click)=\"close(false)\" data-test-id=\"btnCloseRescheduleModal\">\r\n      <img src=\"assets/svgs/Close.svg\" alt=\"close icon\">\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"modal-body\" data-test-id=\"rescheduleModalBody\">\r\n    <div class=\"container-fluid\" data-test-id=\"rescheduleModalContainer\">\r\n      <div class=\"row\" data-test-id=\"rescheduleModalRow\">\r\n        <div class=\"col-md-12 p-0\" data-test-id=\"rescheduleModalCol\">\r\n\r\n          <div class=\"select-date-con\" data-test-id=\"dateSelectionContainer\">\r\n            <div class=\"form-group row\" data-test-id=\"dateSelectionFormGroup\">\r\n              <label for=\"expiryDate\" class=\"col-sm-3 col-form-label\" data-test-id=\"lblSelectDate\">\r\n                {{ 'Select Date' | translate }}\r\n              </label>\r\n              <div class=\"col-sm-6\" data-test-id=\"dateInputCol\">\r\n                <div class=\"input-group\" data-test-id=\"dateInputGroup\">\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    [(ngModel)]=\"selectedDate\"\r\n                    (dateChange)=\"dateChanged($event)\"\r\n                    [min]=\"minDate\"\r\n                    [matDatepicker]=\"dp1\"\r\n                    placeholder=\"{{'Select date'|translate}}\"\r\n                    aria-label=\"Date\"\r\n                    aria-describedby=\"basic-addon1\"\r\n                    readonly\r\n                    data-test-id=\"etDate\"\r\n                  >\r\n                  <mat-datepicker #dp1 data-test-id=\"matDatepicker\"></mat-datepicker>\r\n                  <div class=\"input-group-append\" data-test-id=\"datePickerAppend\">\r\n                    <span class=\"input-group-text\" id=\"basic-addon1\" data-test-id=\"datePickerIconWrapper\">\r\n                      <mat-datepicker-toggle matSuffix [for]=\"dp1\" data-test-id=\"dpDate\">\r\n                        <img matDatepickerToggleIcon src=\"assets/svgs/calendar-date.svg\" alt=\"calendar icon\" data-test-id=\"dpDateIcon\">\r\n                      </mat-datepicker-toggle>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"slots-con\" data-test-id=\"slotsContainer\">\r\n            <h6 data-test-id=\"slotsTitle\">{{ 'Select a timeslot' | translate }}</h6>\r\n\r\n            <div class=\"slot-section\" *ngIf=\"scheduleData.morning.length;\" data-test-id=\"slotSectionMorning\">\r\n              <h6 data-test-id=\"slotMorningTitle\">\r\n                <img src=\"assets/svgs/sunrise.svg\" alt=\"morning icon\" class=\"mr-2\" data-test-id=\"slotMorningIcon\" />\r\n                {{ 'Morning' | translate }}\r\n              </h6>\r\n              <div class=\"slot-chips\" data-test-id=\"slotMorningChips\">\r\n                <div\r\n                  class=\"slot-chip-item\"\r\n                  [class.selected]=\"selectedSlot == s\"\r\n                  *ngFor=\"let s of scheduleData.morning;\"\r\n                  (click)=\"selectedSlot = s\"\r\n                  data-test-id=\"slotMorningChip\"\r\n                >\r\n                  {{s}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"slot-section\" *ngIf=\"scheduleData.afternoon.length;\" data-test-id=\"slotSectionAfternoon\">\r\n              <h6 data-test-id=\"slotAfternoonTitle\">\r\n                <img src=\"assets/svgs/sun.svg\" alt=\"afternoon icon\" class=\"mr-2\" data-test-id=\"slotAfternoonIcon\" />\r\n                {{ 'Afternoon' | translate }}\r\n              </h6>\r\n              <div class=\"slot-chips\" data-test-id=\"slotAfternoonChips\">\r\n                <div\r\n                  class=\"slot-chip-item\"\r\n                  [class.selected]=\"selectedSlot == s\"\r\n                  *ngFor=\"let s of scheduleData.afternoon;\"\r\n                  (click)=\"selectedSlot = s\"\r\n                  data-test-id=\"slotAfternoonChip\"\r\n                >\r\n                  {{s}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"slot-section\" *ngIf=\"scheduleData.evening.length;\" data-test-id=\"slotSectionEvening\">\r\n              <h6 data-test-id=\"slotEveningTitle\">\r\n                <img src=\"assets/svgs/sunset.svg\" alt=\"evening icon\" class=\"mr-2\" data-test-id=\"slotEveningIcon\" />\r\n                {{ 'Evening' | translate }}\r\n              </h6>\r\n              <div class=\"slot-chips\" data-test-id=\"slotEveningChips\">\r\n                <div\r\n                  class=\"slot-chip-item\"\r\n                  [class.selected]=\"selectedSlot == s\"\r\n                  *ngFor=\"let s of scheduleData.evening;\"\r\n                  (click)=\"selectedSlot = s\"\r\n                  data-test-id=\"slotEveningChip\"\r\n                >\r\n                  {{s}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"d-flex justify-content-center py-2\" data-test-id=\"rescheduleActionContainer\">\r\n            <button class=\"confirm-btn\" type=\"button\" (click)=\"reschedule()\" data-test-id=\"btnSubmitRescheduleModal\">\r\n              {{ 'Reschedule' | translate }}\r\n            </button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".reschedule-modal{font-family:DM Sans}.reschedule-modal .modal-title{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:24px;width:100%;height:70px;background:var(--color-lightGray)}.reschedule-modal .modal-title h6{font-weight:700;font-size:20px;color:var(--color-darkestBlue)}.reschedule-modal .modal-title .modal-close-btn{border:none;background:transparent}.reschedule-modal .modal-body{padding:24px}.reschedule-modal .modal-body .select-date-con{border-bottom:1px solid rgba(178,175,190,.2);margin:10px 0}.reschedule-modal .modal-body .slots-con{max-height:55vh;overflow:auto}.reschedule-modal .modal-body .slots-con h6{font-weight:700;font-size:16px;color:var(--color-darkestBlue);display:flex;align-items:center}.reschedule-modal .modal-body .slots-con .slot-section{padding:10px 0}.reschedule-modal .modal-body .slots-con .slot-section .slot-chips{display:flex;flex-wrap:wrap;align-items:center}.reschedule-modal .modal-body .slots-con .slot-section .slot-chips .slot-chip-item{padding:8px;background:var(--color-lightGray);border:1px solid rgba(178,175,190,.2);border-radius:6px;font-size:14px;line-height:150%;color:var(--color-darkestBlue);margin-right:5px;margin-bottom:5px;cursor:pointer}.reschedule-modal .modal-body .slots-con .slot-section .slot-chips .slot-chip-item.selected{background:var(--color-darkBlue);border:none;border-radius:6px;color:var(--color-white)}.cancel-btn{padding:8px 24px;min-width:119px;height:48px;background:var(--color-white);border:1px solid var(--color-lightGray);border-radius:8px;font-size:18px;line-height:150%;color:var(--color-darkBlue);font-weight:700}.confirm-btn{padding:8px 24px;min-width:119px;height:48px;background:var(--color-darkBlue);border:1px solid var(--color-darkBlue);border-radius:8px;font-size:18px;line-height:150%;color:var(--color-white);font-weight:700}.form-group label{font-size:14px;color:var(--color-darkestBlue);font-weight:700}.form-group .input-group{border:1px solid rgba(178,175,190,.2);background:var(--color-offWhite);border-radius:8px;height:48px}.form-group .input-group .form-control{padding:14px 16px;height:48px;font-size:16px;color:var(--color-darkestBlue);border:none;background:transparent}.form-group .input-group .form-control:focus{box-shadow:none}.form-group .input-group .input-group-append .input-group-text{background:transparent;border:none;padding:0}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [MAT_DIALOG_DATA]
                }] }, { type: i1.MatDialogRef }, { type: i2.AppointmentService }, { type: i3.ToastrService }, { type: i4.TranslateService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzY2hlZHVsZS1hcHBvaW50bWVudC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9paC1saWJyYXJ5L3NyYy9saWIvbW9kYWwtY29tcG9uZW50cy9yZXNjaGVkdWxlLWFwcG9pbnRtZW50L3Jlc2NoZWR1bGUtYXBwb2ludG1lbnQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWgtbGlicmFyeS9zcmMvbGliL21vZGFsLWNvbXBvbmVudHMvcmVzY2hlZHVsZS1hcHBvaW50bWVudC9yZXNjaGVkdWxlLWFwcG9pbnRtZW50LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM3QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUMxRCxPQUFPLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLGlCQUFpQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDMUYsT0FBTyxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN6RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxvQ0FBb0M7QUFDcEMsT0FBTyxNQUFNLE1BQU0sUUFBUSxDQUFDO0FBQzVCLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFM0MsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7Ozs7Ozs7Ozs7QUFFeEUsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHO0lBQzFCLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLEVBQUU7SUFDekUsT0FBTyxF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LENBQUM7SUFDNUIsQ0FBQzt1R0FsRlUsOEJBQThCLGtCQVlyQixlQUFlOzJGQVp4Qiw4QkFBOEIscURBTDlCO1lBQ1QsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUU7WUFDbkQsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRTtTQUN0RCwwQkN0Q0gscXJMQW1IQTs7MkZEM0VhLDhCQUE4QjtrQkFUMUMsU0FBUzsrQkFDRSw0QkFBNEIsYUFHM0I7d0JBQ1QsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUU7d0JBQ25ELEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUU7cUJBQ3REOzswQkFjWSxNQUFNOzJCQUFDLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3QsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEYXRlQWRhcHRlciwgTUFUX0RBVEVfRk9STUFUUywgTmF0aXZlRGF0ZUFkYXB0ZXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9jb3JlJztcclxuaW1wb3J0IHsgTWF0RGlhbG9nUmVmLCBNQVRfRElBTE9HX0RBVEEgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XHJcbi8vIGltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFRvYXN0clNlcnZpY2UgfSBmcm9tICduZ3gtdG9hc3RyJztcclxuaW1wb3J0IHsgQXBpUmVzcG9uc2VNb2RlbCwgUmVzY2hlZHVsZUFwcG9pbnRtZW50TW9kYWxSZXNwb25zZU1vZGVsLCBTY2hlZHVsZURhdGFNb2RlbCwgU2xvdE1vZGVsIH0gZnJvbSAnLi4vLi4vbW9kZWwvbW9kZWwnO1xyXG5pbXBvcnQgeyBBcHBvaW50bWVudFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcHBvaW50bWVudC5zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjb25zdCBQSUNLX0ZPUk1BVFMgPSB7XHJcbiAgcGFyc2U6IHsgZGF0ZUlucHV0OiB7IG1vbnRoOiAnc2hvcnQnLCB5ZWFyOiAnbnVtZXJpYycsIGRheTogJ251bWVyaWMnIH0gfSxcclxuICBkaXNwbGF5OiB7XHJcbiAgICBkYXRlSW5wdXQ6ICdpbnB1dCcsXHJcbiAgICBtb250aFllYXJMYWJlbDogeyB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnc2hvcnQnIH0sXHJcbiAgICBkYXRlQTExeUxhYmVsOiB7IHllYXI6ICdudW1lcmljJywgbW9udGg6ICdsb25nJywgZGF5OiAnbnVtZXJpYycgfSxcclxuICAgIG1vbnRoWWVhckExMXlMYWJlbDogeyB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycgfVxyXG4gIH1cclxufTtcclxuXHJcbmNsYXNzIFBpY2tEYXRlQWRhcHRlciBleHRlbmRzIE5hdGl2ZURhdGVBZGFwdGVyIHtcclxuICBmb3JtYXQoZGF0ZTogRGF0ZSwgZGlzcGxheUZvcm1hdDogT2JqZWN0KTogc3RyaW5nIHtcclxuICAgIGlmIChkaXNwbGF5Rm9ybWF0ID09PSAnaW5wdXQnKSB7XHJcbiAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICdkZCBNTU1NIHl5eXknLCB0aGlzLmxvY2FsZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZGF0ZS50b0RhdGVTdHJpbmcoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLXJlc2NoZWR1bGUtYXBwb2ludG1lbnQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9yZXNjaGVkdWxlLWFwcG9pbnRtZW50LmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9yZXNjaGVkdWxlLWFwcG9pbnRtZW50LmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7IHByb3ZpZGU6IERhdGVBZGFwdGVyLCB1c2VDbGFzczogUGlja0RhdGVBZGFwdGVyIH0sXHJcbiAgICB7IHByb3ZpZGU6IE1BVF9EQVRFX0ZPUk1BVFMsIHVzZVZhbHVlOiBQSUNLX0ZPUk1BVFMgfVxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFJlc2NoZWR1bGVBcHBvaW50bWVudENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIG1pbkRhdGU6IERhdGU7XHJcbiAgc2NoZWR1bGVEYXRhOiBTY2hlZHVsZURhdGFNb2RlbCA9IHtcclxuICAgIG1vcm5pbmc6IFtdLFxyXG4gICAgYWZ0ZXJub29uOiBbXSxcclxuICAgIGV2ZW5pbmc6IFtdXHJcbiAgfTtcclxuICBzZWxlY3RlZERhdGUgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xyXG4gIHNsb3RzOiBTbG90TW9kZWxbXSA9IFtdO1xyXG4gIHNlbGVjdGVkU2xvdDogU2xvdE1vZGVsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihASW5qZWN0KE1BVF9ESUFMT0dfREFUQSkgcHVibGljIGRhdGEsXHJcbiAgICBwcml2YXRlIGRpYWxvZ1JlZjogTWF0RGlhbG9nUmVmPFJlc2NoZWR1bGVBcHBvaW50bWVudENvbXBvbmVudD4sXHJcbiAgICBwcml2YXRlIGFwcG9pbnRtZW50U2VydmljZTogQXBwb2ludG1lbnRTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSB0b2FzdHI6IFRvYXN0clNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZVxyXG4gICkge1xyXG4gICAgdGhpcy5taW5EYXRlID0gbmV3IERhdGUoKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5nZXRBcHBvaW50bWVudFNsb3RzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIENhbGxiYWNrIGZvciBkYXRlIGNoYW5nZSBldmVudFxyXG4gICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBEYXRlIGNoYW5nZWQgZXZlbnRcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICBkYXRlQ2hhbmdlZChldmVudCkge1xyXG4gICAgdGhpcy5zZWxlY3RlZFNsb3QgPSBudWxsO1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGUgPSBtb21lbnQoZXZlbnQudGFyZ2V0LnZhbHVlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xyXG4gICAgdGhpcy5nZXRBcHBvaW50bWVudFNsb3RzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIEdldCBhcHBvaW50bWVudCBzbG90cyBmb3IgYSBnaXZlbiBzcGVjaWFsaXR5LCBmcm9tIGFuZCB0byBkYXRlXHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gZnJvbURhdGUgLSBGcm9tIGRhdGVcclxuICAqIEBwYXJhbSB7c3RyaW5nfSB0b0RhdGUgLSBUbyBkYXRlXHJcbiAgKiBAcGFyYW0ge3N0cmluZ30gc3BlY2lhbGl0eSAtIFNwZWNpYWxpdHlcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICBnZXRBcHBvaW50bWVudFNsb3RzKGZyb21EYXRlID0gdGhpcy5zZWxlY3RlZERhdGUsIHRvRGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlLCBzcGVjaWFsaXR5ID0gdGhpcy5kYXRhPy5zcGVjaWFsaXR5KSB7XHJcbiAgICB0aGlzLnNjaGVkdWxlRGF0YSA9IHtcclxuICAgICAgbW9ybmluZzogW10sXHJcbiAgICAgIGFmdGVybm9vbjogW10sXHJcbiAgICAgIGV2ZW5pbmc6IFtdXHJcbiAgICB9O1xyXG4gICAgdGhpcy5hcHBvaW50bWVudFNlcnZpY2UuZ2V0QXBwb2ludG1lbnRTbG90cyhtb21lbnQoZnJvbURhdGUpLmZvcm1hdChcIkREL01NL1lZWVlcIiksIG1vbWVudCh0b0RhdGUpLmZvcm1hdChcIkREL01NL1lZWVlcIiksIHNwZWNpYWxpdHkpLnN1YnNjcmliZSgocmVzOiBBcGlSZXNwb25zZU1vZGVsKSA9PiB7XHJcbiAgICAgIHRoaXMuc2xvdHMgPSByZXMuZGF0ZXM7XHJcbiAgICAgIHRoaXMuc2xvdHMuZm9yRWFjaCgoc2xvdDogU2xvdE1vZGVsKSA9PiB7XHJcbiAgICAgICAgaWYgKG1vbWVudChzbG90LnNsb3RUaW1lLCBcIkxUXCIpLmlzQmVmb3JlKG1vbWVudChcIjEyOjAwIFBNXCIsIFwiTFRcIikpKSB7XHJcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlRGF0YS5tb3JuaW5nLnB1c2goc2xvdC5zbG90VGltZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb21lbnQoc2xvdC5zbG90VGltZSwgXCJMVFwiKS5pc0JldHdlZW4obW9tZW50KFwiMTE6MzAgQU1cIiwgXCJMVFwiKSwgbW9tZW50KFwiNTowMCBQTVwiLCBcIkxUXCIpKSkge1xyXG4gICAgICAgICAgdGhpcy5zY2hlZHVsZURhdGEuYWZ0ZXJub29uLnB1c2goc2xvdC5zbG90VGltZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc2NoZWR1bGVEYXRhLmV2ZW5pbmcucHVzaChzbG90LnNsb3RUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIFJlc2NoZWR1bGUgYXBwb2ludG1lbnRcclxuICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgKi9cclxuICByZXNjaGVkdWxlKCkge1xyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRlICYmIHRoaXMuc2VsZWN0ZWRTbG90KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoeyBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZSwgc2xvdDogdGhpcy5zZWxlY3RlZFNsb3QgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnRvYXN0ci53YXJuaW5nKHRoaXMudHJhbnNsYXRlLmluc3RhbnQoXCJQbGVhc2Ugc2VsZWN0IHNsb3QgdG8gcmVzY2hlZHVsZS5cIiksIHRoaXMudHJhbnNsYXRlLmluc3RhbnQoXCJTZWxlY3QgU2xvdFwiKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAqIENsb3NlIG1vZGFsXHJcbiAgKiBAcGFyYW0ge2Jvb2xlYW58UmVzY2hlZHVsZUFwcG9pbnRtZW50TW9kYWxSZXNwb25zZU1vZGVsfSB2YWwgLSBEaWFsb2cgcmVzdWx0XHJcbiAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICovXHJcbiAgY2xvc2UodmFsOiBib29sZWFufFJlc2NoZWR1bGVBcHBvaW50bWVudE1vZGFsUmVzcG9uc2VNb2RlbCkge1xyXG4gICAgdGhpcy5kaWFsb2dSZWYuY2xvc2UodmFsKTtcclxuICB9XHJcblxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJyZXNjaGVkdWxlLW1vZGFsXCIgZGF0YS10ZXN0LWlkPVwicmVzY2hlZHVsZU1vZGFsXCI+XHJcbiAgPGRpdiBjbGFzcz1cIm1vZGFsLXRpdGxlXCIgZGF0YS10ZXN0LWlkPVwicmVzY2hlZHVsZU1vZGFsVGl0bGVDb250YWluZXJcIj5cclxuICAgIDxoNiBjbGFzcz1cIm1iLTBcIiBkYXRhLXRlc3QtaWQ9XCJyZXNjaGVkdWxlTW9kYWxUaXRsZVwiPnt7ICdSZXNjaGVkdWxlIGFwcG9pbnRtZW50JyB8IHRyYW5zbGF0ZSB9fTwvaDY+XHJcbiAgICA8YnV0dG9uIGNsYXNzPVwibW9kYWwtY2xvc2UtYnRuXCIgKGNsaWNrKT1cImNsb3NlKGZhbHNlKVwiIGRhdGEtdGVzdC1pZD1cImJ0bkNsb3NlUmVzY2hlZHVsZU1vZGFsXCI+XHJcbiAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3N2Z3MvQ2xvc2Uuc3ZnXCIgYWx0PVwiY2xvc2UgaWNvblwiPlxyXG4gICAgPC9idXR0b24+XHJcbiAgPC9kaXY+XHJcblxyXG4gIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCIgZGF0YS10ZXN0LWlkPVwicmVzY2hlZHVsZU1vZGFsQm9keVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiIGRhdGEtdGVzdC1pZD1cInJlc2NoZWR1bGVNb2RhbENvbnRhaW5lclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwicm93XCIgZGF0YS10ZXN0LWlkPVwicmVzY2hlZHVsZU1vZGFsUm93XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMiBwLTBcIiBkYXRhLXRlc3QtaWQ9XCJyZXNjaGVkdWxlTW9kYWxDb2xcIj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VsZWN0LWRhdGUtY29uXCIgZGF0YS10ZXN0LWlkPVwiZGF0ZVNlbGVjdGlvbkNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCByb3dcIiBkYXRhLXRlc3QtaWQ9XCJkYXRlU2VsZWN0aW9uRm9ybUdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImV4cGlyeURhdGVcIiBjbGFzcz1cImNvbC1zbS0zIGNvbC1mb3JtLWxhYmVsXCIgZGF0YS10ZXN0LWlkPVwibGJsU2VsZWN0RGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAge3sgJ1NlbGVjdCBEYXRlJyB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCIgZGF0YS10ZXN0LWlkPVwiZGF0ZUlucHV0Q29sXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIiBkYXRhLXRlc3QtaWQ9XCJkYXRlSW5wdXRHcm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxyXG4gICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwic2VsZWN0ZWREYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICAoZGF0ZUNoYW5nZSk9XCJkYXRlQ2hhbmdlZCgkZXZlbnQpXCJcclxuICAgICAgICAgICAgICAgICAgICBbbWluXT1cIm1pbkRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIFttYXREYXRlcGlja2VyXT1cImRwMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eydTZWxlY3QgZGF0ZSd8dHJhbnNsYXRlfX1cIlxyXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJEYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiYmFzaWMtYWRkb24xXCJcclxuICAgICAgICAgICAgICAgICAgICByZWFkb25seVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cImV0RGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPG1hdC1kYXRlcGlja2VyICNkcDEgZGF0YS10ZXN0LWlkPVwibWF0RGF0ZXBpY2tlclwiPjwvbWF0LWRhdGVwaWNrZXI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cC1hcHBlbmRcIiBkYXRhLXRlc3QtaWQ9XCJkYXRlUGlja2VyQXBwZW5kXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC10ZXh0XCIgaWQ9XCJiYXNpYy1hZGRvbjFcIiBkYXRhLXRlc3QtaWQ9XCJkYXRlUGlja2VySWNvbldyYXBwZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxtYXQtZGF0ZXBpY2tlci10b2dnbGUgbWF0U3VmZml4IFtmb3JdPVwiZHAxXCIgZGF0YS10ZXN0LWlkPVwiZHBEYXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgbWF0RGF0ZXBpY2tlclRvZ2dsZUljb24gc3JjPVwiYXNzZXRzL3N2Z3MvY2FsZW5kYXItZGF0ZS5zdmdcIiBhbHQ9XCJjYWxlbmRhciBpY29uXCIgZGF0YS10ZXN0LWlkPVwiZHBEYXRlSWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbG90cy1jb25cIiBkYXRhLXRlc3QtaWQ9XCJzbG90c0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICA8aDYgZGF0YS10ZXN0LWlkPVwic2xvdHNUaXRsZVwiPnt7ICdTZWxlY3QgYSB0aW1lc2xvdCcgfCB0cmFuc2xhdGUgfX08L2g2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsb3Qtc2VjdGlvblwiICpuZ0lmPVwic2NoZWR1bGVEYXRhLm1vcm5pbmcubGVuZ3RoO1wiIGRhdGEtdGVzdC1pZD1cInNsb3RTZWN0aW9uTW9ybmluZ1wiPlxyXG4gICAgICAgICAgICAgIDxoNiBkYXRhLXRlc3QtaWQ9XCJzbG90TW9ybmluZ1RpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9zdmdzL3N1bnJpc2Uuc3ZnXCIgYWx0PVwibW9ybmluZyBpY29uXCIgY2xhc3M9XCJtci0yXCIgZGF0YS10ZXN0LWlkPVwic2xvdE1vcm5pbmdJY29uXCIgLz5cclxuICAgICAgICAgICAgICAgIHt7ICdNb3JuaW5nJyB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICAgIDwvaDY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsb3QtY2hpcHNcIiBkYXRhLXRlc3QtaWQ9XCJzbG90TW9ybmluZ0NoaXBzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwic2xvdC1jaGlwLWl0ZW1cIlxyXG4gICAgICAgICAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdPVwic2VsZWN0ZWRTbG90ID09IHNcIlxyXG4gICAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgcyBvZiBzY2hlZHVsZURhdGEubW9ybmluZztcIlxyXG4gICAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0ZWRTbG90ID0gc1wiXHJcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD1cInNsb3RNb3JuaW5nQ2hpcFwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIHt7c319XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xvdC1zZWN0aW9uXCIgKm5nSWY9XCJzY2hlZHVsZURhdGEuYWZ0ZXJub29uLmxlbmd0aDtcIiBkYXRhLXRlc3QtaWQ9XCJzbG90U2VjdGlvbkFmdGVybm9vblwiPlxyXG4gICAgICAgICAgICAgIDxoNiBkYXRhLXRlc3QtaWQ9XCJzbG90QWZ0ZXJub29uVGl0bGVcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiYXNzZXRzL3N2Z3Mvc3VuLnN2Z1wiIGFsdD1cImFmdGVybm9vbiBpY29uXCIgY2xhc3M9XCJtci0yXCIgZGF0YS10ZXN0LWlkPVwic2xvdEFmdGVybm9vbkljb25cIiAvPlxyXG4gICAgICAgICAgICAgICAge3sgJ0FmdGVybm9vbicgfCB0cmFuc2xhdGUgfX1cclxuICAgICAgICAgICAgICA8L2g2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbG90LWNoaXBzXCIgZGF0YS10ZXN0LWlkPVwic2xvdEFmdGVybm9vbkNoaXBzXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwic2xvdC1jaGlwLWl0ZW1cIlxyXG4gICAgICAgICAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdPVwic2VsZWN0ZWRTbG90ID09IHNcIlxyXG4gICAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgcyBvZiBzY2hlZHVsZURhdGEuYWZ0ZXJub29uO1wiXHJcbiAgICAgICAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3RlZFNsb3QgPSBzXCJcclxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwic2xvdEFmdGVybm9vbkNoaXBcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICB7e3N9fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsb3Qtc2VjdGlvblwiICpuZ0lmPVwic2NoZWR1bGVEYXRhLmV2ZW5pbmcubGVuZ3RoO1wiIGRhdGEtdGVzdC1pZD1cInNsb3RTZWN0aW9uRXZlbmluZ1wiPlxyXG4gICAgICAgICAgICAgIDxoNiBkYXRhLXRlc3QtaWQ9XCJzbG90RXZlbmluZ1RpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9zdmdzL3N1bnNldC5zdmdcIiBhbHQ9XCJldmVuaW5nIGljb25cIiBjbGFzcz1cIm1yLTJcIiBkYXRhLXRlc3QtaWQ9XCJzbG90RXZlbmluZ0ljb25cIiAvPlxyXG4gICAgICAgICAgICAgICAge3sgJ0V2ZW5pbmcnIHwgdHJhbnNsYXRlIH19XHJcbiAgICAgICAgICAgICAgPC9oNj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xvdC1jaGlwc1wiIGRhdGEtdGVzdC1pZD1cInNsb3RFdmVuaW5nQ2hpcHNcIj5cclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJzbG90LWNoaXAtaXRlbVwiXHJcbiAgICAgICAgICAgICAgICAgIFtjbGFzcy5zZWxlY3RlZF09XCJzZWxlY3RlZFNsb3QgPT0gc1wiXHJcbiAgICAgICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBzIG9mIHNjaGVkdWxlRGF0YS5ldmVuaW5nO1wiXHJcbiAgICAgICAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3RlZFNsb3QgPSBzXCJcclxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPVwic2xvdEV2ZW5pbmdDaGlwXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAge3tzfX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciBweS0yXCIgZGF0YS10ZXN0LWlkPVwicmVzY2hlZHVsZUFjdGlvbkNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY29uZmlybS1idG5cIiB0eXBlPVwiYnV0dG9uXCIgKGNsaWNrKT1cInJlc2NoZWR1bGUoKVwiIGRhdGEtdGVzdC1pZD1cImJ0blN1Ym1pdFJlc2NoZWR1bGVNb2RhbFwiPlxyXG4gICAgICAgICAgICAgIHt7ICdSZXNjaGVkdWxlJyB8IHRyYW5zbGF0ZSB9fVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcbiJdfQ==